/*! For license information please see main.4575b32a.js.LICENSE.txt */
(()=>{"use strict";var e={4:(e,t,a)=>{var s=a(853),n=a(43),r=a(950);function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function o(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(a=t.return),e=t.return}while(e)}return 3===t.tag?a:null}function c(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function d(e){if(o(e)!==e)throw Error(i(188))}function u(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=u(e)))return t;e=e.sibling}return null}var m=Object.assign,p=Symbol.for("react.element"),h=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),f=Symbol.for("react.fragment"),g=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),v=Symbol.for("react.consumer"),j=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),S=Symbol.for("react.lazy");Symbol.for("react.scope");var C=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var E=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var D=Symbol.iterator;function P(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var A=Symbol.for("react.client.reference");function T(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===A?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case f:return"Fragment";case y:return"Profiler";case g:return"StrictMode";case _:return"Suspense";case N:return"SuspenseList";case C:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case x:return"Portal";case j:return(e.displayName||"Context")+".Provider";case v:return(e._context.displayName||"Context")+".Consumer";case w:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case k:return null!==(t=e.displayName||null)?t:T(e.type)||"Memo";case S:t=e._payload,e=e._init;try{return T(e(t))}catch(a){}}return null}var L=Array.isArray,R=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,F=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,O={pending:!1,data:null,method:null,action:null},M=[],I=-1;function q(e){return{current:e}}function B(e){0>I||(e.current=M[I],M[I]=null,I--)}function z(e,t){I++,M[I]=e.current,e.current=t}var U=q(null),W=q(null),H=q(null),G=q(null);function V(e,t){switch(z(H,t),z(W,e),z(U,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?nu(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=ru(t=nu(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}B(U),z(U,e)}function $(){B(U),B(W),B(H)}function Q(e){null!==e.memoizedState&&z(G,e);var t=U.current,a=ru(t,e.type);t!==a&&(z(W,e),z(U,a))}function Y(e){W.current===e&&(B(U),B(W)),G.current===e&&(B(G),Qu._currentValue=O)}var J=Object.prototype.hasOwnProperty,Z=s.unstable_scheduleCallback,X=s.unstable_cancelCallback,K=s.unstable_shouldYield,ee=s.unstable_requestPaint,te=s.unstable_now,ae=s.unstable_getCurrentPriorityLevel,se=s.unstable_ImmediatePriority,ne=s.unstable_UserBlockingPriority,re=s.unstable_NormalPriority,ie=s.unstable_LowPriority,le=s.unstable_IdlePriority,oe=s.log,ce=s.unstable_setDisableYieldValue,de=null,ue=null;function me(e){if("function"===typeof oe&&ce(e),ue&&"function"===typeof ue.setStrictMode)try{ue.setStrictMode(de,e)}catch(t){}}var pe=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(he(e)/xe|0)|0},he=Math.log,xe=Math.LN2;var fe=256,ge=4194304;function ye(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function be(e,t,a){var s=e.pendingLanes;if(0===s)return 0;var n=0,r=e.suspendedLanes,i=e.pingedLanes;e=e.warmLanes;var l=134217727&s;return 0!==l?0!==(s=l&~r)?n=ye(s):0!==(i&=l)?n=ye(i):a||0!==(a=l&~e)&&(n=ye(a)):0!==(l=s&~r)?n=ye(l):0!==i?n=ye(i):a||0!==(a=s&~e)&&(n=ye(a)),0===n?0:0!==t&&t!==n&&0===(t&r)&&((r=n&-n)>=(a=t&-t)||32===r&&0!==(4194048&a))?t:n}function ve(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function je(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function we(){var e=fe;return 0===(4194048&(fe<<=1))&&(fe=256),e}function _e(){var e=ge;return 0===(62914560&(ge<<=1))&&(ge=4194304),e}function Ne(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function ke(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Se(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var s=31-pe(t);e.entangledLanes|=t,e.entanglements[s]=1073741824|e.entanglements[s]|4194090&a}function Ce(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var s=31-pe(a),n=1<<s;n&t|e[s]&t&&(e[s]|=t),a&=~n}}function Ee(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function De(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Pe(){var e=F.p;return 0!==e?e:void 0===(e=window.event)?32:cm(e.type)}var Ae=Math.random().toString(36).slice(2),Te="__reactFiber$"+Ae,Le="__reactProps$"+Ae,Re="__reactContainer$"+Ae,Fe="__reactEvents$"+Ae,Oe="__reactListeners$"+Ae,Me="__reactHandles$"+Ae,Ie="__reactResources$"+Ae,qe="__reactMarker$"+Ae;function Be(e){delete e[Te],delete e[Le],delete e[Fe],delete e[Oe],delete e[Me]}function ze(e){var t=e[Te];if(t)return t;for(var a=e.parentNode;a;){if(t=a[Re]||a[Te]){if(a=t.alternate,null!==t.child||null!==a&&null!==a.child)for(e=bu(e);null!==e;){if(a=e[Te])return a;e=bu(e)}return t}a=(e=a).parentNode}return null}function Ue(e){if(e=e[Te]||e[Re]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function We(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(i(33))}function He(e){var t=e[Ie];return t||(t=e[Ie]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ge(e){e[qe]=!0}var Ve=new Set,$e={};function Qe(e,t){Ye(e,t),Ye(e+"Capture",t)}function Ye(e,t){for($e[e]=t,e=0;e<t.length;e++)Ve.add(t[e])}var Je,Ze,Xe=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ke={},et={};function tt(e,t,a){if(n=t,J.call(et,n)||!J.call(Ke,n)&&(Xe.test(n)?et[n]=!0:(Ke[n]=!0,0)))if(null===a)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var s=t.toLowerCase().slice(0,5);if("data-"!==s&&"aria-"!==s)return void e.removeAttribute(t)}e.setAttribute(t,""+a)}var n}function at(e,t,a){if(null===a)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+a)}}function st(e,t,a,s){if(null===s)e.removeAttribute(a);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(a)}e.setAttributeNS(t,a,""+s)}}function nt(e){if(void 0===Je)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);Je=t&&t[1]||"",Ze=-1<a.stack.indexOf("\n    at")?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+Je+e+Ze}var rt=!1;function it(e,t){if(!e||rt)return"";rt=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(t){var a=function(){throw Error()};if(Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(a,[])}catch(n){var s=n}Reflect.construct(e,[],a)}else{try{a.call()}catch(r){s=r}e.call(a.prototype)}}else{try{throw Error()}catch(i){s=i}(a=e())&&"function"===typeof a.catch&&a.catch(function(){})}}catch(l){if(l&&s&&"string"===typeof l.stack)return[l.stack,s.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var n=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");n&&n.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var r=s.DetermineComponentFrameRoot(),i=r[0],l=r[1];if(i&&l){var o=i.split("\n"),c=l.split("\n");for(n=s=0;s<o.length&&!o[s].includes("DetermineComponentFrameRoot");)s++;for(;n<c.length&&!c[n].includes("DetermineComponentFrameRoot");)n++;if(s===o.length||n===c.length)for(s=o.length-1,n=c.length-1;1<=s&&0<=n&&o[s]!==c[n];)n--;for(;1<=s&&0<=n;s--,n--)if(o[s]!==c[n]){if(1!==s||1!==n)do{if(s--,0>--n||o[s]!==c[n]){var d="\n"+o[s].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}}while(1<=s&&0<=n);break}}}finally{rt=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?nt(a):""}function lt(e){switch(e.tag){case 26:case 27:case 5:return nt(e.type);case 16:return nt("Lazy");case 13:return nt("Suspense");case 19:return nt("SuspenseList");case 0:case 15:return it(e.type,!1);case 11:return it(e.type.render,!1);case 1:return it(e.type,!0);case 31:return nt("Activity");default:return""}}function ot(e){try{var t="";do{t+=lt(e),e=e.return}while(e);return t}catch(a){return"\nError generating stack: "+a.message+"\n"+a.stack}}function ct(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function dt(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ut(e){e._valueTracker||(e._valueTracker=function(e){var t=dt(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof a&&"function"===typeof a.get&&"function"===typeof a.set){var n=a.get,r=a.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(e){s=""+e,r.call(this,e)}}),Object.defineProperty(e,t,{enumerable:a.enumerable}),{getValue:function(){return s},setValue:function(e){s=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function mt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),s="";return e&&(s=dt(e)?e.checked?"true":"false":e.value),(e=s)!==a&&(t.setValue(e),!0)}function pt(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var ht=/[\n"\\]/g;function xt(e){return e.replace(ht,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function ft(e,t,a,s,n,r,i,l){e.name="",null!=i&&"function"!==typeof i&&"symbol"!==typeof i&&"boolean"!==typeof i?e.type=i:e.removeAttribute("type"),null!=t?"number"===i?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ct(t)):e.value!==""+ct(t)&&(e.value=""+ct(t)):"submit"!==i&&"reset"!==i||e.removeAttribute("value"),null!=t?yt(e,i,ct(t)):null!=a?yt(e,i,ct(a)):null!=s&&e.removeAttribute("value"),null==n&&null!=r&&(e.defaultChecked=!!r),null!=n&&(e.checked=n&&"function"!==typeof n&&"symbol"!==typeof n),null!=l&&"function"!==typeof l&&"symbol"!==typeof l&&"boolean"!==typeof l?e.name=""+ct(l):e.removeAttribute("name")}function gt(e,t,a,s,n,r,i,l){if(null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&"boolean"!==typeof r&&(e.type=r),null!=t||null!=a){if(!("submit"!==r&&"reset"!==r||void 0!==t&&null!==t))return;a=null!=a?""+ct(a):"",t=null!=t?""+ct(t):a,l||t===e.value||(e.value=t),e.defaultValue=t}s="function"!==typeof(s=null!=s?s:n)&&"symbol"!==typeof s&&!!s,e.checked=l?e.checked:!!s,e.defaultChecked=!!s,null!=i&&"function"!==typeof i&&"symbol"!==typeof i&&"boolean"!==typeof i&&(e.name=i)}function yt(e,t,a){"number"===t&&pt(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function bt(e,t,a,s){if(e=e.options,t){t={};for(var n=0;n<a.length;n++)t["$"+a[n]]=!0;for(a=0;a<e.length;a++)n=t.hasOwnProperty("$"+e[a].value),e[a].selected!==n&&(e[a].selected=n),n&&s&&(e[a].defaultSelected=!0)}else{for(a=""+ct(a),t=null,n=0;n<e.length;n++){if(e[n].value===a)return e[n].selected=!0,void(s&&(e[n].defaultSelected=!0));null!==t||e[n].disabled||(t=e[n])}null!==t&&(t.selected=!0)}}function vt(e,t,a){null==t||((t=""+ct(t))!==e.value&&(e.value=t),null!=a)?e.defaultValue=null!=a?""+ct(a):"":e.defaultValue!==t&&(e.defaultValue=t)}function jt(e,t,a,s){if(null==t){if(null!=s){if(null!=a)throw Error(i(92));if(L(s)){if(1<s.length)throw Error(i(93));s=s[0]}a=s}null==a&&(a=""),t=a}a=ct(t),e.defaultValue=a,(s=e.textContent)===a&&""!==s&&null!==s&&(e.value=s)}function wt(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&3===a.nodeType)return void(a.nodeValue=t)}e.textContent=t}var _t=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Nt(e,t,a){var s=0===t.indexOf("--");null==a||"boolean"===typeof a||""===a?s?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":s?e.setProperty(t,a):"number"!==typeof a||0===a||_t.has(t)?"float"===t?e.cssFloat=a:e[t]=(""+a).trim():e[t]=a+"px"}function kt(e,t,a){if(null!=t&&"object"!==typeof t)throw Error(i(62));if(e=e.style,null!=a){for(var s in a)!a.hasOwnProperty(s)||null!=t&&t.hasOwnProperty(s)||(0===s.indexOf("--")?e.setProperty(s,""):"float"===s?e.cssFloat="":e[s]="");for(var n in t)s=t[n],t.hasOwnProperty(n)&&a[n]!==s&&Nt(e,n,s)}else for(var r in t)t.hasOwnProperty(r)&&Nt(e,r,t[r])}function St(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ct=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Et=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Dt(e){return Et.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Pt=null;function At(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Tt=null,Lt=null;function Rt(e){var t=Ue(e);if(t&&(e=t.stateNode)){var a=e[Le]||null;e:switch(e=t.stateNode,t.type){case"input":if(ft(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,"radio"===a.type&&null!=t){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+xt(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var s=a[t];if(s!==e&&s.form===e.form){var n=s[Le]||null;if(!n)throw Error(i(90));ft(s,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name)}}for(t=0;t<a.length;t++)(s=a[t]).form===e.form&&mt(s)}break e;case"textarea":vt(e,a.value,a.defaultValue);break e;case"select":null!=(t=a.value)&&bt(e,!!a.multiple,t,!1)}}}var Ft=!1;function Ot(e,t,a){if(Ft)return e(t,a);Ft=!0;try{return e(t)}finally{if(Ft=!1,(null!==Tt||null!==Lt)&&(zc(),Tt&&(t=Tt,e=Lt,Lt=Tt=null,Rt(t),e)))for(t=0;t<e.length;t++)Rt(e[t])}}function Mt(e,t){var a=e.stateNode;if(null===a)return null;var s=a[Le]||null;if(null===s)return null;a=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(s=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!s;break e;default:e=!1}if(e)return null;if(a&&"function"!==typeof a)throw Error(i(231,t,typeof a));return a}var It=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),qt=!1;if(It)try{var Bt={};Object.defineProperty(Bt,"passive",{get:function(){qt=!0}}),window.addEventListener("test",Bt,Bt),window.removeEventListener("test",Bt,Bt)}catch(Lm){qt=!1}var zt=null,Ut=null,Wt=null;function Ht(){if(Wt)return Wt;var e,t,a=Ut,s=a.length,n="value"in zt?zt.value:zt.textContent,r=n.length;for(e=0;e<s&&a[e]===n[e];e++);var i=s-e;for(t=1;t<=i&&a[s-t]===n[r-t];t++);return Wt=n.slice(e,1<t?1-t:void 0)}function Gt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Vt(){return!0}function $t(){return!1}function Qt(e){function t(t,a,s,n,r){for(var i in this._reactName=t,this._targetInst=s,this.type=a,this.nativeEvent=n,this.target=r,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(n):n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?Vt:$t,this.isPropagationStopped=$t,this}return m(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Vt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Vt)},persist:function(){},isPersistent:Vt}),t}var Yt,Jt,Zt,Xt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Kt=Qt(Xt),ea=m({},Xt,{view:0,detail:0}),ta=Qt(ea),aa=m({},ea,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pa,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Zt&&(Zt&&"mousemove"===e.type?(Yt=e.screenX-Zt.screenX,Jt=e.screenY-Zt.screenY):Jt=Yt=0,Zt=e),Yt)},movementY:function(e){return"movementY"in e?e.movementY:Jt}}),sa=Qt(aa),na=Qt(m({},aa,{dataTransfer:0})),ra=Qt(m({},ea,{relatedTarget:0})),ia=Qt(m({},Xt,{animationName:0,elapsedTime:0,pseudoElement:0})),la=Qt(m({},Xt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),oa=Qt(m({},Xt,{data:0})),ca={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},da={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ua={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ma(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=ua[e])&&!!t[e]}function pa(){return ma}var ha=Qt(m({},ea,{key:function(e){if(e.key){var t=ca[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Gt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?da[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pa,charCode:function(e){return"keypress"===e.type?Gt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Gt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),xa=Qt(m({},aa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),fa=Qt(m({},ea,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pa})),ga=Qt(m({},Xt,{propertyName:0,elapsedTime:0,pseudoElement:0})),ya=Qt(m({},aa,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),ba=Qt(m({},Xt,{newState:0,oldState:0})),va=[9,13,27,32],ja=It&&"CompositionEvent"in window,wa=null;It&&"documentMode"in document&&(wa=document.documentMode);var _a=It&&"TextEvent"in window&&!wa,Na=It&&(!ja||wa&&8<wa&&11>=wa),ka=String.fromCharCode(32),Sa=!1;function Ca(e,t){switch(e){case"keyup":return-1!==va.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ea(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Da=!1;var Pa={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Aa(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Pa[e.type]:"textarea"===t}function Ta(e,t,a,s){Tt?Lt?Lt.push(s):Lt=[s]:Tt=s,0<(t=Hd(t,"onChange")).length&&(a=new Kt("onChange","change",null,a,s),e.push({event:a,listeners:t}))}var La=null,Ra=null;function Fa(e){Od(e,0)}function Oa(e){if(mt(We(e)))return e}function Ma(e,t){if("change"===e)return t}var Ia=!1;if(It){var qa;if(It){var Ba="oninput"in document;if(!Ba){var za=document.createElement("div");za.setAttribute("oninput","return;"),Ba="function"===typeof za.oninput}qa=Ba}else qa=!1;Ia=qa&&(!document.documentMode||9<document.documentMode)}function Ua(){La&&(La.detachEvent("onpropertychange",Wa),Ra=La=null)}function Wa(e){if("value"===e.propertyName&&Oa(Ra)){var t=[];Ta(t,Ra,e,At(e)),Ot(Fa,t)}}function Ha(e,t,a){"focusin"===e?(Ua(),Ra=a,(La=t).attachEvent("onpropertychange",Wa)):"focusout"===e&&Ua()}function Ga(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Oa(Ra)}function Va(e,t){if("click"===e)return Oa(t)}function $a(e,t){if("input"===e||"change"===e)return Oa(t)}var Qa="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Ya(e,t){if(Qa(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var a=Object.keys(e),s=Object.keys(t);if(a.length!==s.length)return!1;for(s=0;s<a.length;s++){var n=a[s];if(!J.call(t,n)||!Qa(e[n],t[n]))return!1}return!0}function Ja(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Za(e,t){var a,s=Ja(e);for(e=0;s;){if(3===s.nodeType){if(a=e+s.textContent.length,e<=t&&a>=t)return{node:s,offset:t-e};e=a}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Ja(s)}}function Xa(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Xa(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function Ka(e){for(var t=pt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var a="string"===typeof t.contentWindow.location.href}catch(s){a=!1}if(!a)break;t=pt((e=t.contentWindow).document)}return t}function es(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var ts=It&&"documentMode"in document&&11>=document.documentMode,as=null,ss=null,ns=null,rs=!1;function is(e,t,a){var s=a.window===a?a.document:9===a.nodeType?a:a.ownerDocument;rs||null==as||as!==pt(s)||("selectionStart"in(s=as)&&es(s)?s={start:s.selectionStart,end:s.selectionEnd}:s={anchorNode:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset},ns&&Ya(ns,s)||(ns=s,0<(s=Hd(ss,"onSelect")).length&&(t=new Kt("onSelect","select",null,t,a),e.push({event:t,listeners:s}),t.target=as)))}function ls(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var os={animationend:ls("Animation","AnimationEnd"),animationiteration:ls("Animation","AnimationIteration"),animationstart:ls("Animation","AnimationStart"),transitionrun:ls("Transition","TransitionRun"),transitionstart:ls("Transition","TransitionStart"),transitioncancel:ls("Transition","TransitionCancel"),transitionend:ls("Transition","TransitionEnd")},cs={},ds={};function us(e){if(cs[e])return cs[e];if(!os[e])return e;var t,a=os[e];for(t in a)if(a.hasOwnProperty(t)&&t in ds)return cs[e]=a[t];return e}It&&(ds=document.createElement("div").style,"AnimationEvent"in window||(delete os.animationend.animation,delete os.animationiteration.animation,delete os.animationstart.animation),"TransitionEvent"in window||delete os.transitionend.transition);var ms=us("animationend"),ps=us("animationiteration"),hs=us("animationstart"),xs=us("transitionrun"),fs=us("transitionstart"),gs=us("transitioncancel"),ys=us("transitionend"),bs=new Map,vs="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function js(e,t){bs.set(e,t),Qe(t,[e])}vs.push("scrollEnd");var ws=new WeakMap;function _s(e,t){if("object"===typeof e&&null!==e){var a=ws.get(e);return void 0!==a?a:(t={value:e,source:t,stack:ot(t)},ws.set(e,t),t)}return{value:e,source:t,stack:ot(t)}}var Ns=[],ks=0,Ss=0;function Cs(){for(var e=ks,t=Ss=ks=0;t<e;){var a=Ns[t];Ns[t++]=null;var s=Ns[t];Ns[t++]=null;var n=Ns[t];Ns[t++]=null;var r=Ns[t];if(Ns[t++]=null,null!==s&&null!==n){var i=s.pending;null===i?n.next=n:(n.next=i.next,i.next=n),s.pending=n}0!==r&&As(a,n,r)}}function Es(e,t,a,s){Ns[ks++]=e,Ns[ks++]=t,Ns[ks++]=a,Ns[ks++]=s,Ss|=s,e.lanes|=s,null!==(e=e.alternate)&&(e.lanes|=s)}function Ds(e,t,a,s){return Es(e,t,a,s),Ts(e)}function Ps(e,t){return Es(e,null,null,t),Ts(e)}function As(e,t,a){e.lanes|=a;var s=e.alternate;null!==s&&(s.lanes|=a);for(var n=!1,r=e.return;null!==r;)r.childLanes|=a,null!==(s=r.alternate)&&(s.childLanes|=a),22===r.tag&&(null===(e=r.stateNode)||1&e._visibility||(n=!0)),e=r,r=r.return;return 3===e.tag?(r=e.stateNode,n&&null!==t&&(n=31-pe(a),null===(s=(e=r.hiddenUpdates)[n])?e[n]=[t]:s.push(t),t.lane=536870912|a),r):null}function Ts(e){if(50<Tc)throw Tc=0,Lc=null,Error(i(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Ls={};function Rs(e,t,a,s){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fs(e,t,a,s){return new Rs(e,t,a,s)}function Os(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ms(e,t){var a=e.alternate;return null===a?((a=Fs(e.tag,t,e.key,e.mode)).elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=65011712&e.flags,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Is(e,t){e.flags&=65011714;var a=e.alternate;return null===a?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function qs(e,t,a,s,n,r){var l=0;if(s=e,"function"===typeof e)Os(e)&&(l=1);else if("string"===typeof e)l=function(e,t,a){if(1===a||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,a,U.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case C:return(e=Fs(31,a,t,n)).elementType=C,e.lanes=r,e;case f:return Bs(a.children,n,r,t);case g:l=8,n|=24;break;case y:return(e=Fs(12,a,t,2|n)).elementType=y,e.lanes=r,e;case _:return(e=Fs(13,a,t,n)).elementType=_,e.lanes=r,e;case N:return(e=Fs(19,a,t,n)).elementType=N,e.lanes=r,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case b:case j:l=10;break e;case v:l=9;break e;case w:l=11;break e;case k:l=14;break e;case S:l=16,s=null;break e}l=29,a=Error(i(130,null===e?"null":typeof e,"")),s=null}return(t=Fs(l,a,t,n)).elementType=e,t.type=s,t.lanes=r,t}function Bs(e,t,a,s){return(e=Fs(7,e,s,t)).lanes=a,e}function zs(e,t,a){return(e=Fs(6,e,null,t)).lanes=a,e}function Us(e,t,a){return(t=Fs(4,null!==e.children?e.children:[],e.key,t)).lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Ws=[],Hs=0,Gs=null,Vs=0,$s=[],Qs=0,Ys=null,Js=1,Zs="";function Xs(e,t){Ws[Hs++]=Vs,Ws[Hs++]=Gs,Gs=e,Vs=t}function Ks(e,t,a){$s[Qs++]=Js,$s[Qs++]=Zs,$s[Qs++]=Ys,Ys=e;var s=Js;e=Zs;var n=32-pe(s)-1;s&=~(1<<n),a+=1;var r=32-pe(t)+n;if(30<r){var i=n-n%5;r=(s&(1<<i)-1).toString(32),s>>=i,n-=i,Js=1<<32-pe(t)+n|a<<n|s,Zs=r+e}else Js=1<<r|a<<n|s,Zs=e}function en(e){null!==e.return&&(Xs(e,1),Ks(e,1,0))}function tn(e){for(;e===Gs;)Gs=Ws[--Hs],Ws[Hs]=null,Vs=Ws[--Hs],Ws[Hs]=null;for(;e===Ys;)Ys=$s[--Qs],$s[Qs]=null,Zs=$s[--Qs],$s[Qs]=null,Js=$s[--Qs],$s[Qs]=null}var an=null,sn=null,nn=!1,rn=null,ln=!1,on=Error(i(519));function cn(e){throw xn(_s(Error(i(418,"")),e)),on}function dn(e){var t=e.stateNode,a=e.type,s=e.memoizedProps;switch(t[Te]=e,t[Le]=s,a){case"dialog":Md("cancel",t),Md("close",t);break;case"iframe":case"object":case"embed":Md("load",t);break;case"video":case"audio":for(a=0;a<Rd.length;a++)Md(Rd[a],t);break;case"source":Md("error",t);break;case"img":case"image":case"link":Md("error",t),Md("load",t);break;case"details":Md("toggle",t);break;case"input":Md("invalid",t),gt(t,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0),ut(t);break;case"select":Md("invalid",t);break;case"textarea":Md("invalid",t),jt(t,s.value,s.defaultValue,s.children),ut(t)}"string"!==typeof(a=s.children)&&"number"!==typeof a&&"bigint"!==typeof a||t.textContent===""+a||!0===s.suppressHydrationWarning||Jd(t.textContent,a)?(null!=s.popover&&(Md("beforetoggle",t),Md("toggle",t)),null!=s.onScroll&&Md("scroll",t),null!=s.onScrollEnd&&Md("scrollend",t),null!=s.onClick&&(t.onclick=Zd),t=!0):t=!1,t||cn(e)}function un(e){for(an=e.return;an;)switch(an.tag){case 5:case 13:return void(ln=!1);case 27:case 3:return void(ln=!0);default:an=an.return}}function mn(e){if(e!==an)return!1;if(!nn)return un(e),nn=!0,!1;var t,a=e.tag;if((t=3!==a&&27!==a)&&((t=5===a)&&(t=!("form"!==(t=e.type)&&"button"!==t)||iu(e.type,e.memoizedProps)),t=!t),t&&sn&&cn(e),un(e),13===a){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,a=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===a){sn=gu(e.nextSibling);break e}a--}else"$"!==t&&"$!"!==t&&"$?"!==t||a++;e=e.nextSibling}sn=null}}else 27===a?(a=sn,pu(e.type)?(e=yu,yu=null,sn=e):sn=a):sn=an?gu(e.stateNode.nextSibling):null;return!0}function pn(){sn=an=null,nn=!1}function hn(){var e=rn;return null!==e&&(null===bc?bc=e:bc.push.apply(bc,e),rn=null),e}function xn(e){null===rn?rn=[e]:rn.push(e)}var fn=q(null),gn=null,yn=null;function bn(e,t,a){z(fn,t._currentValue),t._currentValue=a}function vn(e){e._currentValue=fn.current,B(fn)}function jn(e,t,a){for(;null!==e;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==s&&(s.childLanes|=t)):null!==s&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===a)break;e=e.return}}function wn(e,t,a,s){var n=e.child;for(null!==n&&(n.return=e);null!==n;){var r=n.dependencies;if(null!==r){var l=n.child;r=r.firstContext;e:for(;null!==r;){var o=r;r=n;for(var c=0;c<t.length;c++)if(o.context===t[c]){r.lanes|=a,null!==(o=r.alternate)&&(o.lanes|=a),jn(r.return,a,e),s||(l=null);break e}r=o.next}}else if(18===n.tag){if(null===(l=n.return))throw Error(i(341));l.lanes|=a,null!==(r=l.alternate)&&(r.lanes|=a),jn(l,a,e),l=null}else l=n.child;if(null!==l)l.return=n;else for(l=n;null!==l;){if(l===e){l=null;break}if(null!==(n=l.sibling)){n.return=l.return,l=n;break}l=l.return}n=l}}function _n(e,t,a,s){e=null;for(var n=t,r=!1;null!==n;){if(!r)if(0!==(524288&n.flags))r=!0;else if(0!==(262144&n.flags))break;if(10===n.tag){var l=n.alternate;if(null===l)throw Error(i(387));if(null!==(l=l.memoizedProps)){var o=n.type;Qa(n.pendingProps.value,l.value)||(null!==e?e.push(o):e=[o])}}else if(n===G.current){if(null===(l=n.alternate))throw Error(i(387));l.memoizedState.memoizedState!==n.memoizedState.memoizedState&&(null!==e?e.push(Qu):e=[Qu])}n=n.return}null!==e&&wn(t,e,a,s),t.flags|=262144}function Nn(e){for(e=e.firstContext;null!==e;){if(!Qa(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function kn(e){gn=e,yn=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Sn(e){return En(gn,e)}function Cn(e,t){return null===gn&&kn(e),En(e,t)}function En(e,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},null===yn){if(null===e)throw Error(i(308));yn=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else yn=yn.next=t;return a}var Dn="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,a){e.push(a)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Pn=s.unstable_scheduleCallback,An=s.unstable_NormalPriority,Tn={$$typeof:j,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ln(){return{controller:new Dn,data:new Map,refCount:0}}function Rn(e){e.refCount--,0===e.refCount&&Pn(An,function(){e.controller.abort()})}var Fn=null,On=0,Mn=0,In=null;function qn(){if(0===--On&&null!==Fn){null!==In&&(In.status="fulfilled");var e=Fn;Fn=null,Mn=0,In=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Bn=R.S;R.S=function(e,t){"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Fn){var a=Fn=[];On=0,Mn=Dd(),In={status:"pending",value:void 0,then:function(e){a.push(e)}}}On++,t.then(qn,qn)}(0,t),null!==Bn&&Bn(e,t)};var zn=q(null);function Un(){var e=zn.current;return null!==e?e:sc.pooledCache}function Wn(e,t){z(zn,null===t?zn.current:t.pool)}function Hn(){var e=Un();return null===e?null:{parent:Tn._currentValue,pool:e}}var Gn=Error(i(460)),Vn=Error(i(474)),$n=Error(i(542)),Qn={then:function(){}};function Yn(e){return"fulfilled"===(e=e.status)||"rejected"===e}function Jn(){}function Zn(e,t,a){switch(void 0===(a=e[a])?e.push(t):a!==t&&(t.then(Jn,Jn),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw er(e=t.reason),e;default:if("string"===typeof t.status)t.then(Jn,Jn);else{if(null!==(e=sc)&&100<e.shellSuspendCounter)throw Error(i(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var a=t;a.status="fulfilled",a.value=e}},function(e){if("pending"===t.status){var a=t;a.status="rejected",a.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw er(e=t.reason),e}throw Xn=t,Gn}}var Xn=null;function Kn(){if(null===Xn)throw Error(i(459));var e=Xn;return Xn=null,e}function er(e){if(e===Gn||e===$n)throw Error(i(483))}var tr=!1;function ar(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function sr(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function nr(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function rr(e,t,a){var s=e.updateQueue;if(null===s)return null;if(s=s.shared,0!==(2&ac)){var n=s.pending;return null===n?t.next=t:(t.next=n.next,n.next=t),s.pending=t,t=Ts(e),As(e,null,a),t}return Es(e,s,t,a),Ts(e)}function ir(e,t,a){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&a))){var s=t.lanes;a|=s&=e.pendingLanes,t.lanes=a,Ce(e,a)}}function lr(e,t){var a=e.updateQueue,s=e.alternate;if(null!==s&&a===(s=s.updateQueue)){var n=null,r=null;if(null!==(a=a.firstBaseUpdate)){do{var i={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};null===r?n=r=i:r=r.next=i,a=a.next}while(null!==a);null===r?n=r=t:r=r.next=t}else n=r=t;return a={baseState:s.baseState,firstBaseUpdate:n,lastBaseUpdate:r,shared:s.shared,callbacks:s.callbacks},void(e.updateQueue=a)}null===(e=a.lastBaseUpdate)?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}var or=!1;function cr(){if(or){if(null!==In)throw In}}function dr(e,t,a,s){or=!1;var n=e.updateQueue;tr=!1;var r=n.firstBaseUpdate,i=n.lastBaseUpdate,l=n.shared.pending;if(null!==l){n.shared.pending=null;var o=l,c=o.next;o.next=null,null===i?r=c:i.next=c,i=o;var d=e.alternate;null!==d&&((l=(d=d.updateQueue).lastBaseUpdate)!==i&&(null===l?d.firstBaseUpdate=c:l.next=c,d.lastBaseUpdate=o))}if(null!==r){var u=n.baseState;for(i=0,d=c=o=null,l=r;;){var p=-536870913&l.lane,h=p!==l.lane;if(h?(rc&p)===p:(s&p)===p){0!==p&&p===Mn&&(or=!0),null!==d&&(d=d.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});e:{var x=e,f=l;p=t;var g=a;switch(f.tag){case 1:if("function"===typeof(x=f.payload)){u=x.call(g,u,p);break e}u=x;break e;case 3:x.flags=-65537&x.flags|128;case 0:if(null===(p="function"===typeof(x=f.payload)?x.call(g,u,p):x)||void 0===p)break e;u=m({},u,p);break e;case 2:tr=!0}}null!==(p=l.callback)&&(e.flags|=64,h&&(e.flags|=8192),null===(h=n.callbacks)?n.callbacks=[p]:h.push(p))}else h={lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},null===d?(c=d=h,o=u):d=d.next=h,i|=p;if(null===(l=l.next)){if(null===(l=n.shared.pending))break;l=(h=l).next,h.next=null,n.lastBaseUpdate=h,n.shared.pending=null}}null===d&&(o=u),n.baseState=o,n.firstBaseUpdate=c,n.lastBaseUpdate=d,null===r&&(n.shared.lanes=0),pc|=i,e.lanes=i,e.memoizedState=u}}function ur(e,t){if("function"!==typeof e)throw Error(i(191,e));e.call(t)}function mr(e,t){var a=e.callbacks;if(null!==a)for(e.callbacks=null,e=0;e<a.length;e++)ur(a[e],t)}var pr=q(null),hr=q(0);function xr(e,t){z(hr,e=uc),z(pr,t),uc=e|t.baseLanes}function fr(){z(hr,uc),z(pr,pr.current)}function gr(){uc=hr.current,B(pr),B(hr)}var yr=0,br=null,vr=null,jr=null,wr=!1,_r=!1,Nr=!1,kr=0,Sr=0,Cr=null,Er=0;function Dr(){throw Error(i(321))}function Pr(e,t){if(null===t)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!Qa(e[a],t[a]))return!1;return!0}function Ar(e,t,a,s,n,r){return yr=r,br=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,R.H=null===e||null===e.memoizedState?Gi:Vi,Nr=!1,r=a(s,n),Nr=!1,_r&&(r=Lr(t,a,s,n)),Tr(e),r}function Tr(e){R.H=Hi;var t=null!==vr&&null!==vr.next;if(yr=0,jr=vr=br=null,wr=!1,Sr=0,Cr=null,t)throw Error(i(300));null===e||Sl||null!==(e=e.dependencies)&&Nn(e)&&(Sl=!0)}function Lr(e,t,a,s){br=e;var n=0;do{if(_r&&(Cr=null),Sr=0,_r=!1,25<=n)throw Error(i(301));if(n+=1,jr=vr=null,null!=e.updateQueue){var r=e.updateQueue;r.lastEffect=null,r.events=null,r.stores=null,null!=r.memoCache&&(r.memoCache.index=0)}R.H=$i,r=t(a,s)}while(_r);return r}function Rr(){var e=R.H,t=e.useState()[0];return t="function"===typeof t.then?Br(t):t,e=e.useState()[0],(null!==vr?vr.memoizedState:null)!==e&&(br.flags|=1024),t}function Fr(){var e=0!==kr;return kr=0,e}function Or(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function Mr(e){if(wr){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}wr=!1}yr=0,jr=vr=br=null,_r=!1,Sr=kr=0,Cr=null}function Ir(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===jr?br.memoizedState=jr=e:jr=jr.next=e,jr}function qr(){if(null===vr){var e=br.alternate;e=null!==e?e.memoizedState:null}else e=vr.next;var t=null===jr?br.memoizedState:jr.next;if(null!==t)jr=t,vr=e;else{if(null===e){if(null===br.alternate)throw Error(i(467));throw Error(i(310))}e={memoizedState:(vr=e).memoizedState,baseState:vr.baseState,baseQueue:vr.baseQueue,queue:vr.queue,next:null},null===jr?br.memoizedState=jr=e:jr=jr.next=e}return jr}function Br(e){var t=Sr;return Sr+=1,null===Cr&&(Cr=[]),e=Zn(Cr,e,t),t=br,null===(null===jr?t.memoizedState:jr.next)&&(t=t.alternate,R.H=null===t||null===t.memoizedState?Gi:Vi),e}function zr(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return Br(e);if(e.$$typeof===j)return Sn(e)}throw Error(i(438,String(e)))}function Ur(e){var t=null,a=br.updateQueue;if(null!==a&&(t=a.memoCache),null==t){var s=br.alternate;null!==s&&(null!==(s=s.updateQueue)&&(null!=(s=s.memoCache)&&(t={data:s.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===a&&(a={lastEffect:null,events:null,stores:null,memoCache:null},br.updateQueue=a),a.memoCache=t,void 0===(a=t.data[t.index]))for(a=t.data[t.index]=Array(e),s=0;s<e;s++)a[s]=E;return t.index++,a}function Wr(e,t){return"function"===typeof t?t(e):t}function Hr(e){return Gr(qr(),vr,e)}function Gr(e,t,a){var s=e.queue;if(null===s)throw Error(i(311));s.lastRenderedReducer=a;var n=e.baseQueue,r=s.pending;if(null!==r){if(null!==n){var l=n.next;n.next=r.next,r.next=l}t.baseQueue=n=r,s.pending=null}if(r=e.baseState,null===n)e.memoizedState=r;else{var o=l=null,c=null,d=t=n.next,u=!1;do{var m=-536870913&d.lane;if(m!==d.lane?(rc&m)===m:(yr&m)===m){var p=d.revertLane;if(0===p)null!==c&&(c=c.next={lane:0,revertLane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),m===Mn&&(u=!0);else{if((yr&p)===p){d=d.next,p===Mn&&(u=!0);continue}m={lane:0,revertLane:d.revertLane,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},null===c?(o=c=m,l=r):c=c.next=m,br.lanes|=p,pc|=p}m=d.action,Nr&&a(r,m),r=d.hasEagerState?d.eagerState:a(r,m)}else p={lane:m,revertLane:d.revertLane,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},null===c?(o=c=p,l=r):c=c.next=p,br.lanes|=m,pc|=m;d=d.next}while(null!==d&&d!==t);if(null===c?l=r:c.next=o,!Qa(r,e.memoizedState)&&(Sl=!0,u&&null!==(a=In)))throw a;e.memoizedState=r,e.baseState=l,e.baseQueue=c,s.lastRenderedState=r}return null===n&&(s.lanes=0),[e.memoizedState,s.dispatch]}function Vr(e){var t=qr(),a=t.queue;if(null===a)throw Error(i(311));a.lastRenderedReducer=e;var s=a.dispatch,n=a.pending,r=t.memoizedState;if(null!==n){a.pending=null;var l=n=n.next;do{r=e(r,l.action),l=l.next}while(l!==n);Qa(r,t.memoizedState)||(Sl=!0),t.memoizedState=r,null===t.baseQueue&&(t.baseState=r),a.lastRenderedState=r}return[r,s]}function $r(e,t,a){var s=br,n=qr(),r=nn;if(r){if(void 0===a)throw Error(i(407));a=a()}else a=t();var l=!Qa((vr||n).memoizedState,a);if(l&&(n.memoizedState=a,Sl=!0),n=n.queue,fi(2048,8,Jr.bind(null,s,n,e),[e]),n.getSnapshot!==t||l||null!==jr&&1&jr.memoizedState.tag){if(s.flags|=2048,pi(9,{destroy:void 0,resource:void 0},Yr.bind(null,s,n,a,t),null),null===sc)throw Error(i(349));r||0!==(124&yr)||Qr(s,t,a)}return a}function Qr(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},null===(t=br.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},br.updateQueue=t,t.stores=[e]):null===(a=t.stores)?t.stores=[e]:a.push(e)}function Yr(e,t,a,s){t.value=a,t.getSnapshot=s,Zr(t)&&Xr(e)}function Jr(e,t,a){return a(function(){Zr(t)&&Xr(e)})}function Zr(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!Qa(e,a)}catch(s){return!0}}function Xr(e){var t=Ps(e,2);null!==t&&Oc(t,e,2)}function Kr(e){var t=Ir();if("function"===typeof e){var a=e;if(e=a(),Nr){me(!0);try{a()}finally{me(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wr,lastRenderedState:e},t}function ei(e,t,a,s){return e.baseState=a,Gr(e,vr,"function"===typeof s?s:Wr)}function ti(e,t,a,s,n){if(zi(e))throw Error(i(485));if(null!==(e=t.action)){var r={payload:n,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){r.listeners.push(e)}};null!==R.T?a(!0):r.isTransition=!1,s(r),null===(a=t.pending)?(r.next=t.pending=r,ai(t,r)):(r.next=a.next,t.pending=a.next=r)}}function ai(e,t){var a=t.action,s=t.payload,n=e.state;if(t.isTransition){var r=R.T,i={};R.T=i;try{var l=a(n,s),o=R.S;null!==o&&o(i,l),si(e,t,l)}catch(c){ri(e,t,c)}finally{R.T=r}}else try{si(e,t,r=a(n,s))}catch(d){ri(e,t,d)}}function si(e,t,a){null!==a&&"object"===typeof a&&"function"===typeof a.then?a.then(function(a){ni(e,t,a)},function(a){return ri(e,t,a)}):ni(e,t,a)}function ni(e,t,a){t.status="fulfilled",t.value=a,ii(t),e.state=a,null!==(t=e.pending)&&((a=t.next)===t?e.pending=null:(a=a.next,t.next=a,ai(e,a)))}function ri(e,t,a){var s=e.pending;if(e.pending=null,null!==s){s=s.next;do{t.status="rejected",t.reason=a,ii(t),t=t.next}while(t!==s)}e.action=null}function ii(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function li(e,t){return t}function oi(e,t){if(nn){var a=sc.formState;if(null!==a){e:{var s=br;if(nn){if(sn){t:{for(var n=sn,r=ln;8!==n.nodeType;){if(!r){n=null;break t}if(null===(n=gu(n.nextSibling))){n=null;break t}}n="F!"===(r=n.data)||"F"===r?n:null}if(n){sn=gu(n.nextSibling),s="F!"===n.data;break e}}cn(s)}s=!1}s&&(t=a[0])}}return(a=Ir()).memoizedState=a.baseState=t,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:li,lastRenderedState:t},a.queue=s,a=Ii.bind(null,br,s),s.dispatch=a,s=Kr(!1),r=Bi.bind(null,br,!1,s.queue),n={state:t,dispatch:null,action:e,pending:null},(s=Ir()).queue=n,a=ti.bind(null,br,n,r,a),n.dispatch=a,s.memoizedState=e,[t,a,!1]}function ci(e){return di(qr(),vr,e)}function di(e,t,a){if(t=Gr(e,t,li)[0],e=Hr(Wr)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var s=Br(t)}catch(i){if(i===Gn)throw $n;throw i}else s=t;var n=(t=qr()).queue,r=n.dispatch;return a!==t.memoizedState&&(br.flags|=2048,pi(9,{destroy:void 0,resource:void 0},ui.bind(null,n,a),null)),[s,r,e]}function ui(e,t){e.action=t}function mi(e){var t=qr(),a=vr;if(null!==a)return di(t,a,e);qr(),t=t.memoizedState;var s=(a=qr()).queue.dispatch;return a.memoizedState=e,[t,s,!1]}function pi(e,t,a,s){return e={tag:e,create:a,deps:s,inst:t,next:null},null===(t=br.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},br.updateQueue=t),null===(a=t.lastEffect)?t.lastEffect=e.next=e:(s=a.next,a.next=e,e.next=s,t.lastEffect=e),e}function hi(){return qr().memoizedState}function xi(e,t,a,s){var n=Ir();s=void 0===s?null:s,br.flags|=e,n.memoizedState=pi(1|t,{destroy:void 0,resource:void 0},a,s)}function fi(e,t,a,s){var n=qr();s=void 0===s?null:s;var r=n.memoizedState.inst;null!==vr&&null!==s&&Pr(s,vr.memoizedState.deps)?n.memoizedState=pi(t,r,a,s):(br.flags|=e,n.memoizedState=pi(1|t,r,a,s))}function gi(e,t){xi(8390656,8,e,t)}function yi(e,t){fi(2048,8,e,t)}function bi(e,t){return fi(4,2,e,t)}function vi(e,t){return fi(4,4,e,t)}function ji(e,t){if("function"===typeof t){e=e();var a=t(e);return function(){"function"===typeof a?a():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function wi(e,t,a){a=null!==a&&void 0!==a?a.concat([e]):null,fi(4,4,ji.bind(null,t,e),a)}function _i(){}function Ni(e,t){var a=qr();t=void 0===t?null:t;var s=a.memoizedState;return null!==t&&Pr(t,s[1])?s[0]:(a.memoizedState=[e,t],e)}function ki(e,t){var a=qr();t=void 0===t?null:t;var s=a.memoizedState;if(null!==t&&Pr(t,s[1]))return s[0];if(s=e(),Nr){me(!0);try{e()}finally{me(!1)}}return a.memoizedState=[s,t],s}function Si(e,t,a){return void 0===a||0!==(1073741824&yr)?e.memoizedState=t:(e.memoizedState=a,e=Fc(),br.lanes|=e,pc|=e,a)}function Ci(e,t,a,s){return Qa(a,t)?a:null!==pr.current?(e=Si(e,a,s),Qa(e,t)||(Sl=!0),e):0===(42&yr)?(Sl=!0,e.memoizedState=a):(e=Fc(),br.lanes|=e,pc|=e,t)}function Ei(e,t,a,s,n){var r=F.p;F.p=0!==r&&8>r?r:8;var i=R.T,l={};R.T=l,Bi(e,!1,t,a);try{var o=n(),c=R.S;if(null!==c&&c(l,o),null!==o&&"object"===typeof o&&"function"===typeof o.then){var d=function(e,t){var a=[],s={status:"pending",value:null,reason:null,then:function(e){a.push(e)}};return e.then(function(){s.status="fulfilled",s.value=t;for(var e=0;e<a.length;e++)(0,a[e])(t)},function(e){for(s.status="rejected",s.reason=e,e=0;e<a.length;e++)(0,a[e])(void 0)}),s}(o,s);qi(e,t,d,Rc())}else qi(e,t,s,Rc())}catch(u){qi(e,t,{then:function(){},status:"rejected",reason:u},Rc())}finally{F.p=r,R.T=i}}function Di(){}function Pi(e,t,a,s){if(5!==e.tag)throw Error(i(476));var n=Ai(e).queue;Ei(e,n,t,O,null===a?Di:function(){return Ti(e),a(s)})}function Ai(e){var t=e.memoizedState;if(null!==t)return t;var a={};return(t={memoizedState:O,baseState:O,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wr,lastRenderedState:O},next:null}).next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wr,lastRenderedState:a},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function Ti(e){qi(e,Ai(e).next.queue,{},Rc())}function Li(){return Sn(Qu)}function Ri(){return qr().memoizedState}function Fi(){return qr().memoizedState}function Oi(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var a=Rc(),s=rr(t,e=nr(a),a);return null!==s&&(Oc(s,t,a),ir(s,t,a)),t={cache:Ln()},void(e.payload=t)}t=t.return}}function Mi(e,t,a){var s=Rc();a={lane:s,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},zi(e)?Ui(t,a):null!==(a=Ds(e,t,a,s))&&(Oc(a,e,s),Wi(a,t,s))}function Ii(e,t,a){qi(e,t,a,Rc())}function qi(e,t,a,s){var n={lane:s,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(zi(e))Ui(t,n);else{var r=e.alternate;if(0===e.lanes&&(null===r||0===r.lanes)&&null!==(r=t.lastRenderedReducer))try{var i=t.lastRenderedState,l=r(i,a);if(n.hasEagerState=!0,n.eagerState=l,Qa(l,i))return Es(e,t,n,0),null===sc&&Cs(),!1}catch(o){}if(null!==(a=Ds(e,t,n,s)))return Oc(a,e,s),Wi(a,t,s),!0}return!1}function Bi(e,t,a,s){if(s={lane:2,revertLane:Dd(),action:s,hasEagerState:!1,eagerState:null,next:null},zi(e)){if(t)throw Error(i(479))}else null!==(t=Ds(e,a,s,2))&&Oc(t,e,2)}function zi(e){var t=e.alternate;return e===br||null!==t&&t===br}function Ui(e,t){_r=wr=!0;var a=e.pending;null===a?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function Wi(e,t,a){if(0!==(4194048&a)){var s=t.lanes;a|=s&=e.pendingLanes,t.lanes=a,Ce(e,a)}}var Hi={readContext:Sn,use:zr,useCallback:Dr,useContext:Dr,useEffect:Dr,useImperativeHandle:Dr,useLayoutEffect:Dr,useInsertionEffect:Dr,useMemo:Dr,useReducer:Dr,useRef:Dr,useState:Dr,useDebugValue:Dr,useDeferredValue:Dr,useTransition:Dr,useSyncExternalStore:Dr,useId:Dr,useHostTransitionStatus:Dr,useFormState:Dr,useActionState:Dr,useOptimistic:Dr,useMemoCache:Dr,useCacheRefresh:Dr},Gi={readContext:Sn,use:zr,useCallback:function(e,t){return Ir().memoizedState=[e,void 0===t?null:t],e},useContext:Sn,useEffect:gi,useImperativeHandle:function(e,t,a){a=null!==a&&void 0!==a?a.concat([e]):null,xi(4194308,4,ji.bind(null,t,e),a)},useLayoutEffect:function(e,t){return xi(4194308,4,e,t)},useInsertionEffect:function(e,t){xi(4,2,e,t)},useMemo:function(e,t){var a=Ir();t=void 0===t?null:t;var s=e();if(Nr){me(!0);try{e()}finally{me(!1)}}return a.memoizedState=[s,t],s},useReducer:function(e,t,a){var s=Ir();if(void 0!==a){var n=a(t);if(Nr){me(!0);try{a(t)}finally{me(!1)}}}else n=t;return s.memoizedState=s.baseState=n,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},s.queue=e,e=e.dispatch=Mi.bind(null,br,e),[s.memoizedState,e]},useRef:function(e){return e={current:e},Ir().memoizedState=e},useState:function(e){var t=(e=Kr(e)).queue,a=Ii.bind(null,br,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:_i,useDeferredValue:function(e,t){return Si(Ir(),e,t)},useTransition:function(){var e=Kr(!1);return e=Ei.bind(null,br,e.queue,!0,!1),Ir().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var s=br,n=Ir();if(nn){if(void 0===a)throw Error(i(407));a=a()}else{if(a=t(),null===sc)throw Error(i(349));0!==(124&rc)||Qr(s,t,a)}n.memoizedState=a;var r={value:a,getSnapshot:t};return n.queue=r,gi(Jr.bind(null,s,r,e),[e]),s.flags|=2048,pi(9,{destroy:void 0,resource:void 0},Yr.bind(null,s,r,a,t),null),a},useId:function(){var e=Ir(),t=sc.identifierPrefix;if(nn){var a=Zs;t="\xab"+t+"R"+(a=(Js&~(1<<32-pe(Js)-1)).toString(32)+a),0<(a=kr++)&&(t+="H"+a.toString(32)),t+="\xbb"}else t="\xab"+t+"r"+(a=Er++).toString(32)+"\xbb";return e.memoizedState=t},useHostTransitionStatus:Li,useFormState:oi,useActionState:oi,useOptimistic:function(e){var t=Ir();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=Bi.bind(null,br,!0,a),a.dispatch=t,[e,t]},useMemoCache:Ur,useCacheRefresh:function(){return Ir().memoizedState=Oi.bind(null,br)}},Vi={readContext:Sn,use:zr,useCallback:Ni,useContext:Sn,useEffect:yi,useImperativeHandle:wi,useInsertionEffect:bi,useLayoutEffect:vi,useMemo:ki,useReducer:Hr,useRef:hi,useState:function(){return Hr(Wr)},useDebugValue:_i,useDeferredValue:function(e,t){return Ci(qr(),vr.memoizedState,e,t)},useTransition:function(){var e=Hr(Wr)[0],t=qr().memoizedState;return["boolean"===typeof e?e:Br(e),t]},useSyncExternalStore:$r,useId:Ri,useHostTransitionStatus:Li,useFormState:ci,useActionState:ci,useOptimistic:function(e,t){return ei(qr(),0,e,t)},useMemoCache:Ur,useCacheRefresh:Fi},$i={readContext:Sn,use:zr,useCallback:Ni,useContext:Sn,useEffect:yi,useImperativeHandle:wi,useInsertionEffect:bi,useLayoutEffect:vi,useMemo:ki,useReducer:Vr,useRef:hi,useState:function(){return Vr(Wr)},useDebugValue:_i,useDeferredValue:function(e,t){var a=qr();return null===vr?Si(a,e,t):Ci(a,vr.memoizedState,e,t)},useTransition:function(){var e=Vr(Wr)[0],t=qr().memoizedState;return["boolean"===typeof e?e:Br(e),t]},useSyncExternalStore:$r,useId:Ri,useHostTransitionStatus:Li,useFormState:mi,useActionState:mi,useOptimistic:function(e,t){var a=qr();return null!==vr?ei(a,0,e,t):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:Ur,useCacheRefresh:Fi},Qi=null,Yi=0;function Ji(e){var t=Yi;return Yi+=1,null===Qi&&(Qi=[]),Zn(Qi,e,t)}function Zi(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function Xi(e,t){if(t.$$typeof===p)throw Error(i(525));throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ki(e){return(0,e._init)(e._payload)}function el(e){function t(t,a){if(e){var s=t.deletions;null===s?(t.deletions=[a],t.flags|=16):s.push(a)}}function a(a,s){if(!e)return null;for(;null!==s;)t(a,s),s=s.sibling;return null}function s(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function n(e,t){return(e=Ms(e,t)).index=0,e.sibling=null,e}function r(t,a,s){return t.index=s,e?null!==(s=t.alternate)?(s=s.index)<a?(t.flags|=67108866,a):s:(t.flags|=67108866,a):(t.flags|=1048576,a)}function l(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function o(e,t,a,s){return null===t||6!==t.tag?((t=zs(a,e.mode,s)).return=e,t):((t=n(t,a)).return=e,t)}function c(e,t,a,s){var r=a.type;return r===f?u(e,t,a.props.children,s,a.key):null!==t&&(t.elementType===r||"object"===typeof r&&null!==r&&r.$$typeof===S&&Ki(r)===t.type)?(Zi(t=n(t,a.props),a),t.return=e,t):(Zi(t=qs(a.type,a.key,a.props,null,e.mode,s),a),t.return=e,t)}function d(e,t,a,s){return null===t||4!==t.tag||t.stateNode.containerInfo!==a.containerInfo||t.stateNode.implementation!==a.implementation?((t=Us(a,e.mode,s)).return=e,t):((t=n(t,a.children||[])).return=e,t)}function u(e,t,a,s,r){return null===t||7!==t.tag?((t=Bs(a,e.mode,s,r)).return=e,t):((t=n(t,a)).return=e,t)}function m(e,t,a){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=zs(""+t,e.mode,a)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case h:return Zi(a=qs(t.type,t.key,t.props,null,e.mode,a),t),a.return=e,a;case x:return(t=Us(t,e.mode,a)).return=e,t;case S:return m(e,t=(0,t._init)(t._payload),a)}if(L(t)||P(t))return(t=Bs(t,e.mode,a,null)).return=e,t;if("function"===typeof t.then)return m(e,Ji(t),a);if(t.$$typeof===j)return m(e,Cn(e,t),a);Xi(e,t)}return null}function p(e,t,a,s){var n=null!==t?t.key:null;if("string"===typeof a&&""!==a||"number"===typeof a||"bigint"===typeof a)return null!==n?null:o(e,t,""+a,s);if("object"===typeof a&&null!==a){switch(a.$$typeof){case h:return a.key===n?c(e,t,a,s):null;case x:return a.key===n?d(e,t,a,s):null;case S:return p(e,t,a=(n=a._init)(a._payload),s)}if(L(a)||P(a))return null!==n?null:u(e,t,a,s,null);if("function"===typeof a.then)return p(e,t,Ji(a),s);if(a.$$typeof===j)return p(e,t,Cn(e,a),s);Xi(e,a)}return null}function g(e,t,a,s,n){if("string"===typeof s&&""!==s||"number"===typeof s||"bigint"===typeof s)return o(t,e=e.get(a)||null,""+s,n);if("object"===typeof s&&null!==s){switch(s.$$typeof){case h:return c(t,e=e.get(null===s.key?a:s.key)||null,s,n);case x:return d(t,e=e.get(null===s.key?a:s.key)||null,s,n);case S:return g(e,t,a,s=(0,s._init)(s._payload),n)}if(L(s)||P(s))return u(t,e=e.get(a)||null,s,n,null);if("function"===typeof s.then)return g(e,t,a,Ji(s),n);if(s.$$typeof===j)return g(e,t,a,Cn(t,s),n);Xi(t,s)}return null}function y(o,c,d,u){if("object"===typeof d&&null!==d&&d.type===f&&null===d.key&&(d=d.props.children),"object"===typeof d&&null!==d){switch(d.$$typeof){case h:e:{for(var b=d.key;null!==c;){if(c.key===b){if((b=d.type)===f){if(7===c.tag){a(o,c.sibling),(u=n(c,d.props.children)).return=o,o=u;break e}}else if(c.elementType===b||"object"===typeof b&&null!==b&&b.$$typeof===S&&Ki(b)===c.type){a(o,c.sibling),Zi(u=n(c,d.props),d),u.return=o,o=u;break e}a(o,c);break}t(o,c),c=c.sibling}d.type===f?((u=Bs(d.props.children,o.mode,u,d.key)).return=o,o=u):(Zi(u=qs(d.type,d.key,d.props,null,o.mode,u),d),u.return=o,o=u)}return l(o);case x:e:{for(b=d.key;null!==c;){if(c.key===b){if(4===c.tag&&c.stateNode.containerInfo===d.containerInfo&&c.stateNode.implementation===d.implementation){a(o,c.sibling),(u=n(c,d.children||[])).return=o,o=u;break e}a(o,c);break}t(o,c),c=c.sibling}(u=Us(d,o.mode,u)).return=o,o=u}return l(o);case S:return y(o,c,d=(b=d._init)(d._payload),u)}if(L(d))return function(n,i,l,o){for(var c=null,d=null,u=i,h=i=0,x=null;null!==u&&h<l.length;h++){u.index>h?(x=u,u=null):x=u.sibling;var f=p(n,u,l[h],o);if(null===f){null===u&&(u=x);break}e&&u&&null===f.alternate&&t(n,u),i=r(f,i,h),null===d?c=f:d.sibling=f,d=f,u=x}if(h===l.length)return a(n,u),nn&&Xs(n,h),c;if(null===u){for(;h<l.length;h++)null!==(u=m(n,l[h],o))&&(i=r(u,i,h),null===d?c=u:d.sibling=u,d=u);return nn&&Xs(n,h),c}for(u=s(u);h<l.length;h++)null!==(x=g(u,n,h,l[h],o))&&(e&&null!==x.alternate&&u.delete(null===x.key?h:x.key),i=r(x,i,h),null===d?c=x:d.sibling=x,d=x);return e&&u.forEach(function(e){return t(n,e)}),nn&&Xs(n,h),c}(o,c,d,u);if(P(d)){if("function"!==typeof(b=P(d)))throw Error(i(150));return function(n,l,o,c){if(null==o)throw Error(i(151));for(var d=null,u=null,h=l,x=l=0,f=null,y=o.next();null!==h&&!y.done;x++,y=o.next()){h.index>x?(f=h,h=null):f=h.sibling;var b=p(n,h,y.value,c);if(null===b){null===h&&(h=f);break}e&&h&&null===b.alternate&&t(n,h),l=r(b,l,x),null===u?d=b:u.sibling=b,u=b,h=f}if(y.done)return a(n,h),nn&&Xs(n,x),d;if(null===h){for(;!y.done;x++,y=o.next())null!==(y=m(n,y.value,c))&&(l=r(y,l,x),null===u?d=y:u.sibling=y,u=y);return nn&&Xs(n,x),d}for(h=s(h);!y.done;x++,y=o.next())null!==(y=g(h,n,x,y.value,c))&&(e&&null!==y.alternate&&h.delete(null===y.key?x:y.key),l=r(y,l,x),null===u?d=y:u.sibling=y,u=y);return e&&h.forEach(function(e){return t(n,e)}),nn&&Xs(n,x),d}(o,c,d=b.call(d),u)}if("function"===typeof d.then)return y(o,c,Ji(d),u);if(d.$$typeof===j)return y(o,c,Cn(o,d),u);Xi(o,d)}return"string"===typeof d&&""!==d||"number"===typeof d||"bigint"===typeof d?(d=""+d,null!==c&&6===c.tag?(a(o,c.sibling),(u=n(c,d)).return=o,o=u):(a(o,c),(u=zs(d,o.mode,u)).return=o,o=u),l(o)):a(o,c)}return function(e,t,a,s){try{Yi=0;var n=y(e,t,a,s);return Qi=null,n}catch(i){if(i===Gn||i===$n)throw i;var r=Fs(29,i,null,e.mode);return r.lanes=s,r.return=e,r}}}var tl=el(!0),al=el(!1),sl=q(null),nl=null;function rl(e){var t=e.alternate;z(cl,1&cl.current),z(sl,e),null===nl&&(null===t||null!==pr.current||null!==t.memoizedState)&&(nl=e)}function il(e){if(22===e.tag){if(z(cl,cl.current),z(sl,e),null===nl){var t=e.alternate;null!==t&&null!==t.memoizedState&&(nl=e)}}else ll()}function ll(){z(cl,cl.current),z(sl,sl.current)}function ol(e){B(sl),nl===e&&(nl=null),B(cl)}var cl=q(0);function dl(e){for(var t=e;null!==t;){if(13===t.tag){var a=t.memoizedState;if(null!==a&&(null===(a=a.dehydrated)||"$?"===a.data||fu(a)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function ul(e,t,a,s){a=null===(a=a(s,t=e.memoizedState))||void 0===a?t:m({},t,a),e.memoizedState=a,0===e.lanes&&(e.updateQueue.baseState=a)}var ml={enqueueSetState:function(e,t,a){e=e._reactInternals;var s=Rc(),n=nr(s);n.payload=t,void 0!==a&&null!==a&&(n.callback=a),null!==(t=rr(e,n,s))&&(Oc(t,e,s),ir(t,e,s))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var s=Rc(),n=nr(s);n.tag=1,n.payload=t,void 0!==a&&null!==a&&(n.callback=a),null!==(t=rr(e,n,s))&&(Oc(t,e,s),ir(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=Rc(),s=nr(a);s.tag=2,void 0!==t&&null!==t&&(s.callback=t),null!==(t=rr(e,s,a))&&(Oc(t,e,a),ir(t,e,a))}};function pl(e,t,a,s,n,r,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(s,r,i):!t.prototype||!t.prototype.isPureReactComponent||(!Ya(a,s)||!Ya(n,r))}function hl(e,t,a,s){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(a,s),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(a,s),t.state!==e&&ml.enqueueReplaceState(t,t.state,null)}function xl(e,t){var a=t;if("ref"in t)for(var s in a={},t)"ref"!==s&&(a[s]=t[s]);if(e=e.defaultProps)for(var n in a===t&&(a=m({},a)),e)void 0===a[n]&&(a[n]=e[n]);return a}var fl="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function gl(e){fl(e)}function yl(e){console.error(e)}function bl(e){fl(e)}function vl(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(a){setTimeout(function(){throw a})}}function jl(e,t,a){try{(0,e.onCaughtError)(a.value,{componentStack:a.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(s){setTimeout(function(){throw s})}}function wl(e,t,a){return(a=nr(a)).tag=3,a.payload={element:null},a.callback=function(){vl(e,t)},a}function _l(e){return(e=nr(e)).tag=3,e}function Nl(e,t,a,s){var n=a.type.getDerivedStateFromError;if("function"===typeof n){var r=s.value;e.payload=function(){return n(r)},e.callback=function(){jl(t,a,s)}}var i=a.stateNode;null!==i&&"function"===typeof i.componentDidCatch&&(e.callback=function(){jl(t,a,s),"function"!==typeof n&&(null===Nc?Nc=new Set([this]):Nc.add(this));var e=s.stack;this.componentDidCatch(s.value,{componentStack:null!==e?e:""})})}var kl=Error(i(461)),Sl=!1;function Cl(e,t,a,s){t.child=null===e?al(t,null,a,s):tl(t,e.child,a,s)}function El(e,t,a,s,n){a=a.render;var r=t.ref;if("ref"in s){var i={};for(var l in s)"ref"!==l&&(i[l]=s[l])}else i=s;return kn(t),s=Ar(e,t,a,i,r,n),l=Fr(),null===e||Sl?(nn&&l&&en(t),t.flags|=1,Cl(e,t,s,n),t.child):(Or(e,t,n),Ql(e,t,n))}function Dl(e,t,a,s,n){if(null===e){var r=a.type;return"function"!==typeof r||Os(r)||void 0!==r.defaultProps||null!==a.compare?((e=qs(a.type,null,s,t,t.mode,n)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=r,Pl(e,t,r,s,n))}if(r=e.child,!Yl(e,n)){var i=r.memoizedProps;if((a=null!==(a=a.compare)?a:Ya)(i,s)&&e.ref===t.ref)return Ql(e,t,n)}return t.flags|=1,(e=Ms(r,s)).ref=t.ref,e.return=t,t.child=e}function Pl(e,t,a,s,n){if(null!==e){var r=e.memoizedProps;if(Ya(r,s)&&e.ref===t.ref){if(Sl=!1,t.pendingProps=s=r,!Yl(e,n))return t.lanes=e.lanes,Ql(e,t,n);0!==(131072&e.flags)&&(Sl=!0)}}return Rl(e,t,a,s,n)}function Al(e,t,a){var s=t.pendingProps,n=s.children,r=null!==e?e.memoizedState:null;if("hidden"===s.mode){if(0!==(128&t.flags)){if(s=null!==r?r.baseLanes|a:a,null!==e){for(n=t.child=e.child,r=0;null!==n;)r=r|n.lanes|n.childLanes,n=n.sibling;t.childLanes=r&~s}else t.childLanes=0,t.child=null;return Tl(e,t,s,a)}if(0===(536870912&a))return t.lanes=t.childLanes=536870912,Tl(e,t,null!==r?r.baseLanes|a:a,a);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Wn(0,null!==r?r.cachePool:null),null!==r?xr(t,r):fr(),il(t)}else null!==r?(Wn(0,r.cachePool),xr(t,r),ll(),t.memoizedState=null):(null!==e&&Wn(0,null),fr(),ll());return Cl(e,t,n,a),t.child}function Tl(e,t,a,s){var n=Un();return n=null===n?null:{parent:Tn._currentValue,pool:n},t.memoizedState={baseLanes:a,cachePool:n},null!==e&&Wn(0,null),fr(),il(t),null!==e&&_n(e,t,s,!0),null}function Ll(e,t){var a=t.ref;if(null===a)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof a&&"object"!==typeof a)throw Error(i(284));null!==e&&e.ref===a||(t.flags|=4194816)}}function Rl(e,t,a,s,n){return kn(t),a=Ar(e,t,a,s,void 0,n),s=Fr(),null===e||Sl?(nn&&s&&en(t),t.flags|=1,Cl(e,t,a,n),t.child):(Or(e,t,n),Ql(e,t,n))}function Fl(e,t,a,s,n,r){return kn(t),t.updateQueue=null,a=Lr(t,s,a,n),Tr(e),s=Fr(),null===e||Sl?(nn&&s&&en(t),t.flags|=1,Cl(e,t,a,r),t.child):(Or(e,t,r),Ql(e,t,r))}function Ol(e,t,a,s,n){if(kn(t),null===t.stateNode){var r=Ls,i=a.contextType;"object"===typeof i&&null!==i&&(r=Sn(i)),r=new a(s,r),t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,r.updater=ml,t.stateNode=r,r._reactInternals=t,(r=t.stateNode).props=s,r.state=t.memoizedState,r.refs={},ar(t),i=a.contextType,r.context="object"===typeof i&&null!==i?Sn(i):Ls,r.state=t.memoizedState,"function"===typeof(i=a.getDerivedStateFromProps)&&(ul(t,a,i,s),r.state=t.memoizedState),"function"===typeof a.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(i=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),i!==r.state&&ml.enqueueReplaceState(r,r.state,null),dr(t,s,r,n),cr(),r.state=t.memoizedState),"function"===typeof r.componentDidMount&&(t.flags|=4194308),s=!0}else if(null===e){r=t.stateNode;var l=t.memoizedProps,o=xl(a,l);r.props=o;var c=r.context,d=a.contextType;i=Ls,"object"===typeof d&&null!==d&&(i=Sn(d));var u=a.getDerivedStateFromProps;d="function"===typeof u||"function"===typeof r.getSnapshotBeforeUpdate,l=t.pendingProps!==l,d||"function"!==typeof r.UNSAFE_componentWillReceiveProps&&"function"!==typeof r.componentWillReceiveProps||(l||c!==i)&&hl(t,r,s,i),tr=!1;var m=t.memoizedState;r.state=m,dr(t,s,r,n),cr(),c=t.memoizedState,l||m!==c||tr?("function"===typeof u&&(ul(t,a,u,s),c=t.memoizedState),(o=tr||pl(t,a,o,s,m,c,i))?(d||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||("function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount()),"function"===typeof r.componentDidMount&&(t.flags|=4194308)):("function"===typeof r.componentDidMount&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=c),r.props=s,r.state=c,r.context=i,s=o):("function"===typeof r.componentDidMount&&(t.flags|=4194308),s=!1)}else{r=t.stateNode,sr(e,t),d=xl(a,i=t.memoizedProps),r.props=d,u=t.pendingProps,m=r.context,c=a.contextType,o=Ls,"object"===typeof c&&null!==c&&(o=Sn(c)),(c="function"===typeof(l=a.getDerivedStateFromProps)||"function"===typeof r.getSnapshotBeforeUpdate)||"function"!==typeof r.UNSAFE_componentWillReceiveProps&&"function"!==typeof r.componentWillReceiveProps||(i!==u||m!==o)&&hl(t,r,s,o),tr=!1,m=t.memoizedState,r.state=m,dr(t,s,r,n),cr();var p=t.memoizedState;i!==u||m!==p||tr||null!==e&&null!==e.dependencies&&Nn(e.dependencies)?("function"===typeof l&&(ul(t,a,l,s),p=t.memoizedState),(d=tr||pl(t,a,d,s,m,p,o)||null!==e&&null!==e.dependencies&&Nn(e.dependencies))?(c||"function"!==typeof r.UNSAFE_componentWillUpdate&&"function"!==typeof r.componentWillUpdate||("function"===typeof r.componentWillUpdate&&r.componentWillUpdate(s,p,o),"function"===typeof r.UNSAFE_componentWillUpdate&&r.UNSAFE_componentWillUpdate(s,p,o)),"function"===typeof r.componentDidUpdate&&(t.flags|=4),"function"===typeof r.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof r.componentDidUpdate||i===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),"function"!==typeof r.getSnapshotBeforeUpdate||i===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=p),r.props=s,r.state=p,r.context=o,s=d):("function"!==typeof r.componentDidUpdate||i===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),"function"!==typeof r.getSnapshotBeforeUpdate||i===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),s=!1)}return r=s,Ll(e,t),s=0!==(128&t.flags),r||s?(r=t.stateNode,a=s&&"function"!==typeof a.getDerivedStateFromError?null:r.render(),t.flags|=1,null!==e&&s?(t.child=tl(t,e.child,null,n),t.child=tl(t,null,a,n)):Cl(e,t,a,n),t.memoizedState=r.state,e=t.child):e=Ql(e,t,n),e}function Ml(e,t,a,s){return pn(),t.flags|=256,Cl(e,t,a,s),t.child}var Il={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ql(e){return{baseLanes:e,cachePool:Hn()}}function Bl(e,t,a){return e=null!==e?e.childLanes&~a:0,t&&(e|=fc),e}function zl(e,t,a){var s,n=t.pendingProps,r=!1,l=0!==(128&t.flags);if((s=l)||(s=(null===e||null!==e.memoizedState)&&0!==(2&cl.current)),s&&(r=!0,t.flags&=-129),s=0!==(32&t.flags),t.flags&=-33,null===e){if(nn){if(r?rl(t):ll(),nn){var o,c=sn;if(o=c){e:{for(o=c,c=ln;8!==o.nodeType;){if(!c){c=null;break e}if(null===(o=gu(o.nextSibling))){c=null;break e}}c=o}null!==c?(t.memoizedState={dehydrated:c,treeContext:null!==Ys?{id:Js,overflow:Zs}:null,retryLane:536870912,hydrationErrors:null},(o=Fs(18,null,null,0)).stateNode=c,o.return=t,t.child=o,an=t,sn=null,o=!0):o=!1}o||cn(t)}if(null!==(c=t.memoizedState)&&null!==(c=c.dehydrated))return fu(c)?t.lanes=32:t.lanes=536870912,null;ol(t)}return c=n.children,n=n.fallback,r?(ll(),c=Wl({mode:"hidden",children:c},r=t.mode),n=Bs(n,r,a,null),c.return=t,n.return=t,c.sibling=n,t.child=c,(r=t.child).memoizedState=ql(a),r.childLanes=Bl(e,s,a),t.memoizedState=Il,n):(rl(t),Ul(t,c))}if(null!==(o=e.memoizedState)&&null!==(c=o.dehydrated)){if(l)256&t.flags?(rl(t),t.flags&=-257,t=Hl(e,t,a)):null!==t.memoizedState?(ll(),t.child=e.child,t.flags|=128,t=null):(ll(),r=n.fallback,c=t.mode,n=Wl({mode:"visible",children:n.children},c),(r=Bs(r,c,a,null)).flags|=2,n.return=t,r.return=t,n.sibling=r,t.child=n,tl(t,e.child,null,a),(n=t.child).memoizedState=ql(a),n.childLanes=Bl(e,s,a),t.memoizedState=Il,t=r);else if(rl(t),fu(c)){if(s=c.nextSibling&&c.nextSibling.dataset)var d=s.dgst;s=d,(n=Error(i(419))).stack="",n.digest=s,xn({value:n,source:null,stack:null}),t=Hl(e,t,a)}else if(Sl||_n(e,t,a,!1),s=0!==(a&e.childLanes),Sl||s){if(null!==(s=sc)&&(0!==(n=0!==((n=0!==(42&(n=a&-a))?1:Ee(n))&(s.suspendedLanes|a))?0:n)&&n!==o.retryLane))throw o.retryLane=n,Ps(e,n),Oc(s,e,n),kl;"$?"===c.data||$c(),t=Hl(e,t,a)}else"$?"===c.data?(t.flags|=192,t.child=e.child,t=null):(e=o.treeContext,sn=gu(c.nextSibling),an=t,nn=!0,rn=null,ln=!1,null!==e&&($s[Qs++]=Js,$s[Qs++]=Zs,$s[Qs++]=Ys,Js=e.id,Zs=e.overflow,Ys=t),(t=Ul(t,n.children)).flags|=4096);return t}return r?(ll(),r=n.fallback,c=t.mode,d=(o=e.child).sibling,(n=Ms(o,{mode:"hidden",children:n.children})).subtreeFlags=65011712&o.subtreeFlags,null!==d?r=Ms(d,r):(r=Bs(r,c,a,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,n=r,r=t.child,null===(c=e.child.memoizedState)?c=ql(a):(null!==(o=c.cachePool)?(d=Tn._currentValue,o=o.parent!==d?{parent:d,pool:d}:o):o=Hn(),c={baseLanes:c.baseLanes|a,cachePool:o}),r.memoizedState=c,r.childLanes=Bl(e,s,a),t.memoizedState=Il,n):(rl(t),e=(a=e.child).sibling,(a=Ms(a,{mode:"visible",children:n.children})).return=t,a.sibling=null,null!==e&&(null===(s=t.deletions)?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=a,t.memoizedState=null,a)}function Ul(e,t){return(t=Wl({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Wl(e,t){return(e=Fs(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Hl(e,t,a){return tl(t,e.child,null,a),(e=Ul(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Gl(e,t,a){e.lanes|=t;var s=e.alternate;null!==s&&(s.lanes|=t),jn(e.return,t,a)}function Vl(e,t,a,s,n){var r=e.memoizedState;null===r?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:a,tailMode:n}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=s,r.tail=a,r.tailMode=n)}function $l(e,t,a){var s=t.pendingProps,n=s.revealOrder,r=s.tail;if(Cl(e,t,s.children,a),0!==(2&(s=cl.current)))s=1&s|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Gl(e,a,t);else if(19===e.tag)Gl(e,a,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}switch(z(cl,s),n){case"forwards":for(a=t.child,n=null;null!==a;)null!==(e=a.alternate)&&null===dl(e)&&(n=a),a=a.sibling;null===(a=n)?(n=t.child,t.child=null):(n=a.sibling,a.sibling=null),Vl(t,!1,n,a,r);break;case"backwards":for(a=null,n=t.child,t.child=null;null!==n;){if(null!==(e=n.alternate)&&null===dl(e)){t.child=n;break}e=n.sibling,n.sibling=a,a=n,n=e}Vl(t,!0,a,null,r);break;case"together":Vl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ql(e,t,a){if(null!==e&&(t.dependencies=e.dependencies),pc|=t.lanes,0===(a&t.childLanes)){if(null===e)return null;if(_n(e,t,a,!1),0===(a&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(a=Ms(e=t.child,e.pendingProps),t.child=a,a.return=t;null!==e.sibling;)e=e.sibling,(a=a.sibling=Ms(e,e.pendingProps)).return=t;a.sibling=null}return t.child}function Yl(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Nn(e))}function Jl(e,t,a){if(null!==e)if(e.memoizedProps!==t.pendingProps)Sl=!0;else{if(!Yl(e,a)&&0===(128&t.flags))return Sl=!1,function(e,t,a){switch(t.tag){case 3:V(t,t.stateNode.containerInfo),bn(0,Tn,e.memoizedState.cache),pn();break;case 27:case 5:Q(t);break;case 4:V(t,t.stateNode.containerInfo);break;case 10:bn(0,t.type,t.memoizedProps.value);break;case 13:var s=t.memoizedState;if(null!==s)return null!==s.dehydrated?(rl(t),t.flags|=128,null):0!==(a&t.child.childLanes)?zl(e,t,a):(rl(t),null!==(e=Ql(e,t,a))?e.sibling:null);rl(t);break;case 19:var n=0!==(128&e.flags);if((s=0!==(a&t.childLanes))||(_n(e,t,a,!1),s=0!==(a&t.childLanes)),n){if(s)return $l(e,t,a);t.flags|=128}if(null!==(n=t.memoizedState)&&(n.rendering=null,n.tail=null,n.lastEffect=null),z(cl,cl.current),s)break;return null;case 22:case 23:return t.lanes=0,Al(e,t,a);case 24:bn(0,Tn,e.memoizedState.cache)}return Ql(e,t,a)}(e,t,a);Sl=0!==(131072&e.flags)}else Sl=!1,nn&&0!==(1048576&t.flags)&&Ks(t,Vs,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var s=t.elementType,n=s._init;if(s=n(s._payload),t.type=s,"function"!==typeof s){if(void 0!==s&&null!==s){if((n=s.$$typeof)===w){t.tag=11,t=El(null,t,s,e,a);break e}if(n===k){t.tag=14,t=Dl(null,t,s,e,a);break e}}throw t=T(s)||s,Error(i(306,t,""))}Os(s)?(e=xl(s,e),t.tag=1,t=Ol(null,t,s,e,a)):(t.tag=0,t=Rl(null,t,s,e,a))}return t;case 0:return Rl(e,t,t.type,t.pendingProps,a);case 1:return Ol(e,t,s=t.type,n=xl(s,t.pendingProps),a);case 3:e:{if(V(t,t.stateNode.containerInfo),null===e)throw Error(i(387));s=t.pendingProps;var r=t.memoizedState;n=r.element,sr(e,t),dr(t,s,null,a);var l=t.memoizedState;if(s=l.cache,bn(0,Tn,s),s!==r.cache&&wn(t,[Tn],a,!0),cr(),s=l.element,r.isDehydrated){if(r={element:s,isDehydrated:!1,cache:l.cache},t.updateQueue.baseState=r,t.memoizedState=r,256&t.flags){t=Ml(e,t,s,a);break e}if(s!==n){xn(n=_s(Error(i(424)),t)),t=Ml(e,t,s,a);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(sn=gu(e.firstChild),an=t,nn=!0,rn=null,ln=!0,a=al(t,null,s,a),t.child=a;a;)a.flags=-3&a.flags|4096,a=a.sibling}else{if(pn(),s===n){t=Ql(e,t,a);break e}Cl(e,t,s,a)}t=t.child}return t;case 26:return Ll(e,t),null===e?(a=Eu(t.type,null,t.pendingProps,null))?t.memoizedState=a:nn||(a=t.type,e=t.pendingProps,(s=su(H.current).createElement(a))[Te]=t,s[Le]=e,eu(s,a,e),Ge(s),t.stateNode=s):t.memoizedState=Eu(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Q(t),null===e&&nn&&(s=t.stateNode=vu(t.type,t.pendingProps,H.current),an=t,ln=!0,n=sn,pu(t.type)?(yu=n,sn=gu(s.firstChild)):sn=n),Cl(e,t,t.pendingProps.children,a),Ll(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&nn&&((n=s=sn)&&(null!==(s=function(e,t,a,s){for(;1===e.nodeType;){var n=a;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!s&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(s){if(!e[qe])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(r=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(r!==n.rel||e.getAttribute("href")!==(null==n.href||""===n.href?null:n.href)||e.getAttribute("crossorigin")!==(null==n.crossOrigin?null:n.crossOrigin)||e.getAttribute("title")!==(null==n.title?null:n.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((r=e.getAttribute("src"))!==(null==n.src?null:n.src)||e.getAttribute("type")!==(null==n.type?null:n.type)||e.getAttribute("crossorigin")!==(null==n.crossOrigin?null:n.crossOrigin))&&r&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var r=null==n.name?null:""+n.name;if("hidden"===n.type&&e.getAttribute("name")===r)return e}if(null===(e=gu(e.nextSibling)))break}return null}(s,t.type,t.pendingProps,ln))?(t.stateNode=s,an=t,sn=gu(s.firstChild),ln=!1,n=!0):n=!1),n||cn(t)),Q(t),n=t.type,r=t.pendingProps,l=null!==e?e.memoizedProps:null,s=r.children,iu(n,r)?s=null:null!==l&&iu(n,l)&&(t.flags|=32),null!==t.memoizedState&&(n=Ar(e,t,Rr,null,null,a),Qu._currentValue=n),Ll(e,t),Cl(e,t,s,a),t.child;case 6:return null===e&&nn&&((e=a=sn)&&(null!==(a=function(e,t,a){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!a)return null;if(null===(e=gu(e.nextSibling)))return null}return e}(a,t.pendingProps,ln))?(t.stateNode=a,an=t,sn=null,e=!0):e=!1),e||cn(t)),null;case 13:return zl(e,t,a);case 4:return V(t,t.stateNode.containerInfo),s=t.pendingProps,null===e?t.child=tl(t,null,s,a):Cl(e,t,s,a),t.child;case 11:return El(e,t,t.type,t.pendingProps,a);case 7:return Cl(e,t,t.pendingProps,a),t.child;case 8:case 12:return Cl(e,t,t.pendingProps.children,a),t.child;case 10:return s=t.pendingProps,bn(0,t.type,s.value),Cl(e,t,s.children,a),t.child;case 9:return n=t.type._context,s=t.pendingProps.children,kn(t),s=s(n=Sn(n)),t.flags|=1,Cl(e,t,s,a),t.child;case 14:return Dl(e,t,t.type,t.pendingProps,a);case 15:return Pl(e,t,t.type,t.pendingProps,a);case 19:return $l(e,t,a);case 31:return s=t.pendingProps,a=t.mode,s={mode:s.mode,children:s.children},null===e?((a=Wl(s,a)).ref=t.ref,t.child=a,a.return=t,t=a):((a=Ms(e.child,s)).ref=t.ref,t.child=a,a.return=t,t=a),t;case 22:return Al(e,t,a);case 24:return kn(t),s=Sn(Tn),null===e?(null===(n=Un())&&(n=sc,r=Ln(),n.pooledCache=r,r.refCount++,null!==r&&(n.pooledCacheLanes|=a),n=r),t.memoizedState={parent:s,cache:n},ar(t),bn(0,Tn,n)):(0!==(e.lanes&a)&&(sr(e,t),dr(t,null,null,a),cr()),n=e.memoizedState,r=t.memoizedState,n.parent!==s?(n={parent:s,cache:s},t.memoizedState=n,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=n),bn(0,Tn,s)):(s=r.cache,bn(0,Tn,s),s!==n.cache&&wn(t,[Tn],a,!0))),Cl(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(i(156,t.tag))}function Zl(e){e.flags|=4}function Xl(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!zu(t)){if(null!==(t=sl.current)&&((4194048&rc)===rc?null!==nl:(62914560&rc)!==rc&&0===(536870912&rc)||t!==nl))throw Xn=Qn,Vn;e.flags|=8192}}function Kl(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?_e():536870912,e.lanes|=t,gc|=t)}function eo(e,t){if(!nn)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;null!==t;)null!==t.alternate&&(a=t),t=t.sibling;null===a?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var s=null;null!==a;)null!==a.alternate&&(s=a),a=a.sibling;null===s?t||null===e.tail?e.tail=null:e.tail.sibling=null:s.sibling=null}}function to(e){var t=null!==e.alternate&&e.alternate.child===e.child,a=0,s=0;if(t)for(var n=e.child;null!==n;)a|=n.lanes|n.childLanes,s|=65011712&n.subtreeFlags,s|=65011712&n.flags,n.return=e,n=n.sibling;else for(n=e.child;null!==n;)a|=n.lanes|n.childLanes,s|=n.subtreeFlags,s|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=s,e.childLanes=a,t}function ao(e,t,a){var s=t.pendingProps;switch(tn(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return to(t),null;case 3:return a=t.stateNode,s=null,null!==e&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),vn(Tn),$(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),null!==e&&null!==e.child||(mn(t)?Zl(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,hn())),to(t),null;case 26:return a=t.memoizedState,null===e?(Zl(t),null!==a?(to(t),Xl(t,a)):(to(t),t.flags&=-16777217)):a?a!==e.memoizedState?(Zl(t),to(t),Xl(t,a)):(to(t),t.flags&=-16777217):(e.memoizedProps!==s&&Zl(t),to(t),t.flags&=-16777217),null;case 27:Y(t),a=H.current;var n=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==s&&Zl(t);else{if(!s){if(null===t.stateNode)throw Error(i(166));return to(t),null}e=U.current,mn(t)?dn(t):(e=vu(n,s,a),t.stateNode=e,Zl(t))}return to(t),null;case 5:if(Y(t),a=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==s&&Zl(t);else{if(!s){if(null===t.stateNode)throw Error(i(166));return to(t),null}if(e=U.current,mn(t))dn(t);else{switch(n=su(H.current),e){case 1:e=n.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:e=n.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":e=n.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":e=n.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":(e=n.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"===typeof s.is?n.createElement("select",{is:s.is}):n.createElement("select"),s.multiple?e.multiple=!0:s.size&&(e.size=s.size);break;default:e="string"===typeof s.is?n.createElement(a,{is:s.is}):n.createElement(a)}}e[Te]=t,e[Le]=s;e:for(n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&27!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break e;for(;null===n.sibling;){if(null===n.return||n.return===t)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}t.stateNode=e;e:switch(eu(e,a,s),a){case"button":case"input":case"select":case"textarea":e=!!s.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Zl(t)}}return to(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==s&&Zl(t);else{if("string"!==typeof s&&null===t.stateNode)throw Error(i(166));if(e=H.current,mn(t)){if(e=t.stateNode,a=t.memoizedProps,s=null,null!==(n=an))switch(n.tag){case 27:case 5:s=n.memoizedProps}e[Te]=t,(e=!!(e.nodeValue===a||null!==s&&!0===s.suppressHydrationWarning||Jd(e.nodeValue,a)))||cn(t)}else(e=su(e).createTextNode(s))[Te]=t,t.stateNode=e}return to(t),null;case 13:if(s=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(n=mn(t),null!==s&&null!==s.dehydrated){if(null===e){if(!n)throw Error(i(318));if(!(n=null!==(n=t.memoizedState)?n.dehydrated:null))throw Error(i(317));n[Te]=t}else pn(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;to(t),n=!1}else n=hn(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=n),n=!0;if(!n)return 256&t.flags?(ol(t),t):(ol(t),null)}if(ol(t),0!==(128&t.flags))return t.lanes=a,t;if(a=null!==s,e=null!==e&&null!==e.memoizedState,a){n=null,null!==(s=t.child).alternate&&null!==s.alternate.memoizedState&&null!==s.alternate.memoizedState.cachePool&&(n=s.alternate.memoizedState.cachePool.pool);var r=null;null!==s.memoizedState&&null!==s.memoizedState.cachePool&&(r=s.memoizedState.cachePool.pool),r!==n&&(s.flags|=2048)}return a!==e&&a&&(t.child.flags|=8192),Kl(t,t.updateQueue),to(t),null;case 4:return $(),null===e&&Bd(t.stateNode.containerInfo),to(t),null;case 10:return vn(t.type),to(t),null;case 19:if(B(cl),null===(n=t.memoizedState))return to(t),null;if(s=0!==(128&t.flags),null===(r=n.rendering))if(s)eo(n,!1);else{if(0!==mc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(r=dl(e))){for(t.flags|=128,eo(n,!1),e=r.updateQueue,t.updateQueue=e,Kl(t,e),t.subtreeFlags=0,e=a,a=t.child;null!==a;)Is(a,e),a=a.sibling;return z(cl,1&cl.current|2),t.child}e=e.sibling}null!==n.tail&&te()>wc&&(t.flags|=128,s=!0,eo(n,!1),t.lanes=4194304)}else{if(!s)if(null!==(e=dl(r))){if(t.flags|=128,s=!0,e=e.updateQueue,t.updateQueue=e,Kl(t,e),eo(n,!0),null===n.tail&&"hidden"===n.tailMode&&!r.alternate&&!nn)return to(t),null}else 2*te()-n.renderingStartTime>wc&&536870912!==a&&(t.flags|=128,s=!0,eo(n,!1),t.lanes=4194304);n.isBackwards?(r.sibling=t.child,t.child=r):(null!==(e=n.last)?e.sibling=r:t.child=r,n.last=r)}return null!==n.tail?(t=n.tail,n.rendering=t,n.tail=t.sibling,n.renderingStartTime=te(),t.sibling=null,e=cl.current,z(cl,s?1&e|2:1&e),t):(to(t),null);case 22:case 23:return ol(t),gr(),s=null!==t.memoizedState,null!==e?null!==e.memoizedState!==s&&(t.flags|=8192):s&&(t.flags|=8192),s?0!==(536870912&a)&&0===(128&t.flags)&&(to(t),6&t.subtreeFlags&&(t.flags|=8192)):to(t),null!==(a=t.updateQueue)&&Kl(t,a.retryQueue),a=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(a=e.memoizedState.cachePool.pool),s=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(s=t.memoizedState.cachePool.pool),s!==a&&(t.flags|=2048),null!==e&&B(zn),null;case 24:return a=null,null!==e&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),vn(Tn),to(t),null;case 25:case 30:return null}throw Error(i(156,t.tag))}function so(e,t){switch(tn(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return vn(Tn),$(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return Y(t),null;case 13:if(ol(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));pn()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return B(cl),null;case 4:return $(),null;case 10:return vn(t.type),null;case 22:case 23:return ol(t),gr(),null!==e&&B(zn),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return vn(Tn),null;default:return null}}function no(e,t){switch(tn(t),t.tag){case 3:vn(Tn),$();break;case 26:case 27:case 5:Y(t);break;case 4:$();break;case 13:ol(t);break;case 19:B(cl);break;case 10:vn(t.type);break;case 22:case 23:ol(t),gr(),null!==e&&B(zn);break;case 24:vn(Tn)}}function ro(e,t){try{var a=t.updateQueue,s=null!==a?a.lastEffect:null;if(null!==s){var n=s.next;a=n;do{if((a.tag&e)===e){s=void 0;var r=a.create,i=a.inst;s=r(),i.destroy=s}a=a.next}while(a!==n)}}catch(l){dd(t,t.return,l)}}function io(e,t,a){try{var s=t.updateQueue,n=null!==s?s.lastEffect:null;if(null!==n){var r=n.next;s=r;do{if((s.tag&e)===e){var i=s.inst,l=i.destroy;if(void 0!==l){i.destroy=void 0,n=t;var o=a,c=l;try{c()}catch(d){dd(n,o,d)}}}s=s.next}while(s!==r)}}catch(d){dd(t,t.return,d)}}function lo(e){var t=e.updateQueue;if(null!==t){var a=e.stateNode;try{mr(t,a)}catch(s){dd(e,e.return,s)}}}function oo(e,t,a){a.props=xl(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(s){dd(e,t,s)}}function co(e,t){try{var a=e.ref;if(null!==a){switch(e.tag){case 26:case 27:case 5:var s=e.stateNode;break;default:s=e.stateNode}"function"===typeof a?e.refCleanup=a(s):a.current=s}}catch(n){dd(e,t,n)}}function uo(e,t){var a=e.ref,s=e.refCleanup;if(null!==a)if("function"===typeof s)try{s()}catch(n){dd(e,t,n)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof a)try{a(null)}catch(r){dd(e,t,r)}else a.current=null}function mo(e){var t=e.type,a=e.memoizedProps,s=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&s.focus();break e;case"img":a.src?s.src=a.src:a.srcSet&&(s.srcset=a.srcSet)}}catch(n){dd(e,e.return,n)}}function po(e,t,a){try{var s=e.stateNode;!function(e,t,a,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var n=null,r=null,l=null,o=null,c=null,d=null,u=null;for(h in a){var m=a[h];if(a.hasOwnProperty(h)&&null!=m)switch(h){case"checked":case"value":break;case"defaultValue":c=m;default:s.hasOwnProperty(h)||Xd(e,t,h,null,s,m)}}for(var p in s){var h=s[p];if(m=a[p],s.hasOwnProperty(p)&&(null!=h||null!=m))switch(p){case"type":r=h;break;case"name":n=h;break;case"checked":d=h;break;case"defaultChecked":u=h;break;case"value":l=h;break;case"defaultValue":o=h;break;case"children":case"dangerouslySetInnerHTML":if(null!=h)throw Error(i(137,t));break;default:h!==m&&Xd(e,t,p,h,s,m)}}return void ft(e,l,o,c,d,u,r,n);case"select":for(r in h=l=o=p=null,a)if(c=a[r],a.hasOwnProperty(r)&&null!=c)switch(r){case"value":break;case"multiple":h=c;default:s.hasOwnProperty(r)||Xd(e,t,r,null,s,c)}for(n in s)if(r=s[n],c=a[n],s.hasOwnProperty(n)&&(null!=r||null!=c))switch(n){case"value":p=r;break;case"defaultValue":o=r;break;case"multiple":l=r;default:r!==c&&Xd(e,t,n,r,s,c)}return t=o,a=l,s=h,void(null!=p?bt(e,!!a,p,!1):!!s!==!!a&&(null!=t?bt(e,!!a,t,!0):bt(e,!!a,a?[]:"",!1)));case"textarea":for(o in h=p=null,a)if(n=a[o],a.hasOwnProperty(o)&&null!=n&&!s.hasOwnProperty(o))switch(o){case"value":case"children":break;default:Xd(e,t,o,null,s,n)}for(l in s)if(n=s[l],r=a[l],s.hasOwnProperty(l)&&(null!=n||null!=r))switch(l){case"value":p=n;break;case"defaultValue":h=n;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=n)throw Error(i(91));break;default:n!==r&&Xd(e,t,l,n,s,r)}return void vt(e,p,h);case"option":for(var x in a)if(p=a[x],a.hasOwnProperty(x)&&null!=p&&!s.hasOwnProperty(x))if("selected"===x)e.selected=!1;else Xd(e,t,x,null,s,p);for(c in s)if(p=s[c],h=a[c],s.hasOwnProperty(c)&&p!==h&&(null!=p||null!=h))if("selected"===c)e.selected=p&&"function"!==typeof p&&"symbol"!==typeof p;else Xd(e,t,c,p,s,h);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var f in a)p=a[f],a.hasOwnProperty(f)&&null!=p&&!s.hasOwnProperty(f)&&Xd(e,t,f,null,s,p);for(d in s)if(p=s[d],h=a[d],s.hasOwnProperty(d)&&p!==h&&(null!=p||null!=h))switch(d){case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(i(137,t));break;default:Xd(e,t,d,p,s,h)}return;default:if(St(t)){for(var g in a)p=a[g],a.hasOwnProperty(g)&&void 0!==p&&!s.hasOwnProperty(g)&&Kd(e,t,g,void 0,s,p);for(u in s)p=s[u],h=a[u],!s.hasOwnProperty(u)||p===h||void 0===p&&void 0===h||Kd(e,t,u,p,s,h);return}}for(var y in a)p=a[y],a.hasOwnProperty(y)&&null!=p&&!s.hasOwnProperty(y)&&Xd(e,t,y,null,s,p);for(m in s)p=s[m],h=a[m],!s.hasOwnProperty(m)||p===h||null==p&&null==h||Xd(e,t,m,p,s,h)}(s,e.type,a,t),s[Le]=t}catch(n){dd(e,e.return,n)}}function ho(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&pu(e.type)||4===e.tag}function xo(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ho(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&pu(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function fo(e,t,a){var s=e.tag;if(5===s||6===s)e=e.stateNode,t?(9===a.nodeType?a.body:"HTML"===a.nodeName?a.ownerDocument.body:a).insertBefore(e,t):((t=9===a.nodeType?a.body:"HTML"===a.nodeName?a.ownerDocument.body:a).appendChild(e),null!==(a=a._reactRootContainer)&&void 0!==a||null!==t.onclick||(t.onclick=Zd));else if(4!==s&&(27===s&&pu(e.type)&&(a=e.stateNode,t=null),null!==(e=e.child)))for(fo(e,t,a),e=e.sibling;null!==e;)fo(e,t,a),e=e.sibling}function go(e,t,a){var s=e.tag;if(5===s||6===s)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(4!==s&&(27===s&&pu(e.type)&&(a=e.stateNode),null!==(e=e.child)))for(go(e,t,a),e=e.sibling;null!==e;)go(e,t,a),e=e.sibling}function yo(e){var t=e.stateNode,a=e.memoizedProps;try{for(var s=e.type,n=t.attributes;n.length;)t.removeAttributeNode(n[0]);eu(t,s,a),t[Te]=e,t[Le]=a}catch(r){dd(e,e.return,r)}}var bo=!1,vo=!1,jo=!1,wo="function"===typeof WeakSet?WeakSet:Set,_o=null;function No(e,t,a){var s=a.flags;switch(a.tag){case 0:case 11:case 15:Mo(e,a),4&s&&ro(5,a);break;case 1:if(Mo(e,a),4&s)if(e=a.stateNode,null===t)try{e.componentDidMount()}catch(i){dd(a,a.return,i)}else{var n=xl(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(n,t,e.__reactInternalSnapshotBeforeUpdate)}catch(l){dd(a,a.return,l)}}64&s&&lo(a),512&s&&co(a,a.return);break;case 3:if(Mo(e,a),64&s&&null!==(e=a.updateQueue)){if(t=null,null!==a.child)switch(a.child.tag){case 27:case 5:case 1:t=a.child.stateNode}try{mr(e,t)}catch(i){dd(a,a.return,i)}}break;case 27:null===t&&4&s&&yo(a);case 26:case 5:Mo(e,a),null===t&&4&s&&mo(a),512&s&&co(a,a.return);break;case 12:Mo(e,a);break;case 13:Mo(e,a),4&s&&Po(e,a),64&s&&(null!==(e=a.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var a=e.ownerDocument;if("$?"!==e.data||"complete"===a.readyState)t();else{var s=function(){t(),a.removeEventListener("DOMContentLoaded",s)};a.addEventListener("DOMContentLoaded",s),e._reactRetry=s}}(e,a=hd.bind(null,a))));break;case 22:if(!(s=null!==a.memoizedState||bo)){t=null!==t&&null!==t.memoizedState||vo,n=bo;var r=vo;bo=s,(vo=t)&&!r?qo(e,a,0!==(8772&a.subtreeFlags)):Mo(e,a),bo=n,vo=r}break;case 30:break;default:Mo(e,a)}}function ko(e){var t=e.alternate;null!==t&&(e.alternate=null,ko(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Be(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var So=null,Co=!1;function Eo(e,t,a){for(a=a.child;null!==a;)Do(e,t,a),a=a.sibling}function Do(e,t,a){if(ue&&"function"===typeof ue.onCommitFiberUnmount)try{ue.onCommitFiberUnmount(de,a)}catch(r){}switch(a.tag){case 26:vo||uo(a,t),Eo(e,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode).parentNode.removeChild(a);break;case 27:vo||uo(a,t);var s=So,n=Co;pu(a.type)&&(So=a.stateNode,Co=!1),Eo(e,t,a),ju(a.stateNode),So=s,Co=n;break;case 5:vo||uo(a,t);case 6:if(s=So,n=Co,So=null,Eo(e,t,a),Co=n,null!==(So=s))if(Co)try{(9===So.nodeType?So.body:"HTML"===So.nodeName?So.ownerDocument.body:So).removeChild(a.stateNode)}catch(i){dd(a,t,i)}else try{So.removeChild(a.stateNode)}catch(i){dd(a,t,i)}break;case 18:null!==So&&(Co?(hu(9===(e=So).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,a.stateNode),Cm(e)):hu(So,a.stateNode));break;case 4:s=So,n=Co,So=a.stateNode.containerInfo,Co=!0,Eo(e,t,a),So=s,Co=n;break;case 0:case 11:case 14:case 15:vo||io(2,a,t),vo||io(4,a,t),Eo(e,t,a);break;case 1:vo||(uo(a,t),"function"===typeof(s=a.stateNode).componentWillUnmount&&oo(a,t,s)),Eo(e,t,a);break;case 21:Eo(e,t,a);break;case 22:vo=(s=vo)||null!==a.memoizedState,Eo(e,t,a),vo=s;break;default:Eo(e,t,a)}}function Po(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Cm(e)}catch(a){dd(t,t.return,a)}}function Ao(e,t){var a=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new wo),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new wo),t;default:throw Error(i(435,e.tag))}}(e);t.forEach(function(t){var s=xd.bind(null,e,t);a.has(t)||(a.add(t),t.then(s,s))})}function To(e,t){var a=t.deletions;if(null!==a)for(var s=0;s<a.length;s++){var n=a[s],r=e,l=t,o=l;e:for(;null!==o;){switch(o.tag){case 27:if(pu(o.type)){So=o.stateNode,Co=!1;break e}break;case 5:So=o.stateNode,Co=!1;break e;case 3:case 4:So=o.stateNode.containerInfo,Co=!0;break e}o=o.return}if(null===So)throw Error(i(160));Do(r,l,n),So=null,Co=!1,null!==(r=n.alternate)&&(r.return=null),n.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)Ro(t,e),t=t.sibling}var Lo=null;function Ro(e,t){var a=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:To(t,e),Fo(e),4&s&&(io(3,e,e.return),ro(3,e),io(5,e,e.return));break;case 1:To(t,e),Fo(e),512&s&&(vo||null===a||uo(a,a.return)),64&s&&bo&&(null!==(e=e.updateQueue)&&(null!==(s=e.callbacks)&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===a?s:a.concat(s))));break;case 26:var n=Lo;if(To(t,e),Fo(e),512&s&&(vo||null===a||uo(a,a.return)),4&s){var r=null!==a?a.memoizedState:null;if(s=e.memoizedState,null===a)if(null===s)if(null===e.stateNode){e:{s=e.type,a=e.memoizedProps,n=n.ownerDocument||n;t:switch(s){case"title":(!(r=n.getElementsByTagName("title")[0])||r[qe]||r[Te]||"http://www.w3.org/2000/svg"===r.namespaceURI||r.hasAttribute("itemprop"))&&(r=n.createElement(s),n.head.insertBefore(r,n.querySelector("head > title"))),eu(r,s,a),r[Te]=e,Ge(r),s=r;break e;case"link":var l=qu("link","href",n).get(s+(a.href||""));if(l)for(var o=0;o<l.length;o++)if((r=l[o]).getAttribute("href")===(null==a.href||""===a.href?null:a.href)&&r.getAttribute("rel")===(null==a.rel?null:a.rel)&&r.getAttribute("title")===(null==a.title?null:a.title)&&r.getAttribute("crossorigin")===(null==a.crossOrigin?null:a.crossOrigin)){l.splice(o,1);break t}eu(r=n.createElement(s),s,a),n.head.appendChild(r);break;case"meta":if(l=qu("meta","content",n).get(s+(a.content||"")))for(o=0;o<l.length;o++)if((r=l[o]).getAttribute("content")===(null==a.content?null:""+a.content)&&r.getAttribute("name")===(null==a.name?null:a.name)&&r.getAttribute("property")===(null==a.property?null:a.property)&&r.getAttribute("http-equiv")===(null==a.httpEquiv?null:a.httpEquiv)&&r.getAttribute("charset")===(null==a.charSet?null:a.charSet)){l.splice(o,1);break t}eu(r=n.createElement(s),s,a),n.head.appendChild(r);break;default:throw Error(i(468,s))}r[Te]=e,Ge(r),s=r}e.stateNode=s}else Bu(n,e.type,e.stateNode);else e.stateNode=Ru(n,s,e.memoizedProps);else r!==s?(null===r?null!==a.stateNode&&(a=a.stateNode).parentNode.removeChild(a):r.count--,null===s?Bu(n,e.type,e.stateNode):Ru(n,s,e.memoizedProps)):null===s&&null!==e.stateNode&&po(e,e.memoizedProps,a.memoizedProps)}break;case 27:To(t,e),Fo(e),512&s&&(vo||null===a||uo(a,a.return)),null!==a&&4&s&&po(e,e.memoizedProps,a.memoizedProps);break;case 5:if(To(t,e),Fo(e),512&s&&(vo||null===a||uo(a,a.return)),32&e.flags){n=e.stateNode;try{wt(n,"")}catch(h){dd(e,e.return,h)}}4&s&&null!=e.stateNode&&po(e,n=e.memoizedProps,null!==a?a.memoizedProps:n),1024&s&&(jo=!0);break;case 6:if(To(t,e),Fo(e),4&s){if(null===e.stateNode)throw Error(i(162));s=e.memoizedProps,a=e.stateNode;try{a.nodeValue=s}catch(h){dd(e,e.return,h)}}break;case 3:if(Iu=null,n=Lo,Lo=Nu(t.containerInfo),To(t,e),Lo=n,Fo(e),4&s&&null!==a&&a.memoizedState.isDehydrated)try{Cm(t.containerInfo)}catch(h){dd(e,e.return,h)}jo&&(jo=!1,Oo(e));break;case 4:s=Lo,Lo=Nu(e.stateNode.containerInfo),To(t,e),Fo(e),Lo=s;break;case 12:default:To(t,e),Fo(e);break;case 13:To(t,e),Fo(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==a&&null!==a.memoizedState)&&(jc=te()),4&s&&(null!==(s=e.updateQueue)&&(e.updateQueue=null,Ao(e,s)));break;case 22:n=null!==e.memoizedState;var c=null!==a&&null!==a.memoizedState,d=bo,u=vo;if(bo=d||n,vo=u||c,To(t,e),vo=u,bo=d,Fo(e),8192&s)e:for(t=e.stateNode,t._visibility=n?-2&t._visibility:1|t._visibility,n&&(null===a||c||bo||vo||Io(e)),a=null,t=e;;){if(5===t.tag||26===t.tag){if(null===a){c=a=t;try{if(r=c.stateNode,n)"function"===typeof(l=r.style).setProperty?l.setProperty("display","none","important"):l.display="none";else{o=c.stateNode;var m=c.memoizedProps.style,p=void 0!==m&&null!==m&&m.hasOwnProperty("display")?m.display:null;o.style.display=null==p||"boolean"===typeof p?"":(""+p).trim()}}catch(h){dd(c,c.return,h)}}}else if(6===t.tag){if(null===a){c=t;try{c.stateNode.nodeValue=n?"":c.memoizedProps}catch(h){dd(c,c.return,h)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}4&s&&(null!==(s=e.updateQueue)&&(null!==(a=s.retryQueue)&&(s.retryQueue=null,Ao(e,a))));break;case 19:To(t,e),Fo(e),4&s&&(null!==(s=e.updateQueue)&&(e.updateQueue=null,Ao(e,s)));case 30:case 21:}}function Fo(e){var t=e.flags;if(2&t){try{for(var a,s=e.return;null!==s;){if(ho(s)){a=s;break}s=s.return}if(null==a)throw Error(i(160));switch(a.tag){case 27:var n=a.stateNode;go(e,xo(e),n);break;case 5:var r=a.stateNode;32&a.flags&&(wt(r,""),a.flags&=-33),go(e,xo(e),r);break;case 3:case 4:var l=a.stateNode.containerInfo;fo(e,xo(e),l);break;default:throw Error(i(161))}}catch(o){dd(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Oo(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Oo(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Mo(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)No(e,t.alternate,t),t=t.sibling}function Io(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:io(4,t,t.return),Io(t);break;case 1:uo(t,t.return);var a=t.stateNode;"function"===typeof a.componentWillUnmount&&oo(t,t.return,a),Io(t);break;case 27:ju(t.stateNode);case 26:case 5:uo(t,t.return),Io(t);break;case 22:null===t.memoizedState&&Io(t);break;default:Io(t)}e=e.sibling}}function qo(e,t,a){for(a=a&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var s=t.alternate,n=e,r=t,i=r.flags;switch(r.tag){case 0:case 11:case 15:qo(n,r,a),ro(4,r);break;case 1:if(qo(n,r,a),"function"===typeof(n=(s=r).stateNode).componentDidMount)try{n.componentDidMount()}catch(c){dd(s,s.return,c)}if(null!==(n=(s=r).updateQueue)){var l=s.stateNode;try{var o=n.shared.hiddenCallbacks;if(null!==o)for(n.shared.hiddenCallbacks=null,n=0;n<o.length;n++)ur(o[n],l)}catch(c){dd(s,s.return,c)}}a&&64&i&&lo(r),co(r,r.return);break;case 27:yo(r);case 26:case 5:qo(n,r,a),a&&null===s&&4&i&&mo(r),co(r,r.return);break;case 12:qo(n,r,a);break;case 13:qo(n,r,a),a&&4&i&&Po(n,r);break;case 22:null===r.memoizedState&&qo(n,r,a),co(r,r.return);break;case 30:break;default:qo(n,r,a)}t=t.sibling}}function Bo(e,t){var a=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(a=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==a&&(null!=e&&e.refCount++,null!=a&&Rn(a))}function zo(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Rn(e))}function Uo(e,t,a,s){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)Wo(e,t,a,s),t=t.sibling}function Wo(e,t,a,s){var n=t.flags;switch(t.tag){case 0:case 11:case 15:Uo(e,t,a,s),2048&n&&ro(9,t);break;case 1:case 13:default:Uo(e,t,a,s);break;case 3:Uo(e,t,a,s),2048&n&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Rn(e)));break;case 12:if(2048&n){Uo(e,t,a,s),e=t.stateNode;try{var r=t.memoizedProps,i=r.id,l=r.onPostCommit;"function"===typeof l&&l(i,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(o){dd(t,t.return,o)}}else Uo(e,t,a,s);break;case 23:break;case 22:r=t.stateNode,i=t.alternate,null!==t.memoizedState?2&r._visibility?Uo(e,t,a,s):Go(e,t):2&r._visibility?Uo(e,t,a,s):(r._visibility|=2,Ho(e,t,a,s,0!==(10256&t.subtreeFlags))),2048&n&&Bo(i,t);break;case 24:Uo(e,t,a,s),2048&n&&zo(t.alternate,t)}}function Ho(e,t,a,s,n){for(n=n&&0!==(10256&t.subtreeFlags),t=t.child;null!==t;){var r=e,i=t,l=a,o=s,c=i.flags;switch(i.tag){case 0:case 11:case 15:Ho(r,i,l,o,n),ro(8,i);break;case 23:break;case 22:var d=i.stateNode;null!==i.memoizedState?2&d._visibility?Ho(r,i,l,o,n):Go(r,i):(d._visibility|=2,Ho(r,i,l,o,n)),n&&2048&c&&Bo(i.alternate,i);break;case 24:Ho(r,i,l,o,n),n&&2048&c&&zo(i.alternate,i);break;default:Ho(r,i,l,o,n)}t=t.sibling}}function Go(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var a=e,s=t,n=s.flags;switch(s.tag){case 22:Go(a,s),2048&n&&Bo(s.alternate,s);break;case 24:Go(a,s),2048&n&&zo(s.alternate,s);break;default:Go(a,s)}t=t.sibling}}var Vo=8192;function $o(e){if(e.subtreeFlags&Vo)for(e=e.child;null!==e;)Qo(e),e=e.sibling}function Qo(e){switch(e.tag){case 26:$o(e),e.flags&Vo&&null!==e.memoizedState&&function(e,t,a){if(null===Uu)throw Error(i(475));var s=Uu;if("stylesheet"===t.type&&("string"!==typeof a.media||!1!==matchMedia(a.media).matches)&&0===(4&t.state.loading)){if(null===t.instance){var n=Du(a.href),r=e.querySelector(Pu(n));if(r)return null!==(e=r._p)&&"object"===typeof e&&"function"===typeof e.then&&(s.count++,s=Hu.bind(s),e.then(s,s)),t.state.loading|=4,t.instance=r,void Ge(r);r=e.ownerDocument||e,a=Au(a),(n=wu.get(n))&&Ou(a,n),Ge(r=r.createElement("link"));var l=r;l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),eu(r,"link",a),t.instance=r}null===s.stylesheets&&(s.stylesheets=new Map),s.stylesheets.set(t,e),(e=t.state.preload)&&0===(3&t.state.loading)&&(s.count++,t=Hu.bind(s),e.addEventListener("load",t),e.addEventListener("error",t))}}(Lo,e.memoizedState,e.memoizedProps);break;case 5:default:$o(e);break;case 3:case 4:var t=Lo;Lo=Nu(e.stateNode.containerInfo),$o(e),Lo=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=Vo,Vo=16777216,$o(e),Vo=t):$o(e))}}function Yo(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Jo(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var a=0;a<t.length;a++){var s=t[a];_o=s,Ko(s,e)}Yo(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Zo(e),e=e.sibling}function Zo(e){switch(e.tag){case 0:case 11:case 15:Jo(e),2048&e.flags&&io(9,e,e.return);break;case 3:case 12:default:Jo(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,Xo(e)):Jo(e)}}function Xo(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var a=0;a<t.length;a++){var s=t[a];_o=s,Ko(s,e)}Yo(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:io(8,t,t.return),Xo(t);break;case 22:2&(a=t.stateNode)._visibility&&(a._visibility&=-3,Xo(t));break;default:Xo(t)}e=e.sibling}}function Ko(e,t){for(;null!==_o;){var a=_o;switch(a.tag){case 0:case 11:case 15:io(8,a,t);break;case 23:case 22:if(null!==a.memoizedState&&null!==a.memoizedState.cachePool){var s=a.memoizedState.cachePool.pool;null!=s&&s.refCount++}break;case 24:Rn(a.memoizedState.cache)}if(null!==(s=a.child))s.return=a,_o=s;else e:for(a=e;null!==_o;){var n=(s=_o).sibling,r=s.return;if(ko(s),s===a){_o=null;break e}if(null!==n){n.return=r,_o=n;break e}_o=r}}}var ec={getCacheForType:function(e){var t=Sn(Tn),a=t.data.get(e);return void 0===a&&(a=e(),t.data.set(e,a)),a}},tc="function"===typeof WeakMap?WeakMap:Map,ac=0,sc=null,nc=null,rc=0,ic=0,lc=null,oc=!1,cc=!1,dc=!1,uc=0,mc=0,pc=0,hc=0,xc=0,fc=0,gc=0,yc=null,bc=null,vc=!1,jc=0,wc=1/0,_c=null,Nc=null,kc=0,Sc=null,Cc=null,Ec=0,Dc=0,Pc=null,Ac=null,Tc=0,Lc=null;function Rc(){if(0!==(2&ac)&&0!==rc)return rc&-rc;if(null!==R.T){return 0!==Mn?Mn:Dd()}return Pe()}function Fc(){0===fc&&(fc=0===(536870912&rc)||nn?we():536870912);var e=sl.current;return null!==e&&(e.flags|=32),fc}function Oc(e,t,a){(e!==sc||2!==ic&&9!==ic)&&null===e.cancelPendingCommit||(Wc(e,0),Bc(e,rc,fc,!1)),ke(e,a),0!==(2&ac)&&e===sc||(e===sc&&(0===(2&ac)&&(hc|=a),4===mc&&Bc(e,rc,fc,!1)),wd(e))}function Mc(e,t,a){if(0!==(6&ac))throw Error(i(327));for(var s=!a&&0===(124&t)&&0===(t&e.expiredLanes)||ve(e,t),n=s?function(e,t){var a=ac;ac|=2;var s=Gc(),n=Vc();sc!==e||rc!==t?(_c=null,wc=te()+500,Wc(e,t)):cc=ve(e,t);e:for(;;)try{if(0!==ic&&null!==nc){t=nc;var r=lc;t:switch(ic){case 1:ic=0,lc=null,Kc(e,t,r,1);break;case 2:case 9:if(Yn(r)){ic=0,lc=null,Xc(t);break}t=function(){2!==ic&&9!==ic||sc!==e||(ic=7),wd(e)},r.then(t,t);break e;case 3:ic=7;break e;case 4:ic=5;break e;case 7:Yn(r)?(ic=0,lc=null,Xc(t)):(ic=0,lc=null,Kc(e,t,r,7));break;case 5:var l=null;switch(nc.tag){case 26:l=nc.memoizedState;case 5:case 27:var o=nc;if(!l||zu(l)){ic=0,lc=null;var c=o.sibling;if(null!==c)nc=c;else{var d=o.return;null!==d?(nc=d,ed(d)):nc=null}break t}}ic=0,lc=null,Kc(e,t,r,5);break;case 6:ic=0,lc=null,Kc(e,t,r,6);break;case 8:Uc(),mc=6;break e;default:throw Error(i(462))}}Jc();break}catch(u){Hc(e,u)}return yn=gn=null,R.H=s,R.A=n,ac=a,null!==nc?0:(sc=null,rc=0,Cs(),mc)}(e,t):Qc(e,t,!0),r=s;;){if(0===n){cc&&!s&&Bc(e,t,0,!1);break}if(a=e.current.alternate,!r||qc(a)){if(2===n){if(r=t,e.errorRecoveryDisabledLanes&r)var l=0;else l=0!==(l=-536870913&e.pendingLanes)?l:536870912&l?536870912:0;if(0!==l){t=l;e:{var o=e;n=yc;var c=o.current.memoizedState.isDehydrated;if(c&&(Wc(o,l).flags|=256),2!==(l=Qc(o,l,!1))){if(dc&&!c){o.errorRecoveryDisabledLanes|=r,hc|=r,n=4;break e}r=bc,bc=n,null!==r&&(null===bc?bc=r:bc.push.apply(bc,r))}n=l}if(r=!1,2!==n)continue}}if(1===n){Wc(e,0),Bc(e,t,0,!0);break}e:{switch(s=e,r=n){case 0:case 1:throw Error(i(345));case 4:if((4194048&t)!==t)break;case 6:Bc(s,t,fc,!oc);break e;case 2:bc=null;break;case 3:case 5:break;default:throw Error(i(329))}if((62914560&t)===t&&10<(n=jc+300-te())){if(Bc(s,t,fc,!oc),0!==be(s,0,!0))break e;s.timeoutHandle=ou(Ic.bind(null,s,a,bc,_c,vc,t,fc,hc,gc,oc,r,2,-0,0),n)}else Ic(s,a,bc,_c,vc,t,fc,hc,gc,oc,r,0,-0,0)}break}n=Qc(e,t,!1),r=!1}wd(e)}function Ic(e,t,a,s,n,r,l,o,c,d,u,m,p,h){if(e.timeoutHandle=-1,(8192&(m=t.subtreeFlags)||16785408===(16785408&m))&&(Uu={stylesheets:null,count:0,unsuspend:Wu},Qo(t),null!==(m=function(){if(null===Uu)throw Error(i(475));var e=Uu;return e.stylesheets&&0===e.count&&Vu(e,e.stylesheets),0<e.count?function(t){var a=setTimeout(function(){if(e.stylesheets&&Vu(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(a)}}:null}())))return e.cancelPendingCommit=m(ad.bind(null,e,t,r,a,s,n,l,o,c,u,1,p,h)),void Bc(e,r,l,!d);ad(e,t,r,a,s,n,l,o,c)}function qc(e){for(var t=e;;){var a=t.tag;if((0===a||11===a||15===a)&&16384&t.flags&&(null!==(a=t.updateQueue)&&null!==(a=a.stores)))for(var s=0;s<a.length;s++){var n=a[s],r=n.getSnapshot;n=n.value;try{if(!Qa(r(),n))return!1}catch(i){return!1}}if(a=t.child,16384&t.subtreeFlags&&null!==a)a.return=t,t=a;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Bc(e,t,a,s){t&=~xc,t&=~hc,e.suspendedLanes|=t,e.pingedLanes&=~t,s&&(e.warmLanes|=t),s=e.expirationTimes;for(var n=t;0<n;){var r=31-pe(n),i=1<<r;s[r]=-1,n&=~i}0!==a&&Se(e,a,t)}function zc(){return 0!==(6&ac)||(_d(0,!1),!1)}function Uc(){if(null!==nc){if(0===ic)var e=nc.return;else yn=gn=null,Mr(e=nc),Qi=null,Yi=0,e=nc;for(;null!==e;)no(e.alternate,e),e=e.return;nc=null}}function Wc(e,t){var a=e.timeoutHandle;-1!==a&&(e.timeoutHandle=-1,cu(a)),null!==(a=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,a()),Uc(),sc=e,nc=a=Ms(e.current,null),rc=t,ic=0,lc=null,oc=!1,cc=ve(e,t),dc=!1,gc=fc=xc=hc=pc=mc=0,bc=yc=null,vc=!1,0!==(8&t)&&(t|=32&t);var s=e.entangledLanes;if(0!==s)for(e=e.entanglements,s&=t;0<s;){var n=31-pe(s),r=1<<n;t|=e[n],s&=~r}return uc=t,Cs(),a}function Hc(e,t){br=null,R.H=Hi,t===Gn||t===$n?(t=Kn(),ic=3):t===Vn?(t=Kn(),ic=4):ic=t===kl?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,lc=t,null===nc&&(mc=1,vl(e,_s(t,e.current)))}function Gc(){var e=R.H;return R.H=Hi,null===e?Hi:e}function Vc(){var e=R.A;return R.A=ec,e}function $c(){mc=4,oc||(4194048&rc)!==rc&&null!==sl.current||(cc=!0),0===(134217727&pc)&&0===(134217727&hc)||null===sc||Bc(sc,rc,fc,!1)}function Qc(e,t,a){var s=ac;ac|=2;var n=Gc(),r=Vc();sc===e&&rc===t||(_c=null,Wc(e,t)),t=!1;var i=mc;e:for(;;)try{if(0!==ic&&null!==nc){var l=nc,o=lc;switch(ic){case 8:Uc(),i=6;break e;case 3:case 2:case 9:case 6:null===sl.current&&(t=!0);var c=ic;if(ic=0,lc=null,Kc(e,l,o,c),a&&cc){i=0;break e}break;default:c=ic,ic=0,lc=null,Kc(e,l,o,c)}}Yc(),i=mc;break}catch(d){Hc(e,d)}return t&&e.shellSuspendCounter++,yn=gn=null,ac=s,R.H=n,R.A=r,null===nc&&(sc=null,rc=0,Cs()),i}function Yc(){for(;null!==nc;)Zc(nc)}function Jc(){for(;null!==nc&&!K();)Zc(nc)}function Zc(e){var t=Jl(e.alternate,e,uc);e.memoizedProps=e.pendingProps,null===t?ed(e):nc=t}function Xc(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=Fl(a,t,t.pendingProps,t.type,void 0,rc);break;case 11:t=Fl(a,t,t.pendingProps,t.type.render,t.ref,rc);break;case 5:Mr(t);default:no(a,t),t=Jl(a,t=nc=Is(t,uc),uc)}e.memoizedProps=e.pendingProps,null===t?ed(e):nc=t}function Kc(e,t,a,s){yn=gn=null,Mr(t),Qi=null,Yi=0;var n=t.return;try{if(function(e,t,a,s,n){if(a.flags|=32768,null!==s&&"object"===typeof s&&"function"===typeof s.then){if(null!==(t=a.alternate)&&_n(t,a,n,!0),null!==(a=sl.current)){switch(a.tag){case 13:return null===nl?$c():null===a.alternate&&0===mc&&(mc=3),a.flags&=-257,a.flags|=65536,a.lanes=n,s===Qn?a.flags|=16384:(null===(t=a.updateQueue)?a.updateQueue=new Set([s]):t.add(s),ud(e,s,n)),!1;case 22:return a.flags|=65536,s===Qn?a.flags|=16384:(null===(t=a.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([s])},a.updateQueue=t):null===(a=t.retryQueue)?t.retryQueue=new Set([s]):a.add(s),ud(e,s,n)),!1}throw Error(i(435,a.tag))}return ud(e,s,n),$c(),!1}if(nn)return null!==(t=sl.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=n,s!==on&&xn(_s(e=Error(i(422),{cause:s}),a))):(s!==on&&xn(_s(t=Error(i(423),{cause:s}),a)),(e=e.current.alternate).flags|=65536,n&=-n,e.lanes|=n,s=_s(s,a),lr(e,n=wl(e.stateNode,s,n)),4!==mc&&(mc=2)),!1;var r=Error(i(520),{cause:s});if(r=_s(r,a),null===yc?yc=[r]:yc.push(r),4!==mc&&(mc=2),null===t)return!0;s=_s(s,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=n&-n,a.lanes|=e,lr(a,e=wl(a.stateNode,s,e)),!1;case 1:if(t=a.type,r=a.stateNode,0===(128&a.flags)&&("function"===typeof t.getDerivedStateFromError||null!==r&&"function"===typeof r.componentDidCatch&&(null===Nc||!Nc.has(r))))return a.flags|=65536,n&=-n,a.lanes|=n,Nl(n=_l(n),e,a,s),lr(a,n),!1}a=a.return}while(null!==a);return!1}(e,n,t,a,rc))return mc=1,vl(e,_s(a,e.current)),void(nc=null)}catch(r){if(null!==n)throw nc=n,r;return mc=1,vl(e,_s(a,e.current)),void(nc=null)}32768&t.flags?(nn||1===s?e=!0:cc||0!==(536870912&rc)?e=!1:(oc=e=!0,(2===s||9===s||3===s||6===s)&&(null!==(s=sl.current)&&13===s.tag&&(s.flags|=16384))),td(t,e)):ed(t)}function ed(e){var t=e;do{if(0!==(32768&t.flags))return void td(t,oc);e=t.return;var a=ao(t.alternate,t,uc);if(null!==a)return void(nc=a);if(null!==(t=t.sibling))return void(nc=t);nc=t=e}while(null!==t);0===mc&&(mc=5)}function td(e,t){do{var a=so(e.alternate,e);if(null!==a)return a.flags&=32767,void(nc=a);if(null!==(a=e.return)&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&null!==(e=e.sibling))return void(nc=e);nc=e=a}while(null!==e);mc=6,nc=null}function ad(e,t,a,s,n,r,l,o,c){e.cancelPendingCommit=null;do{ld()}while(0!==kc);if(0!==(6&ac))throw Error(i(327));if(null!==t){if(t===e.current)throw Error(i(177));if(r=t.lanes|t.childLanes,function(e,t,a,s,n,r){var i=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var l=e.entanglements,o=e.expirationTimes,c=e.hiddenUpdates;for(a=i&~a;0<a;){var d=31-pe(a),u=1<<d;l[d]=0,o[d]=-1;var m=c[d];if(null!==m)for(c[d]=null,d=0;d<m.length;d++){var p=m[d];null!==p&&(p.lane&=-536870913)}a&=~u}0!==s&&Se(e,s,0),0!==r&&0===n&&0!==e.tag&&(e.suspendedLanes|=r&~(i&~t))}(e,a,r|=Ss,l,o,c),e===sc&&(nc=sc=null,rc=0),Cc=t,Sc=e,Ec=a,Dc=r,Pc=n,Ac=s,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,Z(re,function(){return od(),null})):(e.callbackNode=null,e.callbackPriority=0),s=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||s){s=R.T,R.T=null,n=F.p,F.p=2,l=ac,ac|=4;try{!function(e,t){if(e=e.containerInfo,tu=am,es(e=Ka(e))){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{var s=(a=(a=e.ownerDocument)&&a.defaultView||window).getSelection&&a.getSelection();if(s&&0!==s.rangeCount){a=s.anchorNode;var n=s.anchorOffset,r=s.focusNode;s=s.focusOffset;try{a.nodeType,r.nodeType}catch(f){a=null;break e}var l=0,o=-1,c=-1,d=0,u=0,m=e,p=null;t:for(;;){for(var h;m!==a||0!==n&&3!==m.nodeType||(o=l+n),m!==r||0!==s&&3!==m.nodeType||(c=l+s),3===m.nodeType&&(l+=m.nodeValue.length),null!==(h=m.firstChild);)p=m,m=h;for(;;){if(m===e)break t;if(p===a&&++d===n&&(o=l),p===r&&++u===s&&(c=l),null!==(h=m.nextSibling))break;p=(m=p).parentNode}m=h}a=-1===o||-1===c?null:{start:o,end:c}}else a=null}a=a||{start:0,end:0}}else a=null;for(au={focusedElem:e,selectionRange:a},am=!1,_o=t;null!==_o;)if(e=(t=_o).child,0!==(1024&t.subtreeFlags)&&null!==e)e.return=t,_o=e;else for(;null!==_o;){switch(r=(t=_o).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==r){e=void 0,a=t,n=r.memoizedProps,r=r.memoizedState,s=a.stateNode;try{var x=xl(a.type,n,(a.elementType,a.type));e=s.getSnapshotBeforeUpdate(x,r),s.__reactInternalSnapshotBeforeUpdate=e}catch(g){dd(a,a.return,g)}}break;case 3:if(0!==(1024&e))if(9===(a=(e=t.stateNode.containerInfo).nodeType))xu(e);else if(1===a)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":xu(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(i(163))}if(null!==(e=t.sibling)){e.return=t.return,_o=e;break}_o=t.return}}(e,t)}finally{ac=l,F.p=n,R.T=s}}kc=1,sd(),nd(),rd()}}function sd(){if(1===kc){kc=0;var e=Sc,t=Cc,a=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||a){a=R.T,R.T=null;var s=F.p;F.p=2;var n=ac;ac|=4;try{Ro(t,e);var r=au,i=Ka(e.containerInfo),l=r.focusedElem,o=r.selectionRange;if(i!==l&&l&&l.ownerDocument&&Xa(l.ownerDocument.documentElement,l)){if(null!==o&&es(l)){var c=o.start,d=o.end;if(void 0===d&&(d=c),"selectionStart"in l)l.selectionStart=c,l.selectionEnd=Math.min(d,l.value.length);else{var u=l.ownerDocument||document,m=u&&u.defaultView||window;if(m.getSelection){var p=m.getSelection(),h=l.textContent.length,x=Math.min(o.start,h),f=void 0===o.end?x:Math.min(o.end,h);!p.extend&&x>f&&(i=f,f=x,x=i);var g=Za(l,x),y=Za(l,f);if(g&&y&&(1!==p.rangeCount||p.anchorNode!==g.node||p.anchorOffset!==g.offset||p.focusNode!==y.node||p.focusOffset!==y.offset)){var b=u.createRange();b.setStart(g.node,g.offset),p.removeAllRanges(),x>f?(p.addRange(b),p.extend(y.node,y.offset)):(b.setEnd(y.node,y.offset),p.addRange(b))}}}}for(u=[],p=l;p=p.parentNode;)1===p.nodeType&&u.push({element:p,left:p.scrollLeft,top:p.scrollTop});for("function"===typeof l.focus&&l.focus(),l=0;l<u.length;l++){var v=u[l];v.element.scrollLeft=v.left,v.element.scrollTop=v.top}}am=!!tu,au=tu=null}finally{ac=n,F.p=s,R.T=a}}e.current=t,kc=2}}function nd(){if(2===kc){kc=0;var e=Sc,t=Cc,a=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||a){a=R.T,R.T=null;var s=F.p;F.p=2;var n=ac;ac|=4;try{No(e,t.alternate,t)}finally{ac=n,F.p=s,R.T=a}}kc=3}}function rd(){if(4===kc||3===kc){kc=0,ee();var e=Sc,t=Cc,a=Ec,s=Ac;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?kc=5:(kc=0,Cc=Sc=null,id(e,e.pendingLanes));var n=e.pendingLanes;if(0===n&&(Nc=null),De(a),t=t.stateNode,ue&&"function"===typeof ue.onCommitFiberRoot)try{ue.onCommitFiberRoot(de,t,void 0,128===(128&t.current.flags))}catch(o){}if(null!==s){t=R.T,n=F.p,F.p=2,R.T=null;try{for(var r=e.onRecoverableError,i=0;i<s.length;i++){var l=s[i];r(l.value,{componentStack:l.stack})}}finally{R.T=t,F.p=n}}0!==(3&Ec)&&ld(),wd(e),n=e.pendingLanes,0!==(4194090&a)&&0!==(42&n)?e===Lc?Tc++:(Tc=0,Lc=e):Tc=0,_d(0,!1)}}function id(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Rn(t)))}function ld(e){return sd(),nd(),rd(),od()}function od(){if(5!==kc)return!1;var e=Sc,t=Dc;Dc=0;var a=De(Ec),s=R.T,n=F.p;try{F.p=32>a?32:a,R.T=null,a=Pc,Pc=null;var r=Sc,l=Ec;if(kc=0,Cc=Sc=null,Ec=0,0!==(6&ac))throw Error(i(331));var o=ac;if(ac|=4,Zo(r.current),Wo(r,r.current,l,a),ac=o,_d(0,!1),ue&&"function"===typeof ue.onPostCommitFiberRoot)try{ue.onPostCommitFiberRoot(de,r)}catch(c){}return!0}finally{F.p=n,R.T=s,id(e,t)}}function cd(e,t,a){t=_s(a,t),null!==(e=rr(e,t=wl(e.stateNode,t,2),2))&&(ke(e,2),wd(e))}function dd(e,t,a){if(3===e.tag)cd(e,e,a);else for(;null!==t;){if(3===t.tag){cd(t,e,a);break}if(1===t.tag){var s=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof s.componentDidCatch&&(null===Nc||!Nc.has(s))){e=_s(a,e),null!==(s=rr(t,a=_l(2),2))&&(Nl(a,s,t,e),ke(s,2),wd(s));break}}t=t.return}}function ud(e,t,a){var s=e.pingCache;if(null===s){s=e.pingCache=new tc;var n=new Set;s.set(t,n)}else void 0===(n=s.get(t))&&(n=new Set,s.set(t,n));n.has(a)||(dc=!0,n.add(a),e=md.bind(null,e,t,a),t.then(e,e))}function md(e,t,a){var s=e.pingCache;null!==s&&s.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,sc===e&&(rc&a)===a&&(4===mc||3===mc&&(62914560&rc)===rc&&300>te()-jc?0===(2&ac)&&Wc(e,0):xc|=a,gc===rc&&(gc=0)),wd(e)}function pd(e,t){0===t&&(t=_e()),null!==(e=Ps(e,t))&&(ke(e,t),wd(e))}function hd(e){var t=e.memoizedState,a=0;null!==t&&(a=t.retryLane),pd(e,a)}function xd(e,t){var a=0;switch(e.tag){case 13:var s=e.stateNode,n=e.memoizedState;null!==n&&(a=n.retryLane);break;case 19:s=e.stateNode;break;case 22:s=e.stateNode._retryCache;break;default:throw Error(i(314))}null!==s&&s.delete(t),pd(e,a)}var fd=null,gd=null,yd=!1,bd=!1,vd=!1,jd=0;function wd(e){e!==gd&&null===e.next&&(null===gd?fd=gd=e:gd=gd.next=e),bd=!0,yd||(yd=!0,uu(function(){0!==(6&ac)?Z(se,Nd):kd()}))}function _d(e,t){if(!vd&&bd){vd=!0;do{for(var a=!1,s=fd;null!==s;){if(!t)if(0!==e){var n=s.pendingLanes;if(0===n)var r=0;else{var i=s.suspendedLanes,l=s.pingedLanes;r=(1<<31-pe(42|e)+1)-1,r=201326741&(r&=n&~(i&~l))?201326741&r|1:r?2|r:0}0!==r&&(a=!0,Ed(s,r))}else r=rc,0===(3&(r=be(s,s===sc?r:0,null!==s.cancelPendingCommit||-1!==s.timeoutHandle)))||ve(s,r)||(a=!0,Ed(s,r));s=s.next}}while(a);vd=!1}}function Nd(){kd()}function kd(){bd=yd=!1;var e=0;0!==jd&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==lu&&(lu=e,!0);return lu=null,!1}()&&(e=jd),jd=0);for(var t=te(),a=null,s=fd;null!==s;){var n=s.next,r=Sd(s,t);0===r?(s.next=null,null===a?fd=n:a.next=n,null===n&&(gd=a)):(a=s,(0!==e||0!==(3&r))&&(bd=!0)),s=n}_d(e,!1)}function Sd(e,t){for(var a=e.suspendedLanes,s=e.pingedLanes,n=e.expirationTimes,r=-62914561&e.pendingLanes;0<r;){var i=31-pe(r),l=1<<i,o=n[i];-1===o?0!==(l&a)&&0===(l&s)||(n[i]=je(l,t)):o<=t&&(e.expiredLanes|=l),r&=~l}if(a=rc,a=be(e,e===(t=sc)?a:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),s=e.callbackNode,0===a||e===t&&(2===ic||9===ic)||null!==e.cancelPendingCommit)return null!==s&&null!==s&&X(s),e.callbackNode=null,e.callbackPriority=0;if(0===(3&a)||ve(e,a)){if((t=a&-a)===e.callbackPriority)return t;switch(null!==s&&X(s),De(a)){case 2:case 8:a=ne;break;case 32:default:a=re;break;case 268435456:a=le}return s=Cd.bind(null,e),a=Z(a,s),e.callbackPriority=t,e.callbackNode=a,t}return null!==s&&null!==s&&X(s),e.callbackPriority=2,e.callbackNode=null,2}function Cd(e,t){if(0!==kc&&5!==kc)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(ld()&&e.callbackNode!==a)return null;var s=rc;return 0===(s=be(e,e===sc?s:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Mc(e,s,t),Sd(e,te()),null!=e.callbackNode&&e.callbackNode===a?Cd.bind(null,e):null)}function Ed(e,t){if(ld())return null;Mc(e,t,!0)}function Dd(){return 0===jd&&(jd=we()),jd}function Pd(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:Dt(""+e)}function Ad(e,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,e.id&&a.setAttribute("form",e.id),t.parentNode.insertBefore(a,t),e=new FormData(e),a.parentNode.removeChild(a),e}for(var Td=0;Td<vs.length;Td++){var Ld=vs[Td];js(Ld.toLowerCase(),"on"+(Ld[0].toUpperCase()+Ld.slice(1)))}js(ms,"onAnimationEnd"),js(ps,"onAnimationIteration"),js(hs,"onAnimationStart"),js("dblclick","onDoubleClick"),js("focusin","onFocus"),js("focusout","onBlur"),js(xs,"onTransitionRun"),js(fs,"onTransitionStart"),js(gs,"onTransitionCancel"),js(ys,"onTransitionEnd"),Ye("onMouseEnter",["mouseout","mouseover"]),Ye("onMouseLeave",["mouseout","mouseover"]),Ye("onPointerEnter",["pointerout","pointerover"]),Ye("onPointerLeave",["pointerout","pointerover"]),Qe("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Qe("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Qe("onBeforeInput",["compositionend","keypress","textInput","paste"]),Qe("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Qe("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Qe("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fd=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Rd));function Od(e,t){t=0!==(4&t);for(var a=0;a<e.length;a++){var s=e[a],n=s.event;s=s.listeners;e:{var r=void 0;if(t)for(var i=s.length-1;0<=i;i--){var l=s[i],o=l.instance,c=l.currentTarget;if(l=l.listener,o!==r&&n.isPropagationStopped())break e;r=l,n.currentTarget=c;try{r(n)}catch(d){fl(d)}n.currentTarget=null,r=o}else for(i=0;i<s.length;i++){if(o=(l=s[i]).instance,c=l.currentTarget,l=l.listener,o!==r&&n.isPropagationStopped())break e;r=l,n.currentTarget=c;try{r(n)}catch(d){fl(d)}n.currentTarget=null,r=o}}}}function Md(e,t){var a=t[Fe];void 0===a&&(a=t[Fe]=new Set);var s=e+"__bubble";a.has(s)||(zd(t,e,2,!1),a.add(s))}function Id(e,t,a){var s=0;t&&(s|=4),zd(a,e,s,t)}var qd="_reactListening"+Math.random().toString(36).slice(2);function Bd(e){if(!e[qd]){e[qd]=!0,Ve.forEach(function(t){"selectionchange"!==t&&(Fd.has(t)||Id(t,!1,e),Id(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[qd]||(t[qd]=!0,Id("selectionchange",!1,t))}}function zd(e,t,a,s){switch(cm(t)){case 2:var n=sm;break;case 8:n=nm;break;default:n=rm}a=n.bind(null,t,a,e),n=void 0,!qt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(n=!0),s?void 0!==n?e.addEventListener(t,a,{capture:!0,passive:n}):e.addEventListener(t,a,!0):void 0!==n?e.addEventListener(t,a,{passive:n}):e.addEventListener(t,a,!1)}function Ud(e,t,a,s,n){var r=s;if(0===(1&t)&&0===(2&t)&&null!==s)e:for(;;){if(null===s)return;var i=s.tag;if(3===i||4===i){var l=s.stateNode.containerInfo;if(l===n)break;if(4===i)for(i=s.return;null!==i;){var c=i.tag;if((3===c||4===c)&&i.stateNode.containerInfo===n)return;i=i.return}for(;null!==l;){if(null===(i=ze(l)))return;if(5===(c=i.tag)||6===c||26===c||27===c){s=r=i;continue e}l=l.parentNode}}s=s.return}Ot(function(){var s=r,n=At(a),i=[];e:{var l=bs.get(e);if(void 0!==l){var c=Kt,d=e;switch(e){case"keypress":if(0===Gt(a))break e;case"keydown":case"keyup":c=ha;break;case"focusin":d="focus",c=ra;break;case"focusout":d="blur",c=ra;break;case"beforeblur":case"afterblur":c=ra;break;case"click":if(2===a.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=sa;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=na;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=fa;break;case ms:case ps:case hs:c=ia;break;case ys:c=ga;break;case"scroll":case"scrollend":c=ta;break;case"wheel":c=ya;break;case"copy":case"cut":case"paste":c=la;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=xa;break;case"toggle":case"beforetoggle":c=ba}var u=0!==(4&t),m=!u&&("scroll"===e||"scrollend"===e),p=u?null!==l?l+"Capture":null:l;u=[];for(var h,x=s;null!==x;){var f=x;if(h=f.stateNode,5!==(f=f.tag)&&26!==f&&27!==f||null===h||null===p||null!=(f=Mt(x,p))&&u.push(Wd(x,f,h)),m)break;x=x.return}0<u.length&&(l=new c(l,d,null,a,n),i.push({event:l,listeners:u}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(l="mouseover"===e||"pointerover"===e)||a===Pt||!(d=a.relatedTarget||a.fromElement)||!ze(d)&&!d[Re])&&(c||l)&&(l=n.window===n?n:(l=n.ownerDocument)?l.defaultView||l.parentWindow:window,c?(c=s,null!==(d=(d=a.relatedTarget||a.toElement)?ze(d):null)&&(m=o(d),u=d.tag,d!==m||5!==u&&27!==u&&6!==u)&&(d=null)):(c=null,d=s),c!==d)){if(u=sa,f="onMouseLeave",p="onMouseEnter",x="mouse","pointerout"!==e&&"pointerover"!==e||(u=xa,f="onPointerLeave",p="onPointerEnter",x="pointer"),m=null==c?l:We(c),h=null==d?l:We(d),(l=new u(f,x+"leave",c,a,n)).target=m,l.relatedTarget=h,f=null,ze(n)===s&&((u=new u(p,x+"enter",d,a,n)).target=h,u.relatedTarget=m,f=u),m=f,c&&d)e:{for(p=d,x=0,h=u=c;h;h=Gd(h))x++;for(h=0,f=p;f;f=Gd(f))h++;for(;0<x-h;)u=Gd(u),x--;for(;0<h-x;)p=Gd(p),h--;for(;x--;){if(u===p||null!==p&&u===p.alternate)break e;u=Gd(u),p=Gd(p)}u=null}else u=null;null!==c&&Vd(i,l,c,u,!1),null!==d&&null!==m&&Vd(i,m,d,u,!0)}if("select"===(c=(l=s?We(s):window).nodeName&&l.nodeName.toLowerCase())||"input"===c&&"file"===l.type)var g=Ma;else if(Aa(l))if(Ia)g=$a;else{g=Ga;var y=Ha}else!(c=l.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==l.type&&"radio"!==l.type?s&&St(s.elementType)&&(g=Ma):g=Va;switch(g&&(g=g(e,s))?Ta(i,g,a,n):(y&&y(e,l,s),"focusout"===e&&s&&"number"===l.type&&null!=s.memoizedProps.value&&yt(l,"number",l.value)),y=s?We(s):window,e){case"focusin":(Aa(y)||"true"===y.contentEditable)&&(as=y,ss=s,ns=null);break;case"focusout":ns=ss=as=null;break;case"mousedown":rs=!0;break;case"contextmenu":case"mouseup":case"dragend":rs=!1,is(i,a,n);break;case"selectionchange":if(ts)break;case"keydown":case"keyup":is(i,a,n)}var b;if(ja)e:{switch(e){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Da?Ca(e,a)&&(v="onCompositionEnd"):"keydown"===e&&229===a.keyCode&&(v="onCompositionStart");v&&(Na&&"ko"!==a.locale&&(Da||"onCompositionStart"!==v?"onCompositionEnd"===v&&Da&&(b=Ht()):(Ut="value"in(zt=n)?zt.value:zt.textContent,Da=!0)),0<(y=Hd(s,v)).length&&(v=new oa(v,e,null,a,n),i.push({event:v,listeners:y}),b?v.data=b:null!==(b=Ea(a))&&(v.data=b))),(b=_a?function(e,t){switch(e){case"compositionend":return Ea(t);case"keypress":return 32!==t.which?null:(Sa=!0,ka);case"textInput":return(e=t.data)===ka&&Sa?null:e;default:return null}}(e,a):function(e,t){if(Da)return"compositionend"===e||!ja&&Ca(e,t)?(e=Ht(),Wt=Ut=zt=null,Da=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Na&&"ko"!==t.locale?null:t.data}}(e,a))&&(0<(v=Hd(s,"onBeforeInput")).length&&(y=new oa("onBeforeInput","beforeinput",null,a,n),i.push({event:y,listeners:v}),y.data=b)),function(e,t,a,s,n){if("submit"===t&&a&&a.stateNode===n){var r=Pd((n[Le]||null).action),i=s.submitter;i&&null!==(t=(t=i[Le]||null)?Pd(t.formAction):i.getAttribute("formAction"))&&(r=t,i=null);var l=new Kt("action","action",null,s,n);e.push({event:l,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(0!==jd){var e=i?Ad(n,i):new FormData(n);Pi(a,{pending:!0,data:e,method:n.method,action:r},null,e)}}else"function"===typeof r&&(l.preventDefault(),e=i?Ad(n,i):new FormData(n),Pi(a,{pending:!0,data:e,method:n.method,action:r},r,e))},currentTarget:n}]})}}(i,e,s,a,n)}Od(i,t)})}function Wd(e,t,a){return{instance:e,listener:t,currentTarget:a}}function Hd(e,t){for(var a=t+"Capture",s=[];null!==e;){var n=e,r=n.stateNode;if(5!==(n=n.tag)&&26!==n&&27!==n||null===r||(null!=(n=Mt(e,a))&&s.unshift(Wd(e,n,r)),null!=(n=Mt(e,t))&&s.push(Wd(e,n,r))),3===e.tag)return s;e=e.return}return[]}function Gd(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function Vd(e,t,a,s,n){for(var r=t._reactName,i=[];null!==a&&a!==s;){var l=a,o=l.alternate,c=l.stateNode;if(l=l.tag,null!==o&&o===s)break;5!==l&&26!==l&&27!==l||null===c||(o=c,n?null!=(c=Mt(a,r))&&i.unshift(Wd(a,c,o)):n||null!=(c=Mt(a,r))&&i.push(Wd(a,c,o))),a=a.return}0!==i.length&&e.push({event:t,listeners:i})}var $d=/\r\n?/g,Qd=/\u0000|\uFFFD/g;function Yd(e){return("string"===typeof e?e:""+e).replace($d,"\n").replace(Qd,"")}function Jd(e,t){return t=Yd(t),Yd(e)===t}function Zd(){}function Xd(e,t,a,s,n,r){switch(a){case"children":"string"===typeof s?"body"===t||"textarea"===t&&""===s||wt(e,s):("number"===typeof s||"bigint"===typeof s)&&"body"!==t&&wt(e,""+s);break;case"className":at(e,"class",s);break;case"tabIndex":at(e,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":at(e,a,s);break;case"style":kt(e,s,r);break;case"data":if("object"!==t){at(e,"data",s);break}case"src":case"href":if(""===s&&("a"!==t||"href"!==a)){e.removeAttribute(a);break}if(null==s||"function"===typeof s||"symbol"===typeof s||"boolean"===typeof s){e.removeAttribute(a);break}s=Dt(""+s),e.setAttribute(a,s);break;case"action":case"formAction":if("function"===typeof s){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof r&&("formAction"===a?("input"!==t&&Xd(e,t,"name",n.name,n,null),Xd(e,t,"formEncType",n.formEncType,n,null),Xd(e,t,"formMethod",n.formMethod,n,null),Xd(e,t,"formTarget",n.formTarget,n,null)):(Xd(e,t,"encType",n.encType,n,null),Xd(e,t,"method",n.method,n,null),Xd(e,t,"target",n.target,n,null))),null==s||"symbol"===typeof s||"boolean"===typeof s){e.removeAttribute(a);break}s=Dt(""+s),e.setAttribute(a,s);break;case"onClick":null!=s&&(e.onclick=Zd);break;case"onScroll":null!=s&&Md("scroll",e);break;case"onScrollEnd":null!=s&&Md("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=s){if("object"!==typeof s||!("__html"in s))throw Error(i(61));if(null!=(a=s.__html)){if(null!=n.children)throw Error(i(60));e.innerHTML=a}}break;case"multiple":e.multiple=s&&"function"!==typeof s&&"symbol"!==typeof s;break;case"muted":e.muted=s&&"function"!==typeof s&&"symbol"!==typeof s;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==s||"function"===typeof s||"boolean"===typeof s||"symbol"===typeof s){e.removeAttribute("xlink:href");break}a=Dt(""+s),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=s&&"function"!==typeof s&&"symbol"!==typeof s?e.setAttribute(a,""+s):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&"function"!==typeof s&&"symbol"!==typeof s?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":!0===s?e.setAttribute(a,""):!1!==s&&null!=s&&"function"!==typeof s&&"symbol"!==typeof s?e.setAttribute(a,s):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&!isNaN(s)&&1<=s?e.setAttribute(a,s):e.removeAttribute(a);break;case"rowSpan":case"start":null==s||"function"===typeof s||"symbol"===typeof s||isNaN(s)?e.removeAttribute(a):e.setAttribute(a,s);break;case"popover":Md("beforetoggle",e),Md("toggle",e),tt(e,"popover",s);break;case"xlinkActuate":st(e,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":st(e,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":st(e,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":st(e,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":st(e,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":st(e,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":st(e,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":st(e,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":st(e,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":tt(e,"is",s);break;case"innerText":case"textContent":break;default:(!(2<a.length)||"o"!==a[0]&&"O"!==a[0]||"n"!==a[1]&&"N"!==a[1])&&tt(e,a=Ct.get(a)||a,s)}}function Kd(e,t,a,s,n,r){switch(a){case"style":kt(e,s,r);break;case"dangerouslySetInnerHTML":if(null!=s){if("object"!==typeof s||!("__html"in s))throw Error(i(61));if(null!=(a=s.__html)){if(null!=n.children)throw Error(i(60));e.innerHTML=a}}break;case"children":"string"===typeof s?wt(e,s):("number"===typeof s||"bigint"===typeof s)&&wt(e,""+s);break;case"onScroll":null!=s&&Md("scroll",e);break;case"onScrollEnd":null!=s&&Md("scrollend",e);break;case"onClick":null!=s&&(e.onclick=Zd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:$e.hasOwnProperty(a)||("o"!==a[0]||"n"!==a[1]||(n=a.endsWith("Capture"),t=a.slice(2,n?a.length-7:void 0),"function"===typeof(r=null!=(r=e[Le]||null)?r[a]:null)&&e.removeEventListener(t,r,n),"function"!==typeof s)?a in e?e[a]=s:!0===s?e.setAttribute(a,""):tt(e,a,s):("function"!==typeof r&&null!==r&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(t,s,n)))}}function eu(e,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Md("error",e),Md("load",e);var s,n=!1,r=!1;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];if(null!=l)switch(s){case"src":n=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:Xd(e,t,s,l,a,null)}}return r&&Xd(e,t,"srcSet",a.srcSet,a,null),void(n&&Xd(e,t,"src",a.src,a,null));case"input":Md("invalid",e);var o=s=l=r=null,c=null,d=null;for(n in a)if(a.hasOwnProperty(n)){var u=a[n];if(null!=u)switch(n){case"name":r=u;break;case"type":l=u;break;case"checked":c=u;break;case"defaultChecked":d=u;break;case"value":s=u;break;case"defaultValue":o=u;break;case"children":case"dangerouslySetInnerHTML":if(null!=u)throw Error(i(137,t));break;default:Xd(e,t,n,u,a,null)}}return gt(e,s,o,c,d,l,r,!1),void ut(e);case"select":for(r in Md("invalid",e),n=l=s=null,a)if(a.hasOwnProperty(r)&&null!=(o=a[r]))switch(r){case"value":s=o;break;case"defaultValue":l=o;break;case"multiple":n=o;default:Xd(e,t,r,o,a,null)}return t=s,a=l,e.multiple=!!n,void(null!=t?bt(e,!!n,t,!1):null!=a&&bt(e,!!n,a,!0));case"textarea":for(l in Md("invalid",e),s=r=n=null,a)if(a.hasOwnProperty(l)&&null!=(o=a[l]))switch(l){case"value":n=o;break;case"defaultValue":r=o;break;case"children":s=o;break;case"dangerouslySetInnerHTML":if(null!=o)throw Error(i(91));break;default:Xd(e,t,l,o,a,null)}return jt(e,n,r,s),void ut(e);case"option":for(c in a)if(a.hasOwnProperty(c)&&null!=(n=a[c]))if("selected"===c)e.selected=n&&"function"!==typeof n&&"symbol"!==typeof n;else Xd(e,t,c,n,a,null);return;case"dialog":Md("beforetoggle",e),Md("toggle",e),Md("cancel",e),Md("close",e);break;case"iframe":case"object":Md("load",e);break;case"video":case"audio":for(n=0;n<Rd.length;n++)Md(Rd[n],e);break;case"image":Md("error",e),Md("load",e);break;case"details":Md("toggle",e);break;case"embed":case"source":case"link":Md("error",e),Md("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(d in a)if(a.hasOwnProperty(d)&&null!=(n=a[d]))switch(d){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:Xd(e,t,d,n,a,null)}return;default:if(St(t)){for(u in a)a.hasOwnProperty(u)&&(void 0!==(n=a[u])&&Kd(e,t,u,n,a,void 0));return}}for(o in a)a.hasOwnProperty(o)&&(null!=(n=a[o])&&Xd(e,t,o,n,a,null))}var tu=null,au=null;function su(e){return 9===e.nodeType?e:e.ownerDocument}function nu(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ru(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function iu(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var lu=null;var ou="function"===typeof setTimeout?setTimeout:void 0,cu="function"===typeof clearTimeout?clearTimeout:void 0,du="function"===typeof Promise?Promise:void 0,uu="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof du?function(e){return du.resolve(null).then(e).catch(mu)}:ou;function mu(e){setTimeout(function(){throw e})}function pu(e){return"head"===e}function hu(e,t){var a=t,s=0,n=0;do{var r=a.nextSibling;if(e.removeChild(a),r&&8===r.nodeType)if("/$"===(a=r.data)){if(0<s&&8>s){a=s;var i=e.ownerDocument;if(1&a&&ju(i.documentElement),2&a&&ju(i.body),4&a)for(ju(a=i.head),i=a.firstChild;i;){var l=i.nextSibling,o=i.nodeName;i[qe]||"SCRIPT"===o||"STYLE"===o||"LINK"===o&&"stylesheet"===i.rel.toLowerCase()||a.removeChild(i),i=l}}if(0===n)return e.removeChild(r),void Cm(t);n--}else"$"===a||"$?"===a||"$!"===a?n++:s=a.charCodeAt(0)-48;else s=0;a=r}while(a);Cm(t)}function xu(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":xu(a),Be(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===a.rel.toLowerCase())continue}e.removeChild(a)}}function fu(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function gu(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}var yu=null;function bu(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var a=e.data;if("$"===a||"$!"===a||"$?"===a){if(0===t)return e;t--}else"/$"===a&&t++}e=e.previousSibling}return null}function vu(e,t,a){switch(t=su(a),e){case"html":if(!(e=t.documentElement))throw Error(i(452));return e;case"head":if(!(e=t.head))throw Error(i(453));return e;case"body":if(!(e=t.body))throw Error(i(454));return e;default:throw Error(i(451))}}function ju(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Be(e)}var wu=new Map,_u=new Set;function Nu(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var ku=F.d;F.d={f:function(){var e=ku.f(),t=zc();return e||t},r:function(e){var t=Ue(e);null!==t&&5===t.tag&&"form"===t.type?Ti(t):ku.r(e)},D:function(e){ku.D(e),Cu("dns-prefetch",e,null)},C:function(e,t){ku.C(e,t),Cu("preconnect",e,t)},L:function(e,t,a){ku.L(e,t,a);var s=Su;if(s&&e&&t){var n='link[rel="preload"][as="'+xt(t)+'"]';"image"===t&&a&&a.imageSrcSet?(n+='[imagesrcset="'+xt(a.imageSrcSet)+'"]',"string"===typeof a.imageSizes&&(n+='[imagesizes="'+xt(a.imageSizes)+'"]')):n+='[href="'+xt(e)+'"]';var r=n;switch(t){case"style":r=Du(e);break;case"script":r=Tu(e)}wu.has(r)||(e=m({rel:"preload",href:"image"===t&&a&&a.imageSrcSet?void 0:e,as:t},a),wu.set(r,e),null!==s.querySelector(n)||"style"===t&&s.querySelector(Pu(r))||"script"===t&&s.querySelector(Lu(r))||(eu(t=s.createElement("link"),"link",e),Ge(t),s.head.appendChild(t)))}},m:function(e,t){ku.m(e,t);var a=Su;if(a&&e){var s=t&&"string"===typeof t.as?t.as:"script",n='link[rel="modulepreload"][as="'+xt(s)+'"][href="'+xt(e)+'"]',r=n;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":r=Tu(e)}if(!wu.has(r)&&(e=m({rel:"modulepreload",href:e},t),wu.set(r,e),null===a.querySelector(n))){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Lu(r)))return}eu(s=a.createElement("link"),"link",e),Ge(s),a.head.appendChild(s)}}},X:function(e,t){ku.X(e,t);var a=Su;if(a&&e){var s=He(a).hoistableScripts,n=Tu(e),r=s.get(n);r||((r=a.querySelector(Lu(n)))||(e=m({src:e,async:!0},t),(t=wu.get(n))&&Mu(e,t),Ge(r=a.createElement("script")),eu(r,"link",e),a.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},s.set(n,r))}},S:function(e,t,a){ku.S(e,t,a);var s=Su;if(s&&e){var n=He(s).hoistableStyles,r=Du(e);t=t||"default";var i=n.get(r);if(!i){var l={loading:0,preload:null};if(i=s.querySelector(Pu(r)))l.loading=5;else{e=m({rel:"stylesheet",href:e,"data-precedence":t},a),(a=wu.get(r))&&Ou(e,a);var o=i=s.createElement("link");Ge(o),eu(o,"link",e),o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),o.addEventListener("load",function(){l.loading|=1}),o.addEventListener("error",function(){l.loading|=2}),l.loading|=4,Fu(i,t,s)}i={type:"stylesheet",instance:i,count:1,state:l},n.set(r,i)}}},M:function(e,t){ku.M(e,t);var a=Su;if(a&&e){var s=He(a).hoistableScripts,n=Tu(e),r=s.get(n);r||((r=a.querySelector(Lu(n)))||(e=m({src:e,async:!0,type:"module"},t),(t=wu.get(n))&&Mu(e,t),Ge(r=a.createElement("script")),eu(r,"link",e),a.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},s.set(n,r))}}};var Su="undefined"===typeof document?null:document;function Cu(e,t,a){var s=Su;if(s&&"string"===typeof t&&t){var n=xt(t);n='link[rel="'+e+'"][href="'+n+'"]',"string"===typeof a&&(n+='[crossorigin="'+a+'"]'),_u.has(n)||(_u.add(n),e={rel:e,crossOrigin:a,href:t},null===s.querySelector(n)&&(eu(t=s.createElement("link"),"link",e),Ge(t),s.head.appendChild(t)))}}function Eu(e,t,a,s){var n,r,l,o,c=(c=H.current)?Nu(c):null;if(!c)throw Error(i(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof a.precedence&&"string"===typeof a.href?(t=Du(a.href),(s=(a=He(c).hoistableStyles).get(t))||(s={type:"style",instance:null,count:0,state:null},a.set(t,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===a.rel&&"string"===typeof a.href&&"string"===typeof a.precedence){e=Du(a.href);var d=He(c).hoistableStyles,u=d.get(e);if(u||(c=c.ownerDocument||c,u={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,u),(d=c.querySelector(Pu(e)))&&!d._p&&(u.instance=d,u.state.loading=5),wu.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},wu.set(e,a),d||(n=c,r=e,l=a,o=u.state,n.querySelector('link[rel="preload"][as="style"]['+r+"]")?o.loading=1:(r=n.createElement("link"),o.preload=r,r.addEventListener("load",function(){return o.loading|=1}),r.addEventListener("error",function(){return o.loading|=2}),eu(r,"link",l),Ge(r),n.head.appendChild(r))))),t&&null===s)throw Error(i(528,""));return u}if(t&&null!==s)throw Error(i(529,""));return null;case"script":return t=a.async,"string"===typeof(a=a.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Tu(a),(s=(a=He(c).hoistableScripts).get(t))||(s={type:"script",instance:null,count:0,state:null},a.set(t,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,e))}}function Du(e){return'href="'+xt(e)+'"'}function Pu(e){return'link[rel="stylesheet"]['+e+"]"}function Au(e){return m({},e,{"data-precedence":e.precedence,precedence:null})}function Tu(e){return'[src="'+xt(e)+'"]'}function Lu(e){return"script[async]"+e}function Ru(e,t,a){if(t.count++,null===t.instance)switch(t.type){case"style":var s=e.querySelector('style[data-href~="'+xt(a.href)+'"]');if(s)return t.instance=s,Ge(s),s;var n=m({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return Ge(s=(e.ownerDocument||e).createElement("style")),eu(s,"style",n),Fu(s,a.precedence,e),t.instance=s;case"stylesheet":n=Du(a.href);var r=e.querySelector(Pu(n));if(r)return t.state.loading|=4,t.instance=r,Ge(r),r;s=Au(a),(n=wu.get(n))&&Ou(s,n),Ge(r=(e.ownerDocument||e).createElement("link"));var l=r;return l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),eu(r,"link",s),t.state.loading|=4,Fu(r,a.precedence,e),t.instance=r;case"script":return r=Tu(a.src),(n=e.querySelector(Lu(r)))?(t.instance=n,Ge(n),n):(s=a,(n=wu.get(r))&&Mu(s=m({},a),n),Ge(n=(e=e.ownerDocument||e).createElement("script")),eu(n,"link",s),e.head.appendChild(n),t.instance=n);case"void":return null;default:throw Error(i(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(s=t.instance,t.state.loading|=4,Fu(s,a.precedence,e));return t.instance}function Fu(e,t,a){for(var s=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),n=s.length?s[s.length-1]:null,r=n,i=0;i<s.length;i++){var l=s[i];if(l.dataset.precedence===t)r=l;else if(r!==n)break}r?r.parentNode.insertBefore(e,r.nextSibling):(t=9===a.nodeType?a.head:a).insertBefore(e,t.firstChild)}function Ou(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Mu(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var Iu=null;function qu(e,t,a){if(null===Iu){var s=new Map,n=Iu=new Map;n.set(a,s)}else(s=(n=Iu).get(a))||(s=new Map,n.set(a,s));if(s.has(e))return s;for(s.set(e,null),a=a.getElementsByTagName(e),n=0;n<a.length;n++){var r=a[n];if(!(r[qe]||r[Te]||"link"===e&&"stylesheet"===r.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==r.namespaceURI){var i=r.getAttribute(t)||"";i=e+i;var l=s.get(i);l?l.push(r):s.set(i,[r])}}return s}function Bu(e,t,a){(e=e.ownerDocument||e).head.insertBefore(a,"title"===t?e.querySelector("head > title"):null)}function zu(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var Uu=null;function Wu(){}function Hu(){if(this.count--,0===this.count)if(this.stylesheets)Vu(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Gu=null;function Vu(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Gu=new Map,t.forEach($u,e),Gu=null,Hu.call(e))}function $u(e,t){if(!(4&t.state.loading)){var a=Gu.get(e);if(a)var s=a.get(null);else{a=new Map,Gu.set(e,a);for(var n=e.querySelectorAll("link[data-precedence],style[data-precedence]"),r=0;r<n.length;r++){var i=n[r];"LINK"!==i.nodeName&&"not all"===i.getAttribute("media")||(a.set(i.dataset.precedence,i),s=i)}s&&a.set(null,s)}i=(n=t.instance).getAttribute("data-precedence"),(r=a.get(i)||s)===s&&a.set(null,n),a.set(i,n),this.count++,s=Hu.bind(this),n.addEventListener("load",s),n.addEventListener("error",s),r?r.parentNode.insertBefore(n,r.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(n,e.firstChild),t.state.loading|=4}}var Qu={$$typeof:j,Provider:null,Consumer:null,_currentValue:O,_currentValue2:O,_threadCount:0};function Yu(e,t,a,s,n,r,i,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ne(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ne(0),this.hiddenUpdates=Ne(null),this.identifierPrefix=s,this.onUncaughtError=n,this.onCaughtError=r,this.onRecoverableError=i,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function Ju(e,t,a,s,n,r,i,l,o,c,d,u){return e=new Yu(e,t,a,i,l,o,c,u),t=1,!0===r&&(t|=24),r=Fs(3,null,null,t),e.current=r,r.stateNode=e,(t=Ln()).refCount++,e.pooledCache=t,t.refCount++,r.memoizedState={element:s,isDehydrated:a,cache:t},ar(r),e}function Zu(e){return e?e=Ls:Ls}function Xu(e,t,a,s,n,r){n=Zu(n),null===s.context?s.context=n:s.pendingContext=n,(s=nr(t)).payload={element:a},null!==(r=void 0===r?null:r)&&(s.callback=r),null!==(a=rr(e,s,t))&&(Oc(a,0,t),ir(a,e,t))}function Ku(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var a=e.retryLane;e.retryLane=0!==a&&a<t?a:t}}function em(e,t){Ku(e,t),(e=e.alternate)&&Ku(e,t)}function tm(e){if(13===e.tag){var t=Ps(e,67108864);null!==t&&Oc(t,0,67108864),em(e,67108864)}}var am=!0;function sm(e,t,a,s){var n=R.T;R.T=null;var r=F.p;try{F.p=2,rm(e,t,a,s)}finally{F.p=r,R.T=n}}function nm(e,t,a,s){var n=R.T;R.T=null;var r=F.p;try{F.p=8,rm(e,t,a,s)}finally{F.p=r,R.T=n}}function rm(e,t,a,s){if(am){var n=im(s);if(null===n)Ud(e,t,s,lm,a),ym(e,s);else if(function(e,t,a,s,n){switch(t){case"focusin":return um=bm(um,e,t,a,s,n),!0;case"dragenter":return mm=bm(mm,e,t,a,s,n),!0;case"mouseover":return pm=bm(pm,e,t,a,s,n),!0;case"pointerover":var r=n.pointerId;return hm.set(r,bm(hm.get(r)||null,e,t,a,s,n)),!0;case"gotpointercapture":return r=n.pointerId,xm.set(r,bm(xm.get(r)||null,e,t,a,s,n)),!0}return!1}(n,e,t,a,s))s.stopPropagation();else if(ym(e,s),4&t&&-1<gm.indexOf(e)){for(;null!==n;){var r=Ue(n);if(null!==r)switch(r.tag){case 3:if((r=r.stateNode).current.memoizedState.isDehydrated){var i=ye(r.pendingLanes);if(0!==i){var l=r;for(l.pendingLanes|=2,l.entangledLanes|=2;i;){var o=1<<31-pe(i);l.entanglements[1]|=o,i&=~o}wd(r),0===(6&ac)&&(wc=te()+500,_d(0,!1))}}break;case 13:null!==(l=Ps(r,2))&&Oc(l,0,2),zc(),em(r,2)}if(null===(r=im(s))&&Ud(e,t,s,lm,a),r===n)break;n=r}null!==n&&s.stopPropagation()}else Ud(e,t,s,null,a)}}function im(e){return om(e=At(e))}var lm=null;function om(e){if(lm=null,null!==(e=ze(e))){var t=o(e);if(null===t)e=null;else{var a=t.tag;if(13===a){if(null!==(e=c(t)))return e;e=null}else if(3===a){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return lm=e,null}function cm(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ae()){case se:return 2;case ne:return 8;case re:case ie:return 32;case le:return 268435456;default:return 32}default:return 32}}var dm=!1,um=null,mm=null,pm=null,hm=new Map,xm=new Map,fm=[],gm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ym(e,t){switch(e){case"focusin":case"focusout":um=null;break;case"dragenter":case"dragleave":mm=null;break;case"mouseover":case"mouseout":pm=null;break;case"pointerover":case"pointerout":hm.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":xm.delete(t.pointerId)}}function bm(e,t,a,s,n,r){return null===e||e.nativeEvent!==r?(e={blockedOn:t,domEventName:a,eventSystemFlags:s,nativeEvent:r,targetContainers:[n]},null!==t&&(null!==(t=Ue(t))&&tm(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,null!==n&&-1===t.indexOf(n)&&t.push(n),e)}function vm(e){var t=ze(e.target);if(null!==t){var a=o(t);if(null!==a)if(13===(t=a.tag)){if(null!==(t=c(a)))return e.blockedOn=t,void function(e,t){var a=F.p;try{return F.p=e,t()}finally{F.p=a}}(e.priority,function(){if(13===a.tag){var e=Rc();e=Ee(e);var t=Ps(a,e);null!==t&&Oc(t,0,e),em(a,e)}})}else if(3===t&&a.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===a.tag?a.stateNode.containerInfo:null)}e.blockedOn=null}function jm(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var a=im(e.nativeEvent);if(null!==a)return null!==(t=Ue(a))&&tm(t),e.blockedOn=a,!1;var s=new(a=e.nativeEvent).constructor(a.type,a);Pt=s,a.target.dispatchEvent(s),Pt=null,t.shift()}return!0}function wm(e,t,a){jm(e)&&a.delete(t)}function _m(){dm=!1,null!==um&&jm(um)&&(um=null),null!==mm&&jm(mm)&&(mm=null),null!==pm&&jm(pm)&&(pm=null),hm.forEach(wm),xm.forEach(wm)}function Nm(e,t){e.blockedOn===t&&(e.blockedOn=null,dm||(dm=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,_m)))}var km=null;function Sm(e){km!==e&&(km=e,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){km===e&&(km=null);for(var t=0;t<e.length;t+=3){var a=e[t],s=e[t+1],n=e[t+2];if("function"!==typeof s){if(null===om(s||a))continue;break}var r=Ue(a);null!==r&&(e.splice(t,3),t-=3,Pi(r,{pending:!0,data:n,method:a.method,action:s},s,n))}}))}function Cm(e){function t(t){return Nm(t,e)}null!==um&&Nm(um,e),null!==mm&&Nm(mm,e),null!==pm&&Nm(pm,e),hm.forEach(t),xm.forEach(t);for(var a=0;a<fm.length;a++){var s=fm[a];s.blockedOn===e&&(s.blockedOn=null)}for(;0<fm.length&&null===(a=fm[0]).blockedOn;)vm(a),null===a.blockedOn&&fm.shift();if(null!=(a=(e.ownerDocument||e).$$reactFormReplay))for(s=0;s<a.length;s+=3){var n=a[s],r=a[s+1],i=n[Le]||null;if("function"===typeof r)i||Sm(a);else if(i){var l=null;if(r&&r.hasAttribute("formAction")){if(n=r,i=r[Le]||null)l=i.formAction;else if(null!==om(n))continue}else l=i.action;"function"===typeof l?a[s+1]=l:(a.splice(s,3),s-=3),Sm(a)}}}function Em(e){this._internalRoot=e}function Dm(e){this._internalRoot=e}Dm.prototype.render=Em.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));Xu(t.current,Rc(),e,t,null,null)},Dm.prototype.unmount=Em.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Xu(e.current,2,null,e,null,null),zc(),t[Re]=null}},Dm.prototype.unstable_scheduleHydration=function(e){if(e){var t=Pe();e={blockedOn:null,target:e,priority:t};for(var a=0;a<fm.length&&0!==t&&t<fm[a].priority;a++);fm.splice(a,0,e),0===a&&vm(e)}};var Pm=n.version;if("19.1.1"!==Pm)throw Error(i(527,Pm,"19.1.1"));F.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=o(e)))throw Error(i(188));return t!==e?null:e}for(var a=e,s=t;;){var n=a.return;if(null===n)break;var r=n.alternate;if(null===r){if(null!==(s=n.return)){a=s;continue}break}if(n.child===r.child){for(r=n.child;r;){if(r===a)return d(n),e;if(r===s)return d(n),t;r=r.sibling}throw Error(i(188))}if(a.return!==s.return)a=n,s=r;else{for(var l=!1,c=n.child;c;){if(c===a){l=!0,a=n,s=r;break}if(c===s){l=!0,s=n,a=r;break}c=c.sibling}if(!l){for(c=r.child;c;){if(c===a){l=!0,a=r,s=n;break}if(c===s){l=!0,s=r,a=n;break}c=c.sibling}if(!l)throw Error(i(189))}}if(a.alternate!==s)throw Error(i(190))}if(3!==a.tag)throw Error(i(188));return a.stateNode.current===a?e:t}(t),e=null===(e=null!==e?u(e):null)?null:e.stateNode};var Am={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:R,reconcilerVersion:"19.1.1"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Tm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Tm.isDisabled&&Tm.supportsFiber)try{de=Tm.inject(Am),ue=Tm}catch(Rm){}}t.createRoot=function(e,t){if(!l(e))throw Error(i(299));var a=!1,s="",n=gl,r=yl,o=bl;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(a=!0),void 0!==t.identifierPrefix&&(s=t.identifierPrefix),void 0!==t.onUncaughtError&&(n=t.onUncaughtError),void 0!==t.onCaughtError&&(r=t.onCaughtError),void 0!==t.onRecoverableError&&(o=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=Ju(e,1,!1,null,0,a,s,n,r,o,0,null),e[Re]=t.current,Bd(e),new Em(t)},t.hydrateRoot=function(e,t,a){if(!l(e))throw Error(i(299));var s=!1,n="",r=gl,o=yl,c=bl,d=null;return null!==a&&void 0!==a&&(!0===a.unstable_strictMode&&(s=!0),void 0!==a.identifierPrefix&&(n=a.identifierPrefix),void 0!==a.onUncaughtError&&(r=a.onUncaughtError),void 0!==a.onCaughtError&&(o=a.onCaughtError),void 0!==a.onRecoverableError&&(c=a.onRecoverableError),void 0!==a.unstable_transitionCallbacks&&a.unstable_transitionCallbacks,void 0!==a.formState&&(d=a.formState)),(t=Ju(e,1,!0,t,0,s,n,r,o,c,0,d)).context=Zu(null),a=t.current,(n=nr(s=Ee(s=Rc()))).callback=null,rr(a,n,s),a=s,t.current.lanes=a,ke(t,a),wd(t),e[Re]=t.current,Bd(e),new Dm(t)},t.version="19.1.1"},43:(e,t,a)=>{e.exports=a(288)},82:(e,t)=>{var a="function"===typeof Symbol&&Symbol.for,s=a?Symbol.for("react.element"):60103,n=a?Symbol.for("react.portal"):60106,r=a?Symbol.for("react.fragment"):60107,i=a?Symbol.for("react.strict_mode"):60108,l=a?Symbol.for("react.profiler"):60114,o=a?Symbol.for("react.provider"):60109,c=a?Symbol.for("react.context"):60110,d=a?Symbol.for("react.async_mode"):60111,u=a?Symbol.for("react.concurrent_mode"):60111,m=a?Symbol.for("react.forward_ref"):60112,p=a?Symbol.for("react.suspense"):60113,h=a?Symbol.for("react.suspense_list"):60120,x=a?Symbol.for("react.memo"):60115,f=a?Symbol.for("react.lazy"):60116,g=a?Symbol.for("react.block"):60121,y=a?Symbol.for("react.fundamental"):60117,b=a?Symbol.for("react.responder"):60118,v=a?Symbol.for("react.scope"):60119;function j(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case s:switch(e=e.type){case d:case u:case r:case l:case i:case p:return e;default:switch(e=e&&e.$$typeof){case c:case m:case f:case x:case o:return e;default:return t}}case n:return t}}}function w(e){return j(e)===u}t.AsyncMode=d,t.ConcurrentMode=u,t.ContextConsumer=c,t.ContextProvider=o,t.Element=s,t.ForwardRef=m,t.Fragment=r,t.Lazy=f,t.Memo=x,t.Portal=n,t.Profiler=l,t.StrictMode=i,t.Suspense=p,t.isAsyncMode=function(e){return w(e)||j(e)===d},t.isConcurrentMode=w,t.isContextConsumer=function(e){return j(e)===c},t.isContextProvider=function(e){return j(e)===o},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===s},t.isForwardRef=function(e){return j(e)===m},t.isFragment=function(e){return j(e)===r},t.isLazy=function(e){return j(e)===f},t.isMemo=function(e){return j(e)===x},t.isPortal=function(e){return j(e)===n},t.isProfiler=function(e){return j(e)===l},t.isStrictMode=function(e){return j(e)===i},t.isSuspense=function(e){return j(e)===p},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===r||e===u||e===l||e===i||e===p||e===h||"object"===typeof e&&null!==e&&(e.$$typeof===f||e.$$typeof===x||e.$$typeof===o||e.$$typeof===c||e.$$typeof===m||e.$$typeof===y||e.$$typeof===b||e.$$typeof===v||e.$$typeof===g)},t.typeOf=j},86:(e,t,a)=>{e.exports=a(82)},219:(e,t,a)=>{var s=a(86),n={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},r={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},l={};function o(e){return s.isMemo(e)?i:l[e.$$typeof]||n}l[s.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},l[s.Memo]=i;var c=Object.defineProperty,d=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,m=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,h=Object.prototype;e.exports=function e(t,a,s){if("string"!==typeof a){if(h){var n=p(a);n&&n!==h&&e(t,n,s)}var i=d(a);u&&(i=i.concat(u(a)));for(var l=o(t),x=o(a),f=0;f<i.length;++f){var g=i[f];if(!r[g]&&(!s||!s[g])&&(!x||!x[g])&&(!l||!l[g])){var y=m(a,g);try{c(t,g,y)}catch(b){}}}}return t}},288:(e,t)=>{var a=Symbol.for("react.transitional.element"),s=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),p=Symbol.iterator;var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,f={};function g(e,t,a){this.props=e,this.context=t,this.refs=f,this.updater=a||h}function y(){}function b(e,t,a){this.props=e,this.context=t,this.refs=f,this.updater=a||h}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=g.prototype;var v=b.prototype=new y;v.constructor=b,x(v,g.prototype),v.isPureReactComponent=!0;var j=Array.isArray,w={H:null,A:null,T:null,S:null,V:null},_=Object.prototype.hasOwnProperty;function N(e,t,s,n,r,i){return s=i.ref,{$$typeof:a,type:e,key:t,ref:void 0!==s?s:null,props:i}}function k(e){return"object"===typeof e&&null!==e&&e.$$typeof===a}var S=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function E(){}function D(e,t,n,r,i){var l=typeof e;"undefined"!==l&&"boolean"!==l||(e=null);var o,c,d=!1;if(null===e)d=!0;else switch(l){case"bigint":case"string":case"number":d=!0;break;case"object":switch(e.$$typeof){case a:case s:d=!0;break;case m:return D((d=e._init)(e._payload),t,n,r,i)}}if(d)return i=i(e),d=""===r?"."+C(e,0):r,j(i)?(n="",null!=d&&(n=d.replace(S,"$&/")+"/"),D(i,t,n,"",function(e){return e})):null!=i&&(k(i)&&(o=i,c=n+(null==i.key||e&&e.key===i.key?"":(""+i.key).replace(S,"$&/")+"/")+d,i=N(o.type,c,void 0,0,0,o.props)),t.push(i)),1;d=0;var u,h=""===r?".":r+":";if(j(e))for(var x=0;x<e.length;x++)d+=D(r=e[x],t,n,l=h+C(r,x),i);else if("function"===typeof(x=null===(u=e)||"object"!==typeof u?null:"function"===typeof(u=p&&u[p]||u["@@iterator"])?u:null))for(e=x.call(e),x=0;!(r=e.next()).done;)d+=D(r=r.value,t,n,l=h+C(r,x++),i);else if("object"===l){if("function"===typeof e.then)return D(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(E,E):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,n,r,i);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return d}function P(e,t,a){if(null==e)return e;var s=[],n=0;return D(e,s,"","",function(e){return t.call(a,e,n++)}),s}function A(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var T="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function L(){}t.Children={map:P,forEach:function(e,t,a){P(e,function(){t.apply(this,arguments)},a)},count:function(e){var t=0;return P(e,function(){t++}),t},toArray:function(e){return P(e,function(e){return e})||[]},only:function(e){if(!k(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=n,t.Profiler=i,t.PureComponent=b,t.StrictMode=r,t.Suspense=d,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=w,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return w.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cloneElement=function(e,t,a){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var s=x({},e.props),n=e.key;if(null!=t)for(r in void 0!==t.ref&&void 0,void 0!==t.key&&(n=""+t.key),t)!_.call(t,r)||"key"===r||"__self"===r||"__source"===r||"ref"===r&&void 0===t.ref||(s[r]=t[r]);var r=arguments.length-2;if(1===r)s.children=a;else if(1<r){for(var i=Array(r),l=0;l<r;l++)i[l]=arguments[l+2];s.children=i}return N(e.type,n,void 0,0,0,s)},t.createContext=function(e){return(e={$$typeof:o,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:l,_context:e},e},t.createElement=function(e,t,a){var s,n={},r=null;if(null!=t)for(s in void 0!==t.key&&(r=""+t.key),t)_.call(t,s)&&"key"!==s&&"__self"!==s&&"__source"!==s&&(n[s]=t[s]);var i=arguments.length-2;if(1===i)n.children=a;else if(1<i){for(var l=Array(i),o=0;o<i;o++)l[o]=arguments[o+2];n.children=l}if(e&&e.defaultProps)for(s in i=e.defaultProps)void 0===n[s]&&(n[s]=i[s]);return N(e,r,void 0,0,0,n)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=k,t.lazy=function(e){return{$$typeof:m,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=w.T,a={};w.T=a;try{var s=e(),n=w.S;null!==n&&n(a,s),"object"===typeof s&&null!==s&&"function"===typeof s.then&&s.then(L,T)}catch(r){T(r)}finally{w.T=t}},t.unstable_useCacheRefresh=function(){return w.H.useCacheRefresh()},t.use=function(e){return w.H.use(e)},t.useActionState=function(e,t,a){return w.H.useActionState(e,t,a)},t.useCallback=function(e,t){return w.H.useCallback(e,t)},t.useContext=function(e){return w.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return w.H.useDeferredValue(e,t)},t.useEffect=function(e,t,a){var s=w.H;if("function"===typeof a)throw Error("useEffect CRUD overload is not enabled in this build of React.");return s.useEffect(e,t)},t.useId=function(){return w.H.useId()},t.useImperativeHandle=function(e,t,a){return w.H.useImperativeHandle(e,t,a)},t.useInsertionEffect=function(e,t){return w.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return w.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return w.H.useMemo(e,t)},t.useOptimistic=function(e,t){return w.H.useOptimistic(e,t)},t.useReducer=function(e,t,a){return w.H.useReducer(e,t,a)},t.useRef=function(e){return w.H.useRef(e)},t.useState=function(e){return w.H.useState(e)},t.useSyncExternalStore=function(e,t,a){return w.H.useSyncExternalStore(e,t,a)},t.useTransition=function(){return w.H.useTransition()},t.version="19.1.1"},348:(e,t,a)=>{e.exports=a(552)},391:(e,t,a)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=a(4)},552:(e,t)=>{var a=60103,s=60106,n=60107,r=60108,i=60114,l=60109,o=60110,c=60112,d=60113,u=60120,m=60115,p=60116,h=60121,x=60122,f=60117,g=60129,y=60131;if("function"===typeof Symbol&&Symbol.for){var b=Symbol.for;a=b("react.element"),s=b("react.portal"),n=b("react.fragment"),r=b("react.strict_mode"),i=b("react.profiler"),l=b("react.provider"),o=b("react.context"),c=b("react.forward_ref"),d=b("react.suspense"),u=b("react.suspense_list"),m=b("react.memo"),p=b("react.lazy"),h=b("react.block"),x=b("react.server.block"),f=b("react.fundamental"),g=b("react.debug_trace_mode"),y=b("react.legacy_hidden")}function v(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case a:switch(e=e.type){case n:case i:case r:case d:case u:return e;default:switch(e=e&&e.$$typeof){case o:case c:case p:case m:case l:return e;default:return t}}case s:return t}}}t.isContextConsumer=function(e){return v(e)===o}},579:(e,t,a)=>{e.exports=a(799)},672:(e,t,a)=>{var s=a(43);function n(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var i={d:{f:r,r:function(){throw Error(n(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},l=Symbol.for("react.portal");var o=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,t.createPortal=function(e,t){var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(n(299));return function(e,t,a){var s=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:l,key:null==s?null:""+s,children:e,containerInfo:t,implementation:a}}(e,t,null,a)},t.flushSync=function(e){var t=o.T,a=i.p;try{if(o.T=null,i.p=2,e)return e()}finally{o.T=t,i.p=a,i.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,i.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&i.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var a=t.as,s=c(a,t.crossOrigin),n="string"===typeof t.integrity?t.integrity:void 0,r="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===a?i.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:s,integrity:n,fetchPriority:r}):"script"===a&&i.d.X(e,{crossOrigin:s,integrity:n,fetchPriority:r,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var a=c(t.as,t.crossOrigin);i.d.M(e,{crossOrigin:a,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&i.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var a=t.as,s=c(a,t.crossOrigin);i.d.L(e,a,{crossOrigin:s,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var a=c(t.as,t.crossOrigin);i.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:a,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else i.d.m(e)},t.requestFormReset=function(e){i.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,a){return o.H.useFormState(e,t,a)},t.useFormStatus=function(){return o.H.useHostTransitionStatus()},t.version="19.1.1"},799:(e,t)=>{var a=Symbol.for("react.transitional.element"),s=Symbol.for("react.fragment");function n(e,t,s){var n=null;if(void 0!==s&&(n=""+s),void 0!==t.key&&(n=""+t.key),"key"in t)for(var r in s={},t)"key"!==r&&(s[r]=t[r]);else s=t;return t=s.ref,{$$typeof:a,type:e,key:n,ref:void 0!==t?t:null,props:s}}t.Fragment=s,t.jsx=n,t.jsxs=n},853:(e,t,a)=>{e.exports=a(896)},896:(e,t)=>{function a(e,t){var a=e.length;e.push(t);e:for(;0<a;){var s=a-1>>>1,n=e[s];if(!(0<r(n,t)))break e;e[s]=t,e[a]=n,a=s}}function s(e){return 0===e.length?null:e[0]}function n(e){if(0===e.length)return null;var t=e[0],a=e.pop();if(a!==t){e[0]=a;e:for(var s=0,n=e.length,i=n>>>1;s<i;){var l=2*(s+1)-1,o=e[l],c=l+1,d=e[c];if(0>r(o,a))c<n&&0>r(d,o)?(e[s]=d,e[c]=a,s=c):(e[s]=o,e[l]=a,s=l);else{if(!(c<n&&0>r(d,a)))break e;e[s]=d,e[c]=a,s=c}}}return t}function r(e,t){var a=e.sortIndex-t.sortIndex;return 0!==a?a:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var l=Date,o=l.now();t.unstable_now=function(){return l.now()-o}}var c=[],d=[],u=1,m=null,p=3,h=!1,x=!1,f=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,v="undefined"!==typeof setImmediate?setImmediate:null;function j(e){for(var t=s(d);null!==t;){if(null===t.callback)n(d);else{if(!(t.startTime<=e))break;n(d),t.sortIndex=t.expirationTime,a(c,t)}t=s(d)}}function w(e){if(f=!1,j(e),!x)if(null!==s(c))x=!0,N||(N=!0,_());else{var t=s(d);null!==t&&T(w,t.startTime-e)}}var _,N=!1,k=-1,S=5,C=-1;function E(){return!!g||!(t.unstable_now()-C<S)}function D(){if(g=!1,N){var e=t.unstable_now();C=e;var a=!0;try{e:{x=!1,f&&(f=!1,b(k),k=-1),h=!0;var r=p;try{t:{for(j(e),m=s(c);null!==m&&!(m.expirationTime>e&&E());){var i=m.callback;if("function"===typeof i){m.callback=null,p=m.priorityLevel;var l=i(m.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof l){m.callback=l,j(e),a=!0;break t}m===s(c)&&n(c),j(e)}else n(c);m=s(c)}if(null!==m)a=!0;else{var o=s(d);null!==o&&T(w,o.startTime-e),a=!1}}break e}finally{m=null,p=r,h=!1}a=void 0}}finally{a?_():N=!1}}}if("function"===typeof v)_=function(){v(D)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,A=P.port2;P.port1.onmessage=D,_=function(){A.postMessage(null)}}else _=function(){y(D,0)};function T(e,a){k=y(function(){e(t.unstable_now())},a)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var a=p;p=t;try{return e()}finally{p=a}},t.unstable_requestPaint=function(){g=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var a=p;p=e;try{return t()}finally{p=a}},t.unstable_scheduleCallback=function(e,n,r){var i=t.unstable_now();switch("object"===typeof r&&null!==r?r="number"===typeof(r=r.delay)&&0<r?i+r:i:r=i,e){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return e={id:u++,callback:n,priorityLevel:e,startTime:r,expirationTime:l=r+l,sortIndex:-1},r>i?(e.sortIndex=r,a(d,e),null===s(c)&&e===s(d)&&(f?(b(k),k=-1):f=!0,T(w,r-i))):(e.sortIndex=l,a(c,e),x||h||(x=!0,N||(N=!0,_()))),e},t.unstable_shouldYield=E,t.unstable_wrapCallback=function(e){var t=p;return function(){var a=p;p=t;try{return e.apply(this,arguments)}finally{p=a}}}},950:(e,t,a)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=a(672)}},t={};function a(s){var n=t[s];if(void 0!==n)return n.exports;var r=t[s]={exports:{}};return e[s](r,r.exports,a),r.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var s={};a.r(s),a.d(s,{hasBrowserEnv:()=>es,hasStandardBrowserEnv:()=>as,hasStandardBrowserWebWorkerEnv:()=>ss,navigator:()=>ts,origin:()=>ns});var n=a(43),r=a(391);function i(e,t){if(null==e)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(-1!==t.indexOf(s))continue;a[s]=e[s]}return a}function l(e,t){if(null==e)return{};var a,s,n=i(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(s=0;s<r.length;s++)a=r[s],-1===t.indexOf(a)&&{}.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function c(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=o(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}function d(e,t,a){return(t=c(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,s)}return a}function m(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(Object(a),!0).forEach(function(t){d(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}const p=["sri"],h=["page"],x=["page","matches"],f=["onClick","discover","prefetch","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],g=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],y=["discover","fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition"];var b="popstate";function v(){return C(function(e,t){let{pathname:a,search:s,hash:n}=e.location;return N("",{pathname:a,search:s,hash:n},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:k(t)},null,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function j(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function w(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(a){}}}function _(e,t){return{usr:e.state,key:e.key,idx:t}}function N(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3?arguments[3]:void 0;return m(m({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?S(t):t),{},{state:a,key:t&&t.key||s||Math.random().toString(36).substring(2,10)})}function k(e){let{pathname:t="/",search:a="",hash:s=""}=e;return a&&"?"!==a&&(t+="?"===a.charAt(0)?a:"?"+a),s&&"#"!==s&&(t+="#"===s.charAt(0)?s:"#"+s),t}function S(e){let t={};if(e){let a=e.indexOf("#");a>=0&&(t.hash=e.substring(a),e=e.substring(0,a));let s=e.indexOf("?");s>=0&&(t.search=e.substring(s),e=e.substring(0,s)),e&&(t.pathname=e)}return t}function C(e,t,a){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:n=document.defaultView,v5Compat:r=!1}=s,i=n.history,l="POP",o=null,c=d();function d(){return(i.state||{idx:null}).idx}function u(){l="POP";let e=d(),t=null==e?null:e-c;c=e,o&&o({action:l,location:h.location,delta:t})}function p(e){return E(e)}null==c&&(c=0,i.replaceState(m(m({},i.state),{},{idx:c}),""));let h={get action(){return l},get location(){return e(n,i)},listen(e){if(o)throw new Error("A history only accepts one active listener");return n.addEventListener(b,u),o=e,()=>{n.removeEventListener(b,u),o=null}},createHref:e=>t(n,e),createURL:p,encodeLocation(e){let t=p(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l="PUSH";let s=N(h.location,e,t);a&&a(s,e),c=d()+1;let u=_(s,c),m=h.createHref(s);try{i.pushState(u,"",m)}catch(p){if(p instanceof DOMException&&"DataCloneError"===p.name)throw p;n.location.assign(m)}r&&o&&o({action:l,location:h.location,delta:1})},replace:function(e,t){l="REPLACE";let s=N(h.location,e,t);a&&a(s,e),c=d();let n=_(s,c),u=h.createHref(s);i.replaceState(n,"",u),r&&o&&o({action:l,location:h.location,delta:0})},go:e=>i.go(e)};return h}function E(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a="http://localhost";"undefined"!==typeof window&&(a="null"!==window.location.origin?window.location.origin:window.location.href),j(a,"No window.location.(origin|href) available to create URL");let s="string"===typeof e?e:k(e);return s=s.replace(/ $/,"%20"),!t&&s.startsWith("//")&&(s=a+s),new URL(s,a)}new WeakMap;function D(e,t){return P(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function P(e,t,a,s){let n=G(("string"===typeof t?S(t):t).pathname||"/",a);if(null==n)return null;let r=A(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let a=e.length===t.length&&e.slice(0,-1).every((e,a)=>e===t[a]);return a?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(r);let i=null;for(let l=0;null==i&&l<r.length;++l){let e=H(n);i=z(r[l],e,s)}return i}function A(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",n=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=function(e,r){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n,l=arguments.length>3?arguments[3]:void 0,o={relativePath:void 0===l?e.path||"":l,caseSensitive:!0===e.caseSensitive,childrenIndex:r,route:e};if(o.relativePath.startsWith("/")){if(!o.relativePath.startsWith(s)&&i)return;j(o.relativePath.startsWith(s),'Absolute route path "'.concat(o.relativePath,'" nested under path "').concat(s,'" is not valid. An absolute child route path must start with the combined path of all its parent routes.')),o.relativePath=o.relativePath.slice(s.length)}let c=J([s,o.relativePath]),d=a.concat(o);e.children&&e.children.length>0&&(j(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'.concat(c,'".')),A(e.children,t,d,c,i)),(null!=e.path||e.index)&&t.push({path:c,score:B(c,e.index),routesMeta:d})};return e.forEach((e,t)=>{var a;if(""!==e.path&&null!==(a=e.path)&&void 0!==a&&a.includes("?"))for(let s of T(e.path))r(e,t,!0,s);else r(e,t)}),t}function T(e){let t=e.split("/");if(0===t.length)return[];let[a,...s]=t,n=a.endsWith("?"),r=a.replace(/\?$/,"");if(0===s.length)return n?[r,""]:[r];let i=T(s.join("/")),l=[];return l.push(...i.map(e=>""===e?r:[r,e].join("/"))),n&&l.push(...i),l.map(t=>e.startsWith("/")&&""===t?"/":t)}var L=/^:[\w-]+$/,R=3,F=2,O=1,M=10,I=-2,q=e=>"*"===e;function B(e,t){let a=e.split("/"),s=a.length;return a.some(q)&&(s+=I),t&&(s+=F),a.filter(e=>!q(e)).reduce((e,t)=>e+(L.test(t)?R:""===t?O:M),s)}function z(e,t){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:s}=e,n={},r="/",i=[];for(let l=0;l<s.length;++l){let e=s[l],o=l===s.length-1,c="/"===r?t:t.slice(r.length)||"/",d=U({path:e.relativePath,caseSensitive:e.caseSensitive,end:o},c),u=e.route;if(!d&&o&&a&&!s[s.length-1].route.index&&(d=U({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!d)return null;Object.assign(n,d.params),i.push({params:n,pathname:J([r,d.pathname]),pathnameBase:Z(J([r,d.pathnameBase])),route:u}),"/"!==d.pathnameBase&&(r=J([r,d.pathnameBase]))}return i}function U(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[a,s]=W(e.path,e.caseSensitive,e.end),n=t.match(a);if(!n)return null;let r=n[0],i=r.replace(/(.)\/+$/,"$1"),l=n.slice(1);return{params:s.reduce((e,t,a)=>{let{paramName:s,isOptional:n}=t;if("*"===s){let e=l[a]||"";i=r.slice(0,r.length-e.length).replace(/(.)\/+$/,"$1")}const o=l[a];return e[s]=n&&!o?void 0:(o||"").replace(/%2F/g,"/"),e},{}),pathname:r,pathnameBase:i,pattern:e}}function W(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];w("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'.concat(e,'" will be treated as if it were "').concat(e.replace(/\*$/,"/*"),'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "').concat(e.replace(/\*$/,"/*"),'".'));let s=[],n="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,a)=>(s.push({paramName:t,isOptional:null!=a}),a?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(s.push({paramName:"*"}),n+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?n+="\\/*$":""!==e&&"/"!==e&&(n+="(?:(?=\\/|$))"),[new RegExp(n,t?void 0:"i"),s]}function H(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return w(!1,'The URL path "'.concat(e,'" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (').concat(t,").")),e}}function G(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let a=t.endsWith("/")?t.length-1:t.length,s=e.charAt(a);return s&&"/"!==s?null:e.slice(a)||"/"}function V(e,t,a,s){return"Cannot include a '".concat(e,"' character in a manually specified `to.").concat(t,"` field [").concat(JSON.stringify(s),"].  Please separate it out to the `to.").concat(a,'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.')}function $(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function Q(e){let t=$(e);return t.map((e,a)=>a===t.length-1?e.pathname:e.pathnameBase)}function Y(e,t,a){let s,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof e?s=S(e):(s=m({},e),j(!s.pathname||!s.pathname.includes("?"),V("?","pathname","search",s)),j(!s.pathname||!s.pathname.includes("#"),V("#","pathname","hash",s)),j(!s.search||!s.search.includes("#"),V("#","search","hash",s)));let r,i=""===e||""===s.pathname,l=i?"/":s.pathname;if(null==l)r=a;else{let e=t.length-1;if(!n&&l.startsWith("..")){let t=l.split("/");for(;".."===t[0];)t.shift(),e-=1;s.pathname=t.join("/")}r=e>=0?t[e]:"/"}let o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:a,search:s="",hash:n=""}="string"===typeof e?S(e):e,r=a?a.startsWith("/")?a:function(e,t){let a=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?a.length>1&&a.pop():"."!==e&&a.push(e)}),a.length>1?a.join("/"):"/"}(a,t):t;return{pathname:r,search:X(s),hash:K(n)}}(s,r),c=l&&"/"!==l&&l.endsWith("/"),d=(i||"."===l)&&a.endsWith("/");return o.pathname.endsWith("/")||!c&&!d||(o.pathname+="/"),o}var J=e=>e.join("/").replace(/\/\/+/g,"/"),Z=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),X=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",K=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function ee(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var te=["POST","PUT","PATCH","DELETE"],ae=(new Set(te),["GET",...te]);new Set(ae),Symbol("ResetLoaderData");var se=n.createContext(null);se.displayName="DataRouter";var ne=n.createContext(null);ne.displayName="DataRouterState";var re=n.createContext(!1);var ie=n.createContext({isTransitioning:!1});ie.displayName="ViewTransition";var le=n.createContext(new Map);le.displayName="Fetchers";var oe=n.createContext(null);oe.displayName="Await";var ce=n.createContext(null);ce.displayName="Navigation";var de=n.createContext(null);de.displayName="Location";var ue=n.createContext({outlet:null,matches:[],isDataRoute:!1});ue.displayName="Route";var me=n.createContext(null);me.displayName="RouteError";function pe(){return null!=n.useContext(de)}function he(){return j(pe(),"useLocation() may be used only in the context of a <Router> component."),n.useContext(de).location}var xe="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function fe(e){n.useContext(ce).static||n.useLayoutEffect(e)}function ge(){let{isDataRoute:e}=n.useContext(ue);return e?function(){let{router:e}=Ce("useNavigate"),t=De("useNavigate"),a=n.useRef(!1);fe(()=>{a.current=!0});let s=n.useCallback(async function(s){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};w(a.current,xe),a.current&&("number"===typeof s?e.navigate(s):await e.navigate(s,m({fromRouteId:t},n)))},[e,t]);return s}():function(){j(pe(),"useNavigate() may be used only in the context of a <Router> component.");let e=n.useContext(se),{basename:t,navigator:a}=n.useContext(ce),{matches:s}=n.useContext(ue),{pathname:r}=he(),i=JSON.stringify(Q(s)),l=n.useRef(!1);fe(()=>{l.current=!0});let o=n.useCallback(function(s){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(w(l.current,xe),!l.current)return;if("number"===typeof s)return void a.go(s);let o=Y(s,JSON.parse(i),r,"path"===n.relative);null==e&&"/"!==t&&(o.pathname="/"===o.pathname?t:J([t,o.pathname])),(n.replace?a.replace:a.push)(o,n.state,n)},[t,a,i,r,e]);return o}()}n.createContext(null);function ye(){let{matches:e}=n.useContext(ue),t=e[e.length-1];return t?t.params:{}}function be(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:a}=n.useContext(ue),{pathname:s}=he(),r=JSON.stringify(Q(a));return n.useMemo(()=>Y(e,JSON.parse(r),s,"path"===t),[e,r,s,t])}function ve(e,t,a,s,r){j(pe(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=n.useContext(ce),{matches:l}=n.useContext(ue),o=l[l.length-1],c=o?o.params:{},d=o?o.pathname:"/",u=o?o.pathnameBase:"/",p=o&&o.route;{let e=p&&p.path||"";Te(d,!p||e.endsWith("*")||e.endsWith("*?"),'You rendered descendant <Routes> (or called `useRoutes()`) at "'.concat(d,'" (under <Route path="').concat(e,'">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won\'t match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="').concat(e,'"> to <Route path="').concat("/"===e?"*":"".concat(e,"/*"),'">.'))}let h,x=he();if(t){var f;let e="string"===typeof t?S(t):t;j("/"===u||(null===(f=e.pathname)||void 0===f?void 0:f.startsWith(u)),'When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "'.concat(u,'" but pathname "').concat(e.pathname,'" was given in the `location` prop.')),h=e}else h=x;let g=h.pathname||"/",y=g;if("/"!==u){let e=u.replace(/^\//,"").split("/");y="/"+g.replace(/^\//,"").split("/").slice(e.length).join("/")}let b=D(e,{pathname:y});w(p||null!=b,'No routes matched location "'.concat(h.pathname).concat(h.search).concat(h.hash,'" ')),w(null==b||void 0!==b[b.length-1].route.element||void 0!==b[b.length-1].route.Component||void 0!==b[b.length-1].route.lazy,'Matched leaf route at location "'.concat(h.pathname).concat(h.search).concat(h.hash,'" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.'));let v=ke(b&&b.map(e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:J([u,i.encodeLocation?i.encodeLocation(e.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:J([u,i.encodeLocation?i.encodeLocation(e.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathnameBase])})),l,a,s,r);return t&&v?n.createElement(de.Provider,{value:{location:m({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:"POP"}},v):v}function je(){let e=Pe(),t=ee(e)?"".concat(e.status," ").concat(e.statusText):e instanceof Error?e.message:JSON.stringify(e),a=e instanceof Error?e.stack:null,s="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:s},i={padding:"2px 4px",backgroundColor:s},l=null;return console.error("Error handled by React Router default ErrorBoundary:",e),l=n.createElement(n.Fragment,null,n.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),n.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",n.createElement("code",{style:i},"ErrorBoundary")," or"," ",n.createElement("code",{style:i},"errorElement")," prop on your route.")),n.createElement(n.Fragment,null,n.createElement("h2",null,"Unexpected Application Error!"),n.createElement("h3",{style:{fontStyle:"italic"}},t),a?n.createElement("pre",{style:r},a):null,l)}var we=n.createElement(je,null),_e=class extends n.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return void 0!==this.state.error?n.createElement(ue.Provider,{value:this.props.routeContext},n.createElement(me.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Ne(e){let{routeContext:t,match:a,children:s}=e,r=n.useContext(se);return r&&r.static&&r.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=a.route.id),n.createElement(ue.Provider,{value:t},s)}function ke(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(null==e){if(!a)return null;if(a.errors)e=a.matches;else{if(0!==t.length||a.initialized||!(a.matches.length>0))return null;e=a.matches}}let r=e,i=null===a||void 0===a?void 0:a.errors;if(null!=i){let e=r.findIndex(e=>e.route.id&&void 0!==(null===i||void 0===i?void 0:i[e.route.id]));j(e>=0,"Could not find a matching route for errors on route IDs: ".concat(Object.keys(i).join(","))),r=r.slice(0,Math.min(r.length,e+1))}let l=!1,o=-1;if(a)for(let n=0;n<r.length;n++){let e=r[n];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(o=n),e.route.id){let{loaderData:t,errors:s}=a,n=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!s||void 0===s[e.route.id]);if(e.route.lazy||n){l=!0,r=o>=0?r.slice(0,o+1):[r[0]];break}}}return r.reduceRight((e,c,d)=>{let u,m=!1,p=null,h=null;a&&(u=i&&c.route.id?i[c.route.id]:void 0,p=c.route.errorElement||we,l&&(o<0&&0===d?(Te("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),m=!0,h=null):o===d&&(m=!0,h=c.route.hydrateFallbackElement||null)));let x=t.concat(r.slice(0,d+1)),f=()=>{let t;return t=u?p:m?h:c.route.Component?n.createElement(c.route.Component,null):c.route.element?c.route.element:e,n.createElement(Ne,{match:c,routeContext:{outlet:e,matches:x,isDataRoute:null!=a},children:t})};return a&&(c.route.ErrorBoundary||c.route.errorElement||0===d)?n.createElement(_e,{location:a.location,revalidation:a.revalidation,component:p,error:u,children:f(),routeContext:{outlet:null,matches:x,isDataRoute:!0},unstable_onError:s}):f()},null)}function Se(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function Ce(e){let t=n.useContext(se);return j(t,Se(e)),t}function Ee(e){let t=n.useContext(ne);return j(t,Se(e)),t}function De(e){let t=function(e){let t=n.useContext(ue);return j(t,Se(e)),t}(e),a=t.matches[t.matches.length-1];return j(a.route.id,"".concat(e,' can only be used on routes that contain a unique "id"')),a.route.id}function Pe(){var e;let t=n.useContext(me),a=Ee("useRouteError"),s=De("useRouteError");return void 0!==t?t:null===(e=a.errors)||void 0===e?void 0:e[s]}var Ae={};function Te(e,t,a){t||Ae[e]||(Ae[e]=!0,w(!1,a))}var Le={};function Re(e,t){e||Le[t]||(Le[t]=!0,console.warn(t))}n.memo(function(e){let{routes:t,future:a,state:s,unstable_onError:n}=e;return ve(t,void 0,s,n,a)});function Fe(e){let{to:t,replace:a,state:s,relative:r}=e;j(pe(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=n.useContext(ce);w(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=n.useContext(ue),{pathname:o}=he(),c=ge(),d=Y(t,Q(l),o,"path"===r),u=JSON.stringify(d);return n.useEffect(()=>{c(JSON.parse(u),{replace:a,state:s,relative:r})},[c,u,r,a,s]),null}function Oe(e){j(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Me(e){let{basename:t="/",children:a=null,location:s,navigationType:r="POP",navigator:i,static:l=!1}=e;j(!pe(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),c=n.useMemo(()=>({basename:o,navigator:i,static:l,future:{}}),[o,i,l]);"string"===typeof s&&(s=S(s));let{pathname:d="/",search:u="",hash:m="",state:p=null,key:h="default"}=s,x=n.useMemo(()=>{let e=G(d,o);return null==e?null:{location:{pathname:e,search:u,hash:m,state:p,key:h},navigationType:r}},[o,d,u,m,p,h,r]);return w(null!=x,'<Router basename="'.concat(o,'"> is not able to match the URL "').concat(d).concat(u).concat(m,"\" because it does not start with the basename, so the <Router> won't render anything.")),null==x?null:n.createElement(ce.Provider,{value:c},n.createElement(de.Provider,{children:a,value:x}))}function Ie(e){let{children:t,location:a}=e;return ve(qe(t),a)}n.Component;function qe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=[];return n.Children.forEach(e,(e,s)=>{if(!n.isValidElement(e))return;let r=[...t,s];if(e.type===n.Fragment)return void a.push.apply(a,qe(e.props.children,r));j(e.type===Oe,"[".concat("string"===typeof e.type?e.type:e.type.name,"] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>")),j(!e.props.index||!e.props.children,"An index route cannot have child routes.");let i={id:e.props.id||r.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,middleware:e.props.middleware,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(i.children=qe(e.props.children,r)),a.push(i)}),a}var Be="get",ze="application/x-www-form-urlencoded";function Ue(e){return null!=e&&"string"===typeof e.tagName}var We=null;var He=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ge(e){return null==e||He.has(e)?e:(w(!1,'"'.concat(e,'" is not a valid `encType` for `<Form>`/`<fetcher.Form>` and will default to "').concat(ze,'"')),null)}function Ve(e,t){let a,s,n,r,i;if(Ue(l=e)&&"form"===l.tagName.toLowerCase()){let i=e.getAttribute("action");s=i?G(i,t):null,a=e.getAttribute("method")||Be,n=Ge(e.getAttribute("enctype"))||ze,r=new FormData(e)}else if(function(e){return Ue(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return Ue(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let i=e.form;if(null==i)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=e.getAttribute("formaction")||i.getAttribute("action");if(s=l?G(l,t):null,a=e.getAttribute("formmethod")||i.getAttribute("method")||Be,n=Ge(e.getAttribute("formenctype"))||Ge(i.getAttribute("enctype"))||ze,r=new FormData(i,e),!function(){if(null===We)try{new FormData(document.createElement("form"),0),We=!1}catch(e){We=!0}return We}()){let{name:t,type:a,value:s}=e;if("image"===a){let e=t?"".concat(t,"."):"";r.append("".concat(e,"x"),"0"),r.append("".concat(e,"y"),"0")}else t&&r.append(t,s)}}else{if(Ue(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');a=Be,s=null,n=ze,i=e}var l;return r&&"text/plain"===n&&(i=r,r=void 0),{action:s,method:a.toLowerCase(),encType:n,formData:r,body:i}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");"undefined"!==typeof window?window:"undefined"!==typeof globalThis&&globalThis;function $e(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}Symbol("SingleFetchRedirect");function Qe(e,t,a){let s="string"===typeof e?new URL(e,"undefined"===typeof window?"server://singlefetch/":window.location.origin):e;return"/"===s.pathname?s.pathname="_root.".concat(a):t&&"/"===G(s.pathname,t)?s.pathname="".concat(t.replace(/\/$/,""),"/_root.").concat(a):s.pathname="".concat(s.pathname.replace(/\/$/,""),".").concat(a),s}async function Ye(e,t){if(e.id in t)return t[e.id];try{let a=await import(e.module);return t[e.id]=a,a}catch(a){return console.error("Error loading route module `".concat(e.module,"`, reloading page...")),console.error(a),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Je(e){return null!=e&&"string"===typeof e.page}function Ze(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"===typeof e.imageSrcSet&&"string"===typeof e.imageSizes:"string"===typeof e.rel&&"string"===typeof e.href)}function Xe(e,t,a,s,n,r){let i=(e,t)=>!a[t]||e.route.id!==a[t].route.id,l=(e,t)=>{var s;return a[t].pathname!==e.pathname||(null===(s=a[t].route.path)||void 0===s?void 0:s.endsWith("*"))&&a[t].params["*"]!==e.params["*"]};return"assets"===r?t.filter((e,t)=>i(e,t)||l(e,t)):"data"===r?t.filter((t,r)=>{let o=s.routes[t.route.id];if(!o||!o.hasLoader)return!1;if(i(t,r)||l(t,r))return!0;if(t.route.shouldRevalidate){var c;let s=t.route.shouldRevalidate({currentUrl:new URL(n.pathname+n.search+n.hash,window.origin),currentParams:(null===(c=a[0])||void 0===c?void 0:c.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"===typeof s)return s}return!0}):[]}function Ke(e,t){let{includeHydrateFallback:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return s=e.map(e=>{let s=t.routes[e.route.id];if(!s)return[];let n=[s.module];return s.clientActionModule&&(n=n.concat(s.clientActionModule)),s.clientLoaderModule&&(n=n.concat(s.clientLoaderModule)),a&&s.hydrateFallbackModule&&(n=n.concat(s.hydrateFallbackModule)),s.imports&&(n=n.concat(s.imports)),n}).flat(1),[...new Set(s)];var s}function et(e,t){let a=new Set,s=new Set(t);return e.reduce((e,n)=>{if(t&&!Je(n)&&"script"===n.as&&n.href&&s.has(n.href))return e;let r=JSON.stringify(function(e){let t={},a=Object.keys(e).sort();for(let s of a)t[s]=e[s];return t}(n));return a.has(r)||(a.add(r),e.push({key:r,link:n})),e},[])}function tt(e,t){return"lazy"===e.mode&&!0===t}function at(){let e=n.useContext(se);return $e(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function st(){let e=n.useContext(ne);return $e(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var nt=n.createContext(void 0);function rt(){let e=n.useContext(nt);return $e(e,"You must render this element inside a <HydratedRouter> element"),e}function it(e,t){return a=>{e&&e(a),a.defaultPrevented||t(a)}}function lt(e,t,a){if(a&&!ut)return[e[0]];if(t){let a=e.findIndex(e=>void 0!==t[e.route.id]);return e.slice(0,a+1)}return e}nt.displayName="FrameworkContext";function ot(e){let{page:t}=e,a=l(e,h),{router:s}=at(),r=n.useMemo(()=>D(s.routes,t,s.basename),[s.routes,t,s.basename]);return r?n.createElement(dt,m({page:t,matches:r},a)):null}function ct(e){let{manifest:t,routeModules:a}=rt(),[s,r]=n.useState([]);return n.useEffect(()=>{let s=!1;return async function(e,t,a){let s=await Promise.all(e.map(async e=>{let s=t.routes[e.route.id];if(s){let e=await Ye(s,a);return e.links?e.links():[]}return[]}));return et(s.flat(1).filter(Ze).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?m(m({},e),{},{rel:"prefetch",as:"style"}):m(m({},e),{},{rel:"prefetch"})))}(e,t,a).then(e=>{s||r(e)}),()=>{s=!0}},[e,t,a]),s}function dt(e){let{page:t,matches:a}=e,s=l(e,x),r=he(),{manifest:i,routeModules:o}=rt(),{basename:c}=at(),{loaderData:d,matches:u}=st(),p=n.useMemo(()=>Xe(t,a,u,i,r,"data"),[t,a,u,i,r]),h=n.useMemo(()=>Xe(t,a,u,i,r,"assets"),[t,a,u,i,r]),f=n.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let e=new Set,s=!1;if(a.forEach(t=>{var a;let n=i.routes[t.route.id];n&&n.hasLoader&&(!p.some(e=>e.route.id===t.route.id)&&t.route.id in d&&null!==(a=o[t.route.id])&&void 0!==a&&a.shouldRevalidate||n.hasClientLoader?s=!0:e.add(t.route.id))}),0===e.size)return[];let n=Qe(t,c,"data");return s&&e.size>0&&n.searchParams.set("_routes",a.filter(t=>e.has(t.route.id)).map(e=>e.route.id).join(",")),[n.pathname+n.search]},[c,d,r,i,p,a,t,o]),g=n.useMemo(()=>Ke(h,i),[h,i]),y=ct(h);return n.createElement(n.Fragment,null,f.map(e=>n.createElement("link",m({key:e,rel:"prefetch",as:"fetch",href:e},s))),g.map(e=>n.createElement("link",m({key:e,rel:"modulepreload",href:e},s))),y.map(e=>{let{key:t,link:a}=e;return n.createElement("link",m({key:t,nonce:s.nonce},a))}))}var ut=!1;function mt(e){let{manifest:t,serverHandoffString:a,isSpaMode:s,renderMeta:r,routeDiscovery:i,ssr:o}=rt(),{router:c,static:d,staticContext:u}=at(),{matches:h}=st(),x=n.useContext(re),f=tt(i,o);r&&(r.didRenderScripts=!0);let g=lt(h,null,s);n.useEffect(()=>{ut=!0},[]);let y=n.useMemo(()=>{var s;if(x)return null;let r=u?"window.__reactRouterContext = ".concat(a,";").concat("window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());"):" ",i=d?"".concat(null!==(s=t.hmr)&&void 0!==s&&s.runtime?"import ".concat(JSON.stringify(t.hmr.runtime),";"):"").concat(f?"":"import ".concat(JSON.stringify(t.url)),";\n").concat(g.map((e,a)=>{let s="route".concat(a),n=t.routes[e.route.id];$e(n,"Route ".concat(e.route.id," not found in manifest"));let{clientActionModule:r,clientLoaderModule:i,clientMiddlewareModule:l,hydrateFallbackModule:o,module:c}=n,d=[...r?[{module:r,varName:"".concat(s,"_clientAction")}]:[],...i?[{module:i,varName:"".concat(s,"_clientLoader")}]:[],...l?[{module:l,varName:"".concat(s,"_clientMiddleware")}]:[],...o?[{module:o,varName:"".concat(s,"_HydrateFallback")}]:[],{module:c,varName:"".concat(s,"_main")}];return 1===d.length?"import * as ".concat(s," from ").concat(JSON.stringify(c),";"):[d.map(e=>"import * as ".concat(e.varName,' from "').concat(e.module,'";')).join("\n"),"const ".concat(s," = {").concat(d.map(e=>"...".concat(e.varName)).join(","),"};")].join("\n")}).join("\n"),"\n  ").concat(f?"window.__reactRouterManifest = ".concat(JSON.stringify(function(e,t){let{sri:a}=e,s=l(e,p),n=new Set(t.state.matches.map(e=>e.route.id)),r=t.state.location.pathname.split("/").filter(Boolean),i=["/"];for(r.pop();r.length>0;)i.push("/".concat(r.join("/"))),r.pop();i.forEach(e=>{let a=D(t.routes,e,t.basename);a&&a.forEach(e=>n.add(e.route.id))});let o=[...n].reduce((e,t)=>Object.assign(e,{[t]:s.routes[t]}),{});return m(m({},s),{},{routes:o,sri:!!a||void 0})}(t,c),null,2),";"):"","\n  window.__reactRouterRouteModules = {").concat(g.map((e,t)=>"".concat(JSON.stringify(e.route.id),":route").concat(t)).join(","),"};\n\nimport(").concat(JSON.stringify(t.entry.module),");"):" ";return n.createElement(n.Fragment,null,n.createElement("script",m(m({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:r},type:void 0})),n.createElement("script",m(m({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:i},type:"module",async:!0})))},[]),b=ut||x?[]:(v=t.entry.imports.concat(Ke(g,t,{includeHydrateFallback:!0})),[...new Set(v)]);var v;let j="object"===typeof t.sri?t.sri:{};return Re(!x,"The <Scripts /> element is a no-op when using RSC and can be safely removed."),ut||x?null:n.createElement(n.Fragment,null,"object"===typeof t.sri?n.createElement("script",{"rr-importmap":"",type:"importmap",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:JSON.stringify({integrity:j})}}):null,f?null:n.createElement("link",{rel:"modulepreload",href:t.url,crossOrigin:e.crossOrigin,integrity:j[t.url],suppressHydrationWarning:!0}),n.createElement("link",{rel:"modulepreload",href:t.entry.module,crossOrigin:e.crossOrigin,integrity:j[t.entry.module],suppressHydrationWarning:!0}),b.map(t=>n.createElement("link",{key:t,rel:"modulepreload",href:t,crossOrigin:e.crossOrigin,integrity:j[t],suppressHydrationWarning:!0})),y)}function pt(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return e=>{t.forEach(t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)})}}n.Component;function ht(e){let{error:t,isOutsideRemixApp:a}=e;console.error(t);let s,r=n.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://reactrouter.com/how-to/error-boundary for more information."\n        );\n      '}});if(ee(t))return n.createElement(xt,{title:"Unhandled Thrown Response!"},n.createElement("h1",{style:{fontSize:"24px"}},t.status," ",t.statusText),r);if(t instanceof Error)s=t;else{let e=null==t?"Unknown Error":"object"===typeof t&&"toString"in t?t.toString():JSON.stringify(t);s=new Error(e)}return n.createElement(xt,{title:"Application Error!",isOutsideRemixApp:a},n.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),n.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},s.stack),r)}function xt(e){var t;let{title:a,renderScripts:s,isOutsideRemixApp:r,children:i}=e,{routeModules:l}=rt();return null!==(t=l.root)&&void 0!==t&&t.Layout&&!r?i:n.createElement("html",{lang:"en"},n.createElement("head",null,n.createElement("meta",{charSet:"utf-8"}),n.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),n.createElement("title",null,a)),n.createElement("body",null,n.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},i,s?n.createElement(mt,null):null)))}var ft="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{ft&&(window.__reactRouterVersion="7.9.3")}catch(Zf){}function gt(e){let{basename:t,children:a,window:s}=e,r=n.useRef();null==r.current&&(r.current=v({window:s,v5Compat:!0}));let i=r.current,[l,o]=n.useState({action:i.action,location:i.location}),c=n.useCallback(e=>{n.startTransition(()=>o(e))},[o]);return n.useLayoutEffect(()=>i.listen(c),[i,c]),n.createElement(Me,{basename:t,children:a,location:l.location,navigationType:l.action,navigator:i})}var yt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,bt=n.forwardRef(function(e,t){let a,{onClick:s,discover:r="render",prefetch:i="none",relative:o,reloadDocument:c,replace:d,state:u,target:p,to:h,preventScrollReset:x,viewTransition:g}=e,y=l(e,f),{basename:b}=n.useContext(ce),v="string"===typeof h&&yt.test(h),_=!1;if("string"===typeof h&&v&&(a=h,ft))try{let e=new URL(window.location.href),t=h.startsWith("//")?new URL(e.protocol+h):new URL(h),a=G(t.pathname,b);t.origin===e.origin&&null!=a?h=a+t.search+t.hash:_=!0}catch(Zf){w(!1,'<Link to="'.concat(h,'"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.'))}let N=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};j(pe(),"useHref() may be used only in the context of a <Router> component.");let{basename:a,navigator:s}=n.useContext(ce),{hash:r,pathname:i,search:l}=be(e,{relative:t}),o=i;return"/"!==a&&(o="/"===i?a:J([a,i])),s.createHref({pathname:o,search:l,hash:r})}(h,{relative:o}),[S,C,E]=function(e,t){let a=n.useContext(nt),[s,r]=n.useState(!1),[i,l]=n.useState(!1),{onFocus:o,onBlur:c,onMouseEnter:d,onMouseLeave:u,onTouchStart:m}=t,p=n.useRef(null);n.useEffect(()=>{if("render"===e&&l(!0),"viewport"===e){let e=new IntersectionObserver(e=>{e.forEach(e=>{l(e.isIntersecting)})},{threshold:.5});return p.current&&e.observe(p.current),()=>{e.disconnect()}}},[e]),n.useEffect(()=>{if(s){let e=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(e)}}},[s]);let h=()=>{r(!0)},x=()=>{r(!1),l(!1)};return a?"intent"!==e?[i,p,{}]:[i,p,{onFocus:it(o,h),onBlur:it(c,x),onMouseEnter:it(d,h),onMouseLeave:it(u,x),onTouchStart:it(m,h)}]:[!1,p,{}]}(i,y),D=function(e){let{target:t,replace:a,state:s,preventScrollReset:r,relative:i,viewTransition:l}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=ge(),c=he(),d=be(e,{relative:i});return n.useCallback(n=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(n,t)){n.preventDefault();let t=void 0!==a?a:k(c)===k(d);o(e,{replace:t,state:s,preventScrollReset:r,relative:i,viewTransition:l})}},[c,o,d,a,s,t,e,r,i,l])}(h,{replace:d,state:u,target:p,preventScrollReset:x,relative:o,viewTransition:g});let P=n.createElement("a",m(m(m({},y),E),{},{href:a||N,onClick:_||c?s:function(e){s&&s(e),e.defaultPrevented||D(e)},ref:pt(t,C),target:p,"data-discover":v||"render"!==r?void 0:"true"}));return S&&!v?n.createElement(n.Fragment,null,P,n.createElement(ot,{page:N})):P});bt.displayName="Link";var vt=n.forwardRef(function(e,t){let{"aria-current":a="page",caseSensitive:s=!1,className:r="",end:i=!1,style:o,to:c,viewTransition:d,children:u}=e,p=l(e,g),h=be(c,{relative:p.relative}),x=he(),f=n.useContext(ne),{navigator:y,basename:b}=n.useContext(ce),v=null!=f&&function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=n.useContext(ie);j(null!=a,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=_t("useViewTransitionState"),r=be(e,{relative:t});if(!a.isTransitioning)return!1;let i=G(a.currentLocation.pathname,s)||a.currentLocation.pathname,l=G(a.nextLocation.pathname,s)||a.nextLocation.pathname;return null!=U(r.pathname,l)||null!=U(r.pathname,i)}(h)&&!0===d,w=y.encodeLocation?y.encodeLocation(h).pathname:h.pathname,_=x.pathname,N=f&&f.navigation&&f.navigation.location?f.navigation.location.pathname:null;s||(_=_.toLowerCase(),N=N?N.toLowerCase():null,w=w.toLowerCase()),N&&b&&(N=G(N,b)||N);const k="/"!==w&&w.endsWith("/")?w.length-1:w.length;let S,C=_===w||!i&&_.startsWith(w)&&"/"===_.charAt(k),E=null!=N&&(N===w||!i&&N.startsWith(w)&&"/"===N.charAt(w.length)),D={isActive:C,isPending:E,isTransitioning:v},P=C?a:void 0;S="function"===typeof r?r(D):[r,C?"active":null,E?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let A="function"===typeof o?o(D):o;return n.createElement(bt,m(m({},p),{},{"aria-current":P,className:S,ref:t,style:A,to:c,viewTransition:d}),"function"===typeof u?u(D):u)});vt.displayName="NavLink";var jt=n.forwardRef((e,t)=>{let{discover:a="render",fetcherKey:s,navigate:r,reloadDocument:i,replace:o,state:c,method:d=Be,action:u,onSubmit:p,relative:h,preventScrollReset:x,viewTransition:f}=e,g=l(e,y),b=St(),v=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:a}=n.useContext(ce),s=n.useContext(ue);j(s,"useFormAction must be used inside a RouteContext");let[r]=s.matches.slice(-1),i=m({},be(e||".",{relative:t})),l=he();if(null==e){i.search=l.search;let e=new URLSearchParams(i.search),t=e.getAll("index");if(t.some(e=>""===e)){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let a=e.toString();i.search=a?"?".concat(a):""}}e&&"."!==e||!r.route.index||(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index");"/"!==a&&(i.pathname="/"===i.pathname?a:J([a,i.pathname]));return k(i)}(u,{relative:h}),w="get"===d.toLowerCase()?"get":"post",_="string"===typeof u&&yt.test(u);return n.createElement("form",m(m({ref:t,method:w,action:v,onSubmit:i?p:e=>{if(p&&p(e),e.defaultPrevented)return;e.preventDefault();let t=e.nativeEvent.submitter,a=(null===t||void 0===t?void 0:t.getAttribute("formmethod"))||d;b(t||e.currentTarget,{fetcherKey:s,method:a,navigate:r,replace:o,state:c,relative:h,preventScrollReset:x,viewTransition:f})}},g),{},{"data-discover":_||"render"!==a?void 0:"true"}))});function wt(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function _t(e){let t=n.useContext(se);return j(t,wt(e)),t}jt.displayName="Form";var Nt=0,kt=()=>"__".concat(String(++Nt),"__");function St(){let{router:e}=_t("useSubmit"),{basename:t}=n.useContext(ce),a=De("useRouteId");return n.useCallback(async function(s){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:r,method:i,encType:l,formData:o,body:c}=Ve(s,t);if(!1===n.navigate){let t=n.fetcherKey||kt();await e.fetch(t,a,n.action||r,{preventScrollReset:n.preventScrollReset,formData:o,body:c,formMethod:n.method||i,formEncType:n.encType||l,flushSync:n.flushSync})}else await e.navigate(n.action||r,{preventScrollReset:n.preventScrollReset,formData:o,body:c,formMethod:n.method||i,formEncType:n.encType||l,replace:n.replace,state:n.state,fromRouteId:a,flushSync:n.flushSync,viewTransition:n.viewTransition})},[e,t,a])}var Ct=a(950);const Et=["message"];const Dt=Array(12).fill(0),Pt=e=>{let{visible:t,className:a}=e;return n.createElement("div",{className:["sonner-loading-wrapper",a].filter(Boolean).join(" "),"data-visible":t},n.createElement("div",{className:"sonner-spinner"},Dt.map((e,t)=>n.createElement("div",{className:"sonner-loading-bar",key:"spinner-bar-".concat(t)}))))},At=n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},n.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Tt=n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},n.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),Lt=n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},n.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Rt=n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},n.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Ft=n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},n.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),n.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}));let Ot=1;const Mt=new class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;const{message:a}=e,s=l(e,Et),n="number"===typeof(null==e?void 0:e.id)||(null==(t=e.id)?void 0:t.length)>0?e.id:Ot++,r=this.toasts.find(e=>e.id===n),i=void 0===e.dismissible||e.dismissible;return this.dismissedToasts.has(n)&&this.dismissedToasts.delete(n),r?this.toasts=this.toasts.map(t=>t.id===n?(this.publish(m(m(m({},t),e),{},{id:n,title:a})),m(m(m({},t),e),{},{id:n,dismissible:i,title:a})):t):this.addToast(m(m({title:a},s),{},{dismissible:i,id:n})),n},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(t=>t({id:e,dismiss:!0})))):this.toasts.forEach(e=>{this.subscribers.forEach(t=>t({id:e.id,dismiss:!0}))}),e),this.message=(e,t)=>this.create(m(m({},t),{},{message:e})),this.error=(e,t)=>this.create(m(m({},t),{},{message:e,type:"error"})),this.success=(e,t)=>this.create(m(m({},t),{},{type:"success",message:e})),this.info=(e,t)=>this.create(m(m({},t),{},{type:"info",message:e})),this.warning=(e,t)=>this.create(m(m({},t),{},{type:"warning",message:e})),this.loading=(e,t)=>this.create(m(m({},t),{},{type:"loading",message:e})),this.promise=(e,t)=>{if(!t)return;let a;void 0!==t.loading&&(a=this.create(m(m({},t),{},{promise:e,type:"loading",message:t.loading,description:"function"!==typeof t.description?t.description:void 0})));const s=Promise.resolve(e instanceof Function?e():e);let r,i=void 0!==a;const l=s.then(async e=>{r=["resolve",e];if(n.isValidElement(e))i=!1,this.create({id:a,type:"default",message:e});else if(It(e)&&!e.ok){i=!1;const s="function"===typeof t.error?await t.error("HTTP error! status: ".concat(e.status)):t.error,r="function"===typeof t.description?await t.description("HTTP error! status: ".concat(e.status)):t.description,l="object"===typeof s&&!n.isValidElement(s)?s:{message:s};this.create(m({id:a,type:"error",description:r},l))}else if(e instanceof Error){i=!1;const s="function"===typeof t.error?await t.error(e):t.error,r="function"===typeof t.description?await t.description(e):t.description,l="object"===typeof s&&!n.isValidElement(s)?s:{message:s};this.create(m({id:a,type:"error",description:r},l))}else if(void 0!==t.success){i=!1;const s="function"===typeof t.success?await t.success(e):t.success,r="function"===typeof t.description?await t.description(e):t.description,l="object"===typeof s&&!n.isValidElement(s)?s:{message:s};this.create(m({id:a,type:"success",description:r},l))}}).catch(async e=>{if(r=["reject",e],void 0!==t.error){i=!1;const s="function"===typeof t.error?await t.error(e):t.error,r="function"===typeof t.description?await t.description(e):t.description,l="object"===typeof s&&!n.isValidElement(s)?s:{message:s};this.create(m({id:a,type:"error",description:r},l))}}).finally(()=>{i&&(this.dismiss(a),a=void 0),null==t.finally||t.finally.call(t)}),o=()=>new Promise((e,t)=>l.then(()=>"reject"===r[0]?t(r[1]):e(r[1])).catch(t));return"string"!==typeof a&&"number"!==typeof a?{unwrap:o}:Object.assign(a,{unwrap:o})},this.custom=(e,t)=>{const a=(null==t?void 0:t.id)||Ot++;return this.create(m({jsx:e(a),id:a},t)),a},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},It=e=>e&&"object"===typeof e&&"ok"in e&&"boolean"===typeof e.ok&&"status"in e&&"number"===typeof e.status,qt=(e,t)=>{const a=(null==t?void 0:t.id)||Ot++;return Mt.addToast(m(m({title:e},t),{},{id:a})),a},Bt=Object.assign(qt,{success:Mt.success,info:Mt.info,warning:Mt.warning,error:Mt.error,custom:Mt.custom,message:Mt.message,promise:Mt.promise,dismiss:Mt.dismiss,loading:Mt.loading},{getHistory:()=>Mt.toasts,getToasts:()=>Mt.getActiveToasts()});function zt(e){return void 0!==e.label}!function(e){if(!e||"undefined"==typeof document)return;let t=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css",t.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");const Ut=3,Wt=14;function Ht(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter(Boolean).join(" ")}const Gt=e=>{var t,a,s,r,i,l,o,c,d;const{invert:u,toast:p,unstyled:h,interacting:x,setHeights:f,visibleToasts:g,heights:y,index:b,toasts:v,expanded:j,removeToast:w,defaultRichColors:_,closeButton:N,style:k,cancelButtonStyle:S,actionButtonStyle:C,className:E="",descriptionClassName:D="",duration:P,position:A,gap:T,expandByDefault:L,classNames:R,icons:F,closeButtonAriaLabel:O="Close toast"}=e,[M,I]=n.useState(null),[q,B]=n.useState(null),[z,U]=n.useState(!1),[W,H]=n.useState(!1),[G,V]=n.useState(!1),[$,Q]=n.useState(!1),[Y,J]=n.useState(!1),[Z,X]=n.useState(0),[K,ee]=n.useState(0),te=n.useRef(p.duration||P||4e3),ae=n.useRef(null),se=n.useRef(null),ne=0===b,re=b+1<=g,ie=p.type,le=!1!==p.dismissible,oe=p.className||"",ce=p.descriptionClassName||"",de=n.useMemo(()=>y.findIndex(e=>e.toastId===p.id)||0,[y,p.id]),ue=n.useMemo(()=>{var e;return null!=(e=p.closeButton)?e:N},[p.closeButton,N]),me=n.useMemo(()=>p.duration||P||4e3,[p.duration,P]),pe=n.useRef(0),he=n.useRef(0),xe=n.useRef(0),fe=n.useRef(null),[ge,ye]=A.split("-"),be=n.useMemo(()=>y.reduce((e,t,a)=>a>=de?e:e+t.height,0),[y,de]),ve=(()=>{const[e,t]=n.useState(document.hidden);return n.useEffect(()=>{const e=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",e),()=>window.removeEventListener("visibilitychange",e)},[]),e})(),je=p.invert||u,we="loading"===ie;he.current=n.useMemo(()=>de*T+be,[de,be]),n.useEffect(()=>{te.current=me},[me]),n.useEffect(()=>{U(!0)},[]),n.useEffect(()=>{const e=se.current;if(e){const t=e.getBoundingClientRect().height;return ee(t),f(e=>[{toastId:p.id,height:t,position:p.position},...e]),()=>f(e=>e.filter(e=>e.toastId!==p.id))}},[f,p.id]),n.useLayoutEffect(()=>{if(!z)return;const e=se.current,t=e.style.height;e.style.height="auto";const a=e.getBoundingClientRect().height;e.style.height=t,ee(a),f(e=>e.find(e=>e.toastId===p.id)?e.map(e=>e.toastId===p.id?m(m({},e),{},{height:a}):e):[{toastId:p.id,height:a,position:p.position},...e])},[z,p.title,p.description,f,p.id,p.jsx,p.action,p.cancel]);const _e=n.useCallback(()=>{H(!0),X(he.current),f(e=>e.filter(e=>e.toastId!==p.id)),setTimeout(()=>{w(p)},200)},[p,w,f,he]);n.useEffect(()=>{if(p.promise&&"loading"===ie||p.duration===1/0||"loading"===p.type)return;let e;return j||x||ve?(()=>{if(xe.current<pe.current){const e=(new Date).getTime()-pe.current;te.current=te.current-e}xe.current=(new Date).getTime()})():te.current!==1/0&&(pe.current=(new Date).getTime(),e=setTimeout(()=>{null==p.onAutoClose||p.onAutoClose.call(p,p),_e()},te.current)),()=>clearTimeout(e)},[j,x,p,ie,ve,_e]),n.useEffect(()=>{p.delete&&(_e(),null==p.onDismiss||p.onDismiss.call(p,p))},[_e,p.delete]);const Ne=p.icon||(null==F?void 0:F[ie])||(e=>{switch(e){case"success":return At;case"info":return Lt;case"warning":return Tt;case"error":return Rt;default:return null}})(ie);var ke,Se;return n.createElement("li",{tabIndex:0,ref:se,className:Ht(E,oe,null==R?void 0:R.toast,null==p||null==(t=p.classNames)?void 0:t.toast,null==R?void 0:R.default,null==R?void 0:R[ie],null==p||null==(a=p.classNames)?void 0:a[ie]),"data-sonner-toast":"","data-rich-colors":null!=(ke=p.richColors)?ke:_,"data-styled":!Boolean(p.jsx||p.unstyled||h),"data-mounted":z,"data-promise":Boolean(p.promise),"data-swiped":Y,"data-removed":W,"data-visible":re,"data-y-position":ge,"data-x-position":ye,"data-index":b,"data-front":ne,"data-swiping":G,"data-dismissible":le,"data-type":ie,"data-invert":je,"data-swipe-out":$,"data-swipe-direction":q,"data-expanded":Boolean(j||L&&z),"data-testid":p.testId,style:m(m({"--index":b,"--toasts-before":b,"--z-index":v.length-b,"--offset":"".concat(W?Z:he.current,"px"),"--initial-height":L?"auto":"".concat(K,"px")},k),p.style),onDragEnd:()=>{V(!1),I(null),fe.current=null},onPointerDown:e=>{2!==e.button&&!we&&le&&(ae.current=new Date,X(he.current),e.target.setPointerCapture(e.pointerId),"BUTTON"!==e.target.tagName&&(V(!0),fe.current={x:e.clientX,y:e.clientY}))},onPointerUp:()=>{var e,t,a;if($||!le)return;fe.current=null;const s=Number((null==(e=se.current)?void 0:e.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),n=Number((null==(t=se.current)?void 0:t.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),r=(new Date).getTime()-(null==(a=ae.current)?void 0:a.getTime()),i="x"===M?s:n,l=Math.abs(i)/r;if(Math.abs(i)>=45||l>.11)return X(he.current),null==p.onDismiss||p.onDismiss.call(p,p),B("x"===M?s>0?"right":"left":n>0?"down":"up"),_e(),void Q(!0);var o,c;null==(o=se.current)||o.style.setProperty("--swipe-amount-x","0px"),null==(c=se.current)||c.style.setProperty("--swipe-amount-y","0px"),J(!1),V(!1),I(null)},onPointerMove:t=>{var a,s,n;if(!fe.current||!le)return;if((null==(a=window.getSelection())?void 0:a.toString().length)>0)return;const r=t.clientY-fe.current.y,i=t.clientX-fe.current.x;var l;const o=null!=(l=e.swipeDirections)?l:function(e){const[t,a]=e.split("-"),s=[];return t&&s.push(t),a&&s.push(a),s}(A);!M&&(Math.abs(i)>1||Math.abs(r)>1)&&I(Math.abs(i)>Math.abs(r)?"x":"y");let c={x:0,y:0};const d=e=>1/(1.5+Math.abs(e)/20);if("y"===M){if(o.includes("top")||o.includes("bottom"))if(o.includes("top")&&r<0||o.includes("bottom")&&r>0)c.y=r;else{const e=r*d(r);c.y=Math.abs(e)<Math.abs(r)?e:r}}else if("x"===M&&(o.includes("left")||o.includes("right")))if(o.includes("left")&&i<0||o.includes("right")&&i>0)c.x=i;else{const e=i*d(i);c.x=Math.abs(e)<Math.abs(i)?e:i}(Math.abs(c.x)>0||Math.abs(c.y)>0)&&J(!0),null==(s=se.current)||s.style.setProperty("--swipe-amount-x","".concat(c.x,"px")),null==(n=se.current)||n.style.setProperty("--swipe-amount-y","".concat(c.y,"px"))}},ue&&!p.jsx&&"loading"!==ie?n.createElement("button",{"aria-label":O,"data-disabled":we,"data-close-button":!0,onClick:we||!le?()=>{}:()=>{_e(),null==p.onDismiss||p.onDismiss.call(p,p)},className:Ht(null==R?void 0:R.closeButton,null==p||null==(s=p.classNames)?void 0:s.closeButton)},null!=(Se=null==F?void 0:F.close)?Se:Ft):null,(ie||p.icon||p.promise)&&null!==p.icon&&(null!==(null==F?void 0:F[ie])||p.icon)?n.createElement("div",{"data-icon":"",className:Ht(null==R?void 0:R.icon,null==p||null==(r=p.classNames)?void 0:r.icon)},p.promise||"loading"===p.type&&!p.icon?p.icon||function(){var e,t;return(null==F?void 0:F.loading)?n.createElement("div",{className:Ht(null==R?void 0:R.loader,null==p||null==(t=p.classNames)?void 0:t.loader,"sonner-loader"),"data-visible":"loading"===ie},F.loading):n.createElement(Pt,{className:Ht(null==R?void 0:R.loader,null==p||null==(e=p.classNames)?void 0:e.loader),visible:"loading"===ie})}():null,"loading"!==p.type?Ne:null):null,n.createElement("div",{"data-content":"",className:Ht(null==R?void 0:R.content,null==p||null==(i=p.classNames)?void 0:i.content)},n.createElement("div",{"data-title":"",className:Ht(null==R?void 0:R.title,null==p||null==(l=p.classNames)?void 0:l.title)},p.jsx?p.jsx:"function"===typeof p.title?p.title():p.title),p.description?n.createElement("div",{"data-description":"",className:Ht(D,ce,null==R?void 0:R.description,null==p||null==(o=p.classNames)?void 0:o.description)},"function"===typeof p.description?p.description():p.description):null),n.isValidElement(p.cancel)?p.cancel:p.cancel&&zt(p.cancel)?n.createElement("button",{"data-button":!0,"data-cancel":!0,style:p.cancelButtonStyle||S,onClick:e=>{zt(p.cancel)&&le&&(null==p.cancel.onClick||p.cancel.onClick.call(p.cancel,e),_e())},className:Ht(null==R?void 0:R.cancelButton,null==p||null==(c=p.classNames)?void 0:c.cancelButton)},p.cancel.label):null,n.isValidElement(p.action)?p.action:p.action&&zt(p.action)?n.createElement("button",{"data-button":!0,"data-action":!0,style:p.actionButtonStyle||C,onClick:e=>{zt(p.action)&&(null==p.action.onClick||p.action.onClick.call(p.action,e),e.defaultPrevented||_e())},className:Ht(null==R?void 0:R.actionButton,null==p||null==(d=p.classNames)?void 0:d.actionButton)},p.action.label):null)};function Vt(){if("undefined"===typeof window)return"ltr";if("undefined"===typeof document)return"ltr";const e=document.documentElement.getAttribute("dir");return"auto"!==e&&e?e:window.getComputedStyle(document.documentElement).direction}function $t(e,t){const a={};return[e,t].forEach((e,t)=>{const s=1===t,n=s?"--mobile-offset":"--offset",r=s?"16px":"24px";function i(e){["top","right","bottom","left"].forEach(t=>{a["".concat(n,"-").concat(t)]="number"===typeof e?"".concat(e,"px"):e})}"number"===typeof e||"string"===typeof e?i(e):"object"===typeof e?["top","right","bottom","left"].forEach(t=>{void 0===e[t]?a["".concat(n,"-").concat(t)]=r:a["".concat(n,"-").concat(t)]="number"===typeof e[t]?"".concat(e[t],"px"):e[t]}):i(r)}),a}const Qt=n.forwardRef(function(e,t){const{id:a,invert:s,position:r="bottom-right",hotkey:i=["altKey","KeyT"],expand:l,closeButton:o,className:c,offset:d,mobileOffset:u,theme:p="light",richColors:h,duration:x,style:f,visibleToasts:g=Ut,toastOptions:y,dir:b=Vt(),gap:v=Wt,icons:j,containerAriaLabel:w="Notifications"}=e,[_,N]=n.useState([]),k=n.useMemo(()=>a?_.filter(e=>e.toasterId===a):_.filter(e=>!e.toasterId),[_,a]),S=n.useMemo(()=>Array.from(new Set([r].concat(k.filter(e=>e.position).map(e=>e.position)))),[k,r]),[C,E]=n.useState([]),[D,P]=n.useState(!1),[A,T]=n.useState(!1),[L,R]=n.useState("system"!==p?p:"undefined"!==typeof window&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),F=n.useRef(null),O=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),M=n.useRef(null),I=n.useRef(!1),q=n.useCallback(e=>{N(t=>{var a;return(null==(a=t.find(t=>t.id===e.id))?void 0:a.delete)||Mt.dismiss(e.id),t.filter(t=>{let{id:a}=t;return a!==e.id})})},[]);return n.useEffect(()=>Mt.subscribe(e=>{e.dismiss?requestAnimationFrame(()=>{N(t=>t.map(t=>t.id===e.id?m(m({},t),{},{delete:!0}):t))}):setTimeout(()=>{Ct.flushSync(()=>{N(t=>{const a=t.findIndex(t=>t.id===e.id);return-1!==a?[...t.slice(0,a),m(m({},t[a]),e),...t.slice(a+1)]:[e,...t]})})})}),[_]),n.useEffect(()=>{if("system"!==p)return void R(p);if("system"===p&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?R("dark"):R("light")),"undefined"===typeof window)return;const e=window.matchMedia("(prefers-color-scheme: dark)");try{e.addEventListener("change",e=>{let{matches:t}=e;R(t?"dark":"light")})}catch(t){e.addListener(e=>{let{matches:t}=e;try{R(t?"dark":"light")}catch(Zf){console.error(Zf)}})}},[p]),n.useEffect(()=>{_.length<=1&&P(!1)},[_]),n.useEffect(()=>{const e=e=>{var t;var a;i.every(t=>e[t]||e.code===t)&&(P(!0),null==(a=F.current)||a.focus());"Escape"!==e.code||document.activeElement!==F.current&&!(null==(t=F.current)?void 0:t.contains(document.activeElement))||P(!1)};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[i]),n.useEffect(()=>{if(F.current)return()=>{M.current&&(M.current.focus({preventScroll:!0}),M.current=null,I.current=!1)}},[F.current]),n.createElement("section",{ref:t,"aria-label":"".concat(w," ").concat(O),tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},S.map((t,a)=>{var r;const[i,p]=t.split("-");return k.length?n.createElement("ol",{key:t,dir:"auto"===b?Vt():b,tabIndex:-1,ref:F,className:c,"data-sonner-toaster":!0,"data-sonner-theme":L,"data-y-position":i,"data-x-position":p,style:m(m({"--front-toast-height":"".concat((null==(r=C[0])?void 0:r.height)||0,"px"),"--width":"".concat(356,"px"),"--gap":"".concat(v,"px")},f),$t(d,u)),onBlur:e=>{I.current&&!e.currentTarget.contains(e.relatedTarget)&&(I.current=!1,M.current&&(M.current.focus({preventScroll:!0}),M.current=null))},onFocus:e=>{e.target instanceof HTMLElement&&"false"===e.target.dataset.dismissible||I.current||(I.current=!0,M.current=e.relatedTarget)},onMouseEnter:()=>P(!0),onMouseMove:()=>P(!0),onMouseLeave:()=>{A||P(!1)},onDragEnd:()=>P(!1),onPointerDown:e=>{e.target instanceof HTMLElement&&"false"===e.target.dataset.dismissible||T(!0)},onPointerUp:()=>T(!1)},k.filter(e=>!e.position&&0===a||e.position===t).map((a,r)=>{var i,c;return n.createElement(Gt,{key:a.id,icons:j,index:r,toast:a,defaultRichColors:h,duration:null!=(i=null==y?void 0:y.duration)?i:x,className:null==y?void 0:y.className,descriptionClassName:null==y?void 0:y.descriptionClassName,invert:s,visibleToasts:g,closeButton:null!=(c=null==y?void 0:y.closeButton)?c:o,interacting:A,position:t,style:null==y?void 0:y.style,unstyled:null==y?void 0:y.unstyled,classNames:null==y?void 0:y.classNames,cancelButtonStyle:null==y?void 0:y.cancelButtonStyle,actionButtonStyle:null==y?void 0:y.actionButtonStyle,closeButtonAriaLabel:null==y?void 0:y.closeButtonAriaLabel,removeToast:q,toasts:k.filter(e=>e.position==a.position),heights:C.filter(e=>e.position==a.position),setHeights:E,expandByDefault:l,gap:v,expanded:D,swipeDirections:e.swipeDirections})})):null}))});function Yt(e,t){return function(){return e.apply(t,arguments)}}const{toString:Jt}=Object.prototype,{getPrototypeOf:Zt}=Object,{iterator:Xt,toStringTag:Kt}=Symbol,ea=(ta=Object.create(null),e=>{const t=Jt.call(e);return ta[t]||(ta[t]=t.slice(8,-1).toLowerCase())});var ta;const aa=e=>(e=e.toLowerCase(),t=>ea(t)===e),sa=e=>t=>typeof t===e,{isArray:na}=Array,ra=sa("undefined");function ia(e){return null!==e&&!ra(e)&&null!==e.constructor&&!ra(e.constructor)&&ca(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const la=aa("ArrayBuffer");const oa=sa("string"),ca=sa("function"),da=sa("number"),ua=e=>null!==e&&"object"===typeof e,ma=e=>{if("object"!==ea(e))return!1;const t=Zt(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Kt in e)&&!(Xt in e)},pa=aa("Date"),ha=aa("File"),xa=aa("Blob"),fa=aa("FileList"),ga=aa("URLSearchParams"),[ya,ba,va,ja]=["ReadableStream","Request","Response","Headers"].map(aa);function wa(e,t){let a,s,{allOwnKeys:n=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),na(e))for(a=0,s=e.length;a<s;a++)t.call(null,e[a],a,e);else{if(ia(e))return;const s=n?Object.getOwnPropertyNames(e):Object.keys(e),r=s.length;let i;for(a=0;a<r;a++)i=s[a],t.call(null,e[i],i,e)}}function _a(e,t){if(ia(e))return null;t=t.toLowerCase();const a=Object.keys(e);let s,n=a.length;for(;n-- >0;)if(s=a[n],t===s.toLowerCase())return s;return null}const Na="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,ka=e=>!ra(e)&&e!==Na;const Sa=(Ca="undefined"!==typeof Uint8Array&&Zt(Uint8Array),e=>Ca&&e instanceof Ca);var Ca;const Ea=aa("HTMLFormElement"),Da=(e=>{let{hasOwnProperty:t}=e;return(e,a)=>t.call(e,a)})(Object.prototype),Pa=aa("RegExp"),Aa=(e,t)=>{const a=Object.getOwnPropertyDescriptors(e),s={};wa(a,(a,n)=>{let r;!1!==(r=t(a,n,e))&&(s[n]=r||a)}),Object.defineProperties(e,s)};const Ta=aa("AsyncFunction"),La=((e,t)=>{return e?setImmediate:t?(a="axios@".concat(Math.random()),s=[],Na.addEventListener("message",e=>{let{source:t,data:n}=e;t===Na&&n===a&&s.length&&s.shift()()},!1),e=>{s.push(e),Na.postMessage(a,"*")}):e=>setTimeout(e);var a,s})("function"===typeof setImmediate,ca(Na.postMessage)),Ra="undefined"!==typeof queueMicrotask?queueMicrotask.bind(Na):"undefined"!==typeof process&&process.nextTick||La,Fa={isArray:na,isArrayBuffer:la,isBuffer:ia,isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||ca(e.append)&&("formdata"===(t=ea(e))||"object"===t&&ca(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&la(e.buffer),t},isString:oa,isNumber:da,isBoolean:e=>!0===e||!1===e,isObject:ua,isPlainObject:ma,isEmptyObject:e=>{if(!ua(e)||ia(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(Zf){return!1}},isReadableStream:ya,isRequest:ba,isResponse:va,isHeaders:ja,isUndefined:ra,isDate:pa,isFile:ha,isBlob:xa,isRegExp:Pa,isFunction:ca,isStream:e=>ua(e)&&ca(e.pipe),isURLSearchParams:ga,isTypedArray:Sa,isFileList:fa,forEach:wa,merge:function e(){const{caseless:t,skipUndefined:a}=ka(this)&&this||{},s={},n=(n,r)=>{const i=t&&_a(s,r)||r;ma(s[i])&&ma(n)?s[i]=e(s[i],n):ma(n)?s[i]=e({},n):na(n)?s[i]=n.slice():a&&ra(n)||(s[i]=n)};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&wa(arguments[r],n);return s},extend:function(e,t,a){let{allOwnKeys:s}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return wa(t,(t,s)=>{a&&ca(t)?e[s]=Yt(t,a):e[s]=t},{allOwnKeys:s}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,a,s)=>{e.prototype=Object.create(t.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),a&&Object.assign(e.prototype,a)},toFlatObject:(e,t,a,s)=>{let n,r,i;const l={};if(t=t||{},null==e)return t;do{for(n=Object.getOwnPropertyNames(e),r=n.length;r-- >0;)i=n[r],s&&!s(i,e,t)||l[i]||(t[i]=e[i],l[i]=!0);e=!1!==a&&Zt(e)}while(e&&(!a||a(e,t))&&e!==Object.prototype);return t},kindOf:ea,kindOfTest:aa,endsWith:(e,t,a)=>{e=String(e),(void 0===a||a>e.length)&&(a=e.length),a-=t.length;const s=e.indexOf(t,a);return-1!==s&&s===a},toArray:e=>{if(!e)return null;if(na(e))return e;let t=e.length;if(!da(t))return null;const a=new Array(t);for(;t-- >0;)a[t]=e[t];return a},forEachEntry:(e,t)=>{const a=(e&&e[Xt]).call(e);let s;for(;(s=a.next())&&!s.done;){const a=s.value;t.call(e,a[0],a[1])}},matchAll:(e,t)=>{let a;const s=[];for(;null!==(a=e.exec(t));)s.push(a);return s},isHTMLForm:Ea,hasOwnProperty:Da,hasOwnProp:Da,reduceDescriptors:Aa,freezeMethods:e=>{Aa(e,(t,a)=>{if(ca(e)&&-1!==["arguments","caller","callee"].indexOf(a))return!1;const s=e[a];ca(s)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+a+"'")}))})},toObjectSet:(e,t)=>{const a={},s=e=>{e.forEach(e=>{a[e]=!0})};return na(e)?s(e):s(String(e).split(t)),a},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,a){return t.toUpperCase()+a}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:_a,global:Na,isContextDefined:ka,isSpecCompliantForm:function(e){return!!(e&&ca(e.append)&&"FormData"===e[Kt]&&e[Xt])},toJSONObject:e=>{const t=new Array(10),a=(e,s)=>{if(ua(e)){if(t.indexOf(e)>=0)return;if(ia(e))return e;if(!("toJSON"in e)){t[s]=e;const n=na(e)?[]:{};return wa(e,(e,t)=>{const r=a(e,s+1);!ra(r)&&(n[t]=r)}),t[s]=void 0,n}}return e};return a(e,0)},isAsyncFn:Ta,isThenable:e=>e&&(ua(e)||ca(e))&&ca(e.then)&&ca(e.catch),setImmediate:La,asap:Ra,isIterable:e=>null!=e&&ca(e[Xt])};function Oa(e,t,a,s,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),a&&(this.config=a),s&&(this.request=s),n&&(this.response=n,this.status=n.status?n.status:null)}Fa.inherits(Oa,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Fa.toJSONObject(this.config),code:this.code,status:this.status}}});const Ma=Oa.prototype,Ia={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Ia[e]={value:e}}),Object.defineProperties(Oa,Ia),Object.defineProperty(Ma,"isAxiosError",{value:!0}),Oa.from=(e,t,a,s,n,r)=>{const i=Object.create(Ma);Fa.toFlatObject(e,i,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e);const l=e&&e.message?e.message:"Error",o=null==t&&e?e.code:t;return Oa.call(i,l,o,a,s,n),e&&null==i.cause&&Object.defineProperty(i,"cause",{value:e,configurable:!0}),i.name=e&&e.name||"Error",r&&Object.assign(i,r),i};const qa=Oa;function Ba(e){return Fa.isPlainObject(e)||Fa.isArray(e)}function za(e){return Fa.endsWith(e,"[]")?e.slice(0,-2):e}function Ua(e,t,a){return e?e.concat(t).map(function(e,t){return e=za(e),!a&&t?"["+e+"]":e}).join(a?".":""):t}const Wa=Fa.toFlatObject(Fa,{},null,function(e){return/^is[A-Z]/.test(e)});const Ha=function(e,t,a){if(!Fa.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const s=(a=Fa.toFlatObject(a,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!Fa.isUndefined(t[e])})).metaTokens,n=a.visitor||c,r=a.dots,i=a.indexes,l=(a.Blob||"undefined"!==typeof Blob&&Blob)&&Fa.isSpecCompliantForm(t);if(!Fa.isFunction(n))throw new TypeError("visitor must be a function");function o(e){if(null===e)return"";if(Fa.isDate(e))return e.toISOString();if(Fa.isBoolean(e))return e.toString();if(!l&&Fa.isBlob(e))throw new qa("Blob is not supported. Use a Buffer instead.");return Fa.isArrayBuffer(e)||Fa.isTypedArray(e)?l&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,a,n){let l=e;if(e&&!n&&"object"===typeof e)if(Fa.endsWith(a,"{}"))a=s?a:a.slice(0,-2),e=JSON.stringify(e);else if(Fa.isArray(e)&&function(e){return Fa.isArray(e)&&!e.some(Ba)}(e)||(Fa.isFileList(e)||Fa.endsWith(a,"[]"))&&(l=Fa.toArray(e)))return a=za(a),l.forEach(function(e,s){!Fa.isUndefined(e)&&null!==e&&t.append(!0===i?Ua([a],s,r):null===i?a:a+"[]",o(e))}),!1;return!!Ba(e)||(t.append(Ua(n,a,r),o(e)),!1)}const d=[],u=Object.assign(Wa,{defaultVisitor:c,convertValue:o,isVisitable:Ba});if(!Fa.isObject(e))throw new TypeError("data must be an object");return function e(a,s){if(!Fa.isUndefined(a)){if(-1!==d.indexOf(a))throw Error("Circular reference detected in "+s.join("."));d.push(a),Fa.forEach(a,function(a,r){!0===(!(Fa.isUndefined(a)||null===a)&&n.call(t,a,Fa.isString(r)?r.trim():r,s,u))&&e(a,s?s.concat(r):[r])}),d.pop()}}(e),t};function Ga(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function Va(e,t){this._pairs=[],e&&Ha(e,this,t)}const $a=Va.prototype;$a.append=function(e,t){this._pairs.push([e,t])},$a.toString=function(e){const t=e?function(t){return e.call(this,t,Ga)}:Ga;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};const Qa=Va;function Ya(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Ja(e,t,a){if(!t)return e;const s=a&&a.encode||Ya;Fa.isFunction(a)&&(a={serialize:a});const n=a&&a.serialize;let r;if(r=n?n(t,a):Fa.isURLSearchParams(t)?t.toString():new Qa(t,a).toString(s),r){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e}const Za=class{constructor(){this.handlers=[]}use(e,t,a){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!a&&a.synchronous,runWhen:a?a.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Fa.forEach(this.handlers,function(t){null!==t&&e(t)})}},Xa={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Ka={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:Qa,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},es="undefined"!==typeof window&&"undefined"!==typeof document,ts="object"===typeof navigator&&navigator||void 0,as=es&&(!ts||["ReactNative","NativeScript","NS"].indexOf(ts.product)<0),ss="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,ns=es&&window.location.href||"http://localhost",rs=m(m({},s),Ka);const is=function(e){function t(e,a,s,n){let r=e[n++];if("__proto__"===r)return!0;const i=Number.isFinite(+r),l=n>=e.length;if(r=!r&&Fa.isArray(s)?s.length:r,l)return Fa.hasOwnProp(s,r)?s[r]=[s[r],a]:s[r]=a,!i;s[r]&&Fa.isObject(s[r])||(s[r]=[]);return t(e,a,s[r],n)&&Fa.isArray(s[r])&&(s[r]=function(e){const t={},a=Object.keys(e);let s;const n=a.length;let r;for(s=0;s<n;s++)r=a[s],t[r]=e[r];return t}(s[r])),!i}if(Fa.isFormData(e)&&Fa.isFunction(e.entries)){const a={};return Fa.forEachEntry(e,(e,s)=>{t(function(e){return Fa.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}(e),s,a,0)}),a}return null};const ls={transitional:Xa,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const a=t.getContentType()||"",s=a.indexOf("application/json")>-1,n=Fa.isObject(e);n&&Fa.isHTMLForm(e)&&(e=new FormData(e));if(Fa.isFormData(e))return s?JSON.stringify(is(e)):e;if(Fa.isArrayBuffer(e)||Fa.isBuffer(e)||Fa.isStream(e)||Fa.isFile(e)||Fa.isBlob(e)||Fa.isReadableStream(e))return e;if(Fa.isArrayBufferView(e))return e.buffer;if(Fa.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let r;if(n){if(a.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Ha(e,new rs.classes.URLSearchParams,m({visitor:function(e,t,a,s){return rs.isNode&&Fa.isBuffer(e)?(this.append(t,e.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((r=Fa.isFileList(e))||a.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Ha(r?{"files[]":e}:e,t&&new t,this.formSerializer)}}return n||s?(t.setContentType("application/json",!1),function(e,t,a){if(Fa.isString(e))try{return(t||JSON.parse)(e),Fa.trim(e)}catch(Zf){if("SyntaxError"!==Zf.name)throw Zf}return(a||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||ls.transitional,a=t&&t.forcedJSONParsing,s="json"===this.responseType;if(Fa.isResponse(e)||Fa.isReadableStream(e))return e;if(e&&Fa.isString(e)&&(a&&!this.responseType||s)){const a=!(t&&t.silentJSONParsing)&&s;try{return JSON.parse(e,this.parseReviver)}catch(Zf){if(a){if("SyntaxError"===Zf.name)throw qa.from(Zf,qa.ERR_BAD_RESPONSE,this,null,this.response);throw Zf}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:rs.classes.FormData,Blob:rs.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Fa.forEach(["delete","get","head","post","put","patch"],e=>{ls.headers[e]={}});const os=ls,cs=Fa.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),ds=Symbol("internals");function us(e){return e&&String(e).trim().toLowerCase()}function ms(e){return!1===e||null==e?e:Fa.isArray(e)?e.map(ms):String(e)}function ps(e,t,a,s,n){return Fa.isFunction(s)?s.call(this,t,a):(n&&(t=a),Fa.isString(t)?Fa.isString(s)?-1!==t.indexOf(s):Fa.isRegExp(s)?s.test(t):void 0:void 0)}class hs{constructor(e){e&&this.set(e)}set(e,t,a){const s=this;function n(e,t,a){const n=us(t);if(!n)throw new Error("header name must be a non-empty string");const r=Fa.findKey(s,n);(!r||void 0===s[r]||!0===a||void 0===a&&!1!==s[r])&&(s[r||t]=ms(e))}const r=(e,t)=>Fa.forEach(e,(e,a)=>n(e,a,t));if(Fa.isPlainObject(e)||e instanceof this.constructor)r(e,t);else if(Fa.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))r((e=>{const t={};let a,s,n;return e&&e.split("\n").forEach(function(e){n=e.indexOf(":"),a=e.substring(0,n).trim().toLowerCase(),s=e.substring(n+1).trim(),!a||t[a]&&cs[a]||("set-cookie"===a?t[a]?t[a].push(s):t[a]=[s]:t[a]=t[a]?t[a]+", "+s:s)}),t})(e),t);else if(Fa.isObject(e)&&Fa.isIterable(e)){let a,s,n={};for(const t of e){if(!Fa.isArray(t))throw TypeError("Object iterator must return a key-value pair");n[s=t[0]]=(a=n[s])?Fa.isArray(a)?[...a,t[1]]:[a,t[1]]:t[1]}r(n,t)}else null!=e&&n(t,e,a);return this}get(e,t){if(e=us(e)){const a=Fa.findKey(this,e);if(a){const e=this[a];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),a=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=a.exec(e);)t[s[1]]=s[2];return t}(e);if(Fa.isFunction(t))return t.call(this,e,a);if(Fa.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=us(e)){const a=Fa.findKey(this,e);return!(!a||void 0===this[a]||t&&!ps(0,this[a],a,t))}return!1}delete(e,t){const a=this;let s=!1;function n(e){if(e=us(e)){const n=Fa.findKey(a,e);!n||t&&!ps(0,a[n],n,t)||(delete a[n],s=!0)}}return Fa.isArray(e)?e.forEach(n):n(e),s}clear(e){const t=Object.keys(this);let a=t.length,s=!1;for(;a--;){const n=t[a];e&&!ps(0,this[n],n,e,!0)||(delete this[n],s=!0)}return s}normalize(e){const t=this,a={};return Fa.forEach(this,(s,n)=>{const r=Fa.findKey(a,n);if(r)return t[r]=ms(s),void delete t[n];const i=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,a)=>t.toUpperCase()+a)}(n):String(n).trim();i!==n&&delete t[n],t[i]=ms(s),a[i]=!0}),this}concat(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return Fa.forEach(this,(a,s)=>{null!=a&&!1!==a&&(t[s]=e&&Fa.isArray(a)?a.join(", "):a)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(e=>{let[t,a]=e;return t+": "+a}).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var a=arguments.length,s=new Array(a>1?a-1:0),n=1;n<a;n++)s[n-1]=arguments[n];return s.forEach(e=>t.set(e)),t}static accessor(e){const t=(this[ds]=this[ds]={accessors:{}}).accessors,a=this.prototype;function s(e){const s=us(e);t[s]||(!function(e,t){const a=Fa.toCamelCase(" "+t);["get","set","has"].forEach(s=>{Object.defineProperty(e,s+a,{value:function(e,a,n){return this[s].call(this,t,e,a,n)},configurable:!0})})}(a,e),t[s]=!0)}return Fa.isArray(e)?e.forEach(s):s(e),this}}hs.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Fa.reduceDescriptors(hs.prototype,(e,t)=>{let{value:a}=e,s=t[0].toUpperCase()+t.slice(1);return{get:()=>a,set(e){this[s]=e}}}),Fa.freezeMethods(hs);const xs=hs;function fs(e,t){const a=this||os,s=t||a,n=xs.from(s.headers);let r=s.data;return Fa.forEach(e,function(e){r=e.call(a,r,n.normalize(),t?t.status:void 0)}),n.normalize(),r}function gs(e){return!(!e||!e.__CANCEL__)}function ys(e,t,a){qa.call(this,null==e?"canceled":e,qa.ERR_CANCELED,t,a),this.name="CanceledError"}Fa.inherits(ys,qa,{__CANCEL__:!0});const bs=ys;function vs(e,t,a){const s=a.config.validateStatus;a.status&&s&&!s(a.status)?t(new qa("Request failed with status code "+a.status,[qa.ERR_BAD_REQUEST,qa.ERR_BAD_RESPONSE][Math.floor(a.status/100)-4],a.config,a.request,a)):e(a)}const js=function(e,t){e=e||10;const a=new Array(e),s=new Array(e);let n,r=0,i=0;return t=void 0!==t?t:1e3,function(l){const o=Date.now(),c=s[i];n||(n=o),a[r]=l,s[r]=o;let d=i,u=0;for(;d!==r;)u+=a[d++],d%=e;if(r=(r+1)%e,r===i&&(i=(i+1)%e),o-n<t)return;const m=c&&o-c;return m?Math.round(1e3*u/m):void 0}};const ws=function(e,t){let a,s,n=0,r=1e3/t;const i=function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();n=r,a=null,s&&(clearTimeout(s),s=null),e(...t)};return[function(){const e=Date.now(),t=e-n;for(var l=arguments.length,o=new Array(l),c=0;c<l;c++)o[c]=arguments[c];t>=r?i(o,e):(a=o,s||(s=setTimeout(()=>{s=null,i(a)},r-t)))},()=>a&&i(a)]},_s=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,s=0;const n=js(50,250);return ws(a=>{const r=a.loaded,i=a.lengthComputable?a.total:void 0,l=r-s,o=n(l);s=r;e({loaded:r,total:i,progress:i?r/i:void 0,bytes:l,rate:o||void 0,estimated:o&&i&&r<=i?(i-r)/o:void 0,event:a,lengthComputable:null!=i,[t?"download":"upload"]:!0})},a)},Ns=(e,t)=>{const a=null!=e;return[s=>t[0]({lengthComputable:a,total:e,loaded:s}),t[1]]},ks=e=>function(){for(var t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];return Fa.asap(()=>e(...a))},Ss=rs.hasStandardBrowserEnv?((e,t)=>a=>(a=new URL(a,rs.origin),e.protocol===a.protocol&&e.host===a.host&&(t||e.port===a.port)))(new URL(rs.origin),rs.navigator&&/(msie|trident)/i.test(rs.navigator.userAgent)):()=>!0,Cs=rs.hasStandardBrowserEnv?{write(e,t,a,s,n,r){const i=[e+"="+encodeURIComponent(t)];Fa.isNumber(a)&&i.push("expires="+new Date(a).toGMTString()),Fa.isString(s)&&i.push("path="+s),Fa.isString(n)&&i.push("domain="+n),!0===r&&i.push("secure"),document.cookie=i.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function Es(e,t,a){let s=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(s||0==a)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const Ds=e=>e instanceof xs?m({},e):e;function Ps(e,t){t=t||{};const a={};function s(e,t,a,s){return Fa.isPlainObject(e)&&Fa.isPlainObject(t)?Fa.merge.call({caseless:s},e,t):Fa.isPlainObject(t)?Fa.merge({},t):Fa.isArray(t)?t.slice():t}function n(e,t,a,n){return Fa.isUndefined(t)?Fa.isUndefined(e)?void 0:s(void 0,e,0,n):s(e,t,0,n)}function r(e,t){if(!Fa.isUndefined(t))return s(void 0,t)}function i(e,t){return Fa.isUndefined(t)?Fa.isUndefined(e)?void 0:s(void 0,e):s(void 0,t)}function l(a,n,r){return r in t?s(a,n):r in e?s(void 0,a):void 0}const o={url:r,method:r,data:r,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:l,headers:(e,t,a)=>n(Ds(e),Ds(t),0,!0)};return Fa.forEach(Object.keys(m(m({},e),t)),function(s){const r=o[s]||n,i=r(e[s],t[s],s);Fa.isUndefined(i)&&r!==l||(a[s]=i)}),a}const As=e=>{const t=Ps({},e);let{data:a,withXSRFToken:s,xsrfHeaderName:n,xsrfCookieName:r,headers:i,auth:l}=t;if(t.headers=i=xs.from(i),t.url=Ja(Es(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&i.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),Fa.isFormData(a))if(rs.hasStandardBrowserEnv||rs.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if(Fa.isFunction(a.getHeaders)){const e=a.getHeaders(),t=["content-type","content-length"];Object.entries(e).forEach(e=>{let[a,s]=e;t.includes(a.toLowerCase())&&i.set(a,s)})}if(rs.hasStandardBrowserEnv&&(s&&Fa.isFunction(s)&&(s=s(t)),s||!1!==s&&Ss(t.url))){const e=n&&r&&Cs.read(r);e&&i.set(n,e)}return t},Ts="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise(function(t,a){const s=As(e);let n=s.data;const r=xs.from(s.headers).normalize();let i,l,o,c,d,{responseType:u,onUploadProgress:m,onDownloadProgress:p}=s;function h(){c&&c(),d&&d(),s.cancelToken&&s.cancelToken.unsubscribe(i),s.signal&&s.signal.removeEventListener("abort",i)}let x=new XMLHttpRequest;function f(){if(!x)return;const s=xs.from("getAllResponseHeaders"in x&&x.getAllResponseHeaders());vs(function(e){t(e),h()},function(e){a(e),h()},{data:u&&"text"!==u&&"json"!==u?x.response:x.responseText,status:x.status,statusText:x.statusText,headers:s,config:e,request:x}),x=null}x.open(s.method.toUpperCase(),s.url,!0),x.timeout=s.timeout,"onloadend"in x?x.onloadend=f:x.onreadystatechange=function(){x&&4===x.readyState&&(0!==x.status||x.responseURL&&0===x.responseURL.indexOf("file:"))&&setTimeout(f)},x.onabort=function(){x&&(a(new qa("Request aborted",qa.ECONNABORTED,e,x)),x=null)},x.onerror=function(t){const s=t&&t.message?t.message:"Network Error",n=new qa(s,qa.ERR_NETWORK,e,x);n.event=t||null,a(n),x=null},x.ontimeout=function(){let t=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const n=s.transitional||Xa;s.timeoutErrorMessage&&(t=s.timeoutErrorMessage),a(new qa(t,n.clarifyTimeoutError?qa.ETIMEDOUT:qa.ECONNABORTED,e,x)),x=null},void 0===n&&r.setContentType(null),"setRequestHeader"in x&&Fa.forEach(r.toJSON(),function(e,t){x.setRequestHeader(t,e)}),Fa.isUndefined(s.withCredentials)||(x.withCredentials=!!s.withCredentials),u&&"json"!==u&&(x.responseType=s.responseType),p&&([o,d]=_s(p,!0),x.addEventListener("progress",o)),m&&x.upload&&([l,c]=_s(m),x.upload.addEventListener("progress",l),x.upload.addEventListener("loadend",c)),(s.cancelToken||s.signal)&&(i=t=>{x&&(a(!t||t.type?new bs(null,e,x):t),x.abort(),x=null)},s.cancelToken&&s.cancelToken.subscribe(i),s.signal&&(s.signal.aborted?i():s.signal.addEventListener("abort",i)));const g=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(s.url);g&&-1===rs.protocols.indexOf(g)?a(new qa("Unsupported protocol "+g+":",qa.ERR_BAD_REQUEST,e)):x.send(n||null)})},Ls=(e,t)=>{const{length:a}=e=e?e.filter(Boolean):[];if(t||a){let a,s=new AbortController;const n=function(e){if(!a){a=!0,i();const t=e instanceof Error?e:this.reason;s.abort(t instanceof qa?t:new bs(t instanceof Error?t.message:t))}};let r=t&&setTimeout(()=>{r=null,n(new qa("timeout ".concat(t," of ms exceeded"),qa.ETIMEDOUT))},t);const i=()=>{e&&(r&&clearTimeout(r),r=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(n):e.removeEventListener("abort",n)}),e=null)};e.forEach(e=>e.addEventListener("abort",n));const{signal:l}=s;return l.unsubscribe=()=>Fa.asap(i),l}};function Rs(e,t){this.v=e,this.k=t}function Fs(e){return function(){return new Os(e.apply(this,arguments))}}function Os(e){var t,a;function s(t,a){try{var r=e[t](a),i=r.value,l=i instanceof Rs;Promise.resolve(l?i.v:i).then(function(a){if(l){var o="return"===t?"return":"next";if(!i.k||a.done)return s(o,a);a=e[o](a).value}n(r.done?"return":"normal",a)},function(e){s("throw",e)})}catch(e){n("throw",e)}}function n(e,n){switch(e){case"return":t.resolve({value:n,done:!0});break;case"throw":t.reject(n);break;default:t.resolve({value:n,done:!1})}(t=t.next)?s(t.key,t.arg):a=null}this._invoke=function(e,n){return new Promise(function(r,i){var l={key:e,arg:n,resolve:r,reject:i,next:null};a?a=a.next=l:(t=a=l,s(e,n))})},"function"!=typeof e.return&&(this.return=void 0)}function Ms(e){return new Rs(e,0)}function Is(e){var t={},a=!1;function s(t,s){return a=!0,s=new Promise(function(a){a(e[t](s))}),{done:!1,value:new Rs(s,1)}}return t["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return a?(a=!1,e):s("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(a)throw a=!1,e;return s("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return a?(a=!1,e):s("return",e)}),t}function qs(e){var t,a,s,n=2;for("undefined"!=typeof Symbol&&(a=Symbol.asyncIterator,s=Symbol.iterator);n--;){if(a&&null!=(t=e[a]))return t.call(e);if(s&&null!=(t=e[s]))return new Bs(t.call(e));a="@@asyncIterator",s="@@iterator"}throw new TypeError("Object is not async iterable")}function Bs(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return Bs=function(e){this.s=e,this.n=e.next},Bs.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var a=this.s.return;return void 0===a?Promise.resolve({value:e,done:!0}):t(a.apply(this.s,arguments))},throw:function(e){var a=this.s.return;return void 0===a?Promise.reject(e):t(a.apply(this.s,arguments))}},new Bs(e)}Os.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},Os.prototype.next=function(e){return this._invoke("next",e)},Os.prototype.throw=function(e){return this._invoke("throw",e)},Os.prototype.return=function(e){return this._invoke("return",e)};const zs=function*(e,t){let a=e.byteLength;if(!t||a<t)return void(yield e);let s,n=0;for(;n<a;)s=n+t,yield e.slice(n,s),n=s},Us=function(){var e=Fs(function*(e,t){var a,s=!1,n=!1;try{for(var r,i=qs(Ws(e));s=!(r=yield Ms(i.next())).done;s=!1){const e=r.value;yield*Is(qs(zs(e,t)))}}catch(l){n=!0,a=l}finally{try{s&&null!=i.return&&(yield Ms(i.return()))}finally{if(n)throw a}}});return function(t,a){return e.apply(this,arguments)}}(),Ws=function(){var e=Fs(function*(e){if(e[Symbol.asyncIterator])return void(yield*Is(qs(e)));const t=e.getReader();try{for(;;){const{done:e,value:a}=yield Ms(t.read());if(e)break;yield a}}finally{yield Ms(t.cancel())}});return function(t){return e.apply(this,arguments)}}(),Hs=(e,t,a,s)=>{const n=Us(e,t);let r,i=0,l=e=>{r||(r=!0,s&&s(e))};return new ReadableStream({async pull(e){try{const{done:t,value:s}=await n.next();if(t)return l(),void e.close();let r=s.byteLength;if(a){let e=i+=r;a(e)}e.enqueue(new Uint8Array(s))}catch(t){throw l(t),t}},cancel:e=>(l(e),n.return())},{highWaterMark:2})},{isFunction:Gs}=Fa,Vs=(e=>{let{Request:t,Response:a}=e;return{Request:t,Response:a}})(Fa.global),{ReadableStream:$s,TextEncoder:Qs}=Fa.global,Ys=function(e){try{for(var t=arguments.length,a=new Array(t>1?t-1:0),s=1;s<t;s++)a[s-1]=arguments[s];return!!e(...a)}catch(Zf){return!1}},Js=e=>{e=Fa.merge.call({skipUndefined:!0},Vs,e);const{fetch:t,Request:a,Response:s}=e,n=t?Gs(t):"function"===typeof fetch,r=Gs(a),i=Gs(s);if(!n)return!1;const l=n&&Gs($s),o=n&&("function"===typeof Qs?(c=new Qs,e=>c.encode(e)):async e=>new Uint8Array(await new a(e).arrayBuffer()));var c;const d=r&&l&&Ys(()=>{let e=!1;const t=new a(rs.origin,{body:new $s,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),u=i&&l&&Ys(()=>Fa.isReadableStream(new s("").body)),p={stream:u&&(e=>e.body)};n&&["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!p[e]&&(p[e]=(t,a)=>{let s=t&&t[e];if(s)return s.call(t);throw new qa("Response type '".concat(e,"' is not supported"),qa.ERR_NOT_SUPPORT,a)})});const h=async(e,t)=>{const s=Fa.toFiniteNumber(e.getContentLength());return null==s?(async e=>{if(null==e)return 0;if(Fa.isBlob(e))return e.size;if(Fa.isSpecCompliantForm(e)){const t=new a(rs.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return Fa.isArrayBufferView(e)||Fa.isArrayBuffer(e)?e.byteLength:(Fa.isURLSearchParams(e)&&(e+=""),Fa.isString(e)?(await o(e)).byteLength:void 0)})(t):s};return async e=>{let{url:n,method:i,data:l,signal:o,cancelToken:c,timeout:x,onDownloadProgress:f,onUploadProgress:g,responseType:y,headers:b,withCredentials:v="same-origin",fetchOptions:j}=As(e),w=t||fetch;y=y?(y+"").toLowerCase():"text";let _=Ls([o,c&&c.toAbortSignal()],x),N=null;const k=_&&_.unsubscribe&&(()=>{_.unsubscribe()});let S;try{if(g&&d&&"get"!==i&&"head"!==i&&0!==(S=await h(b,l))){let e,t=new a(n,{method:"POST",body:l,duplex:"half"});if(Fa.isFormData(l)&&(e=t.headers.get("content-type"))&&b.setContentType(e),t.body){const[e,a]=Ns(S,_s(ks(g)));l=Hs(t.body,65536,e,a)}}Fa.isString(v)||(v=v?"include":"omit");const t=r&&"credentials"in a.prototype,o=m(m({},j),{},{signal:_,method:i.toUpperCase(),headers:b.normalize().toJSON(),body:l,duplex:"half",credentials:t?v:void 0});N=r&&new a(n,o);let c=await(r?w(N,j):w(n,o));const x=u&&("stream"===y||"response"===y);if(u&&(f||x&&k)){const e={};["status","statusText","headers"].forEach(t=>{e[t]=c[t]});const t=Fa.toFiniteNumber(c.headers.get("content-length")),[a,n]=f&&Ns(t,_s(ks(f),!0))||[];c=new s(Hs(c.body,65536,a,()=>{n&&n(),k&&k()}),e)}y=y||"text";let C=await p[Fa.findKey(p,y)||"text"](c,e);return!x&&k&&k(),await new Promise((t,a)=>{vs(t,a,{data:C,headers:xs.from(c.headers),status:c.status,statusText:c.statusText,config:e,request:N})})}catch(C){if(k&&k(),C&&"TypeError"===C.name&&/Load failed|fetch/i.test(C.message))throw Object.assign(new qa("Network Error",qa.ERR_NETWORK,e,N),{cause:C.cause||C});throw qa.from(C,C&&C.code,e,N)}}},Zs=new Map,Xs=e=>{let t=e?e.env:{};const{fetch:a,Request:s,Response:n}=t,r=[s,n,a];let i,l,o=r.length,c=Zs;for(;o--;)i=r[o],l=c.get(i),void 0===l&&c.set(i,l=o?new Map:Js(t)),c=l;return l},Ks=(Xs(),{http:null,xhr:Ts,fetch:{get:Xs}});Fa.forEach(Ks,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(Zf){}Object.defineProperty(e,"adapterName",{value:t})}});const en=e=>"- ".concat(e),tn=e=>Fa.isFunction(e)||null===e||!1===e,an=(e,t)=>{e=Fa.isArray(e)?e:[e];const{length:a}=e;let s,n;const r={};for(let i=0;i<a;i++){let a;if(s=e[i],n=s,!tn(s)&&(n=Ks[(a=String(s)).toLowerCase()],void 0===n))throw new qa("Unknown adapter '".concat(a,"'"));if(n&&(Fa.isFunction(n)||(n=n.get(t))))break;r[a||"#"+i]=n}if(!n){const e=Object.entries(r).map(e=>{let[t,a]=e;return"adapter ".concat(t," ")+(!1===a?"is not supported by the environment":"is not available in the build")});let t=a?e.length>1?"since :\n"+e.map(en).join("\n"):" "+en(e[0]):"as no adapter specified";throw new qa("There is no suitable adapter to dispatch the request "+t,"ERR_NOT_SUPPORT")}return n};function sn(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new bs(null,e)}function nn(e){sn(e),e.headers=xs.from(e.headers),e.data=fs.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return an(e.adapter||os.adapter,e)(e).then(function(t){return sn(e),t.data=fs.call(e,e.transformResponse,t),t.headers=xs.from(t.headers),t},function(t){return gs(t)||(sn(e),t&&t.response&&(t.response.data=fs.call(e,e.transformResponse,t.response),t.response.headers=xs.from(t.response.headers))),Promise.reject(t)})}const rn="1.12.2",ln={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{ln[e]=function(a){return typeof a===e||"a"+(t<1?"n ":" ")+e}});const on={};ln.transitional=function(e,t,a){function s(e,t){return"[Axios v"+rn+"] Transitional option '"+e+"'"+t+(a?". "+a:"")}return(a,n,r)=>{if(!1===e)throw new qa(s(n," has been removed"+(t?" in "+t:"")),qa.ERR_DEPRECATED);return t&&!on[n]&&(on[n]=!0,console.warn(s(n," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(a,n,r)}},ln.spelling=function(e){return(t,a)=>(console.warn("".concat(a," is likely a misspelling of ").concat(e)),!0)};const cn={assertOptions:function(e,t,a){if("object"!==typeof e)throw new qa("options must be an object",qa.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let n=s.length;for(;n-- >0;){const r=s[n],i=t[r];if(i){const t=e[r],a=void 0===t||i(t,r,e);if(!0!==a)throw new qa("option "+r+" must be "+a,qa.ERR_BAD_OPTION_VALUE);continue}if(!0!==a)throw new qa("Unknown option "+r,qa.ERR_BAD_OPTION)}},validators:ln},dn=cn.validators;class un{constructor(e){this.defaults=e||{},this.interceptors={request:new Za,response:new Za}}async request(e,t){try{return await this._request(e,t)}catch(a){if(a instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{a.stack?t&&!String(a.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(a.stack+="\n"+t):a.stack=t}catch(Zf){}}throw a}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=Ps(this.defaults,t);const{transitional:a,paramsSerializer:s,headers:n}=t;void 0!==a&&cn.assertOptions(a,{silentJSONParsing:dn.transitional(dn.boolean),forcedJSONParsing:dn.transitional(dn.boolean),clarifyTimeoutError:dn.transitional(dn.boolean)},!1),null!=s&&(Fa.isFunction(s)?t.paramsSerializer={serialize:s}:cn.assertOptions(s,{encode:dn.function,serialize:dn.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),cn.assertOptions(t,{baseUrl:dn.spelling("baseURL"),withXsrfToken:dn.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let r=n&&Fa.merge(n.common,n[t.method]);n&&Fa.forEach(["delete","get","head","post","put","patch","common"],e=>{delete n[e]}),t.headers=xs.concat(r,n);const i=[];let l=!0;this.interceptors.request.forEach(function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(l=l&&e.synchronous,i.unshift(e.fulfilled,e.rejected))});const o=[];let c;this.interceptors.response.forEach(function(e){o.push(e.fulfilled,e.rejected)});let d,u=0;if(!l){const e=[nn.bind(this),void 0];for(e.unshift(...i),e.push(...o),d=e.length,c=Promise.resolve(t);u<d;)c=c.then(e[u++],e[u++]);return c}d=i.length;let m=t;for(;u<d;){const e=i[u++],t=i[u++];try{m=e(m)}catch(p){t.call(this,p);break}}try{c=nn.call(this,m)}catch(p){return Promise.reject(p)}for(u=0,d=o.length;u<d;)c=c.then(o[u++],o[u++]);return c}getUri(e){return Ja(Es((e=Ps(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}Fa.forEach(["delete","get","head","options"],function(e){un.prototype[e]=function(t,a){return this.request(Ps(a||{},{method:e,url:t,data:(a||{}).data}))}}),Fa.forEach(["post","put","patch"],function(e){function t(t){return function(a,s,n){return this.request(Ps(n||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:a,data:s}))}}un.prototype[e]=t(),un.prototype[e+"Form"]=t(!0)});const mn=un;class pn{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(e){t=e});const a=this;this.promise.then(e=>{if(!a._listeners)return;let t=a._listeners.length;for(;t-- >0;)a._listeners[t](e);a._listeners=null}),this.promise.then=e=>{let t;const s=new Promise(e=>{a.subscribe(e),t=e}).then(e);return s.cancel=function(){a.unsubscribe(t)},s},e(function(e,s,n){a.reason||(a.reason=new bs(e,s,n),t(a.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new pn(function(t){e=t}),cancel:e}}}const hn=pn;const xn={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(xn).forEach(e=>{let[t,a]=e;xn[a]=t});const fn=xn;const gn=function e(t){const a=new mn(t),s=Yt(mn.prototype.request,a);return Fa.extend(s,mn.prototype,a,{allOwnKeys:!0}),Fa.extend(s,a,null,{allOwnKeys:!0}),s.create=function(a){return e(Ps(t,a))},s}(os);gn.Axios=mn,gn.CanceledError=bs,gn.CancelToken=hn,gn.isCancel=gs,gn.VERSION=rn,gn.toFormData=Ha,gn.AxiosError=qa,gn.Cancel=gn.CanceledError,gn.all=function(e){return Promise.all(e)},gn.spread=function(e){return function(t){return e.apply(null,t)}},gn.isAxiosError=function(e){return Fa.isObject(e)&&!0===e.isAxiosError},gn.mergeConfig=Ps,gn.AxiosHeaders=xs,gn.formToJSON=e=>is(Fa.isHTMLForm(e)?new FormData(e):e),gn.getAdapter=an,gn.HttpStatusCode=fn,gn.default=gn;const yn=gn,bn="https://manufactor-2.preview.emergentagent.com",vn=yn.create({baseURL:"".concat(bn,"/api"),headers:{"Content-Type":"application/json"}});vn.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),vn.interceptors.response.use(e=>e,e=>{var t;return 401===(null===(t=e.response)||void 0===t?void 0:t.status)&&(localStorage.removeItem("token"),window.location.href="/login"),Promise.reject(e)});const jn=()=>vn.get("/clients"),wn=e=>vn.post("/clients",e),_n=(e,t)=>vn.put("/clients/".concat(e),t),Nn=e=>vn.delete("/clients/".concat(e)),kn=e=>vn.get("/clients/".concat(e)),Sn=(e,t)=>{const a=new FormData;return a.append("file",t),vn.post("/clients/".concat(e,"/logo"),a,{headers:{"Content-Type":"multipart/form-data"}})},Cn=()=>vn.get("/products"),En=()=>vn.get("/materials"),Dn=e=>vn.post("/materials",e),Pn=(e,t)=>vn.put("/materials/".concat(e),t),An=e=>vn.get("/materials/".concat(e)),Tn=e=>vn.delete("/materials/".concat(e)),Ln=()=>vn.get("/suppliers"),Rn=e=>vn.post("/suppliers",e),Fn=(e,t)=>vn.put("/suppliers/".concat(e),t),On=e=>vn.delete("/suppliers/".concat(e)),Mn=()=>vn.get("/product-specifications"),In=e=>vn.post("/product-specifications",e),qn=(e,t)=>vn.put("/product-specifications/".concat(e),t),Bn=e=>vn.get("/product-specifications/".concat(e)),zn=e=>vn.delete("/product-specifications/".concat(e)),Un=e=>vn.post("/sync/product-spec-to-client-products",null,{params:{spec_id:e}}),Wn=(e,t)=>vn.post("/sync/client-product-to-spec",null,{params:{client_id:e,product_id:t}}),Hn=e=>vn.post("/calculators/material-consumption-by-client",e),Gn=()=>vn.get("/stocktake/current"),Vn=e=>vn.post("/stocktake",e),$n=(e,t)=>vn.put("/stocktake/".concat(e,"/entry"),t),Qn=e=>vn.post("/stocktake/".concat(e,"/complete")),Yn=e=>vn.get("/clients/".concat(e,"/catalog")),Jn=(e,t)=>vn.post("/clients/".concat(e,"/catalog"),t),Zn=(e,t,a)=>vn.put("/clients/".concat(e,"/catalog/").concat(t),a),Xn=(e,t)=>vn.get("/clients/".concat(e,"/catalog/").concat(t)),Kn=(e,t)=>vn.delete("/clients/".concat(e,"/catalog/").concat(t)),er=(e,t,a)=>vn.post("/clients/".concat(e,"/catalog/").concat(t,"/copy-to/").concat(a)),tr=e=>vn.get("/orders",{params:{status_filter:e}}),ar=e=>vn.post("/orders",e),sr=e=>vn.get("/orders/".concat(e)),nr=e=>vn.delete("/orders/".concat(e)),rr=(e,t)=>vn.put("/orders/".concat(e),t),ir=(e,t)=>vn.put("/orders/".concat(e,"/stage"),t),lr=()=>vn.get("/production/board"),or=(e,t)=>vn.post("/production/move-stage/".concat(e),t),cr=(e,t)=>vn.post("/production/jump-stage/".concat(e),t),dr=e=>vn.put("/orders/reorder",e),ur=(e,t)=>vn.put("/production/order-item-status/".concat(e),t),mr=e=>vn.get("/clients/".concat(e,"/archived-jobs")),pr=e=>vn.get("/clients/".concat(e,"/job-cards")),hr=e=>vn.post("/production/job-cards",e),xr=e=>vn.get("/production/job-cards/order/".concat(e)),fr=(e,t)=>vn.put("/production/job-cards/".concat(e),t),gr=e=>vn.get("/production/job-cards/search",{params:e}),yr=()=>vn.get("/reports/outstanding-jobs"),br=()=>vn.get("/reports/late-deliveries"),vr=(e,t)=>vn.get("/reports/customer-annual/".concat(e),{params:{year:t}}),jr=(e,t,a,s)=>vn.get("/stock/reports/material-usage-detailed",{params:{material_id:e,start_date:t,end_date:a,include_order_breakdown:s}}),wr=(e,t,a,s)=>vn.get("/stock/reports/product-usage-detailed",{params:{client_id:e,start_date:t,end_date:a,include_order_breakdown:s}}),_r=(e,t,a)=>vn.get("/stock/reports/projected-order-analysis",{params:{client_id:e,start_date:t,end_date:a}}),Nr=e=>vn.get("/documents/acknowledgment/".concat(e),{responseType:"blob"}),kr=e=>vn.get("/documents/job-card/".concat(e),{responseType:"blob"}),Sr=()=>vn.get("/invoicing/live-jobs"),Cr=(e,t)=>vn.get("/invoicing/archived-jobs",{params:{month:e,year:t}}),Er=(e,t)=>vn.post("/invoicing/generate/".concat(e),t),Dr=()=>vn.get("/invoicing/accounting-transactions"),Pr=e=>vn.post("/invoicing/complete-transaction/".concat(e)),Ar=()=>vn.get("/xero/status"),Tr=()=>vn.get("/xero/auth/url"),Lr=e=>yn.post("".concat(bn,"/xero-auth-callback"),e,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))}}),Rr=()=>vn.delete("/xero/disconnect"),Fr=()=>vn.get("/users"),Or=e=>vn.post("/users",e),Mr=(e,t)=>vn.put("/users/".concat(e),t),Ir=e=>vn.delete("/users/".concat(e)),qr=e=>vn.post("/users/change-password",e),Br=()=>vn.get("/machinery-rates"),zr=e=>vn.post("/machinery-rates",e),Ur=(e,t)=>vn.put("/machinery-rates/".concat(e),t),Wr=e=>vn.delete("/machinery-rates/".concat(e)),Hr=e=>vn.post("/stock/raw-substrates",e),Gr=()=>vn.get("/stock/raw-materials"),Vr=e=>vn.get("/slit-widths/material/".concat(e)),$r=e=>vn.post("/slit-widths",e),Qr=(e,t)=>vn.put("/slit-widths/".concat(e),t),Yr=e=>vn.delete("/slit-widths/".concat(e)),Jr=e=>vn.post("/slit-widths/allocate",e),Zr=()=>vn.get("/label-templates"),Xr=e=>vn.post("/label-templates",e),Kr=(e,t)=>vn.put("/label-templates/".concat(e),t),ei=e=>vn.delete("/label-templates/".concat(e)),ti=()=>vn.get("/printers"),ai=e=>vn.post("/print-label",e),si=e=>vn.get(e),ni=(e,t)=>vn.post(e,t),ri=(e,t)=>vn.put(e,t),ii=e=>vn.delete(e),li=e=>new Intl.NumberFormat("en-AU",{style:"currency",currency:"AUD"}).format(e),oi=e=>new Intl.DateTimeFormat("en-AU",{year:"numeric",month:"short",day:"numeric"}).format(new Date(e)),ci={order_entered:"Order Entered",pending_material:"Pending Material",paper_slitting:"Paper Slitting",winding:"Winding",finishing:"Finishing",delivery:"Delivery",invoicing:"Invoicing",cleared:"Cleared"},di={order_entered:"bg-blue-900 border-blue-700",pending_material:"bg-orange-900 border-orange-700",paper_slitting:"bg-purple-900 border-purple-700",winding:"bg-indigo-900 border-indigo-700",finishing:"bg-green-900 border-green-700",delivery:"bg-teal-900 border-teal-700",invoicing:"bg-yellow-900 border-yellow-700"},ui=async(e,t)=>{try{const a=await(async(e,t)=>vn.post("/clients/".concat(e,"/archived-orders/fast-report"),t,{responseType:"blob"}))(e,t),s=new Blob([a.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),n=window.URL.createObjectURL(s),r=document.createElement("a");r.href=n;const i=a.headers["content-disposition"];let l="archived_orders_report.xlsx";if(i){const e=i.match(/filename="?([^"]*)"?/);e&&(l=e[1])}return r.setAttribute("download",l),document.body.appendChild(r),r.click(),r.remove(),window.URL.revokeObjectURL(n),{success:!0,filename:l}}catch(a){throw console.error("Error downloading Excel report:",a),a}};var mi=a(579);const pi=(0,n.createContext)(),hi=()=>{const e=(0,n.useContext)(pi);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},xi=e=>{let{children:t}=e;const[a,s]=(0,n.useState)(null),[r,i]=(0,n.useState)(!0),[l,o]=(0,n.useState)(localStorage.getItem("token")),[c,d]=(0,n.useState)(localStorage.getItem("refreshToken"));(0,n.useEffect)(()=>{if(l&&c)try{const e=1e3*JSON.parse(atob(l.split(".")[1])).exp,t=e-Date.now(),a=t-3e5;if(a>0){const e=setTimeout(async()=>{await m()},a);return()=>clearTimeout(e)}t>0&&m()}catch(e){console.error("Error parsing token for auto-refresh:",e)}},[l,c]),(0,n.useEffect)(()=>{l?(vn.defaults.headers.common.Authorization="Bearer ".concat(l),u()):i(!1)},[l]);const u=async()=>{try{const e=await vn.get("/auth/me");s(e.data)}catch(e){console.error("Failed to fetch current user:",e),p()}finally{i(!1)}},m=async()=>{try{console.log("Refreshing access token...");const e=await vn.post("/auth/refresh?refresh_token=".concat(c)),{access_token:t,refresh_token:a}=e.data;return localStorage.setItem("token",t),o(t),vn.defaults.headers.common.Authorization="Bearer ".concat(t),a&&a!==c&&(localStorage.setItem("refreshToken",a),d(a)),console.log("Access token refreshed successfully"),!0}catch(e){return console.error("Token refresh failed:",e),Bt.error("Your session has expired. Please log in again."),p(),!1}},p=()=>{localStorage.removeItem("token"),localStorage.removeItem("refreshToken"),o(null),d(null),s(null),delete vn.defaults.headers.common.Authorization,Bt.info("Logged out successfully")},h={user:a,loading:r,login:async e=>{try{const t=await vn.post("/auth/login",e),{access_token:a,refresh_token:n,user:r}=t.data;return localStorage.setItem("token",a),localStorage.setItem("refreshToken",n),o(a),d(n),s(r),vn.defaults.headers.common.Authorization="Bearer ".concat(a),Bt.success("Welcome back, ".concat(r.full_name,"!")),{success:!0}}catch(n){var t,a;const e=(null===(t=n.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.detail)||"Login failed";return Bt.error(e),{success:!1,error:e}}},logout:p,hasPermission:e=>{if(!a)return!1;const t=a.role;switch(e){case"admin":return"admin"===t;case"manage_clients":return["admin","sales","manager"].includes(t);case"create_orders":case"view_reports":return["admin","production_manager","sales","manager"].includes(t);case"update_production":case"view_production_board":case"use_label_designer":return["admin","production_manager","production_team","production_staff","manager"].includes(t);case"invoice":case"view_all_timesheets":case"approve_leave":return["admin","production_manager","manager"].includes(t);case"delete_orders":return["admin","production_manager"].includes(t);case"manage_payroll":case"view_payroll_reports":return["admin","manager"].includes(t);case"submit_timesheet":return["admin","manager","production_manager","employee","production_staff"].includes(t);case"view_dashboard":case"access_payroll":default:return!0;case"use_calculators":return["admin","production_manager","production_team","production_staff","manager","sales"].includes(t)}}};return(0,mi.jsx)(pi.Provider,{value:h,children:t})},fi=()=>{const[e,t]=(0,n.useState)({username:"",password:""}),[a,s]=(0,n.useState)(!1),{login:r}=hi(),i=a=>{t(m(m({},e),{},{[a.target.name]:a.target.value}))};return(0,mi.jsx)("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center px-4",children:(0,mi.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,mi.jsxs)("div",{className:"text-center",children:[(0,mi.jsx)("div",{className:"mx-auto mb-4",children:(0,mi.jsx)("img",{src:"/logo192.png",alt:"Misty Manufacturing Logo",className:"h-24 w-24 mx-auto object-contain"})}),(0,mi.jsx)("h1",{className:"text-3xl font-bold text-yellow-400 mb-2",children:"Misty Manufacturing"}),(0,mi.jsx)("h2",{className:"text-xl text-gray-300 mb-2",children:"Management System"}),(0,mi.jsx)("p",{className:"text-sm text-gray-400",children:"Production, Orders, Stock & Payroll"})]}),(0,mi.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:async t=>{if(t.preventDefault(),!e.username||!e.password)return void Bt.error("Please enter both username and password");s(!0);(await r(e)).success||s(!1)},children:[(0,mi.jsxs)("div",{className:"space-y-4",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-300 mb-1",children:"Username"}),(0,mi.jsx)("input",{id:"username",name:"username",type:"text",required:!0,className:"misty-input w-full",placeholder:"Enter your username",value:e.username,onChange:i,disabled:a})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300 mb-1",children:"Password"}),(0,mi.jsx)("input",{id:"password",name:"password",type:"password",required:!0,className:"misty-input w-full",placeholder:"Enter your password",value:e.password,onChange:i,disabled:a})]})]}),(0,mi.jsx)("div",{children:(0,mi.jsx)("button",{type:"submit",disabled:a,className:"w-full misty-button misty-button-primary py-3 text-lg font-semibold disabled:opacity-50 disabled:cursor-not-allowed","data-testid":"login-submit-button",children:a?(0,mi.jsxs)("div",{className:"flex items-center justify-center",children:[(0,mi.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-gray-900 mr-2"}),"Signing in..."]}):"Sign in"})}),(0,mi.jsx)("div",{className:"text-center",children:(0,mi.jsxs)("div",{className:"text-sm text-gray-400 bg-gray-800 border border-gray-700 rounded-lg p-4",children:[(0,mi.jsx)("p",{className:"font-medium mb-2",children:"Demo Credentials:"}),(0,mi.jsxs)("p",{children:[(0,mi.jsx)("strong",{children:"Username:"})," Callum"]}),(0,mi.jsxs)("p",{children:[(0,mi.jsx)("strong",{children:"Password:"})," Peach7510"]})]})})]}),(0,mi.jsx)("div",{className:"text-center",children:(0,mi.jsx)("p",{className:"text-xs text-gray-500",children:"\xa9 2025 Misty Manufacturing. All rights reserved."})})]})})},gi=["title","titleId"];function yi(e,t){let{title:a,titleId:s}=e,r=l(e,gi);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},r),a?n.createElement("title",{id:s},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const bi=n.forwardRef(yi),vi=["title","titleId"];function ji(e,t){let{title:a,titleId:s}=e,r=l(e,vi);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},r),a?n.createElement("title",{id:s},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"}))}const wi=n.forwardRef(ji),_i=["title","titleId"];function Ni(e,t){let{title:a,titleId:s}=e,r=l(e,_i);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},r),a?n.createElement("title",{id:s},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-.1-.664m-5.8 0A2.251 2.251 0 0 1 13.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25ZM6.75 12h.008v.008H6.75V12Zm0 3h.008v.008H6.75V15Zm0 3h.008v.008H6.75V18Z"}))}const ki=n.forwardRef(Ni),Si=["title","titleId"];function Ci(e,t){let{title:a,titleId:s}=e,r=l(e,Si);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},r),a?n.createElement("title",{id:s},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.343 3.94c.09-.542.56-.94 1.11-.94h1.093c.55 0 1.02.398 1.11.94l.149.894c.07.424.384.764.78.93.398.164.855.142 1.205-.108l.737-.527a1.125 1.125 0 0 1 1.45.12l.773.774c.39.389.44 1.002.12 1.45l-.527.737c-.25.35-.272.806-.107 1.204.165.397.505.71.93.78l.893.15c.543.09.94.559.94 1.109v1.094c0 .55-.397 1.02-.94 1.11l-.894.149c-.424.07-.764.383-.929.78-.165.398-.143.854.107 1.204l.527.738c.32.447.269 1.06-.12 1.45l-.774.773a1.125 1.125 0 0 1-1.449.12l-.738-.527c-.35-.25-.806-.272-1.203-.107-.398.165-.71.505-.781.929l-.149.894c-.09.542-.56.94-1.11.94h-1.094c-.55 0-1.019-.398-1.11-.94l-.148-.894c-.071-.424-.384-.764-.781-.93-.398-.164-.854-.142-1.204.108l-.738.527c-.447.32-1.06.269-1.45-.12l-.773-.774a1.125 1.125 0 0 1-.12-1.45l.527-.737c.25-.35.272-.806.108-1.204-.165-.397-.506-.71-.93-.78l-.894-.15c-.542-.09-.94-.56-.94-1.109v-1.094c0-.55.398-1.02.94-1.11l.894-.149c.424-.07.765-.383.93-.78.165-.398.143-.854-.108-1.204l-.526-.738a1.125 1.125 0 0 1 .12-1.45l.773-.773a1.125 1.125 0 0 1 1.45-.12l.737.527c.35.25.807.272 1.204.107.397-.165.71-.505.78-.929l.15-.894Z"}),n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const Ei=n.forwardRef(Ci),Di=["title","titleId"];function Pi(e,t){let{title:a,titleId:s}=e,r=l(e,Di);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},r),a?n.createElement("title",{id:s},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m3.75 9v7.5m2.25-6.466a9.016 9.016 0 0 0-3.461-.203c-.536.072-.974.478-1.021 1.017a4.559 4.559 0 0 0-.018.402c0 .464.336.844.775.994l2.95 1.012c.44.15.775.53.775.994 0 .136-.006.27-.018.402-.047.539-.485.945-1.021 1.017a9.077 9.077 0 0 1-3.461-.203M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const Ai=n.forwardRef(Pi),Ti=["title","titleId"];function Li(e,t){let{title:a,titleId:s}=e,r=l(e,Ti);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},r),a?n.createElement("title",{id:s},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18.75a60.07 60.07 0 0 1 15.797 2.101c.727.198 1.453-.342 1.453-1.096V18.75M3.75 4.5v.75A.75.75 0 0 1 3 6h-.75m0 0v-.375c0-.621.504-1.125 1.125-1.125H20.25M2.25 6v9m18-10.5v.75c0 .414.336.75.75.75h.75m-1.5-1.5h.375c.621 0 1.125.504 1.125 1.125v9.75c0 .621-.504 1.125-1.125 1.125h-.375m1.5-1.5H21a.75.75 0 0 0-.75.75v.75m0 0H3.75m0 0h-.375a1.125 1.125 0 0 1-1.125-1.125V15m1.5 1.5v-.75A.75.75 0 0 0 3 15h-.75M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm3 0h.008v.008H18V10.5Zm-12 0h.008v.008H6V10.5Z"}))}const Ri=n.forwardRef(Li),Fi=["title","titleId"];function Oi(e,t){let{title:a,titleId:s}=e,r=l(e,Fi);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},r),a?n.createElement("title",{id:s},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"}))}const Mi=n.forwardRef(Oi),Ii=["title","titleId"];function qi(e,t){let{title:a,titleId:s}=e,r=l(e,Ii);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},r),a?n.createElement("title",{id:s},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 7.5-9-5.25L3 7.5m18 0-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9"}))}const Bi=n.forwardRef(qi),zi=["title","titleId"];function Ui(e,t){let{title:a,titleId:s}=e,r=l(e,zi);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},r),a?n.createElement("title",{id:s},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 18.75a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m3 0h6m-9 0H3.375a1.125 1.125 0 0 1-1.125-1.125V14.25m17.25 4.5a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m3 0h1.125c.621 0 1.129-.504 1.09-1.124a17.902 17.902 0 0 0-3.213-9.193 2.056 2.056 0 0 0-1.58-.86H14.25M16.5 18.75h-2.25m0-11.177v-.958c0-.568-.422-1.048-.987-1.106a48.554 48.554 0 0 0-10.026 0 1.106 1.106 0 0 0-.987 1.106v7.635m12-6.677v6.677m0 4.5v-4.5m0 0h-12"}))}const Wi=n.forwardRef(Ui),Hi=["title","titleId"];function Gi(e,t){let{title:a,titleId:s}=e,r=l(e,Hi);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},r),a?n.createElement("title",{id:s},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const Vi=n.forwardRef(Gi),$i=["title","titleId"];function Qi(e,t){let{title:a,titleId:s}=e,r=l(e,$i);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},r),a?n.createElement("title",{id:s},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 15.75V18m-7.5-6.75h.008v.008H8.25v-.008Zm0 2.25h.008v.008H8.25V13.5Zm0 2.25h.008v.008H8.25v-.008Zm0 2.25h.008v.008H8.25V18Zm2.498-6.75h.007v.008h-.007v-.008Zm0 2.25h.007v.008h-.007V13.5Zm0 2.25h.007v.008h-.007v-.008Zm0 2.25h.007v.008h-.007V18Zm2.504-6.75h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V13.5Zm0 2.25h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V18Zm2.498-6.75h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V13.5ZM8.25 6h7.5v2.25h-7.5V6ZM12 2.25c-1.892 0-3.758.11-5.593.322C5.307 2.7 4.5 3.65 4.5 4.757V19.5a2.25 2.25 0 0 0 2.25 2.25h10.5a2.25 2.25 0 0 0 2.25-2.25V4.757c0-1.108-.806-2.057-1.907-2.185A48.507 48.507 0 0 0 12 2.25Z"}))}const Yi=n.forwardRef(Qi),Ji=["title","titleId"];function Zi(e,t){let{title:a,titleId:s}=e,r=l(e,Ji);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},r),a?n.createElement("title",{id:s},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.568 3H5.25A2.25 2.25 0 0 0 3 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 0 0 5.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 0 0 9.568 3Z"}),n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 6h.008v.008H6V6Z"}))}const Xi=n.forwardRef(Zi),Ki=["title","titleId"];function el(e,t){let{title:a,titleId:s}=e,r=l(e,Ki);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},r),a?n.createElement("title",{id:s},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75m-3-7.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285Z"}))}const tl=n.forwardRef(el),al=["title","titleId"];function sl(e,t){let{title:a,titleId:s}=e,r=l(e,al);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},r),a?n.createElement("title",{id:s},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const nl=n.forwardRef(sl),rl=["title","titleId"];function il(e,t){let{title:a,titleId:s}=e,r=l(e,rl);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},r),a?n.createElement("title",{id:s},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244"}))}const ll=n.forwardRef(il),ol=["title","titleId"];function cl(e,t){let{title:a,titleId:s}=e,r=l(e,ol);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},r),a?n.createElement("title",{id:s},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"}))}const dl=n.forwardRef(cl),ul=["title","titleId"];function ml(e,t){let{title:a,titleId:s}=e,r=l(e,ul);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},r),a?n.createElement("title",{id:s},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"}))}const pl=n.forwardRef(ml),hl=e=>{var t;let{children:a}=e;const{user:s,logout:r,hasPermission:i}=hi(),l=he(),[o,c]=(0,n.useState)(!1),[d,u]=(0,n.useState)(!0),m=[{name:"Dashboard",href:"/",icon:bi,permission:null},{name:"Clients",href:"/clients",icon:wi,permission:"manage_clients"},{name:"Orders",href:"/orders",icon:ki,permission:"create_orders"},{name:"Production",href:"/production",icon:Ei,permission:"view_production_board"},{name:"Invoicing",href:"/invoicing",icon:Ai,permission:"invoice"},{name:"Payroll",href:"/payroll",icon:Ri,permission:"access_payroll"},{name:"Reports",href:"/reports",icon:Mi,permission:"view_reports"},{name:"Raw Materials",href:"/products-materials",icon:Bi,permission:"view_reports"},{name:"Suppliers List",href:"/suppliers",icon:Wi,permission:"view_reports"},{name:"Products & Specifications",href:"/product-specifications",icon:Vi,permission:"view_reports"},{name:"Machinery Specifications",href:"/machinery-rates",icon:Ei,permission:"view_reports"},{name:"Calculators",href:"/calculators",icon:Yi,permission:"use_calculators"},{name:"Stocktake",href:"/stocktake",icon:ki,permission:"view_reports"},{name:"Label Designer",href:"/label-designer",icon:Xi,permission:"use_label_designer"},{name:"Staff & Security",href:"/staff-security",icon:tl,permission:"admin"}].filter(e=>!e.permission||i(e.permission));(0,n.useEffect)(()=>{p()},[]);const p=async()=>{try{const e=await Ar();c(e.data.connected)}catch(e){console.error("Failed to check Xero status:",e),c(!1)}finally{u(!1)}};return(0,mi.jsxs)("div",{className:"min-h-screen bg-gray-900",children:[(0,mi.jsxs)("div",{className:"fixed inset-y-0 left-0 z-50 w-64 bg-gray-800 border-r border-gray-700 flex flex-col",children:[(0,mi.jsx)("div",{className:"flex items-center h-16 px-4 border-b border-gray-700 flex-shrink-0",children:(0,mi.jsxs)("div",{className:"flex items-center",children:[(0,mi.jsx)("img",{src:"/logo192.png",alt:"Misty Manufacturing",className:"h-10 w-10 mr-3 object-contain"}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("h1",{className:"text-lg font-bold text-yellow-400",children:"Misty"}),(0,mi.jsx)("p",{className:"text-xs text-gray-400",children:"Manufacturing"})]})]})}),(0,mi.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,mi.jsx)("nav",{className:"mt-8 px-4 pb-4",children:(0,mi.jsxs)("ul",{className:"space-y-2",children:[m.map(e=>{const t=l.pathname===e.href;return(0,mi.jsx)("li",{children:(0,mi.jsxs)(bt,{to:e.href,className:"\n                        flex items-center px-3 py-2 rounded-md text-sm font-medium transition-colors duration-200\n                        ".concat(t?"bg-yellow-400 text-gray-900":"text-gray-300 hover:bg-gray-700 hover:text-yellow-400","\n                      "),"data-testid":"nav-".concat(e.name.toLowerCase()),children:[(0,mi.jsx)(e.icon,{className:"mr-3 h-5 w-5"}),e.name]})},e.name)}),i("view_reports")&&(0,mi.jsx)("li",{className:"pt-4",children:(0,mi.jsxs)("div",{className:"border-t border-gray-700 pt-4",children:[(0,mi.jsx)("div",{className:"px-3 py-1 text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Integration"}),d?(0,mi.jsxs)("div",{className:"flex items-center px-3 py-2 text-sm text-gray-400 mt-2",children:[(0,mi.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-yellow-400 mr-3"}),"Checking Xero..."]}):o?(0,mi.jsxs)(mi.Fragment,{children:[(0,mi.jsxs)("div",{className:"flex items-center px-3 py-2 text-sm bg-green-900/30 border border-green-700 rounded-md mt-2 mb-2",children:[(0,mi.jsx)("div",{className:"h-2 w-2 bg-green-400 rounded-full mr-3"}),(0,mi.jsx)("span",{className:"text-green-400 flex-1",children:"Xero Connected"})]}),(0,mi.jsxs)("button",{onClick:async()=>{try{await Rr(),c(!1),Bt.success("Disconnected from Xero")}catch(e){console.error("Failed to disconnect from Xero:",e),Bt.error("Failed to disconnect from Xero")}},className:"w-full flex items-center px-3 py-2 text-sm font-medium text-gray-300 hover:bg-gray-700 hover:text-red-400 rounded-md transition-colors duration-200",children:[(0,mi.jsx)(nl,{className:"mr-3 h-5 w-5"}),"Disconnect Xero"]})]}):(0,mi.jsxs)("button",{onClick:async()=>{try{const e=await Tr(),{auth_url:t}=e.data,a=window.open(t,"xero-auth","width=600,height=700,scrollbars=yes,resizable=yes"),s=setInterval(()=>{a.closed&&(clearInterval(s),setTimeout(()=>{p()},1e3))},1e3)}catch(e){console.error("Failed to initiate Xero connection:",e),Bt.error("Failed to connect to Xero")}},className:"w-full flex items-center px-3 py-2 text-sm font-medium text-white rounded-md transition-colors duration-200 mt-2",style:{background:"linear-gradient(135deg, #13b5ea 0%, #0e7bb8 100%)"},children:[(0,mi.jsx)(ll,{className:"mr-3 h-5 w-5"}),"Connect to Xero"]})]})})]})})}),(0,mi.jsxs)("div",{className:"flex-shrink-0 p-4 border-t border-gray-700 bg-gray-800",children:[(0,mi.jsxs)("div",{className:"flex items-center mb-3",children:[(0,mi.jsx)("div",{className:"h-8 w-8 bg-gray-600 rounded-full flex items-center justify-center mr-3",children:(0,mi.jsx)(dl,{className:"h-5 w-5 text-gray-300"})}),(0,mi.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,mi.jsx)("p",{className:"text-sm font-medium text-gray-300 truncate",children:null===s||void 0===s?void 0:s.full_name}),(0,mi.jsx)("p",{className:"text-xs text-gray-400 capitalize",children:null===s||void 0===s||null===(t=s.role)||void 0===t?void 0:t.replace("_"," ")})]})]}),(0,mi.jsxs)("button",{onClick:r,className:"w-full flex items-center px-3 py-2 text-sm font-medium text-gray-300 hover:bg-gray-700 hover:text-red-400 rounded-md transition-colors duration-200","data-testid":"logout-button",children:[(0,mi.jsx)(pl,{className:"mr-3 h-5 w-5"}),"Sign out"]})]})]}),(0,mi.jsx)("div",{className:"pl-64",children:(0,mi.jsx)("main",{className:"min-h-screen",children:a})})]})},xl=["title","titleId"];function fl(e,t){let{title:a,titleId:s}=e,r=l(e,xl);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},r),a?n.createElement("title",{id:s},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))}const gl=n.forwardRef(fl),yl=["title","titleId"];function bl(e,t){let{title:a,titleId:s}=e,r=l(e,yl);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},r),a?n.createElement("title",{id:s},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5m-9-6h.008v.008H12v-.008ZM12 15h.008v.008H12V15Zm0 2.25h.008v.008H12v-.008ZM9.75 15h.008v.008H9.75V15Zm0 2.25h.008v.008H9.75v-.008ZM7.5 15h.008v.008H7.5V15Zm0 2.25h.008v.008H7.5v-.008Zm6.75-4.5h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V15Zm0 2.25h.008v.008h-.008v-.008Zm2.25-4.5h.008v.008H16.5v-.008Zm0 2.25h.008v.008H16.5V15Z"}))}const vl=n.forwardRef(bl),jl=["title","titleId"];function wl(e,t){let{title:a,titleId:s}=e,r=l(e,jl);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},r),a?n.createElement("title",{id:s},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const _l=n.forwardRef(wl),Nl=()=>{const{user:e,hasPermission:t}=hi(),[a,s]=(0,n.useState)(!0),[r,i]=(0,n.useState)({totalOrders:0,totalClients:0,overdueJobs:0,jobsDueToday:0,jobsDueThisWeek:0,recentOrders:[]}),[l,o]=(0,n.useState)({}),[c,d]=(0,n.useState)(null),[u,m]=(0,n.useState)([]),[p,h]=(0,n.useState)(!1);(0,n.useEffect)(()=>{x()},[]);const x=async()=>{try{var e,a;s(!0);const[n,r,l,c]=await Promise.all([tr(),t("manage_clients")?jn():Promise.resolve({data:[]}),t("update_production")?lr():Promise.resolve({data:{data:{}}}),t("view_reports")?yr():Promise.resolve({data:{data:{}}})]),d=n.data,u=r.data,m=(null===(e=l.data)||void 0===e?void 0:e.data)||{},p=(null===(a=c.data)||void 0===a?void 0:a.data)||{},h=d.slice(0,5);i({totalOrders:d.length,totalClients:u.length,overdueJobs:p.overdue_jobs||0,jobsDueToday:p.jobs_due_today||0,jobsDueThisWeek:p.jobs_due_this_week||0,recentOrders:h}),o(m)}catch(n){console.error("Failed to load dashboard data:",n),Bt.error("Failed to load dashboard data")}finally{s(!1)}},f=e=>{let{title:t,value:a,icon:s,color:n,testId:i,cardType:l}=e;return(0,mi.jsx)("div",{className:"misty-card p-6 ".concat(n," cursor-pointer hover:bg-gray-700 transition-colors duration-200"),"data-testid":i,onDoubleClick:()=>(async e=>{var t,a,s;d(e),h(!0),m([]);try{let n=[];switch(e){case"totalOrders":const e=await tr();n=e.data.map(e=>({id:e.id,orderNumber:e.order_number,clientName:e.client_name,dateCreated:oi(e.created_at),status:e.current_stage||"N/A",dueDate:e.due_date?oi(e.due_date):"N/A",totalAmount:li(e.total_amount)}));break;case"totalClients":const i=await jn();n=i.data.map(e=>({id:e.id,name:e.name,contactPerson:e.contact_person||"N/A",email:e.email||"N/A",phone:e.phone||"N/A",totalOrders:r.recentOrders.filter(t=>t.client_name===e.name).length}));break;case"overdueJobs":const l=(null===(t=(await lr()).data)||void 0===t?void 0:t.data)||{};n=[],Object.entries(l).forEach(e=>{let[t,a]=e;a.forEach(e=>{if(e.is_overdue){const t=new Date(e.due_date),a=new Date,s=Math.floor((a-t)/864e5);n.push({id:e.order_id,jobNumber:e.order_number,clientName:e.client_name,dueDate:oi(e.due_date),daysOverdue:s,status:ci[e.current_stage]||e.current_stage})}})});break;case"dueToday":const o=(null===(a=(await lr()).data)||void 0===a?void 0:a.data)||{},c=(new Date).toISOString().split("T")[0];n=[],Object.entries(o).forEach(e=>{let[t,a]=e;a.forEach(e=>{e.due_date&&e.due_date.split("T")[0]===c&&n.push({id:e.order_id,jobNumber:e.order_number,clientName:e.client_name,jobType:ci[e.current_stage]||e.current_stage,dueDate:oi(e.due_date),status:ci[e.current_stage]||e.current_stage})})});break;case"dueThisWeek":const d=(null===(s=(await lr()).data)||void 0===s?void 0:s.data)||{},u=new Date,m=new Date(u.getTime()+6048e5);n=[],Object.entries(d).forEach(e=>{let[t,a]=e;a.forEach(e=>{if(e.due_date){const t=new Date(e.due_date);if(t>=u&&t<=m){const a=Math.ceil((t-u)/864e5);n.push({id:e.order_id,jobNumber:e.order_number,clientName:e.client_name,jobType:ci[e.current_stage]||e.current_stage,dueDate:oi(e.due_date),daysUntilDue:a,status:ci[e.current_stage]||e.current_stage})}}})})}m(n)}catch(n){console.error("Failed to load modal data:",n),Bt.error("Failed to load detailed information")}finally{h(!1)}})(l),children:(0,mi.jsxs)("div",{className:"flex items-center",children:[(0,mi.jsxs)("div",{className:"flex-1",children:[(0,mi.jsx)("p",{className:"text-sm font-medium text-gray-300",children:t}),(0,mi.jsx)("p",{className:"text-2xl font-bold text-white",children:a})]}),(0,mi.jsx)(s,{className:"h-8 w-8 text-yellow-400"})]})})},g=e=>{let{stage:t,jobs:a,stageKey:s}=e;return(0,mi.jsxs)("div",{className:"misty-card p-4 border-l-4 ".concat({order_entered:"border-blue-500",pending_material:"border-orange-500",paper_slitting:"border-purple-500",winding:"border-indigo-500",finishing:"border-green-500",delivery:"border-teal-500",invoicing:"border-yellow-500"}[s]||"border-gray-500"),children:[(0,mi.jsx)("h4",{className:"font-medium text-gray-200 mb-2",children:t}),(0,mi.jsx)("p",{className:"text-2xl font-bold text-white",children:a.length}),a.length>0&&(0,mi.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:[a.filter(e=>e.is_overdue).length," overdue"]})]})},y=()=>{if(!c)return null;return(0,mi.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:()=>d(null),children:(0,mi.jsxs)("div",{className:"bg-gray-800 rounded-lg max-w-4xl w-full max-h-[90vh] overflow-hidden",onClick:e=>e.stopPropagation(),children:[(0,mi.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-700",children:[(0,mi.jsx)("h2",{className:"text-xl font-bold text-white",children:(()=>{switch(c){case"totalOrders":return"All Orders";case"totalClients":return"All Clients";case"overdueJobs":return"Overdue Jobs";case"dueToday":return"Jobs Due Today";case"dueThisWeek":return"Jobs Due This Week";default:return"Details"}})()}),(0,mi.jsx)("button",{onClick:()=>d(null),className:"text-gray-400 hover:text-white transition-colors",children:(0,mi.jsx)(nl,{className:"h-6 w-6"})})]}),(0,mi.jsx)("div",{className:"p-6",children:(()=>{if(p)return(0,mi.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,mi.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-yellow-400"})});if(0===u.length)return(0,mi.jsx)("div",{className:"text-center py-12",children:(0,mi.jsx)("p",{className:"text-gray-400",children:"No data available"})});switch(c){case"totalOrders":return(0,mi.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:u.map(e=>(0,mi.jsxs)("div",{className:"p-4 bg-gray-700 rounded-lg",children:[(0,mi.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("p",{className:"font-semibold text-white",children:e.orderNumber}),(0,mi.jsx)("p",{className:"text-sm text-gray-300",children:e.clientName})]}),(0,mi.jsx)("p",{className:"text-yellow-400 font-semibold",children:e.totalAmount})]}),(0,mi.jsxs)("div",{className:"grid grid-cols-3 gap-2 text-xs text-gray-400",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("span",{className:"block text-gray-500",children:"Created:"}),e.dateCreated]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("span",{className:"block text-gray-500",children:"Status:"}),e.status]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("span",{className:"block text-gray-500",children:"Due Date:"}),e.dueDate]})]})]},e.id))});case"totalClients":return(0,mi.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:u.map(e=>(0,mi.jsxs)("div",{className:"p-4 bg-gray-700 rounded-lg",children:[(0,mi.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,mi.jsx)("p",{className:"font-semibold text-white",children:e.name}),(0,mi.jsxs)("span",{className:"text-xs bg-yellow-400 text-gray-900 px-2 py-1 rounded",children:[e.totalOrders," orders"]})]}),(0,mi.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs text-gray-400",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("span",{className:"block text-gray-500",children:"Contact:"}),e.contactPerson]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("span",{className:"block text-gray-500",children:"Email:"}),e.email]}),(0,mi.jsxs)("div",{className:"col-span-2",children:[(0,mi.jsx)("span",{className:"block text-gray-500",children:"Phone:"}),e.phone]})]})]},e.id))});case"overdueJobs":return(0,mi.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:u.map(e=>(0,mi.jsxs)("div",{className:"p-4 bg-gray-700 rounded-lg border-l-4 border-red-500",children:[(0,mi.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("p",{className:"font-semibold text-white",children:e.jobNumber}),(0,mi.jsx)("p",{className:"text-sm text-gray-300",children:e.clientName})]}),(0,mi.jsxs)("span",{className:"text-xs bg-red-500 text-white px-2 py-1 rounded",children:[e.daysOverdue," days overdue"]})]}),(0,mi.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs text-gray-400",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("span",{className:"block text-gray-500",children:"Due Date:"}),e.dueDate]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("span",{className:"block text-gray-500",children:"Status:"}),e.status]})]})]},e.id))});case"dueToday":return(0,mi.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:u.map(e=>(0,mi.jsxs)("div",{className:"p-4 bg-gray-700 rounded-lg border-l-4 border-yellow-500",children:[(0,mi.jsx)("div",{className:"flex justify-between items-start mb-2",children:(0,mi.jsxs)("div",{children:[(0,mi.jsx)("p",{className:"font-semibold text-white",children:e.jobNumber}),(0,mi.jsx)("p",{className:"text-sm text-gray-300",children:e.clientName})]})}),(0,mi.jsxs)("div",{className:"grid grid-cols-3 gap-2 text-xs text-gray-400",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("span",{className:"block text-gray-500",children:"Type:"}),e.jobType]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("span",{className:"block text-gray-500",children:"Due:"}),e.dueDate]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("span",{className:"block text-gray-500",children:"Status:"}),e.status]})]})]},e.id))});case"dueThisWeek":return(0,mi.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:u.map(e=>(0,mi.jsxs)("div",{className:"p-4 bg-gray-700 rounded-lg",children:[(0,mi.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("p",{className:"font-semibold text-white",children:e.jobNumber}),(0,mi.jsx)("p",{className:"text-sm text-gray-300",children:e.clientName})]}),(0,mi.jsxs)("span",{className:"text-xs bg-blue-500 text-white px-2 py-1 rounded",children:[e.daysUntilDue," days"]})]}),(0,mi.jsxs)("div",{className:"grid grid-cols-3 gap-2 text-xs text-gray-400",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("span",{className:"block text-gray-500",children:"Type:"}),e.jobType]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("span",{className:"block text-gray-500",children:"Due:"}),e.dueDate]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("span",{className:"block text-gray-500",children:"Status:"}),e.status]})]})]},e.id))});default:return null}})()})]})})};return a?(0,mi.jsx)(hl,{children:(0,mi.jsx)("div",{className:"p-8",children:(0,mi.jsxs)("div",{className:"animate-pulse",children:[(0,mi.jsx)("div",{className:"h-8 bg-gray-700 rounded w-1/4 mb-8"}),(0,mi.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[...Array(4)].map((e,t)=>(0,mi.jsx)("div",{className:"h-24 bg-gray-700 rounded"},t))}),(0,mi.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,mi.jsx)("div",{className:"h-64 bg-gray-700 rounded"}),(0,mi.jsx)("div",{className:"h-64 bg-gray-700 rounded"})]})]})})}):(0,mi.jsxs)(hl,{children:[(0,mi.jsxs)("div",{className:"p-8","data-testid":"dashboard",children:[(0,mi.jsxs)("div",{className:"mb-8",children:[(0,mi.jsxs)("h1",{className:"text-3xl font-bold text-white mb-2",children:["Welcome back, ",null===e||void 0===e?void 0:e.full_name]}),(0,mi.jsx)("p",{className:"text-gray-400",children:"Here's what's happening with your manufacturing operations today."})]}),(0,mi.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6 mb-8",children:[(0,mi.jsx)(f,{title:"Total Orders",value:r.totalOrders,icon:ki,color:"",testId:"total-orders-card",cardType:"totalOrders"}),t("manage_clients")&&(0,mi.jsx)(f,{title:"Total Clients",value:r.totalClients,icon:wi,color:"",testId:"total-clients-card",cardType:"totalClients"}),(0,mi.jsx)(f,{title:"Overdue Jobs",value:r.overdueJobs,icon:gl,color:r.overdueJobs>0?"border-l-4 border-red-500":"",testId:"overdue-jobs-card",cardType:"overdueJobs"}),(0,mi.jsx)(f,{title:"Due Today",value:r.jobsDueToday,icon:vl,color:r.jobsDueToday>0?"border-l-4 border-yellow-500":"",testId:"due-today-card",cardType:"dueToday"}),(0,mi.jsx)(f,{title:"Due This Week",value:r.jobsDueThisWeek,icon:_l,color:"",testId:"due-week-card",cardType:"dueThisWeek"})]}),(0,mi.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[t("update_production")&&(0,mi.jsxs)("div",{className:"misty-card p-6",children:[(0,mi.jsxs)("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[(0,mi.jsx)(Ei,{className:"h-5 w-5 mr-2 text-yellow-400"}),"Production Overview"]}),(0,mi.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:Object.entries(l).map(e=>{let[t,a]=e;return(0,mi.jsx)(g,{stage:ci[t]||t,jobs:a,stageKey:t},t)})})]}),(0,mi.jsxs)("div",{className:"misty-card p-6",children:[(0,mi.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Recent Orders"}),r.recentOrders.length>0?(0,mi.jsx)("div",{className:"space-y-3",children:r.recentOrders.map(e=>(0,mi.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-700 rounded-lg",children:[(0,mi.jsxs)("div",{className:"flex-1",children:[(0,mi.jsx)("p",{className:"font-medium text-white",children:e.order_number}),(0,mi.jsx)("p",{className:"text-sm text-gray-400",children:e.client_name})]}),(0,mi.jsxs)("div",{className:"text-right",children:[(0,mi.jsx)("p",{className:"font-medium text-yellow-400",children:li(e.total_amount)}),(0,mi.jsx)("p",{className:"text-xs text-gray-400",children:oi(e.created_at)})]})]},e.id))}):(0,mi.jsx)("p",{className:"text-gray-400 text-center py-8",children:"No recent orders"})]})]}),(0,mi.jsxs)("div",{className:"mt-8",children:[(0,mi.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Quick Actions"}),(0,mi.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t("create_orders")&&(0,mi.jsxs)("button",{className:"misty-card p-4 hover:bg-gray-700 transition-colors duration-200 text-left",children:[(0,mi.jsx)("h4",{className:"font-medium text-white mb-2",children:"Create New Order"}),(0,mi.jsx)("p",{className:"text-sm text-gray-400",children:"Start a new manufacturing order"})]}),t("manage_clients")&&(0,mi.jsxs)("button",{className:"misty-card p-4 hover:bg-gray-700 transition-colors duration-200 text-left",children:[(0,mi.jsx)("h4",{className:"font-medium text-white mb-2",children:"Add New Client"}),(0,mi.jsx)("p",{className:"text-sm text-gray-400",children:"Register a new customer"})]}),t("view_reports")&&(0,mi.jsxs)("button",{className:"misty-card p-4 hover:bg-gray-700 transition-colors duration-200 text-left",children:[(0,mi.jsx)("h4",{className:"font-medium text-white mb-2",children:"View Reports"}),(0,mi.jsx)("p",{className:"text-sm text-gray-400",children:"Access performance analytics"})]})]})]})]}),(0,mi.jsx)(y,{})]})},kl=["title","titleId"];function Sl(e,t){let{title:a,titleId:s}=e,r=l(e,kl);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},r),a?n.createElement("title",{id:s},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const Cl=n.forwardRef(Sl),El=["title","titleId"];function Dl(e,t){let{title:a,titleId:s}=e,r=l(e,El);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},r),a?n.createElement("title",{id:s},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125Z"}))}const Pl=n.forwardRef(Dl),Al=["title","titleId"];function Tl(e,t){let{title:a,titleId:s}=e,r=l(e,Al);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},r),a?n.createElement("title",{id:s},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const Ll=n.forwardRef(Tl),Rl=["title","titleId"];function Fl(e,t){let{title:a,titleId:s}=e,r=l(e,Rl);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},r),a?n.createElement("title",{id:s},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const Ol=n.forwardRef(Fl),Ml=["title","titleId"];function Il(e,t){let{title:a,titleId:s}=e,r=l(e,Ml);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},r),a?n.createElement("title",{id:s},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))}const ql=n.forwardRef(Il),Bl=["title","titleId"];function zl(e,t){let{title:a,titleId:s}=e,r=l(e,Bl);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},r),a?n.createElement("title",{id:s},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"}))}const Ul=n.forwardRef(zl),Wl=["title","titleId"];function Hl(e,t){let{title:a,titleId:s}=e,r=l(e,Wl);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},r),a?n.createElement("title",{id:s},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.72 13.829c-.24.03-.48.062-.72.096m.72-.096a42.415 42.415 0 0 1 10.56 0m-10.56 0L6.34 18m10.94-4.171c.24.03.48.062.72.096m-.72-.096L17.66 18m0 0 .229 2.523a1.125 1.125 0 0 1-1.12 1.227H7.231c-.662 0-1.18-.568-1.12-1.227L6.34 18m11.318 0h1.091A2.25 2.25 0 0 0 21 15.75V9.456c0-1.081-.768-2.015-1.837-2.175a48.055 48.055 0 0 0-1.913-.247M6.34 18H5.25A2.25 2.25 0 0 1 3 15.75V9.456c0-1.081.768-2.015 1.837-2.175a48.041 48.041 0 0 1 1.913-.247m10.5 0a48.536 48.536 0 0 0-10.5 0m10.5 0V3.375c0-.621-.504-1.125-1.125-1.125h-8.25c-.621 0-1.125.504-1.125 1.125v3.659M18 10.5h.008v.008H18V10.5Zm-3 0h.008v.008H15V10.5Z"}))}const Gl=n.forwardRef(Hl),Vl=e=>{let{formData:t,handleInputChange:a,handleSpecificationSelection:s,productSpecifications:n}=e;return(0,mi.jsxs)("div",{className:"bg-purple-900/20 border border-purple-600/30 rounded-lg p-4",children:[(0,mi.jsx)("h4",{className:"text-lg font-semibold text-white mb-4",children:"Paper Cores Specifications"}),(0,mi.jsxs)("div",{className:"mb-6",children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:"Core Specifications (From Product Specifications)"}),(0,mi.jsx)("div",{className:"max-h-32 overflow-y-auto border border-gray-600 rounded-lg p-3",children:n&&n.filter(e=>"Spiral Paper Core"===e.product_type||"Composite Core"===e.product_type).length>0?(0,mi.jsx)("div",{className:"space-y-2",children:n.filter(e=>"Spiral Paper Core"===e.product_type||"Composite Core"===e.product_type).map(e=>{var a,n;return(0,mi.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,mi.jsx)("input",{type:"checkbox",checked:t.material_used.includes(e.id),onChange:t=>s(e.id,t.target.checked),className:"form-checkbox h-4 w-4 text-yellow-400 bg-gray-700 border-gray-600 rounded focus:ring-yellow-400"}),(0,mi.jsxs)("span",{className:"text-sm text-gray-300",children:[e.product_name," (",e.product_type,")",(null===(a=e.specifications)||void 0===a?void 0:a.id_mm)&&" - ID: ".concat(e.specifications.id_mm,"mm"),(null===(n=e.specifications)||void 0===n?void 0:n.wall_thickness)&&" - Wall: ".concat(e.specifications.wall_thickness,"mm")]})]},e.id)})}):(0,mi.jsx)("p",{className:"text-sm text-gray-400",children:"No core specifications available. Create Spiral Paper Core or Composite Core specifications first."})})]}),(0,mi.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsxs)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:["Core ID",(0,mi.jsx)("span",{className:"text-xs text-blue-400 ml-2",children:"(Auto-populated from specification)"})]}),(0,mi.jsx)("input",{type:"text",name:"core_id",value:t.core_id,onChange:a,className:"misty-input w-full bg-gray-600",placeholder:"Select a core specification above",readOnly:t.material_used.length>0})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsxs)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:["Core Width (mm)",(0,mi.jsx)("span",{className:"text-xs text-yellow-400 ml-2",children:"*Manual Entry Required"})]}),(0,mi.jsx)("input",{type:"text",name:"core_width",value:t.core_width,onChange:a,className:"misty-input w-full",placeholder:"Enter core width (e.g., 1000)",required:!0})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsxs)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:["Core Thickness (mm)",(0,mi.jsx)("span",{className:"text-xs text-blue-400 ml-2",children:"(Auto-populated from specification)"})]}),(0,mi.jsx)("input",{type:"text",name:"core_thickness",value:t.core_thickness,onChange:a,className:"misty-input w-full bg-gray-600",placeholder:"Select a core specification above",readOnly:t.material_used.length>0})]}),(0,mi.jsxs)("div",{className:"flex items-center space-y-4",children:[(0,mi.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,mi.jsx)("input",{type:"checkbox",name:"strength_quality_important",checked:t.strength_quality_important,onChange:a,className:"form-checkbox h-4 w-4 text-yellow-400 bg-gray-700 border-gray-600 rounded focus:ring-yellow-400"}),(0,mi.jsx)("span",{className:"text-white font-medium",children:"Is strength and Quality important?"})]}),(0,mi.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,mi.jsx)("input",{type:"checkbox",name:"delivery_included",checked:t.delivery_included,onChange:a,className:"form-checkbox h-4 w-4 text-yellow-400 bg-gray-700 border-gray-600 rounded focus:ring-yellow-400"}),(0,mi.jsx)("span",{className:"text-white font-medium",children:"Delivery Included?"})]})]})]})]})},$l=e=>{let{formData:t,handleInputChange:a,setFormData:s}=e;return(0,mi.jsxs)("div",{className:"bg-emerald-900/20 border border-emerald-600/30 rounded-lg p-4",children:[(0,mi.jsx)("h4",{className:"text-lg font-semibold text-white mb-4",children:"Production & Makeready Parameters"}),(0,mi.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,mi.jsxs)("div",{className:"space-y-4",children:[(0,mi.jsx)("h5",{className:"text-md font-medium text-emerald-300 mb-3",children:"Setup & Makeready"}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Makeready Allowance (%)"}),(0,mi.jsx)("input",{type:"number",name:"makeready_allowance_percent",value:t.makeready_allowance_percent,onChange:a,className:"misty-input w-full",placeholder:"10",min:"0",step:"0.1"})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Setup Time (minutes)"}),(0,mi.jsx)("input",{type:"number",name:"setup_time_minutes",value:t.setup_time_minutes,onChange:a,className:"misty-input w-full",placeholder:"30",min:"0"})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Waste Percentage (%)"}),(0,mi.jsx)("input",{type:"number",name:"waste_percentage",value:t.waste_percentage,onChange:a,className:"misty-input w-full",placeholder:"5",min:"0",step:"0.1"})]})]}),(0,mi.jsxs)("div",{className:"space-y-4",children:[(0,mi.jsx)("h5",{className:"text-md font-medium text-emerald-300 mb-3",children:"QC Tolerances"}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"ID Tolerance (\xb1mm)"}),(0,mi.jsx)("input",{type:"number",value:t.qc_tolerances.id_tolerance,onChange:e=>s(t=>m(m({},t),{},{qc_tolerances:m(m({},t.qc_tolerances),{},{id_tolerance:parseFloat(e.target.value)||0})})),className:"misty-input w-full",placeholder:"0.5",min:"0",step:"0.1"})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"OD Tolerance (\xb1mm)"}),(0,mi.jsx)("input",{type:"number",value:t.qc_tolerances.od_tolerance,onChange:e=>s(t=>m(m({},t),{},{qc_tolerances:m(m({},t.qc_tolerances),{},{od_tolerance:parseFloat(e.target.value)||0})})),className:"misty-input w-full",placeholder:"0.5",min:"0",step:"0.1"})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Wall Tolerance (\xb1mm)"}),(0,mi.jsx)("input",{type:"number",value:t.qc_tolerances.wall_tolerance,onChange:e=>s(t=>m(m({},t),{},{qc_tolerances:m(m({},t.qc_tolerances),{},{wall_tolerance:parseFloat(e.target.value)||0})})),className:"misty-input w-full",placeholder:"0.1",min:"0",step:"0.01"})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Inspection Interval (min)"}),(0,mi.jsx)("input",{type:"number",name:"inspection_interval_minutes",value:t.inspection_interval_minutes,onChange:a,className:"misty-input w-full",placeholder:"60",min:"1"})]})]}),(0,mi.jsxs)("div",{className:"space-y-4",children:[(0,mi.jsx)("h5",{className:"text-md font-medium text-emerald-300 mb-3",children:"Packing & Instructions"}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Tubes per Carton"}),(0,mi.jsx)("input",{type:"number",name:"tubes_per_carton",value:t.tubes_per_carton,onChange:a,className:"misty-input w-full",placeholder:"50",min:"1"})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Cartons per Pallet"}),(0,mi.jsx)("input",{type:"number",name:"cartons_per_pallet",value:t.cartons_per_pallet,onChange:a,className:"misty-input w-full",placeholder:"20",min:"1"})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Special Tooling Notes"}),(0,mi.jsx)("textarea",{name:"special_tooling_notes",value:t.special_tooling_notes,onChange:a,className:"misty-input w-full h-16 resize-none",placeholder:"Mandrel size, special tooling requirements..."})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Packing Instructions"}),(0,mi.jsx)("textarea",{name:"packing_instructions",value:t.packing_instructions,onChange:a,className:"misty-input w-full h-16 resize-none",placeholder:"Special handling, customer requirements..."})]})]})]})]})},Ql=e=>{let{formData:t,setFormData:a,handleAddConsumables:s,removeConsumable:n}=e;return(0,mi.jsxs)("div",{className:"bg-gray-900/50 border border-gray-600/30 rounded-lg p-4",children:[(0,mi.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,mi.jsx)("h4",{className:"text-lg font-semibold text-white",children:"Consumables"}),(0,mi.jsxs)("button",{type:"button",onClick:s,className:"misty-button misty-button-secondary flex items-center text-sm",children:[(0,mi.jsx)(Cl,{className:"h-4 w-4 mr-2"}),"Add Consumables"]})]}),t.consumables.length>0?(0,mi.jsx)("div",{className:"space-y-3",children:t.consumables.map(e=>(0,mi.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-800 rounded-lg",children:[(0,mi.jsxs)("div",{className:"flex-1",children:[(0,mi.jsx)("div",{className:"font-medium text-white",children:e.specification_name}),(0,mi.jsxs)("div",{className:"text-sm text-gray-400",children:["Type: ",e.product_type," | Unit: ",e.measurement_unit,e.quantity_cores_per_carton&&" | ".concat(e.quantity_cores_per_carton," cores per carton")]})]}),(0,mi.jsx)("button",{type:"button",onClick:()=>n(e.id),className:"text-red-400 hover:text-red-300 ml-4",children:(0,mi.jsx)(Ol,{className:"h-4 w-4"})})]},e.id))}):(0,mi.jsxs)("div",{className:"text-center py-6 text-gray-400",children:[(0,mi.jsx)("p",{className:"text-sm",children:"No consumables added yet."}),(0,mi.jsx)("p",{className:"text-xs",children:'Click "Add Consumables" to add packaging materials like cartons, tapes, and bags.'})]})]})},Yl=e=>{let{formData:t,setFormData:a,materials:s}=e;const[r,i]=(0,n.useState)({material_id:"",material_name:"",layer_type:"",width:"",width_range:"",thickness:"",quantity:"",notes:""});return(0,mi.jsxs)("div",{className:"bg-blue-900/20 border border-blue-600/30 rounded-lg p-4",children:[(0,mi.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,mi.jsxs)("div",{children:[(0,mi.jsx)("h4",{className:"text-lg font-semibold text-white",children:"Material Layers"}),(0,mi.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Define material composition for production planning and cost calculation"})]})}),t.material_layers&&t.material_layers.length>0&&(0,mi.jsxs)("div",{className:"mb-4 space-y-2",children:[(0,mi.jsx)("p",{className:"text-sm font-medium text-gray-300 mb-2",children:"Current Layers:"}),t.material_layers.map((e,t)=>(0,mi.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-800 rounded-lg",children:[(0,mi.jsxs)("div",{className:"flex-1",children:[(0,mi.jsx)("div",{className:"font-medium text-white",children:e.material_name}),(0,mi.jsxs)("div",{className:"text-sm text-gray-400",children:[e.layer_type," | Thickness: ",e.thickness,"mm",e.width&&" | Width: ".concat(e.width,"mm"),e.width_range&&" | Width Range: ".concat(e.width_range,"mm"),e.quantity&&" | Quantity: ".concat(e.quantity)]}),e.notes&&(0,mi.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["Note: ",e.notes]})]}),(0,mi.jsx)("button",{type:"button",onClick:()=>(e=>{a(t=>m(m({},t),{},{material_layers:t.material_layers.filter((t,a)=>a!==e)})),Bt.success("Material layer removed")})(t),className:"text-red-400 hover:text-red-300 ml-4",children:(0,mi.jsx)(Ol,{className:"h-4 w-4"})})]},t))]}),(0,mi.jsxs)("div",{className:"border-t border-gray-600 pt-4 space-y-3",children:[(0,mi.jsx)("p",{className:"text-sm font-medium text-gray-300 mb-3",children:"Add New Material Layer:"}),(0,mi.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsxs)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:["Material/Product ",(0,mi.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,mi.jsxs)("select",{value:r.material_id,onChange:e=>(e=>{const t=s.find(t=>t.id===e);t&&i(a=>m(m({},a),{},{material_id:e,material_name:t.product_name||"",thickness:t.thickness_mm||""}))})(e.target.value),className:"misty-select w-full",children:[(0,mi.jsx)("option",{value:"",children:"Select material..."}),s&&s.map(e=>(0,mi.jsxs)("option",{value:e.id,children:[e.product_name,e.thickness_mm&&" - ".concat(e.thickness_mm,"mm thick"),e.gsm&&" - ".concat(e.gsm," GSM")]},e.id))]})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsxs)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:["Layer Position ",(0,mi.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,mi.jsxs)("select",{value:r.layer_type,onChange:e=>i(t=>m(m({},t),{},{layer_type:e.target.value})),className:"misty-select w-full",children:[(0,mi.jsx)("option",{value:"",children:"Select position..."}),["Outer Most Layer","Central Layer","Inner Most Layer"].map(e=>(0,mi.jsx)("option",{value:e,children:e},e))]})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsxs)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:["Thickness (mm) ",(0,mi.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,mi.jsx)("input",{type:"number",step:"0.001",min:"0",value:r.thickness,onChange:e=>i(t=>m(m({},t),{},{thickness:e.target.value})),className:"misty-input w-full",placeholder:"e.g., 0.15"})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsxs)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:["Width (mm) ",(0,mi.jsx)("span",{className:"text-xs text-gray-500",children:"(Optional - for Outer/Inner layers)"})]}),(0,mi.jsx)("input",{type:"number",step:"0.1",min:"0",value:r.width,onChange:e=>i(t=>m(m({},t),{},{width:e.target.value})),className:"misty-input w-full",placeholder:"e.g., 50"})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsxs)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:["Width Range (mm) ",(0,mi.jsx)("span",{className:"text-xs text-gray-500",children:"(Optional - for Central layers)"})]}),(0,mi.jsx)("input",{type:"text",value:r.width_range,onChange:e=>i(t=>m(m({},t),{},{width_range:e.target.value})),className:"misty-input w-full",placeholder:"e.g., 61-68"})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsxs)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:["Quantity/Usage ",(0,mi.jsx)("span",{className:"text-xs text-gray-500",children:"(Optional)"})]}),(0,mi.jsx)("input",{type:"number",step:"0.01",min:"0",value:r.quantity,onChange:e=>i(t=>m(m({},t),{},{quantity:e.target.value})),className:"misty-input w-full",placeholder:"e.g., 1.5"})]}),(0,mi.jsxs)("div",{className:"md:col-span-2",children:[(0,mi.jsxs)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:["Notes ",(0,mi.jsx)("span",{className:"text-xs text-gray-500",children:"(Optional)"})]}),(0,mi.jsx)("textarea",{value:r.notes,onChange:e=>i(t=>m(m({},t),{},{notes:e.target.value})),className:"misty-textarea w-full",rows:2,placeholder:"Additional notes about this material layer..."})]})]}),(0,mi.jsx)("div",{className:"flex justify-end",children:(0,mi.jsxs)("button",{type:"button",onClick:()=>{if(!r.material_id||!r.layer_type||!r.thickness)return void Bt.error("Please fill in Material, Layer Type, and Thickness fields");const e=m(m({},r),{},{thickness:parseFloat(r.thickness)||0,width:r.width?parseFloat(r.width):null,quantity:r.quantity?parseFloat(r.quantity):null});a(t=>m(m({},t),{},{material_layers:[...t.material_layers,e]})),i({material_id:"",material_name:"",layer_type:"",width:"",width_range:"",thickness:"",quantity:"",notes:""}),Bt.success("Material layer added")},className:"misty-button misty-button-primary flex items-center text-sm",children:[(0,mi.jsx)(Cl,{className:"h-4 w-4 mr-2"}),"Add Material Layer"]})})]}),t.material_layers&&0===t.material_layers.length&&(0,mi.jsxs)("div",{className:"text-center py-6 text-gray-400",children:[(0,mi.jsx)("p",{className:"text-sm",children:"No material layers defined yet."}),(0,mi.jsx)("p",{className:"text-xs",children:"Add material layers to enable projected order analysis and material requirements calculations."})]})]})},Jl=e=>{let{productSpecs:t,productSection:a,onAddConsumable:s,onCancel:r}=e;const[i,l]=(0,n.useState)(null),[o,c]=(0,n.useState)(""),[d,u]=(0,n.useState)(1),[m,p]=(0,n.useState)("");return(0,mi.jsxs)("div",{className:"space-y-6",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:"Select Consumable Type"}),(0,mi.jsx)("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:t.length>0?t.map(e=>(0,mi.jsxs)("div",{className:"p-3 border rounded-lg cursor-pointer transition-colors ".concat((null===i||void 0===i?void 0:i.id)===e.id?"border-yellow-400 bg-yellow-400/10":"border-gray-600 hover:border-gray-500"),onClick:()=>(e=>{l(e),c(""),u(1),p("")})(e),children:[(0,mi.jsx)("div",{className:"font-medium text-white",children:e.product_name}),(0,mi.jsx)("div",{className:"text-sm text-gray-400",children:e.product_type})]},e.id)):(0,mi.jsx)("p",{className:"text-sm text-gray-400",children:"No consumable specifications available. Create specifications for Cardboard Boxes, Tapes, or Plastic Bags first."})})]}),i&&(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:"Measurement Unit"}),(0,mi.jsx)("div",{className:"space-y-2",children:(()=>{if(!i)return[];if("finished_goods"===a)return["Per Unit","Per Order","Per Meter"];if("paper_cores"===a){if("Cardboard Boxes"===i.product_type)return["Quantity of Cores Per Carton"];if("Tapes"===i.product_type)return["Per Meter"];if("Plastic Bags"===i.product_type)return["Per Quantity of Cores"]}return[]})().map(e=>(0,mi.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,mi.jsx)("input",{type:"radio",name:"measurement_unit",value:e,checked:o===e,onChange:e=>c(e.target.value),className:"text-yellow-400"}),(0,mi.jsx)("span",{className:"text-white",children:e})]},e))})]}),"Quantity of Cores Per Carton"===o&&(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Quantity of Cores Per Carton *"}),(0,mi.jsx)("input",{type:"number",min:"1",value:m,onChange:e=>p(e.target.value),className:"misty-input w-32",placeholder:"50",required:!0})]}),o&&"Quantity of Cores Per Carton"!==o&&(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Quantity"}),(0,mi.jsx)("input",{type:"number",min:"1",value:d,onChange:e=>u(parseInt(e.target.value)||1),className:"misty-input w-32",placeholder:"1"})]}),(0,mi.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-700",children:[(0,mi.jsx)("button",{type:"button",onClick:r,className:"misty-button misty-button-secondary",children:"Cancel"}),(0,mi.jsx)("button",{type:"button",onClick:()=>{if(!i||!o)return void Bt.error("Please select a consumable and measurement unit");const e="Quantity of Cores Per Carton"===o&&parseInt(m)||null;s(i,o,d,e)},className:"misty-button misty-button-primary",disabled:!i||!o,children:"Add Consumable"})]})]})},Zl=e=>{let{clientId:t,onClose:a}=e;const[s,r]=(0,n.useState)([]),[i,l]=(0,n.useState)([]),[o,c]=(0,n.useState)([]),[d,u]=(0,n.useState)([]),[p,h]=(0,n.useState)(null),[x,f]=(0,n.useState)(!0),[g,y]=(0,n.useState)(!1),[b,v]=(0,n.useState)(null),[j,w]=(0,n.useState)(!1),[_,N]=(0,n.useState)(null),[k,S]=(0,n.useState)(""),[C,E]=(0,n.useState)(!1),[D,P]=(0,n.useState)(null),[A,T]=(0,n.useState)(!1),[L,R]=(0,n.useState)({product_type:"finished_goods",product_code:"",product_description:"",price_ex_gst:"",minimum_order_quantity:"",consignment:!1,material_used:[],core_id:"",core_width:"",core_thickness:"",strength_quality_important:!1,delivery_included:!1,service_delivery_subtype:"services",service_job_description:"",service_time_required:"",service_price:"",service_functions:[],delivery_from_address:"",delivery_to_address:"",delivery_unit_type:"Pallets",delivery_price_per_unit:"",consumables:[],material_layers:[],is_shared_product:!1,shared_with_clients:[],makeready_allowance_percent:10,setup_time_minutes:30,waste_percentage:5,qc_tolerances:{id_tolerance:.5,od_tolerance:.5,wall_tolerance:.1},inspection_interval_minutes:60,tubes_per_carton:50,cartons_per_pallet:20,special_tooling_notes:"",packing_instructions:""}),[F,O]=(0,n.useState)({});(0,n.useEffect)(()=>{M()},[t]);const M=async()=>{try{f(!0);const[e,a,s,n,i]=await Promise.all([Yn(t),En(),jn(),Mn(),kn(t)]);r(e.data),l(a.data),c(s.data.filter(e=>e.id!==t)),u(n.data),h(i.data)}catch(e){console.error("Failed to load data:",e),Bt.error("Failed to load product catalogue data")}finally{f(!1)}},I=()=>{v(null),R({product_type:"finished_goods",product_code:"",product_description:"",price_ex_gst:"",minimum_order_quantity:"",consignment:!1,material_used:[],core_id:"",core_width:"",core_thickness:"",strength_quality_important:!1,delivery_included:!1,service_delivery_subtype:"services",service_job_description:"",service_time_required:"",service_price:"",service_functions:[],delivery_from_address:"",delivery_to_address:"",delivery_unit_type:"Pallets",delivery_price_per_unit:"",consumables:[],material_layers:[],is_shared_product:!1,shared_with_clients:[],makeready_allowance_percent:10,setup_time_minutes:30,waste_percentage:5,qc_tolerances:{id_tolerance:.5,od_tolerance:.5,wall_tolerance:.1},inspection_interval_minutes:60,tubes_per_carton:50,cartons_per_pallet:20,special_tooling_notes:"",packing_instructions:""}),O({}),y(!0)},q=()=>{P(null),v(null),T(!1),R({product_type:"finished_goods",product_code:"",product_description:"",price_ex_gst:"",minimum_order_quantity:"",consignment:!1,material_used:[],core_id:"",core_width:"",core_thickness:"",strength_quality_important:!1,delivery_included:!1,consumables:[],is_shared_product:!1,shared_with_clients:[],makeready_allowance_percent:10,setup_time_minutes:30,waste_percentage:5,qc_tolerances:{id_tolerance:.5,od_tolerance:.5,wall_tolerance:.1},inspection_interval_minutes:60,tubes_per_carton:50,cartons_per_pallet:20,special_tooling_notes:"",packing_instructions:""}),O({})},B=e=>{const{name:t,value:a,type:s,checked:n}=e.target;R(e=>m(m({},e),{},{[t]:"checkbox"===s?n:a})),F[t]&&O(e=>m(m({},e),{},{[t]:""}))},z=(e,t)=>{if(t){const t=d.find(t=>t.id===e);R(t?a=>{var s,n;return m(m({},a),{},{material_used:[...a.material_used,e],core_id:(null===(s=t.specifications)||void 0===s?void 0:s.id_mm)||t.core_id||a.core_id,core_thickness:(null===(n=t.specifications)||void 0===n?void 0:n.wall_thickness)||t.core_thickness||a.core_thickness})}:t=>m(m({},t),{},{material_used:[...t.material_used,e]}))}else R(t=>m(m({},t),{},{material_used:t.material_used.filter(t=>t!==e)}))},U=()=>{E(!0)},W=e=>{R(t=>m(m({},t),{},{consumables:t.consumables.filter(t=>t.id!==e)}))};return x?(0,mi.jsx)("div",{className:"modal-overlay",children:(0,mi.jsx)("div",{className:"modal-content max-w-6xl max-h-[90vh] overflow-y-auto",children:(0,mi.jsx)("div",{className:"p-8",children:(0,mi.jsxs)("div",{className:"animate-pulse",children:[(0,mi.jsx)("div",{className:"h-8 bg-gray-700 rounded w-1/3 mb-8"}),(0,mi.jsx)("div",{className:"space-y-4",children:[...Array(3)].map((e,t)=>(0,mi.jsx)("div",{className:"h-16 bg-gray-700 rounded"},t))})]})})})}):(0,mi.jsx)("div",{className:"modal-overlay",onClick:e=>e.target===e.currentTarget&&a(),children:(0,mi.jsxs)("div",{className:"modal-content max-w-6xl max-h-[90vh] overflow-y-auto",children:[(0,mi.jsxs)("div",{className:"p-6",children:[(0,mi.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,mi.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Client Product Catalogue"}),(0,mi.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,mi.jsxs)("button",{onClick:I,className:"misty-button misty-button-primary flex items-center",children:[(0,mi.jsx)(Cl,{className:"h-4 w-4 mr-2"}),"Add Product"]}),(0,mi.jsx)("button",{onClick:a,className:"text-gray-400 hover:text-white transition-colors",children:(0,mi.jsx)(nl,{className:"h-6 w-6"})})]})]}),s.length>0?(0,mi.jsx)("div",{className:"misty-table",children:(0,mi.jsxs)("table",{className:"w-full",children:[(0,mi.jsx)("thead",{children:(0,mi.jsxs)("tr",{children:[(0,mi.jsx)("th",{children:"Product Code"}),(0,mi.jsx)("th",{children:"Description"}),(0,mi.jsx)("th",{children:"Type"}),(0,mi.jsx)("th",{children:"Price (ex GST)"}),(0,mi.jsx)("th",{children:"Min Qty"}),(0,mi.jsx)("th",{children:"Consignment"}),(0,mi.jsx)("th",{children:"Shared"})]})}),(0,mi.jsx)("tbody",{children:s.map(e=>{var t;return(0,mi.jsxs)("tr",{className:"cursor-pointer hover:bg-gray-700/50 transition-colors ".concat((null===D||void 0===D?void 0:D.id)===e.id?"bg-blue-900/30 ring-2 ring-blue-500":""),onDoubleClick:()=>(e=>{P(e),v(e),R({product_type:e.product_type,product_code:e.product_code,product_description:e.product_description,price_ex_gst:e.price_ex_gst.toString(),minimum_order_quantity:e.minimum_order_quantity.toString(),consignment:e.consignment,material_used:e.material_used||[],core_id:e.core_id||"",core_width:e.core_width||"",core_thickness:e.core_thickness||"",strength_quality_important:e.strength_quality_important||!1,delivery_included:e.delivery_included||!1,consumables:e.consumables||[],material_layers:e.material_layers||[],is_shared_product:e.is_shared_product||!1,shared_with_clients:e.shared_with_clients||[],makeready_allowance_percent:e.makeready_allowance_percent||10,setup_time_minutes:e.setup_time_minutes||30,waste_percentage:e.waste_percentage||5,qc_tolerances:e.qc_tolerances||{id_tolerance:.5,od_tolerance:.5,wall_tolerance:.1},inspection_interval_minutes:e.inspection_interval_minutes||60,tubes_per_carton:e.tubes_per_carton||50,cartons_per_pallet:e.cartons_per_pallet||20,special_tooling_notes:e.special_tooling_notes||"",packing_instructions:e.packing_instructions||""}),T(!0),O({})})(e),title:"Double-click to edit",children:[(0,mi.jsx)("td",{className:"font-medium",children:e.product_code}),(0,mi.jsx)("td",{children:e.product_description}),(0,mi.jsx)("td",{children:(0,mi.jsx)("span",{className:"text-xs px-2 py-1 rounded text-white ".concat("finished_goods"===e.product_type?"bg-blue-600":"bg-purple-600"),children:"finished_goods"===e.product_type?"Finished Goods":"Paper Cores"})}),(0,mi.jsxs)("td",{className:"text-yellow-400 font-medium",children:["$",e.price_ex_gst.toFixed(2)]}),(0,mi.jsx)("td",{children:e.minimum_order_quantity}),(0,mi.jsx)("td",{children:e.consignment?(0,mi.jsx)(ql,{className:"h-4 w-4 text-green-400"}):(0,mi.jsx)("span",{className:"text-gray-400",children:"\u2014"})}),(0,mi.jsx)("td",{children:e.is_shared_product?(0,mi.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,mi.jsx)(ql,{className:"h-4 w-4 text-green-400"}),(0,mi.jsxs)("span",{className:"text-xs text-green-400",children:[(null===(t=e.shared_with_clients)||void 0===t?void 0:t.length)||0," clients"]})]}):(0,mi.jsx)("span",{className:"text-gray-400",children:"\u2014"})})]},e.id)})})]})}):(0,mi.jsxs)("div",{className:"text-center py-12",children:[(0,mi.jsx)("div",{className:"mx-auto h-12 w-12 text-gray-400 mb-4",children:"\ud83d\udce6"}),(0,mi.jsx)("h3",{className:"text-sm font-medium text-gray-300",children:"No products in catalogue"}),(0,mi.jsx)("p",{className:"mt-1 text-sm text-gray-400",children:"Get started by adding your first product."}),(0,mi.jsx)("div",{className:"mt-6",children:(0,mi.jsxs)("button",{onClick:I,className:"misty-button misty-button-primary",children:[(0,mi.jsx)(Cl,{className:"h-5 w-5 mr-2"}),"Add Product"]})})]})]}),A&&D&&(0,mi.jsx)("div",{className:"fixed bottom-0 left-0 right-0 bg-gray-800 border-t border-gray-700 p-4 shadow-lg z-50",children:(0,mi.jsxs)("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[(0,mi.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,mi.jsxs)("div",{className:"text-white font-medium",children:["Editing: ",D.product_code," - ",D.product_description]}),(0,mi.jsx)("div",{className:"text-xs text-gray-400",children:"Double-click another product to switch, or use the actions below"})]}),(0,mi.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,mi.jsxs)("button",{onClick:async()=>{console.log("handleInlineSave called"),console.log("Form data before save:",L),console.log("Starting save process - no validation required");try{if(A&&D){console.log("Preparing submitData...");const a={product_type:L.product_type,product_code:L.product_code,product_description:L.product_description,price_ex_gst:parseFloat(L.price_ex_gst)||0,minimum_order_quantity:parseInt(L.minimum_order_quantity)||1,consignment:L.consignment,material_used:"paper_cores"===L.product_type?L.material_used:[],core_id:"paper_cores"===L.product_type&&L.core_id||null,core_width:"paper_cores"===L.product_type&&L.core_width||null,core_thickness:"paper_cores"===L.product_type&&L.core_thickness||null,strength_quality_important:"paper_cores"===L.product_type&&L.strength_quality_important,delivery_included:"paper_cores"===L.product_type&&L.delivery_included,consumables:L.consumables||[],makeready_allowance_percent:parseFloat(L.makeready_allowance_percent)||0,setup_time_minutes:parseInt(L.setup_time_minutes)||0,waste_percentage:parseFloat(L.waste_percentage)||0,qc_tolerances:L.qc_tolerances||{id_tolerance:0,od_tolerance:0,wall_tolerance:0},inspection_interval_minutes:parseInt(L.inspection_interval_minutes)||0,tubes_per_carton:parseInt(L.tubes_per_carton)||0,cartons_per_pallet:parseInt(L.cartons_per_pallet)||0,special_tooling_notes:L.special_tooling_notes||"",packing_instructions:L.packing_instructions||"",is_shared_product:L.is_shared_product||!1,shared_with_clients:L.shared_with_clients||[]};console.log("Submit data with Production & Makeready parameters:",{makeready_allowance_percent:a.makeready_allowance_percent,setup_time_minutes:a.setup_time_minutes,waste_percentage:a.waste_percentage,tubes_per_carton:a.tubes_per_carton,special_tooling_notes:a.special_tooling_notes}),console.log("Making API call to update product..."),console.log("API Request details:",{clientId:t,productId:D.id,submitData:a});const s=await Zn(t,D.id,a);console.log("API Response:",s.data),console.log("Product updated successfully"),Bt.success("Product updated successfully"),console.log("Verifying saved data by fetching updated product...");try{var e;const a=await Xn(t,D.id),s=(null===(e=a.data)||void 0===e?void 0:e.data)||a.data;console.log("Product after save verification:",{tubes_per_carton:s.tubes_per_carton,makeready_allowance_percent:s.makeready_allowance_percent,setup_time_minutes:s.setup_time_minutes,waste_percentage:s.waste_percentage,special_tooling_notes:s.special_tooling_notes})}catch(r){console.error("Failed to verify saved product:",r)}T(!1),P(null),console.log("Reloading products..."),await M(),console.log("Data reload completed")}else console.log("Not in inline editing mode or no product selected")}catch(i){var a,s,n;console.error("Error saving product:",i),console.error("Error details:",null===(a=i.response)||void 0===a?void 0:a.data),Bt.error("Failed to save product: "+((null===(s=i.response)||void 0===s||null===(n=s.data)||void 0===n?void 0:n.detail)||i.message))}},className:"misty-button misty-button-primary flex items-center",children:[(0,mi.jsx)(ql,{className:"h-4 w-4 mr-2"}),"Save"]}),(0,mi.jsxs)("button",{onClick:q,className:"misty-button misty-button-secondary flex items-center",children:[(0,mi.jsx)(nl,{className:"h-4 w-4 mr-2"}),"Cancel"]}),(0,mi.jsxs)("button",{onClick:async()=>{if(D&&window.confirm("Are you sure you want to delete this product? This action cannot be undone."))try{await Kn(t,D.id),Bt.success("Product deleted successfully"),q(),M()}catch(e){console.error("Failed to delete product:",e),Bt.error("Failed to delete product")}},className:"misty-button bg-red-600 hover:bg-red-700 text-white flex items-center",children:[(0,mi.jsx)(Ol,{className:"h-4 w-4 mr-2"}),"Delete"]}),(0,mi.jsxs)("button",{onClick:()=>{D&&(N(D.id),S(""),w(!0))},className:"misty-button bg-blue-600 hover:bg-blue-700 text-white flex items-center",children:[(0,mi.jsx)(Ul,{className:"h-4 w-4 mr-2"}),"Duplicate"]}),(0,mi.jsxs)("button",{onClick:()=>(e=>{const t=window.open("","_blank"),a=(null===p||void 0===p?void 0:p.company_name)||"Client",s="\n      <!DOCTYPE html>\n      <html>\n      <head>\n        <title>Product Quote - ".concat(e.product_code,'</title>\n        <style>\n          body {\n            font-family: Arial, sans-serif;\n            margin: 20px;\n            line-height: 1.6;\n            color: #333;\n          }\n          .header {\n            text-align: center;\n            border-bottom: 2px solid #333;\n            padding-bottom: 20px;\n            margin-bottom: 30px;\n          }\n          .company-name {\n            font-size: 24px;\n            font-weight: bold;\n            margin-bottom: 10px;\n          }\n          .quote-title {\n            font-size: 18px;\n            color: #666;\n          }\n          .product-info {\n            margin-bottom: 30px;\n          }\n          .product-info h2 {\n            background-color: #f5f5f5;\n            padding: 10px;\n            margin: 0 0 20px 0;\n            border-left: 4px solid #007bff;\n          }\n          .info-row {\n            display: flex;\n            margin-bottom: 10px;\n            border-bottom: 1px dotted #ccc;\n            padding-bottom: 5px;\n          }\n          .info-label {\n            font-weight: bold;\n            width: 200px;\n            flex-shrink: 0;\n          }\n          .info-value {\n            flex: 1;\n          }\n          .price-section {\n            background-color: #f8f9fa;\n            border: 2px solid #007bff;\n            border-radius: 8px;\n            padding: 20px;\n            text-align: center;\n            margin-top: 20px;\n          }\n          .price {\n            font-size: 28px;\n            font-weight: bold;\n            color: #007bff;\n            margin-bottom: 10px;\n          }\n          .price-note {\n            color: #666;\n            font-style: italic;\n          }\n          .materials-section {\n            margin-top: 30px;\n          }\n          .materials-list {\n            background-color: #f8f9fa;\n            padding: 15px;\n            border-radius: 4px;\n          }\n          .material-item {\n            margin-bottom: 5px;\n            padding: 5px 0;\n            border-bottom: 1px solid #eee;\n          }\n          .footer {\n            margin-top: 40px;\n            text-align: center;\n            font-size: 12px;\n            color: #666;\n            border-top: 1px solid #ccc;\n            padding-top: 20px;\n          }\n          @media print {\n            body { margin: 0; }\n            .no-print { display: none; }\n          }\n        </style>\n      </head>\n      <body>\n        <div class="header">\n          <div class="company-name">').concat(a,'</div>\n          <div class="quote-title">Product Quote</div>\n        </div>\n\n        <div class="product-info">\n          <h2>Product Information</h2>\n          <div class="info-row">\n            <div class="info-label">Product Code:</div>\n            <div class="info-value">').concat(e.product_code,'</div>\n          </div>\n          <div class="info-row">\n            <div class="info-label">Description:</div>\n            <div class="info-value">').concat(e.product_description,'</div>\n          </div>\n          <div class="info-row">\n            <div class="info-label">Product Type:</div>\n            <div class="info-value">').concat("finished_goods"===e.product_type?"Finished Goods":"Paper Cores",'</div>\n          </div>\n          <div class="info-row">\n            <div class="info-label">Minimum Order Quantity:</div>\n            <div class="info-value">').concat(e.minimum_order_quantity,' units</div>\n          </div>\n          <div class="info-row">\n            <div class="info-label">Consignment:</div>\n            <div class="info-value">').concat(e.consignment?"Yes":"No","</div>\n          </div>\n          ").concat("paper_cores"===e.product_type&&e.core_id?'\n          <div class="info-row">\n            <div class="info-label">Core ID:</div>\n            <div class="info-value">'.concat(e.core_id,"</div>\n          </div>"):"","\n          ").concat("paper_cores"===e.product_type&&e.core_width?'\n          <div class="info-row">\n            <div class="info-label">Core Width:</div>\n            <div class="info-value">'.concat(e.core_width,"</div>\n          </div>"):"","\n          ").concat("paper_cores"===e.product_type&&e.core_thickness?'\n          <div class="info-row">\n            <div class="info-label">Core Thickness:</div>\n            <div class="info-value">'.concat(e.core_thickness,"</div>\n          </div>"):"","\n          ").concat("paper_cores"===e.product_type?'\n          <div class="info-row">\n            <div class="info-label">Strength & Quality Important:</div>\n            <div class="info-value">'.concat(e.strength_quality_important?"Yes":"No",'</div>\n          </div>\n          <div class="info-row">\n            <div class="info-label">Delivery Included:</div>\n            <div class="info-value">').concat(e.delivery_included?"Yes":"No","</div>\n          </div>"):"","\n        </div>\n\n        ").concat("paper_cores"===e.product_type&&e.material_used&&e.material_used.length>0?'\n        <div class="materials-section">\n          <h2>Materials Used</h2>\n          <div class="materials-list">\n            '.concat(i.filter(t=>e.material_used.includes(t.id)).map(e=>'\n                <div class="material-item">\n                  '.concat(e.supplier," - ").concat(e.product_code).concat(e.gsm?" (".concat(e.gsm," GSM)"):"","\n                </div>\n              ")).join(""),"\n          </div>\n        </div>"):"",'\n\n        <div class="price-section">\n          <div class="price">$').concat(e.price_ex_gst.toFixed(2),'</div>\n          <div class="price-note">Price ex GST per unit</div>\n        </div>\n\n        <div class="footer">\n          <p>Generated on ').concat((new Date).toLocaleDateString()," at ").concat((new Date).toLocaleTimeString(),"</p>\n          <p>This quote is valid for 30 days from the date of generation.</p>\n        </div>\n\n        <script>\n          window.onload = function() {\n            window.print();\n            window.onafterprint = function() {\n              window.close();\n            }\n          }\n        <\/script>\n      </body>\n      </html>\n    ");t.document.write(s),t.document.close()})(D),className:"misty-button bg-green-600 hover:bg-green-700 text-white flex items-center",children:[(0,mi.jsx)(Gl,{className:"h-4 w-4 mr-2"}),"Print"]})]})]})}),A&&D&&(0,mi.jsxs)("div",{className:"mt-8 mb-20 bg-gray-800 rounded-lg p-6 border-2 border-blue-500",children:[(0,mi.jsxs)("div",{className:"mb-6",children:[(0,mi.jsxs)("h3",{className:"text-xl font-bold text-white mb-2",children:["Edit Product: ",D.product_code]}),(0,mi.jsx)("p",{className:"text-gray-400 text-sm",children:"Make your changes below and click Save to update the product."})]}),(0,mi.jsxs)("form",{className:"space-y-6",children:[(0,mi.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Product Type"}),(0,mi.jsxs)("select",{name:"product_type",value:L.product_type,onChange:B,className:"misty-select w-full",required:!0,children:[(0,mi.jsx)("option",{value:"finished_goods",children:"Finished Goods"}),(0,mi.jsx)("option",{value:"paper_cores",children:"Paper Cores"}),(0,mi.jsx)("option",{value:"services_and_deliveries",children:"Services and Deliveries"})]})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Product Code *"}),(0,mi.jsx)("input",{type:"text",name:"product_code",value:L.product_code,onChange:B,className:"misty-input w-full ".concat(F.product_code?"border-red-500":""),placeholder:"Enter product code",required:!0}),F.product_code&&(0,mi.jsx)("p",{className:"text-red-400 text-sm mt-1",children:F.product_code})]}),(0,mi.jsxs)("div",{className:"md:col-span-2",children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Product Description *"}),(0,mi.jsx)("textarea",{name:"product_description",value:L.product_description,onChange:B,className:"misty-input w-full h-20 ".concat(F.product_description?"border-red-500":""),placeholder:"Enter product description",required:!0}),F.product_description&&(0,mi.jsx)("p",{className:"text-red-400 text-sm mt-1",children:F.product_description})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Price ex GST *"}),(0,mi.jsx)("input",{type:"number",name:"price_ex_gst",value:L.price_ex_gst,onChange:B,className:"misty-input w-full ".concat(F.price_ex_gst?"border-red-500":""),placeholder:"0.00",step:"0.01",min:"0",required:!0}),F.price_ex_gst&&(0,mi.jsx)("p",{className:"text-red-400 text-sm mt-1",children:F.price_ex_gst})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Minimum Order Quantity *"}),(0,mi.jsx)("input",{type:"number",name:"minimum_order_quantity",value:L.minimum_order_quantity,onChange:B,className:"misty-input w-full ".concat(F.minimum_order_quantity?"border-red-500":""),placeholder:"1",min:"1",required:!0}),F.minimum_order_quantity&&(0,mi.jsx)("p",{className:"text-red-400 text-sm mt-1",children:F.minimum_order_quantity})]}),(0,mi.jsx)("div",{className:"flex items-center",children:(0,mi.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,mi.jsx)("input",{type:"checkbox",name:"consignment",checked:L.consignment,onChange:B,className:"form-checkbox h-4 w-4 text-yellow-400 bg-gray-700 border-gray-600 rounded focus:ring-yellow-400"}),(0,mi.jsx)("span",{className:"text-white font-medium",children:"Consignment?"})]})}),(0,mi.jsx)("div",{className:"flex items-center",children:(0,mi.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,mi.jsx)("input",{type:"checkbox",name:"is_shared_product",checked:L.is_shared_product,onChange:B,className:"form-checkbox h-4 w-4 text-yellow-400 bg-gray-700 border-gray-600 rounded focus:ring-yellow-400"}),(0,mi.jsx)("span",{className:"text-white font-medium",children:"Shared Product?"})]})})]}),L.is_shared_product&&(0,mi.jsxs)("div",{className:"bg-blue-900/20 border border-blue-600/30 rounded-lg p-4",children:[(0,mi.jsx)("h4",{className:"text-lg font-semibold text-white mb-3",children:"Share with Other Clients"}),(0,mi.jsx)("p",{className:"text-sm text-gray-300 mb-4",children:"Select which clients should have access to this shared product."}),(0,mi.jsx)("div",{className:"max-h-32 overflow-y-auto space-y-2",children:o.map(e=>(0,mi.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,mi.jsx)("input",{type:"checkbox",checked:L.shared_with_clients.includes(e.id),onChange:t=>{t.target.checked?R(t=>m(m({},t),{},{shared_with_clients:[...t.shared_with_clients,e.id]})):R(t=>m(m({},t),{},{shared_with_clients:t.shared_with_clients.filter(t=>t!==e.id)}))},className:"form-checkbox h-4 w-4 text-yellow-400 bg-gray-700 border-gray-600 rounded focus:ring-yellow-400"}),(0,mi.jsx)("span",{className:"text-sm text-gray-300",children:e.company_name})]},e.id))})]}),"paper_cores"===L.product_type&&(0,mi.jsx)(Vl,{formData:L,handleInputChange:B,handleSpecificationSelection:z,productSpecifications:d}),(0,mi.jsx)($l,{formData:L,handleInputChange:B,setFormData:R}),(0,mi.jsx)(Ql,{formData:L,setFormData:R,handleAddConsumables:U,removeConsumable:W})]})]}),g&&(0,mi.jsx)("div",{className:"modal-overlay",onClick:e=>e.target===e.currentTarget&&y(!1),children:(0,mi.jsx)("div",{className:"modal-content max-w-3xl max-h-[90vh] overflow-y-auto",children:(0,mi.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};return L.product_code.trim()||(e.product_code="Product code is required"),L.product_description.trim()||(e.product_description="Product description is required"),(!L.price_ex_gst||parseFloat(L.price_ex_gst)<=0)&&(e.price_ex_gst="Price must be greater than 0"),(!L.minimum_order_quantity||parseInt(L.minimum_order_quantity)<=0)&&(e.minimum_order_quantity="Minimum order quantity must be greater than 0"),O(e),0===Object.keys(e).length})())try{const e={product_type:L.product_type,product_code:L.product_code,product_description:L.product_description,price_ex_gst:parseFloat(L.price_ex_gst),minimum_order_quantity:parseInt(L.minimum_order_quantity),consignment:L.consignment,material_used:"paper_cores"===L.product_type?L.material_used:[],core_id:"paper_cores"===L.product_type&&L.core_id||null,core_width:"paper_cores"===L.product_type&&L.core_width||null,core_thickness:"paper_cores"===L.product_type&&L.core_thickness||null,strength_quality_important:"paper_cores"===L.product_type&&L.strength_quality_important,delivery_included:"paper_cores"===L.product_type&&L.delivery_included,service_delivery_subtype:"services_and_deliveries"===L.product_type?L.service_delivery_subtype:null,service_job_description:"services_and_deliveries"===L.product_type&&L.service_job_description||null,service_time_required:"services_and_deliveries"===L.product_type&&L.service_time_required||null,service_price:"services_and_deliveries"===L.product_type&&L.service_price?parseFloat(L.service_price):null,service_functions:"services_and_deliveries"===L.product_type?L.service_functions:[],delivery_from_address:"services_and_deliveries"===L.product_type&&L.delivery_from_address||null,delivery_to_address:"services_and_deliveries"===L.product_type&&L.delivery_to_address||null,delivery_unit_type:"services_and_deliveries"===L.product_type&&L.delivery_unit_type||null,delivery_price_per_unit:"services_and_deliveries"===L.product_type&&L.delivery_price_per_unit?parseFloat(L.delivery_price_per_unit):null,consumables:L.consumables,material_layers:L.material_layers||[],is_shared_product:L.is_shared_product,shared_with_clients:L.shared_with_clients,makeready_allowance_percent:L.makeready_allowance_percent,setup_time_minutes:L.setup_time_minutes,waste_percentage:L.waste_percentage,qc_tolerances:L.qc_tolerances,inspection_interval_minutes:L.inspection_interval_minutes,tubes_per_carton:L.tubes_per_carton,cartons_per_pallet:L.cartons_per_pallet,special_tooling_notes:L.special_tooling_notes,packing_instructions:L.packing_instructions};if(b){await Zn(t,b.id,e),Bt.success("Product updated successfully");try{await Wn(t,b.id),Bt.success("Synced material layers to product specifications")}catch(i){console.error("Sync warning:",i),Bt.warning("Product saved but sync to specifications failed")}}else{var a,s;const n=await Jn(t,e);if(Bt.success("Product created successfully"),null!==(a=n.data)&&void 0!==a&&null!==(s=a.data)&&void 0!==s&&s.product_id)try{await Wn(t,n.data.data.product_id),Bt.success("Synced material layers to product specifications")}catch(i){console.error("Sync warning:",i),Bt.warning("Product created but sync to specifications failed")}}y(!1),v(null),R({product_type:"finished_goods",product_code:"",product_description:"",price_ex_gst:"",minimum_order_quantity:"",consignment:!1,material_used:[],core_id:"",core_width:"",core_thickness:"",strength_quality_important:!1,delivery_included:!1,consumables:[],is_shared_product:!1,shared_with_clients:[],makeready_allowance_percent:10,setup_time_minutes:30,waste_percentage:5,qc_tolerances:{id_tolerance:.5,od_tolerance:.5,wall_tolerance:.1},inspection_interval_minutes:60,tubes_per_carton:50,cartons_per_pallet:20,special_tooling_notes:"",packing_instructions:""}),M()}catch(l){var n,r;console.error("Failed to save product:",l);const e=(null===(n=l.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.detail)||"Failed to save product";Bt.error(e)}else Bt.error("Please fix the errors below")},className:"p-6",children:[(0,mi.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,mi.jsx)("h3",{className:"text-xl font-bold text-white",children:b?"Edit Product":"Add New Product"}),(0,mi.jsx)("button",{type:"button",onClick:()=>y(!1),className:"text-gray-400 hover:text-white transition-colors",children:(0,mi.jsx)(nl,{className:"h-5 w-5"})})]}),(0,mi.jsxs)("div",{className:"mb-6",children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:"Product Type *"}),(0,mi.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,mi.jsxs)("label",{className:"flex items-center space-x-3 p-4 border border-gray-600 rounded-lg cursor-pointer hover:bg-gray-700 transition-colors",children:[(0,mi.jsx)("input",{type:"radio",name:"product_type",value:"finished_goods",checked:"finished_goods"===L.product_type,onChange:B,className:"text-yellow-400"}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("div",{className:"font-medium text-white",children:"Finished Goods"}),(0,mi.jsx)("div",{className:"text-sm text-gray-400",children:"Complete products ready for delivery"})]})]}),(0,mi.jsxs)("label",{className:"flex items-center space-x-3 p-4 border border-gray-600 rounded-lg cursor-pointer hover:bg-gray-700 transition-colors",children:[(0,mi.jsx)("input",{type:"radio",name:"product_type",value:"paper_cores",checked:"paper_cores"===L.product_type,onChange:B,className:"text-yellow-400"}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("div",{className:"font-medium text-white",children:"Paper Cores"}),(0,mi.jsx)("div",{className:"text-sm text-gray-400",children:"Paper core products with specifications"})]})]}),(0,mi.jsxs)("label",{className:"flex items-center space-x-3 p-4 border border-gray-600 rounded-lg cursor-pointer hover:bg-gray-700 transition-colors",children:[(0,mi.jsx)("input",{type:"radio",name:"product_type",value:"services_and_deliveries",checked:"services_and_deliveries"===L.product_type,onChange:B,className:"text-yellow-400"}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("div",{className:"font-medium text-white",children:"Services & Deliveries"}),(0,mi.jsx)("div",{className:"text-sm text-gray-400",children:"Services or delivery charges"})]})]})]})]}),(0,mi.jsxs)("div",{className:"mb-8",children:[(0,mi.jsx)("h4",{className:"text-lg font-semibold text-white mb-4",children:"Basic Information"}),(0,mi.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Product Code *"}),(0,mi.jsx)("input",{type:"text",name:"product_code",value:L.product_code,onChange:B,className:"misty-input w-full ".concat(F.product_code?"border-red-500":""),placeholder:"Enter product code",required:!0}),F.product_code&&(0,mi.jsx)("p",{className:"text-red-400 text-sm mt-1",children:F.product_code})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Price ex GST *"}),(0,mi.jsx)("input",{type:"number",step:"0.01",min:"0",name:"price_ex_gst",value:L.price_ex_gst,onChange:B,className:"misty-input w-full ".concat(F.price_ex_gst?"border-red-500":""),placeholder:"0.00",required:!0}),F.price_ex_gst&&(0,mi.jsx)("p",{className:"text-red-400 text-sm mt-1",children:F.price_ex_gst})]}),(0,mi.jsxs)("div",{className:"md:col-span-2",children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Product Description *"}),(0,mi.jsx)("textarea",{name:"product_description",value:L.product_description,onChange:B,rows:3,className:"misty-textarea w-full ".concat(F.product_description?"border-red-500":""),placeholder:"Enter product description",required:!0}),F.product_description&&(0,mi.jsx)("p",{className:"text-red-400 text-sm mt-1",children:F.product_description})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Minimum Order Quantity *"}),(0,mi.jsx)("input",{type:"number",min:"1",name:"minimum_order_quantity",value:L.minimum_order_quantity,onChange:B,className:"misty-input w-full ".concat(F.minimum_order_quantity?"border-red-500":""),placeholder:"1",required:!0}),F.minimum_order_quantity&&(0,mi.jsx)("p",{className:"text-red-400 text-sm mt-1",children:F.minimum_order_quantity})]}),(0,mi.jsx)("div",{className:"flex items-center",children:(0,mi.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,mi.jsx)("input",{type:"checkbox",name:"consignment",checked:L.consignment,onChange:B,className:"form-checkbox h-4 w-4 text-yellow-400 bg-gray-700 border-gray-600 rounded focus:ring-yellow-400"}),(0,mi.jsx)("span",{className:"text-white font-medium",children:"Consignment?"})]})})]})]}),"paper_cores"===L.product_type&&(0,mi.jsxs)("div",{className:"mb-8",children:[(0,mi.jsx)("h4",{className:"text-lg font-semibold text-white mb-4",children:"Paper Cores Specifications"}),(0,mi.jsxs)("div",{className:"mb-6",children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:"Core Specifications (From Product Specifications)"}),(0,mi.jsx)("div",{className:"max-h-32 overflow-y-auto border border-gray-600 rounded-lg p-3",children:d&&d.filter(e=>"Spiral Paper Core"===e.product_type||"Composite Core"===e.product_type).length>0?(0,mi.jsx)("div",{className:"space-y-2",children:d.filter(e=>"Spiral Paper Core"===e.product_type||"Composite Core"===e.product_type).map(e=>{var t,a;return(0,mi.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,mi.jsx)("input",{type:"checkbox",checked:L.material_used.includes(e.id),onChange:t=>z(e.id,t.target.checked),className:"form-checkbox h-4 w-4 text-yellow-400 bg-gray-700 border-gray-600 rounded focus:ring-yellow-400"}),(0,mi.jsxs)("span",{className:"text-sm text-gray-300",children:[e.product_name," (",e.product_type,")",(null===(t=e.specifications)||void 0===t?void 0:t.id_mm)&&" - ID: ".concat(e.specifications.id_mm,"mm"),(null===(a=e.specifications)||void 0===a?void 0:a.wall_thickness)&&" - Wall: ".concat(e.specifications.wall_thickness,"mm")]})]},e.id)})}):(0,mi.jsx)("p",{className:"text-sm text-gray-400",children:"No core specifications available. Create Spiral Paper Core or Composite Core specifications first."})})]}),(0,mi.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsxs)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:["Core ID",(0,mi.jsx)("span",{className:"text-xs text-blue-400 ml-2",children:"(Auto-populated from specification)"})]}),(0,mi.jsx)("input",{type:"text",name:"core_id",value:L.core_id,onChange:B,className:"misty-input w-full bg-gray-600",placeholder:"Select a core specification above",readOnly:L.material_used.length>0})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsxs)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:["Core Width (mm)",(0,mi.jsx)("span",{className:"text-xs text-yellow-400 ml-2",children:"*Manual Entry Required"})]}),(0,mi.jsx)("input",{type:"text",name:"core_width",value:L.core_width,onChange:B,className:"misty-input w-full",placeholder:"Enter core width (e.g., 1000)",required:!0})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsxs)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:["Core Thickness (mm)",(0,mi.jsx)("span",{className:"text-xs text-blue-400 ml-2",children:"(Auto-populated from specification)"})]}),(0,mi.jsx)("input",{type:"text",name:"core_thickness",value:L.core_thickness,onChange:B,className:"misty-input w-full bg-gray-600",placeholder:"Select a core specification above",readOnly:L.material_used.length>0})]}),(0,mi.jsx)("div",{className:"flex items-center",children:(0,mi.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,mi.jsx)("input",{type:"checkbox",name:"strength_quality_important",checked:L.strength_quality_important,onChange:B,className:"form-checkbox h-4 w-4 text-yellow-400 bg-gray-700 border-gray-600 rounded focus:ring-yellow-400"}),(0,mi.jsx)("span",{className:"text-white font-medium",children:"Is strength and Quality important?"})]})}),(0,mi.jsx)("div",{className:"flex items-center",children:(0,mi.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,mi.jsx)("input",{type:"checkbox",name:"delivery_included",checked:L.delivery_included,onChange:B,className:"form-checkbox h-4 w-4 text-yellow-400 bg-gray-700 border-gray-600 rounded focus:ring-yellow-400"}),(0,mi.jsx)("span",{className:"text-white font-medium",children:"Delivery Included?"})]})})]})]}),"services_and_deliveries"===L.product_type&&(0,mi.jsxs)("div",{className:"mb-8",children:[(0,mi.jsx)("h4",{className:"text-lg font-semibold text-white mb-4",children:"Services and Deliveries Details"}),(0,mi.jsxs)("div",{className:"mb-6",children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:"Type *"}),(0,mi.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,mi.jsxs)("label",{className:"flex items-center space-x-3 p-4 border border-gray-600 rounded-lg cursor-pointer hover:bg-gray-700 transition-colors",children:[(0,mi.jsx)("input",{type:"radio",name:"service_delivery_subtype",value:"services",checked:"services"===L.service_delivery_subtype,onChange:B,className:"text-yellow-400"}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("div",{className:"font-medium text-white",children:"Services"}),(0,mi.jsx)("div",{className:"text-sm text-gray-400",children:"Service-based charges"})]})]}),(0,mi.jsxs)("label",{className:"flex items-center space-x-3 p-4 border border-gray-600 rounded-lg cursor-pointer hover:bg-gray-700 transition-colors",children:[(0,mi.jsx)("input",{type:"radio",name:"service_delivery_subtype",value:"deliveries",checked:"deliveries"===L.service_delivery_subtype,onChange:B,className:"text-yellow-400"}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("div",{className:"font-medium text-white",children:"Deliveries"}),(0,mi.jsx)("div",{className:"text-sm text-gray-400",children:"Delivery and transport charges"})]})]})]})]}),"services"===L.service_delivery_subtype&&(0,mi.jsxs)("div",{className:"space-y-4",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Job Description *"}),(0,mi.jsx)("textarea",{name:"service_job_description",value:L.service_job_description,onChange:B,className:"misty-input w-full h-20",placeholder:"E.g., Demurrage for shipping container",required:!0})]}),(0,mi.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Time Required *"}),(0,mi.jsx)("input",{type:"text",name:"service_time_required",value:L.service_time_required,onChange:B,className:"misty-input w-full",placeholder:"E.g., 2 hours, 3 days",required:!0})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Price *"}),(0,mi.jsx)("input",{type:"number",step:"0.01",min:"0",name:"service_price",value:L.service_price,onChange:B,className:"misty-input w-full",placeholder:"0.00",required:!0})]})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Functions Involved"}),(0,mi.jsx)("div",{className:"space-y-2 mb-2",children:L.service_functions.map((e,t)=>(0,mi.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,mi.jsx)("input",{type:"text",value:e,onChange:e=>{const a=[...L.service_functions];a[t]=e.target.value,R(e=>m(m({},e),{},{service_functions:a}))},className:"misty-input flex-1",placeholder:"Describe function"}),(0,mi.jsx)("button",{type:"button",onClick:()=>{const e=L.service_functions.filter((e,a)=>a!==t);R(t=>m(m({},t),{},{service_functions:e}))},className:"text-red-400 hover:text-red-300 p-2",children:(0,mi.jsx)(Ol,{className:"h-4 w-4"})})]},t))}),(0,mi.jsxs)("button",{type:"button",onClick:()=>{R(e=>m(m({},e),{},{service_functions:[...e.service_functions,""]}))},className:"text-yellow-400 hover:text-yellow-300 text-sm flex items-center",children:[(0,mi.jsx)(Cl,{className:"h-4 w-4 mr-1"}),"Add Function"]})]})]}),"deliveries"===L.service_delivery_subtype&&(0,mi.jsxs)("div",{className:"space-y-4",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"From Address *"}),(0,mi.jsx)("textarea",{name:"delivery_from_address",value:L.delivery_from_address,onChange:B,className:"misty-input w-full h-20",placeholder:"Enter pickup address",required:!0})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"To Address *"}),(0,mi.jsx)("textarea",{name:"delivery_to_address",value:L.delivery_to_address,onChange:B,className:"misty-input w-full h-20",placeholder:"Enter delivery address",required:!0})]}),(0,mi.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Unit Type *"}),(0,mi.jsxs)("select",{name:"delivery_unit_type",value:L.delivery_unit_type,onChange:B,className:"misty-select w-full",required:!0,children:[(0,mi.jsx)("option",{value:"Pallets",children:"Pallets"}),(0,mi.jsx)("option",{value:"Cores",children:"Cores"}),(0,mi.jsx)("option",{value:"Voidfill",children:"Voidfill"}),(0,mi.jsx)("option",{value:"Blades",children:"Blades"}),(0,mi.jsx)("option",{value:"Other",children:"Other"})]})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Price Per Unit *"}),(0,mi.jsx)("input",{type:"number",step:"0.01",min:"0",name:"delivery_price_per_unit",value:L.delivery_price_per_unit,onChange:B,className:"misty-input w-full",placeholder:"0.00",required:!0})]})]})]})]}),(0,mi.jsx)("div",{className:"mb-8",children:(0,mi.jsx)(Yl,{formData:L,setFormData:R,materials:i})}),(0,mi.jsxs)("div",{className:"mb-8",children:[(0,mi.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,mi.jsx)("h4",{className:"text-lg font-semibold text-white",children:"Consumables"}),(0,mi.jsxs)("button",{type:"button",onClick:U,className:"misty-button misty-button-secondary flex items-center text-sm",children:[(0,mi.jsx)(Cl,{className:"h-4 w-4 mr-2"}),"Add Consumables"]})]}),L.consumables.length>0?(0,mi.jsx)("div",{className:"space-y-3",children:L.consumables.map(e=>(0,mi.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-800 rounded-lg",children:[(0,mi.jsxs)("div",{className:"flex-1",children:[(0,mi.jsx)("div",{className:"font-medium text-white",children:e.specification_name}),(0,mi.jsxs)("div",{className:"text-sm text-gray-400",children:["Type: ",e.product_type," | Unit: ",e.measurement_unit,e.quantity_cores_per_carton&&" | ".concat(e.quantity_cores_per_carton," cores per carton")]})]}),(0,mi.jsx)("button",{type:"button",onClick:()=>W(e.id),className:"text-red-400 hover:text-red-300 ml-4",children:(0,mi.jsx)(Ol,{className:"h-4 w-4"})})]},e.id))}):(0,mi.jsxs)("div",{className:"text-center py-6 text-gray-400",children:[(0,mi.jsx)("p",{className:"text-sm",children:"No consumables added yet."}),(0,mi.jsx)("p",{className:"text-xs",children:'Click "Add Consumables" to add packaging materials like cartons, tapes, and bags.'})]})]}),(0,mi.jsxs)("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-700",children:[(0,mi.jsx)("button",{type:"button",onClick:()=>y(!1),className:"misty-button misty-button-secondary",children:"Cancel"}),(0,mi.jsx)("button",{type:"submit",className:"misty-button misty-button-primary",children:b?"Update Product":"Create Product"})]})]})})}),j&&(0,mi.jsx)("div",{className:"modal-overlay",onClick:e=>e.target===e.currentTarget&&w(!1),children:(0,mi.jsx)("div",{className:"modal-content max-w-md",children:(0,mi.jsxs)("div",{className:"p-6",children:[(0,mi.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,mi.jsx)("h3",{className:"text-lg font-bold text-white",children:"Copy Product"}),(0,mi.jsx)("button",{onClick:()=>w(!1),className:"text-gray-400 hover:text-white transition-colors",children:(0,mi.jsx)(nl,{className:"h-5 w-5"})})]}),(0,mi.jsxs)("div",{className:"mb-6",children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Copy to client:"}),(0,mi.jsxs)("select",{value:k,onChange:e=>S(e.target.value),className:"misty-select w-full",children:[(0,mi.jsx)("option",{value:"",children:"Select client..."}),o.map(e=>(0,mi.jsx)("option",{value:e.id,children:e.company_name},e.id))]})]}),(0,mi.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,mi.jsx)("button",{onClick:()=>w(!1),className:"misty-button misty-button-secondary",children:"Cancel"}),(0,mi.jsx)("button",{onClick:async()=>{if(k)try{await er(t,_,k),Bt.success("Product copied successfully"),w(!1)}catch(e){console.error("Failed to copy product:",e),Bt.error("Failed to copy product")}else Bt.error("Please select a target client")},className:"misty-button misty-button-primary",children:"Copy Product"})]})]})})}),C&&(0,mi.jsx)("div",{className:"modal-overlay",onClick:e=>e.target===e.currentTarget&&E(!1),children:(0,mi.jsx)("div",{className:"modal-content max-w-2xl max-h-[90vh] overflow-y-auto",children:(0,mi.jsxs)("div",{className:"p-6",children:[(0,mi.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,mi.jsx)("h3",{className:"text-xl font-bold text-white",children:"Add Consumables"}),(0,mi.jsx)("button",{onClick:()=>E(!1),className:"text-gray-400 hover:text-white transition-colors",children:(0,mi.jsx)(nl,{className:"h-5 w-5"})})]}),(0,mi.jsx)("div",{className:"mb-4",children:(0,mi.jsxs)("p",{className:"text-sm text-gray-300 mb-2",children:["Product Section: ",(0,mi.jsx)("span",{className:"font-medium text-white",children:"finished_goods"===L.product_type?"Finished Goods":"Paper Cores"})]})}),(0,mi.jsx)(Jl,{productSpecs:d.filter(e=>["Cardboard Boxes","Plastic Bags","Tapes"].includes(e.product_type)),productSection:L.product_type,onAddConsumable:function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const n={id:Date.now(),specification_id:e.id,specification_name:e.product_name,product_type:e.product_type,measurement_unit:t,quantity:a,quantity_cores_per_carton:s,product_section:L.product_type};R(e=>m(m({},e),{},{consumables:[...e.consumables,n]})),E(!1),Bt.success("".concat(e.product_name," added as consumable"))},onCancel:()=>E(!1)})]})})})]})})},Xl=["title","titleId"];function Kl(e,t){let{title:a,titleId:s}=e,r=l(e,Xl);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},r),a?n.createElement("title",{id:s},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m.75 12 3 3m0 0 3-3m-3 3v-6m-1.5-9H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const eo=n.forwardRef(Kl),to=["title","titleId"];function ao(e,t){let{title:a,titleId:s}=e,r=l(e,to);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},r),a?n.createElement("title",{id:s},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"}))}const so=n.forwardRef(ao),no=["title","titleId"];function ro(e,t){let{title:a,titleId:s}=e,r=l(e,no);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},r),a?n.createElement("title",{id:s},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))}const io=n.forwardRef(ro),lo=[{id:"order_number",label:"Order Number",checked:!0},{id:"client_name",label:"Client Name",checked:!0},{id:"purchase_order_number",label:"Purchase Order Number",checked:!1},{id:"created_at",label:"Order Date",checked:!0},{id:"completed_at",label:"Completion Date",checked:!0},{id:"due_date",label:"Due Date",checked:!1},{id:"subtotal",label:"Subtotal",checked:!0},{id:"gst",label:"GST",checked:!1},{id:"total_amount",label:"Total Amount",checked:!0},{id:"delivery_address",label:"Delivery Address",checked:!1},{id:"product_names",label:"Products",checked:!0},{id:"product_quantities",label:"Product Quantities",checked:!1},{id:"notes",label:"Notes",checked:!1},{id:"runtime_estimate",label:"Runtime Estimate",checked:!1}],oo=[{id:"current_month",label:"Current Month"},{id:"last_month",label:"Last Month"},{id:"last_3_months",label:"Last 3 Months"},{id:"last_6_months",label:"Last 6 Months"},{id:"last_9_months",label:"Last 9 Months"},{id:"last_year",label:"Last Year"},{id:"current_quarter",label:"Current Quarter"},{id:"last_quarter",label:"Last Quarter"},{id:"current_financial_year",label:"Current Financial Year"},{id:"last_financial_year",label:"Last Financial Year"},{id:"year_to_date",label:"Year to Date"},{id:"custom_range",label:"Custom Date Range"}],co=e=>{let{client:t,onClose:a}=e;const[s,r]=(0,n.useState)([]),[i,l]=(0,n.useState)(!0),[o,c]=(0,n.useState)(!1),[d,u]=(0,n.useState)(!1),[p,h]=(0,n.useState)(!1),[x,f]=(0,n.useState)({date_from:"",date_to:"",search_query:""}),[g,y]=(0,n.useState)({time_period:"last_3_months",date_from:"",date_to:"",selected_fields:lo.filter(e=>e.checked).map(e=>e.id),product_filter:"",report_title:""});(0,n.useEffect)(()=>{b()},[t.id]);const b=async()=>{try{l(!0);const e=await async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=new URLSearchParams;t.date_from&&a.append("date_from",t.date_from),t.date_to&&a.append("date_to",t.date_to),t.search_query&&a.append("search_query",t.search_query);const s=a.toString(),n=s?"/clients/".concat(e,"/archived-orders?").concat(s):"/clients/".concat(e,"/archived-orders");return vn.get(n)}(t.id,x);r(e.data.data||[])}catch(e){console.error("Failed to load archived orders:",e),Bt.error("Failed to load archived orders"),r([])}finally{l(!1)}},v=(e,t)=>{f(a=>m(m({},a),{},{[e]:t}))},j=()=>{b(),c(!1)},w=(e,t)=>{y(a=>m(m({},a),{},{[e]:t}))},_=e=>e?new Date(e).toLocaleDateString():"N/A";return(0,mi.jsxs)("div",{className:"modal-overlay",onClick:e=>e.target===e.currentTarget&&a(),children:[(0,mi.jsxs)("div",{className:"modal-content max-w-7xl max-h-[90vh] overflow-hidden flex flex-col",children:[(0,mi.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-600",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Archived Orders"}),(0,mi.jsx)("p",{className:"text-gray-300",children:t.company_name})]}),(0,mi.jsxs)("div",{className:"flex space-x-3",children:[(0,mi.jsxs)("button",{onClick:()=>u(!0),className:"misty-button misty-button-primary flex items-center",children:[(0,mi.jsx)(eo,{className:"h-4 w-4 mr-2"}),"Fast Report"]}),(0,mi.jsxs)("button",{onClick:()=>c(!0),className:"misty-button misty-button-secondary flex items-center",children:[(0,mi.jsx)(so,{className:"h-4 w-4 mr-2"}),"Filters"]}),(0,mi.jsx)("button",{onClick:a,className:"text-gray-400 hover:text-white transition-colors",children:(0,mi.jsx)(nl,{className:"h-6 w-6"})})]})]}),(0,mi.jsxs)("div",{className:"p-6 border-b border-gray-600",children:[(0,mi.jsxs)("div",{className:"relative",children:[(0,mi.jsx)(io,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,mi.jsx)("input",{type:"text",placeholder:"",value:x.search_query,onChange:e=>v("search_query",e.target.value),onKeyPress:e=>"Enter"===e.key&&j(),className:"misty-input pl-16 w-full"})]}),(x.date_from||x.date_to||x.search_query)&&(0,mi.jsxs)("div",{className:"flex items-center space-x-2 mt-3",children:[(0,mi.jsx)("span",{className:"text-sm text-gray-300",children:"Active filters:"}),x.date_from&&(0,mi.jsxs)("span",{className:"px-2 py-1 bg-yellow-900 text-yellow-100 rounded text-sm",children:["From: ",x.date_from]}),x.date_to&&(0,mi.jsxs)("span",{className:"px-2 py-1 bg-yellow-900 text-yellow-100 rounded text-sm",children:["To: ",x.date_to]}),x.search_query&&(0,mi.jsxs)("span",{className:"px-2 py-1 bg-yellow-900 text-yellow-100 rounded text-sm",children:['Search: "',x.search_query,'"']}),(0,mi.jsx)("button",{onClick:()=>{f({date_from:"",date_to:"",search_query:""}),setTimeout(()=>{b()},100)},className:"text-red-400 hover:text-red-300 text-sm underline",children:"Clear all"})]})]}),(0,mi.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:i?(0,mi.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,mi.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-yellow-400"}),(0,mi.jsx)("span",{className:"ml-3 text-white",children:"Loading archived orders..."})]}):0===s.length?(0,mi.jsxs)("div",{className:"text-center py-12",children:[(0,mi.jsx)("p",{className:"text-gray-400 text-lg",children:"No archived orders found"}),(x.date_from||x.date_to||x.search_query)&&(0,mi.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Try adjusting your filters"})]}):(0,mi.jsx)("div",{className:"space-y-4",children:s.map(e=>{return(0,mi.jsx)("div",{className:"misty-card p-4",children:(0,mi.jsx)("div",{className:"flex items-center justify-between",children:(0,mi.jsxs)("div",{className:"flex-1",children:[(0,mi.jsxs)("div",{className:"flex items-center space-x-4 mb-2",children:[(0,mi.jsx)("h3",{className:"text-lg font-semibold text-white",children:e.order_number}),e.purchase_order_number&&(0,mi.jsxs)("span",{className:"px-2 py-1 bg-blue-900 text-blue-100 rounded text-sm",children:["PO: ",e.purchase_order_number]}),(0,mi.jsx)("span",{className:"px-2 py-1 bg-green-900 text-green-100 rounded text-sm",children:"ARCHIVED"})]}),(0,mi.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("span",{className:"text-gray-400",children:"Order Date:"}),(0,mi.jsx)("span",{className:"text-white ml-2",children:_(e.created_at)})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("span",{className:"text-gray-400",children:"Completed:"}),(0,mi.jsx)("span",{className:"text-white ml-2",children:_(e.completed_at)})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("span",{className:"text-gray-400",children:"Due Date:"}),(0,mi.jsx)("span",{className:"text-white ml-2",children:_(e.due_date)})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("span",{className:"text-gray-400",children:"Total:"}),(0,mi.jsx)("span",{className:"text-yellow-400 ml-2 font-semibold",children:(t=e.total_amount,"$".concat(Number(t||0).toFixed(2)))})]})]}),(0,mi.jsxs)("div",{className:"mt-2",children:[(0,mi.jsx)("span",{className:"text-gray-400 text-sm",children:"Products:"}),(0,mi.jsx)("span",{className:"text-white ml-2 text-sm",children:e.items.map(e=>e.product_name).join(", ")})]})]})})},e.id);var t})})})]}),o&&(0,mi.jsx)("div",{className:"modal-overlay",onClick:e=>e.target===e.currentTarget&&c(!1),children:(0,mi.jsx)("div",{className:"modal-content max-w-md",children:(0,mi.jsxs)("div",{className:"p-6",children:[(0,mi.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,mi.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Filter Options"}),(0,mi.jsx)("button",{onClick:()=>c(!1),className:"text-gray-400 hover:text-white transition-colors",children:(0,mi.jsx)(nl,{className:"h-5 w-5"})})]}),(0,mi.jsxs)("div",{className:"space-y-4",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Date From"}),(0,mi.jsx)("input",{type:"date",value:x.date_from,onChange:e=>v("date_from",e.target.value),className:"misty-input w-full"})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Date To"}),(0,mi.jsx)("input",{type:"date",value:x.date_to,onChange:e=>v("date_to",e.target.value),className:"misty-input w-full"})]})]}),(0,mi.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,mi.jsx)("button",{onClick:()=>c(!1),className:"misty-button misty-button-secondary",children:"Cancel"}),(0,mi.jsx)("button",{onClick:j,className:"misty-button misty-button-primary",children:"Apply Filters"})]})]})})}),d&&(0,mi.jsx)("div",{className:"modal-overlay",onClick:e=>e.target===e.currentTarget&&u(!1),children:(0,mi.jsx)("div",{className:"modal-content max-w-4xl max-h-[90vh] overflow-y-auto",children:(0,mi.jsxs)("div",{className:"p-6",children:[(0,mi.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,mi.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Generate Fast Report"}),(0,mi.jsx)("button",{onClick:()=>u(!1),className:"text-gray-400 hover:text-white transition-colors",children:(0,mi.jsx)(nl,{className:"h-5 w-5"})})]}),(0,mi.jsxs)("div",{className:"space-y-6",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Report Title"}),(0,mi.jsx)("input",{type:"text",value:g.report_title,onChange:e=>w("report_title",e.target.value),placeholder:"".concat(t.company_name," - Archived Orders Report"),className:"misty-input w-full"})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Time Period"}),(0,mi.jsx)("select",{value:g.time_period,onChange:e=>w("time_period",e.target.value),className:"misty-select w-full",children:oo.map(e=>(0,mi.jsx)("option",{value:e.id,children:e.label},e.id))})]}),"custom_range"===g.time_period&&(0,mi.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Start Date"}),(0,mi.jsx)("input",{type:"date",value:g.date_from,onChange:e=>w("date_from",e.target.value),className:"misty-input w-full"})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"End Date"}),(0,mi.jsx)("input",{type:"date",value:g.date_to,onChange:e=>w("date_to",e.target.value),className:"misty-input w-full"})]})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Product Filter (Optional)"}),(0,mi.jsx)("input",{type:"text",value:g.product_filter,onChange:e=>w("product_filter",e.target.value),placeholder:"Filter by product name (leave empty for all products)",className:"misty-input w-full"})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:"Select Fields to Include"}),(0,mi.jsx)("div",{className:"grid grid-cols-2 gap-3 max-h-64 overflow-y-auto",children:lo.map(e=>(0,mi.jsxs)("label",{className:"flex items-center space-x-2 text-sm",children:[(0,mi.jsx)("input",{type:"checkbox",checked:g.selected_fields.includes(e.id),onChange:()=>{return t=e.id,void y(e=>m(m({},e),{},{selected_fields:e.selected_fields.includes(t)?e.selected_fields.filter(e=>e!==t):[...e.selected_fields,t]}));var t},className:"rounded border-gray-600 bg-gray-700 text-yellow-400 focus:ring-yellow-400"}),(0,mi.jsx)("span",{className:"text-gray-300",children:e.label})]},e.id))})]})]}),(0,mi.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,mi.jsx)("button",{onClick:()=>u(!1),className:"misty-button misty-button-secondary",disabled:p,children:"Cancel"}),(0,mi.jsx)("button",{onClick:async()=>{if(0!==g.selected_fields.length)try{h(!0);const e={client_id:t.id,time_period:g.time_period,selected_fields:g.selected_fields,report_title:g.report_title||"".concat(t.company_name," - Archived Orders Report")};if("custom_range"===g.time_period){if(!g.date_from||!g.date_to)return void Bt.error("Please select both start and end dates for custom range");e.date_from=g.date_from,e.date_to=g.date_to}g.product_filter.trim()&&(e.product_filter=g.product_filter.trim());const a=await ui(t.id,e);Bt.success("Report generated successfully: ".concat(a.filename)),u(!1)}catch(s){var e,a;console.error("Failed to generate report:",s);const t=(null===(e=s.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.detail)||"Failed to generate report";Bt.error(t)}finally{h(!1)}else Bt.error("Please select at least one field for the report")},className:"misty-button misty-button-primary",disabled:p,children:p?(0,mi.jsxs)("div",{className:"flex items-center",children:[(0,mi.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-900 mr-2"}),"Generating..."]}):(0,mi.jsxs)(mi.Fragment,{children:[(0,mi.jsx)(eo,{className:"h-4 w-4 mr-2"}),"Generate Excel Report"]})})]})]})})})]})},uo=e=>{let{client:t,onClose:a,onSuccess:s}=e;const[r,i]=(0,n.useState)({company_name:"",abn:"",address:"",city:"",state:"",postal_code:"",country:"Australia",phone:"",email:"",website:"",payment_terms:"Net 30 days",lead_time_days:7,contacts:[],bank_details:{bank_name:"",account_name:"",bsb:"",account_number:"",reference:""},notes:""}),[l,o]=(0,n.useState)(null),[c,d]=(0,n.useState)(null),[u,p]=(0,n.useState)(!1),[h,x]=(0,n.useState)({}),[f,g]=(0,n.useState)(!1),[y,b]=(0,n.useState)(!1),[v,j]=(0,n.useState)(!1),[w,_]=(0,n.useState)(!1),[N,k]=(0,n.useState)(!1);(0,n.useEffect)(()=>{var e,a;t&&(i({company_name:t.company_name||"",abn:t.abn||"",address:t.address||"",city:t.city||"",state:t.state||"",postal_code:t.postal_code||"",country:t.country||"Australia",phone:t.phone||"",email:t.email||"",website:t.website||"",payment_terms:t.payment_terms||"Net 30 days",lead_time_days:t.lead_time_days||7,contacts:t.contacts||[],bank_details:t.bank_details||{bank_name:"",account_name:"",bsb:"",account_number:"",reference:""},notes:t.notes||""}),g(!(null===(e=t.bank_details)||void 0===e||!e.bank_name)),b((null===(a=t.contacts)||void 0===a?void 0:a.length)>0))},[t]);const S=e=>{const{name:t,value:a}=e.target;if(t.startsWith("bank_")){const e=t.replace("bank_","");i(t=>m(m({},t),{},{bank_details:m(m({},t.bank_details),{},{[e]:a})}))}else i(e=>m(m({},e),{},{[t]:a}));h[t]&&x(e=>m(m({},e),{},{[t]:""}))},C=(e,t,a)=>{i(s=>m(m({},s),{},{contacts:s.contacts.map((s,n)=>n===e?m(m({},s),{},{[t]:a}):s)}))},E=()=>{k(!1)};return(0,mi.jsxs)("div",{className:"modal-overlay",onClick:e=>e.target===e.currentTarget&&a(),children:[(0,mi.jsx)("div",{className:"modal-content max-w-4xl max-h-[90vh] overflow-y-auto",children:(0,mi.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};return r.company_name.trim()||(e.company_name="Company name is required"),r.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.email)||(e.email="Please enter a valid email address"):e.email="Email is required",r.phone.trim()||(e.phone="Phone number is required"),r.address.trim()||(e.address="Address is required"),r.city.trim()||(e.city="City is required"),r.state.trim()||(e.state="State is required"),r.postal_code.trim()||(e.postal_code="Postal code is required"),f&&r.bank_details.bsb&&!/^\d{6}$/.test(r.bank_details.bsb.replace(/[-\s]/g,""))&&(e.bank_bsb="BSB must be 6 digits (e.g., 012-345)"),x(e),0===Object.keys(e).length})()){p(!0);try{let e,n=m({},r);if(f&&n.bank_details.bank_name||(n.bank_details=null),y&&0!==n.contacts.length||(n.contacts=[]),t)await _n(t.id,n),e=m(m({},t),n),Bt.success("Client updated successfully");else{e=m({id:(await wn(n)).data.data.id},n),Bt.success("Client created successfully")}if(l&&e.id)try{await Sn(e.id,l),Bt.success("Logo uploaded successfully")}catch(o){console.error("Logo upload failed:",o),Bt.error("Client saved but logo upload failed")}null===s||void 0===s||s(),a()}catch(c){var n,i;console.error("Failed to save client:",c);const e=(null===(n=c.response)||void 0===n||null===(i=n.data)||void 0===i?void 0:i.detail)||"Failed to save client";Bt.error(e)}finally{p(!1)}}else Bt.error("Please fix the errors below")},className:"p-6",children:[(0,mi.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-6 gap-4",children:[(0,mi.jsx)("h2",{className:"text-2xl font-bold text-white",children:t?"Edit Client":"Add New Client"}),(0,mi.jsxs)("div",{className:"flex items-center justify-end space-x-4",children:[t&&(0,mi.jsxs)("div",{className:"client-edit-buttons",children:[(0,mi.jsxs)("button",{type:"button",onClick:()=>j(!0),className:"misty-button misty-button-secondary flex items-center whitespace-nowrap text-sm",children:[(0,mi.jsx)(Cl,{className:"h-4 w-4 mr-3"}),"Add Products"]}),(0,mi.jsxs)("button",{type:"button",onClick:()=>_(!0),className:"misty-button misty-button-primary flex items-center whitespace-nowrap text-sm",children:[(0,mi.jsx)(Pl,{className:"h-4 w-4 mr-3"}),"Archived Orders"]})]}),(0,mi.jsx)("button",{type:"button",onClick:a,className:"text-gray-400 hover:text-white transition-colors ml-4",children:(0,mi.jsx)(nl,{className:"h-6 w-6"})})]})]}),(0,mi.jsxs)("div",{className:"mb-8",children:[(0,mi.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Basic Information"}),(0,mi.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Company Name *"}),(0,mi.jsx)("input",{type:"text",name:"company_name",value:r.company_name,onChange:S,className:"misty-input w-full ".concat(h.company_name?"border-red-500":""),placeholder:"Enter company name",required:!0}),h.company_name&&(0,mi.jsx)("p",{className:"text-red-400 text-sm mt-1",children:h.company_name})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"ABN"}),(0,mi.jsx)("input",{type:"text",name:"abn",value:r.abn,onChange:S,className:"misty-input w-full",placeholder:"XX XXX XXX XXX"})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Email *"}),(0,mi.jsx)("input",{type:"email",name:"email",value:r.email,onChange:S,className:"misty-input w-full ".concat(h.email?"border-red-500":""),placeholder:"company@example.com",required:!0}),h.email&&(0,mi.jsx)("p",{className:"text-red-400 text-sm mt-1",children:h.email})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Phone *"}),(0,mi.jsx)("input",{type:"tel",name:"phone",value:r.phone,onChange:S,className:"misty-input w-full ".concat(h.phone?"border-red-500":""),placeholder:"(02) 1234 5678",required:!0}),h.phone&&(0,mi.jsx)("p",{className:"text-red-400 text-sm mt-1",children:h.phone})]}),(0,mi.jsxs)("div",{className:"md:col-span-2",children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Website"}),(0,mi.jsx)("input",{type:"url",name:"website",value:r.website,onChange:S,className:"misty-input w-full",placeholder:"https://www.example.com"})]})]})]}),(0,mi.jsxs)("div",{className:"mb-8",children:[(0,mi.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Address"}),(0,mi.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,mi.jsxs)("div",{className:"md:col-span-2",children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Street Address *"}),(0,mi.jsx)("input",{type:"text",name:"address",value:r.address,onChange:S,className:"misty-input w-full ".concat(h.address?"border-red-500":""),placeholder:"123 Business Street",required:!0}),h.address&&(0,mi.jsx)("p",{className:"text-red-400 text-sm mt-1",children:h.address})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"City *"}),(0,mi.jsx)("input",{type:"text",name:"city",value:r.city,onChange:S,className:"misty-input w-full ".concat(h.city?"border-red-500":""),placeholder:"Sydney",required:!0}),h.city&&(0,mi.jsx)("p",{className:"text-red-400 text-sm mt-1",children:h.city})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"State *"}),(0,mi.jsxs)("select",{name:"state",value:r.state,onChange:S,className:"misty-select w-full ".concat(h.state?"border-red-500":""),required:!0,children:[(0,mi.jsx)("option",{value:"",children:"Select State"}),["NSW","VIC","QLD","WA","SA","TAS","ACT","NT"].map(e=>(0,mi.jsx)("option",{value:e,children:e},e))]}),h.state&&(0,mi.jsx)("p",{className:"text-red-400 text-sm mt-1",children:h.state})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Postal Code *"}),(0,mi.jsx)("input",{type:"text",name:"postal_code",value:r.postal_code,onChange:S,className:"misty-input w-full ".concat(h.postal_code?"border-red-500":""),placeholder:"2000",required:!0}),h.postal_code&&(0,mi.jsx)("p",{className:"text-red-400 text-sm mt-1",children:h.postal_code})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Country"}),(0,mi.jsx)("input",{type:"text",name:"country",value:r.country,onChange:S,className:"misty-input w-full",placeholder:"Australia"})]})]})]}),(0,mi.jsxs)("div",{className:"mb-8",children:[(0,mi.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Business Terms"}),(0,mi.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Payment Terms"}),(0,mi.jsxs)("select",{name:"payment_terms",value:r.payment_terms,onChange:S,className:"misty-select w-full",children:[(0,mi.jsx)("option",{value:"Net 7 days",children:"Net 7 days"}),(0,mi.jsx)("option",{value:"Net 14 days",children:"Net 14 days"}),(0,mi.jsx)("option",{value:"Net 30 days",children:"Net 30 days"}),(0,mi.jsx)("option",{value:"Net 45 days",children:"Net 45 days"}),(0,mi.jsx)("option",{value:"Net 60 days",children:"Net 60 days"}),(0,mi.jsx)("option",{value:"Cash on Delivery",children:"Cash on Delivery"}),(0,mi.jsx)("option",{value:"Payment in advance",children:"Payment in advance"}),(0,mi.jsx)("option",{value:"2/10 Net 30",children:"2/10 Net 30"})]}),(0,mi.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Payment terms for invoices"})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Standard Lead Time (Days)"}),(0,mi.jsx)("input",{type:"number",name:"lead_time_days",value:r.lead_time_days,onChange:S,min:"1",max:"365",className:"misty-input w-full",placeholder:"7"}),(0,mi.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Default lead time for this client's orders"})]})]})]}),(0,mi.jsxs)("div",{className:"mb-8",children:[(0,mi.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Company Logo"}),(0,mi.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,mi.jsx)("div",{className:"flex-shrink-0",children:c||null!==t&&void 0!==t&&t.logo_path?(0,mi.jsx)("img",{src:c||t.logo_path,alt:"Logo preview",className:"h-20 w-20 rounded-lg object-cover border border-gray-600"}):(0,mi.jsx)("div",{className:"h-20 w-20 bg-gray-600 rounded-lg flex items-center justify-center border border-gray-600",children:(0,mi.jsx)(Ll,{className:"h-8 w-8 text-gray-400"})})}),(0,mi.jsxs)("div",{className:"flex-1",children:[(0,mi.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{const t=e.target.files[0];if(t){if(t.size>5242880)return void Bt.error("Logo file must be less than 5MB");if(!["image/jpeg","image/png","image/gif","image/webp"].includes(t.type))return void Bt.error("Logo must be a JPEG, PNG, GIF, or WebP image");o(t);const e=new FileReader;e.onload=e=>d(e.target.result),e.readAsDataURL(t)}},className:"hidden",id:"logo-upload"}),(0,mi.jsx)("label",{htmlFor:"logo-upload",className:"misty-button misty-button-secondary cursor-pointer inline-block",children:"Choose Logo"}),(0,mi.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"Upload a logo (max 5MB, JPEG/PNG/GIF/WebP)"})]})]})]}),(0,mi.jsx)("div",{className:"mb-6",children:(0,mi.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,mi.jsx)("input",{type:"checkbox",checked:f,onChange:e=>g(e.target.checked),className:"form-checkbox h-4 w-4 text-yellow-400 bg-gray-700 border-gray-600 rounded focus:ring-yellow-400"}),(0,mi.jsx)("span",{className:"text-white font-medium",children:"Add Bank Details"})]})}),f&&(0,mi.jsxs)("div",{className:"mb-8",children:[(0,mi.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Bank Details"}),(0,mi.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Bank Name"}),(0,mi.jsx)("input",{type:"text",name:"bank_bank_name",value:r.bank_details.bank_name,onChange:S,className:"misty-input w-full",placeholder:"Commonwealth Bank"})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Account Name"}),(0,mi.jsx)("input",{type:"text",name:"bank_account_name",value:r.bank_details.account_name,onChange:S,className:"misty-input w-full",placeholder:"Company Name Pty Ltd"})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"BSB"}),(0,mi.jsx)("input",{type:"text",name:"bank_bsb",value:r.bank_details.bsb,onChange:S,className:"misty-input w-full ".concat(h.bank_bsb?"border-red-500":""),placeholder:"012-345"}),h.bank_bsb&&(0,mi.jsx)("p",{className:"text-red-400 text-sm mt-1",children:h.bank_bsb})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Account Number"}),(0,mi.jsx)("input",{type:"text",name:"bank_account_number",value:r.bank_details.account_number,onChange:S,className:"misty-input w-full",placeholder:"123456789"})]}),(0,mi.jsxs)("div",{className:"md:col-span-2",children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Payment Reference"}),(0,mi.jsx)("input",{type:"text",name:"bank_reference",value:r.bank_details.reference,onChange:S,className:"misty-input w-full",placeholder:"Invoice number or reference"})]})]})]}),(0,mi.jsx)("div",{className:"mb-6",children:(0,mi.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,mi.jsx)("input",{type:"checkbox",checked:y,onChange:e=>b(e.target.checked),className:"form-checkbox h-4 w-4 text-yellow-400 bg-gray-700 border-gray-600 rounded focus:ring-yellow-400"}),(0,mi.jsx)("span",{className:"text-white font-medium",children:"Add Contact Details"})]})}),y&&(0,mi.jsxs)("div",{className:"mb-8",children:[(0,mi.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,mi.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Contacts"}),(0,mi.jsx)("button",{type:"button",onClick:()=>{i(e=>m(m({},e),{},{contacts:[...e.contacts,{name:"",position:"",email:"",phone:"",is_primary:0===e.contacts.length}]})),b(!0)},className:"misty-button misty-button-secondary text-sm",children:"Add Contact"})]}),r.contacts.map((e,t)=>(0,mi.jsxs)("div",{className:"border border-gray-600 rounded-lg p-4 mb-4",children:[(0,mi.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,mi.jsxs)("h4",{className:"text-white font-medium",children:["Contact ",t+1]}),(0,mi.jsx)("button",{type:"button",onClick:()=>(e=>{i(t=>m(m({},t),{},{contacts:t.contacts.filter((t,a)=>a!==e)}))})(t),className:"text-red-400 hover:text-red-300 text-sm",children:"Remove"})]}),(0,mi.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Name"}),(0,mi.jsx)("input",{type:"text",value:e.name,onChange:e=>C(t,"name",e.target.value),className:"misty-input w-full",placeholder:"John Smith"})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Position"}),(0,mi.jsx)("input",{type:"text",value:e.position,onChange:e=>C(t,"position",e.target.value),className:"misty-input w-full",placeholder:"Operations Manager"})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Email"}),(0,mi.jsx)("input",{type:"email",value:e.email,onChange:e=>C(t,"email",e.target.value),className:"misty-input w-full",placeholder:"john@company.com"})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Phone"}),(0,mi.jsx)("input",{type:"tel",value:e.phone,onChange:e=>C(t,"phone",e.target.value),className:"misty-input w-full",placeholder:"(02) 1234 5678"})]})]}),(0,mi.jsx)("div",{className:"mt-3",children:(0,mi.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,mi.jsx)("input",{type:"checkbox",checked:e.is_primary,onChange:e=>C(t,"is_primary",e.target.checked),className:"form-checkbox h-4 w-4 text-yellow-400 bg-gray-700 border-gray-600 rounded focus:ring-yellow-400"}),(0,mi.jsx)("span",{className:"text-sm text-gray-300",children:"Primary Contact"})]})})]},t))]}),(0,mi.jsxs)("div",{className:"mb-8",children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Notes"}),(0,mi.jsx)("textarea",{name:"notes",value:r.notes,onChange:S,rows:3,className:"misty-textarea w-full",placeholder:"Additional notes about this client..."})]}),(0,mi.jsxs)("div",{className:"flex justify-between pt-6 border-t border-gray-700",children:[(0,mi.jsx)("div",{children:t&&(0,mi.jsxs)("button",{type:"button",onClick:()=>{k(!0)},className:"misty-button misty-button-danger",disabled:u,children:[(0,mi.jsx)(Ol,{className:"h-4 w-4 mr-2"}),"Delete Client"]})}),(0,mi.jsxs)("div",{className:"flex space-x-3",children:[(0,mi.jsx)("button",{type:"button",onClick:a,className:"misty-button misty-button-secondary",disabled:u,children:"Cancel"}),(0,mi.jsx)("button",{type:"submit",className:"misty-button misty-button-primary",disabled:u,children:u?(0,mi.jsxs)("div",{className:"flex items-center",children:[(0,mi.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-900 mr-2"}),t?"Updating...":"Creating..."]}):t?"Update Client":"Create Client"})]})]})]})}),v&&t&&(0,mi.jsx)(Zl,{clientId:t.id,onClose:()=>j(!1)}),w&&t&&(0,mi.jsx)(co,{client:t,onClose:()=>_(!1)}),N&&t&&(0,mi.jsx)("div",{className:"modal-overlay",onClick:e=>e.target===e.currentTarget&&E(),children:(0,mi.jsx)("div",{className:"modal-content max-w-md",children:(0,mi.jsxs)("div",{className:"p-6",children:[(0,mi.jsxs)("div",{className:"flex items-center mb-4",children:[(0,mi.jsx)("div",{className:"flex-shrink-0",children:(0,mi.jsx)(Ol,{className:"h-8 w-8 text-red-400"})}),(0,mi.jsxs)("div",{className:"ml-4",children:[(0,mi.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Delete Client"}),(0,mi.jsx)("p",{className:"text-sm text-gray-400",children:"This action cannot be undone."})]})]}),(0,mi.jsxs)("div",{className:"mb-6",children:[(0,mi.jsxs)("p",{className:"text-gray-300",children:["Are you sure you wish to delete client ",(0,mi.jsxs)("span",{className:"font-semibold text-white",children:['"',t.company_name,'"']}),"?"]}),(0,mi.jsx)("p",{className:"text-sm text-gray-400 mt-2",children:"This will remove the client and all associated data. Clients with active orders cannot be deleted."})]}),(0,mi.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,mi.jsx)("button",{type:"button",onClick:E,className:"misty-button misty-button-secondary",disabled:u,children:"No, Cancel"}),(0,mi.jsx)("button",{type:"button",onClick:async()=>{if(t)try{p(!0),await Nn(t.id),Bt.success("Client deleted successfully"),k(!1),null===s||void 0===s||s(),a()}catch(r){var e,n;console.error("Failed to delete client:",r);const t=(null===(e=r.response)||void 0===e||null===(n=e.data)||void 0===n?void 0:n.detail)||"Failed to delete client";Bt.error(t)}finally{p(!1)}},className:"misty-button misty-button-danger",disabled:u,children:u?(0,mi.jsxs)("div",{className:"flex items-center",children:[(0,mi.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Deleting..."]}):"Yes, Delete Client"})]})]})})})]})},mo=["title","titleId"];function po(e,t){let{title:a,titleId:s}=e,r=l(e,mo);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},r),a?n.createElement("title",{id:s},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))}const ho=n.forwardRef(po),xo=()=>{const e=ge(),[t,a]=(0,n.useState)([]),[s,r]=(0,n.useState)(!0),[i,l]=(0,n.useState)(!1),[o,c]=(0,n.useState)(null),[d,u]=(0,n.useState)("");(0,n.useEffect)(()=>{m()},[]);const m=async()=>{try{r(!0);const e=await jn();a(e.data)}catch(e){console.error("Failed to load clients:",e),Bt.error("Failed to load clients")}finally{r(!1)}},p=()=>{c(null),l(!0)},h=t.filter(e=>e.company_name.toLowerCase().includes(d.toLowerCase())||e.email.toLowerCase().includes(d.toLowerCase())||e.abn&&e.abn.toLowerCase().includes(d.toLowerCase()));return s?(0,mi.jsx)(hl,{children:(0,mi.jsx)("div",{className:"p-8",children:(0,mi.jsxs)("div",{className:"animate-pulse",children:[(0,mi.jsx)("div",{className:"h-8 bg-gray-700 rounded w-1/4 mb-8"}),(0,mi.jsx)("div",{className:"space-y-4",children:[...Array(5)].map((e,t)=>(0,mi.jsx)("div",{className:"h-16 bg-gray-700 rounded"},t))})]})})}):(0,mi.jsxs)(hl,{children:[(0,mi.jsxs)("div",{className:"p-8","data-testid":"client-management",children:[(0,mi.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"Client Management"}),(0,mi.jsx)("p",{className:"text-gray-400",children:"Manage your customer relationships and information"})]}),(0,mi.jsxs)("button",{onClick:p,className:"misty-button misty-button-primary flex items-center","data-testid":"add-client-button",children:[(0,mi.jsx)(Cl,{className:"h-5 w-5 mr-2"}),"Add Client"]})]}),(0,mi.jsx)("div",{className:"mb-6",children:(0,mi.jsx)("input",{type:"text",placeholder:"Search clients by name, email, or ABN...",value:d,onChange:e=>u(e.target.value),className:"misty-input w-full max-w-md"})}),h.length>0?(0,mi.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:h.map(t=>(0,mi.jsxs)("div",{className:"misty-card p-6 relative overflow-hidden","data-testid":"client-card-".concat(t.id),children:[t.logo_path&&(0,mi.jsx)("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",style:{zIndex:0,opacity:.15},children:(0,mi.jsx)("img",{src:t.logo_path,alt:"",className:"object-contain",style:{width:"345px",height:"345px"}})}),(0,mi.jsxs)("div",{className:"flex items-start justify-between mb-4 relative z-10",children:[(0,mi.jsx)("div",{className:"flex items-center flex-1",children:(0,mi.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,mi.jsx)("h3",{className:"font-semibold text-white truncate",children:t.company_name}),(0,mi.jsx)("p",{className:"text-sm text-gray-400 truncate",children:t.abn||"No ABN"})]})}),(0,mi.jsx)("div",{className:"flex items-center space-x-2 ml-2 relative z-10",children:(0,mi.jsx)("button",{onClick:()=>(e=>{c(e),l(!0)})(t),className:"text-gray-400 hover:text-yellow-400 transition-colors p-1","data-testid":"edit-client-".concat(t.id),title:"Edit client",children:(0,mi.jsx)(ho,{className:"h-4 w-4"})})})]}),(0,mi.jsxs)("div",{className:"space-y-2 text-sm relative z-10",children:[(0,mi.jsxs)("div",{className:"flex items-start",children:[(0,mi.jsx)("span",{className:"text-gray-400 w-16 flex-shrink-0",children:"Address:"}),(0,mi.jsxs)("span",{className:"text-gray-300",children:[t.address,", ",t.city,", ",t.state," ",t.postal_code]})]}),(0,mi.jsxs)("div",{className:"flex items-center",children:[(0,mi.jsx)("span",{className:"text-gray-400 w-16 flex-shrink-0",children:"Email:"}),(0,mi.jsx)("a",{href:"mailto:".concat(t.email),className:"text-yellow-400 hover:text-yellow-300 transition-colors truncate",children:t.email})]}),(0,mi.jsxs)("div",{className:"flex items-center",children:[(0,mi.jsx)("span",{className:"text-gray-400 w-16 flex-shrink-0",children:"Phone:"}),(0,mi.jsx)("a",{href:"tel:".concat(t.phone),className:"text-gray-300 hover:text-yellow-400 transition-colors",children:t.phone})]}),t.website&&(0,mi.jsxs)("div",{className:"flex items-center",children:[(0,mi.jsx)("span",{className:"text-gray-400 w-16 flex-shrink-0",children:"Website:"}),(0,mi.jsx)("a",{href:t.website.startsWith("http")?t.website:"https://".concat(t.website),target:"_blank",rel:"noopener noreferrer",className:"text-yellow-400 hover:text-yellow-300 transition-colors truncate",children:t.website.replace(/^https?:\/\//,"")})]}),t.contacts&&t.contacts.length>0&&(0,mi.jsxs)("div",{className:"flex items-start",children:[(0,mi.jsx)("span",{className:"text-gray-400 w-16 flex-shrink-0",children:"Contact:"}),(0,mi.jsxs)("div",{className:"flex-1",children:[t.contacts.slice(0,2).map((e,t)=>(0,mi.jsxs)("div",{className:"text-gray-300",children:[e.name," ",e.position&&"(".concat(e.position,")"),e.is_primary&&(0,mi.jsx)("span",{className:"text-yellow-400 text-xs ml-1",children:"Primary"})]},t)),t.contacts.length>2&&(0,mi.jsxs)("div",{className:"text-gray-400 text-xs",children:["+",t.contacts.length-2," more"]})]})]}),t.notes&&(0,mi.jsxs)("div",{className:"flex items-start",children:[(0,mi.jsx)("span",{className:"text-gray-400 w-16 flex-shrink-0",children:"Notes:"}),(0,mi.jsx)("span",{className:"text-gray-300 text-xs line-clamp-2",children:t.notes})]})]}),(0,mi.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-700 relative z-10",children:(0,mi.jsxs)("div",{className:"flex items-center justify-between",children:[(0,mi.jsx)("span",{className:"text-xs text-gray-400 font-medium",children:"Client Actions"}),(0,mi.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,mi.jsx)("button",{onClick:()=>e("/clients/".concat(t.id,"/archived-jobs")),className:"text-gray-400 hover:text-blue-400 transition-colors p-1",title:"View Archived Jobs & Historic Job Cards",children:(0,mi.jsx)(Pl,{className:"h-4 w-4"})}),(0,mi.jsx)("button",{onClick:()=>e("/clients/".concat(t.id,"/product-catalogue")),className:"text-gray-400 hover:text-green-400 transition-colors p-1",title:"View Product Catalogue",children:(0,mi.jsx)(Bi,{className:"h-4 w-4"})})]})]})}),t.bank_details&&t.bank_details.bank_name&&(0,mi.jsx)("div",{className:"mt-3 pt-3 border-t border-gray-700 relative z-10",children:(0,mi.jsxs)("div",{className:"flex items-center",children:[(0,mi.jsx)("div",{className:"h-2 w-2 bg-green-400 rounded-full mr-2"}),(0,mi.jsx)("span",{className:"text-xs text-gray-400",children:"Bank details on file"})]})})]},t.id))}):(0,mi.jsxs)("div",{className:"text-center py-12",children:[(0,mi.jsx)(Ll,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,mi.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-300",children:d?"No clients found":"No clients"}),(0,mi.jsx)("p",{className:"mt-1 text-sm text-gray-400",children:d?"Try adjusting your search criteria.":"Get started by creating your first client."}),!d&&(0,mi.jsx)("div",{className:"mt-6",children:(0,mi.jsxs)("button",{onClick:p,className:"misty-button misty-button-primary",children:[(0,mi.jsx)(Cl,{className:"h-5 w-5 mr-2"}),"Add Client"]})})]})]}),i&&(0,mi.jsx)(uo,{client:o,onClose:()=>{l(!1),c(null)},onSuccess:()=>{m()}})]})},fo=e=>{var t;let{order:a,onClose:s,onSuccess:r}=e;const[i,l]=(0,n.useState)({client_id:"",purchase_order_number:"",due_date:"",priority:"Normal/Low",delivery_address:"",delivery_instructions:"",notes:"",discount_percentage:0,discount_notes:"",items:[{product_id:"",product_name:"",quantity:1,unit_price:0,total_price:0}]}),[o,c]=(0,n.useState)([]),[d,u]=(0,n.useState)([]),[p,h]=(0,n.useState)(null),[x,f]=(0,n.useState)(!1),[g,y]=(0,n.useState)(!0),[b,v]=(0,n.useState)({}),[j,w]=(0,n.useState)(!1),[_,N]=(0,n.useState)({subtotal:0,discountAmount:0,discountedSubtotal:0,gst:0,total:0}),[k,S]=(0,n.useState)({}),[C,E]=(0,n.useState)({}),[D,P]=(0,n.useState)(!1),[A,T]=(0,n.useState)(null),[L,R]=(0,n.useState)([]),[F,O]=(0,n.useState)(null),[M,I]=(0,n.useState)({});(0,n.useEffect)(()=>{q()},[]),(0,n.useEffect)(()=>{i.client_id&&B(i.client_id)},[i.client_id]),(0,n.useEffect)(()=>{z()},[i.items,i.discount_percentage]),(0,n.useEffect)(()=>{a&&l({client_id:a.client_id||"",purchase_order_number:a.purchase_order_number||"",due_date:a.due_date?new Date(a.due_date).toISOString().split("T")[0]:"",priority:a.priority||"Normal/Low",delivery_address:a.delivery_address||"",delivery_instructions:a.delivery_instructions||"",notes:a.notes||"",discount_percentage:a.discount_percentage||0,discount_notes:a.discount_notes||"",items:a.items||[{product_name:"",quantity:1,unit_price:0,total_price:0}]})},[a]);const q=async()=>{try{y(!0);const e=await jn();c(e.data)}catch(e){console.error("Failed to load clients:",e),Bt.error("Failed to load clients")}finally{y(!1)}},B=async e=>{try{const t=await Yn(e);u(t.data);const a=o.find(t=>t.id===e);h(a)}catch(t){console.error("Failed to load client products:",t),u([])}},z=()=>{const e=i.items.reduce((e,t)=>e+(t.total_price||0),0),t=e*((parseFloat(i.discount_percentage)||0)/100),a=e-t,s=.1*a;N({subtotal:e,discountAmount:t,discountedSubtotal:a,gst:s,total:a+s})},U=async(e,t,a,s)=>{if(console.log("checkStockAvailability called:",{productId:e,clientId:t,itemIndex:a,quantity:s}),E(e=>{const t=m({},e);return delete t[a],t}),e&&s&&!(s<=0))try{var n;const r=await si("/stock/check-availability?product_id=".concat(e,"&client_id=").concat(t));console.log("Stock API response:",r);const i=(null===(n=r.data)||void 0===n?void 0:n.data)||r.data;if(console.log("Extracted stock data:",i),i&&i.quantity_on_hand>0){console.log("Stock available, storing for item:",i);const t=d.find(t=>t.id===e),n=Math.min(i.quantity_on_hand,s);E(r=>m(m({},r),{},{[a]:{productId:e,productName:(null===t||void 0===t?void 0:t.product_description)||"",stockOnHand:i.quantity_on_hand,maxAllocation:n,quantity:s,showAllocation:!0}}))}else console.log("No stock data or zero quantity:",i)}catch(l){var r,i;console.log("No stock available or error checking stock:",null===(r=l.response)||void 0===r?void 0:r.status,null===(i=l.response)||void 0===i?void 0:i.data)}},W=async(e,t)=>{try{const n=i.items[e];console.log("Loading product specifications for:",n.product_id);let r,l=null;try{l=(await Xn(i.client_id,n.product_id)).data,console.log("Product loaded:",l)}catch(a){throw console.error("Failed to load product details:",a),new Error("Product not found in client catalog")}let o=null;if(l&&l.specifications&&l.specifications.length>0)try{o=(await si("/product-specifications/".concat(l.specifications[0]))).data,console.log("Product specification with material layers loaded:",o),o&&o.material_layers&&o.material_layers.length>0?r=await H(o,l,t):(console.warn("Product specification found but no material layers defined"),r=await G(l,t))}catch(s){console.error("Failed to load product specification details:",s),r=await G(l,t)}else console.log("No product specifications linked, creating realistic material requirements based on product type"),r=await G(l,t);O({index:e,item:n,remainingQuantity:t}),T(r),I({}),await V(r.materials),P(!0)}catch(n){console.error("Failed to load material requirements:",n),Bt.error("Failed to load material requirements: "+n.message)}},H=async(e,t,a)=>{console.log("Calculating material requirements for quantity:",a),console.log("Product spec:",e);const s={productName:t.product_name||"Unknown Product",quantity:a,materials:[]};if(e.material_layers&&e.material_layers.length>0){console.log("Found material layers:",e.material_layers);for(const t of e.material_layers)try{var n;let e=null;try{e=(await si("/materials/".concat(t.material_id))).data}catch(r){console.log("Material ".concat(t.material_id," not found in materials database, using layer data"))}const i=t.quantity_usage||t.quantity||.1,l=t.width_mm||100,o=a*i;console.log("Layer calculation using formula: ".concat(a," units \xd7 ").concat(i,"m/unit = ").concat(o,"m"));const c={allocation_percent:t.spiral_allocation_percent||null,sequence:t.spiral_sequence||null,winding_direction:t.winding_direction||null,overlap_factor:t.overlap_factor||null,tension_level:t.tension_level||null,feed_rate_mpm:t.feed_rate_mpm||null,qc_checkpoints:t.qc_checkpoints||null},d={material_id:t.material_id,material_name:(null===(n=e)||void 0===n?void 0:n.material_name)||t.product_name||t.material_product||"Unknown Material",layer_position:t.layer_position||"Unknown Layer",layer_thickness_mm:t.thickness_mm||0,layer_gsm:t.gsm||0,required_width_mm:l,required_quantity_meters:o,quantity_per_unit:i,order_quantity:a,calculation_formula:"".concat(a," units \xd7 ").concat(i,"m/unit = ").concat(o,"m"),purpose:"Material layer: ".concat(t.layer_position||"Unknown"," (").concat(t.thickness_mm,"mm thick)"),notes:t.notes||"",spiral_specifications:c};s.materials.push(d),console.log("Added material requirement with spiral specs:",d)}catch(r){console.error("Error processing material layer:",t,r)}}else console.log("No material layers found in product specification"),s.materials.push({material_id:"unknown",material_name:"Paper Material",layer_position:"Unknown Layer",required_width_mm:100,required_quantity_meters:10*a,quantity_per_unit:1,purpose:"Generic material requirement (no specification found)"});return console.log("Final material requirements:",s),s},G=async(e,t)=>{console.log("Creating realistic paper core material requirements for:",e.product_name);const a={productName:e.product_name||"Paper Core Product",quantity:t,materials:[]},s=[{layer_position:"Inner Most Layer",material_name:"J260 B-Grade Spool Paper",width_mm:103,thickness_mm:.15,gsm:155,quantity_per_unit:.6,laps:1,spiral_specs:{allocation_percent:15,sequence:"1",winding_direction:"clockwise",tension_level:"high"}},{layer_position:"Central Layer 1",material_name:"Jintian Paper - B Grade - Code J260",width_mm:103,thickness_mm:.54,gsm:360,quantity_per_unit:.55,laps:.97,spiral_specs:{allocation_percent:25,sequence:"2",winding_direction:"counterclockwise",tension_level:"medium"}},{layer_position:"Central Layer 2",material_name:"Jintian Paper - B Grade - Code J260",width_mm:104,thickness_mm:.54,gsm:360,quantity_per_unit:.57,laps:1,spiral_specs:{allocation_percent:25,sequence:"3",winding_direction:"clockwise",tension_level:"medium"}},{layer_position:"Central Layer 3",material_name:"Jintian Paper - B Grade - Code J260",width_mm:105,thickness_mm:.54,gsm:360,quantity_per_unit:.58,laps:1,spiral_specs:{allocation_percent:25,sequence:"4",winding_direction:"counterclockwise",tension_level:"medium"}},{layer_position:"Outer Most Layer",material_name:"J260 B-Grade Spool Paper",width_mm:106,thickness_mm:.15,gsm:155,quantity_per_unit:.59,laps:1,spiral_specs:{allocation_percent:10,sequence:"5",winding_direction:"clockwise",tension_level:"low"}}];try{var n;const e=await Gr(),r=(null===(n=e.data)||void 0===n?void 0:n.data)||e.data||[];console.log("Available raw materials:",r),s.forEach((e,s)=>{let n="unknown";const i=r.find(t=>t.material_name&&(t.material_name.toLowerCase().includes("jintian")||t.material_name.toLowerCase().includes("j260")||t.material_name.toLowerCase().includes("spool")||t.material_name.toLowerCase().includes(e.material_name.toLowerCase().split(" ")[0])));i&&(n=i.material_id,console.log("Matched ".concat(e.material_name," to raw material: ").concat(i.material_name," (ID: ").concat(n,")")));const l=t*e.quantity_per_unit,o={material_id:n,material_name:e.material_name,layer_position:e.layer_position,layer_thickness_mm:e.thickness_mm,layer_gsm:e.gsm,required_width_mm:e.width_mm,required_quantity_meters:l,quantity_per_unit:e.quantity_per_unit,order_quantity:t,calculation_formula:"".concat(t," units \xd7 ").concat(e.quantity_per_unit,"m/unit = ").concat(l.toFixed(1),"m"),laps:e.laps,purpose:"".concat(e.layer_position," - ").concat(e.thickness_mm,"mm thick, ").concat(e.gsm," GSM"),notes:"Based on paper core specifications: ".concat(e.laps," laps, ").concat(e.width_mm,"mm width"),spiral_specifications:{allocation_percent:e.spiral_specs.allocation_percent,sequence:e.spiral_specs.sequence,winding_direction:e.spiral_specs.winding_direction,tension_level:e.spiral_specs.tension_level,overlap_factor:1+.1*s,feed_rate_mpm:15-2*s,qc_checkpoints:"Every ".concat(10+5*s,"m, Visual inspection, Thickness check")}};a.materials.push(o),console.log("Added realistic material requirement for ".concat(e.layer_position,":"),o)})}catch(r){console.error("Error loading raw materials for realistic requirements:",r)}return console.log("Final realistic material requirements:",a),a},V=async e=>{try{console.log("Loading slit widths for materials:",e);const t=e.map(async e=>{try{console.log("Searching for slit widths for material: ".concat(e.material_name));let r=e.material_id;if("unknown"===r||!r)try{var t;const a=await Gr(),s=(null===(t=a.data)||void 0===t?void 0:t.data)||a.data||[];console.log("Raw materials available:",s);const n=s.find(t=>t.material_name&&(t.material_name.toLowerCase().includes(e.material_name.toLowerCase())||e.material_name.toLowerCase().includes(t.material_name.toLowerCase())||t.material_name.toLowerCase().includes("jintian")||t.material_name.toLowerCase().includes("j260")));n?(r=n.material_id,console.log("Found matching raw material: ".concat(n.material_name," (ID: ").concat(r,")"))):console.log("No matching raw material found for: ".concat(e.material_name))}catch(n){console.error("Error searching raw materials:",n)}let i=[];if(r&&"unknown"!==r)try{var a,s;i=(null===(a=(await Vr(r)).data)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.slit_widths)||[],console.log("Found ".concat(i.length," slit widths for material ").concat(r))}catch(n){console.log("No slit widths found for material ".concat(r,":"),n.message)}return{material_id:r,material_name:e.material_name,layer_position:e.layer_position,required_width_mm:e.required_width_mm,required_quantity_meters:e.required_quantity_meters,quantity_per_unit:e.quantity_per_unit,purpose:e.purpose,available_widths:i}}catch(n){return console.error("Failed to load slit widths for material ".concat(e.material_name,":"),n),{material_id:e.material_id,material_name:e.material_name,layer_position:e.layer_position,required_width_mm:e.required_width_mm,required_quantity_meters:e.required_quantity_meters,quantity_per_unit:e.quantity_per_unit,purpose:e.purpose,available_widths:[]}}}),a=await Promise.all(t);console.log("Final slit width results:",a),R(a)}catch(t){console.error("Failed to load slit widths:",t),R([])}},$=e=>{const t=i.items[e];E(t=>m(m({},t),{},{[e]:m(m({},t[e]),{},{showAllocation:!1})})),W(e,t.quantity)},Q=e=>{const{name:t,value:a}=e.target;l(e=>m(m({},e),{},{[t]:a})),b[t]&&v(e=>m(m({},e),{},{[t]:""}))},Y=(e,t,a)=>{const s=[...i.items];if("quantity"===t||"unit_price"===t){const n=""===a?0:Number(a);s[e]=m(m({},s[e]),{},{[t]:n})}else s[e]=m(m({},s[e]),{},{[t]:a});const n=Number(s[e].quantity)||0,r=Number(s[e].unit_price)||0;if(s[e].total_price=n*r,l(e=>m(m({},e),{},{items:s})),"quantity"===t||"product_id"===t){const r="product_id"===t?a:s[e].product_id,l="quantity"===t?n:s[e].quantity;setTimeout(()=>{((e,t,a)=>{if(!a||!t)return void S(t=>m(m({},t),{},{[e]:null}));const s=d.find(e=>e.id===a);if(!s)return void S(t=>m(m({},t),{},{[e]:null}));if("paper_cores"!==s.product_type)return void S(t=>m(m({},t),{},{[e]:null}));const n=s.tubes_per_carton;if(!n||n<=0)return void S(t=>m(m({},t),{},{[e]:null}));if(t%n===0)S(a=>m(m({},a),{},{[e]:{isValid:!0,tubesPerCarton:n,cartons:t/n}}));else{const a=Math.ceil(t/n)*n,s=Math.ceil(t/n);S(r=>m(m({},r),{},{[e]:{isValid:!1,tubesPerCarton:n,currentQuantity:t,suggestedQuantity:a,cartons:s}}))}})(e,l,r),r&&l>0&&i.client_id?U(r,i.client_id,e,l):l<=0&&E(t=>{const a=m({},t);return delete a[e],a})},0)}},J=()=>{w(!1)};return(0,mi.jsxs)("div",{className:"modal-overlay",onClick:e=>e.target===e.currentTarget&&s(),children:[(0,mi.jsx)("div",{className:"modal-content max-w-6xl max-h-[90vh] overflow-y-auto",children:(0,mi.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};if(i.client_id||(e.client_id="Please select a client"),i.due_date){const t=new Date(i.due_date),a=new Date;a.setHours(0,0,0,0),t<a&&(e.due_date="Due date cannot be in the past")}else e.due_date="Due date is required";if(i.client_id){let t=!1;i.items.forEach((a,s)=>{a.product_name.trim()&&a.product_id||(e["item_".concat(s,"_product_name")]="Please select a product"),(!a.quantity||a.quantity<=0)&&(e["item_".concat(s,"_quantity")]="Quantity must be greater than 0"),(!a.unit_price||a.unit_price<=0)&&(e["item_".concat(s,"_unit_price")]="Unit price must be greater than 0"),a.product_name.trim()&&a.product_id&&a.quantity>0&&a.unit_price>0&&(t=!0)}),t||(e.items="At least one valid item is required")}return v(e),0===Object.keys(e).length})()){f(!0);try{const e={client_id:i.client_id,purchase_order_number:i.purchase_order_number||null,due_date:new Date(i.due_date).toISOString(),delivery_address:i.delivery_address||null,delivery_instructions:i.delivery_instructions||null,notes:i.notes||null,discount_percentage:parseFloat(i.discount_percentage)||null,discount_notes:i.discount_notes||null,items:i.items.map(e=>({product_id:e.product_id,product_name:e.product_name,quantity:Number(e.quantity)||1,unit_price:Number(e.unit_price)||0,total_price:Number(e.total_price)||0}))};if(a)Bt.success("Order updated successfully");else{const t=await ar(e);Bt.success("Order created successfully: ".concat(t.data.data.order_number))}null===r||void 0===r||r(),s()}catch(c){var t,n;if(console.error("Failed to save order:",c),null!==(t=c.response)&&void 0!==t&&null!==(n=t.data)&&void 0!==n&&n.detail&&Array.isArray(c.response.data.detail)){const e=c.response.data.detail.map(e=>{var t;return"object"===typeof e&&e.msg?"".concat((null===(t=e.loc)||void 0===t?void 0:t.join(" \u2192 "))||"Field",": ").concat(e.msg):String(e)});Bt.error("Validation errors: ".concat(e.join(", ")))}else{var l,o;const e=(null===(l=c.response)||void 0===l||null===(o=l.data)||void 0===o?void 0:o.detail)||c.message||"Failed to save order";Bt.error(e)}}finally{f(!1)}}else Bt.error("Please fix the errors below")},className:"p-6",children:[(0,mi.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,mi.jsx)("h2",{className:"text-2xl font-bold text-white",children:a?"Edit Order":"Create New Order"}),(0,mi.jsx)("button",{type:"button",onClick:s,className:"text-gray-400 hover:text-white transition-colors",children:(0,mi.jsx)(nl,{className:"h-6 w-6"})})]}),(0,mi.jsxs)("div",{className:"mb-8",children:[(0,mi.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Order Details"}),(0,mi.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Client *"}),g?(0,mi.jsx)("div",{className:"misty-input w-full flex items-center justify-center",children:(0,mi.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-yellow-400"})}):(0,mi.jsxs)("select",{name:"client_id",value:i.client_id,onChange:Q,className:"misty-select w-full ".concat(b.client_id?"border-red-500":""),required:!0,children:[(0,mi.jsx)("option",{value:"",children:"Select a client"}),o.map(e=>(0,mi.jsx)("option",{value:e.id,children:e.company_name},e.id))]}),b.client_id&&(0,mi.jsx)("p",{className:"text-red-400 text-sm mt-1",children:b.client_id})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Purchase Order Number"}),(0,mi.jsx)("input",{type:"text",name:"purchase_order_number",value:i.purchase_order_number,onChange:Q,className:"misty-input w-full",placeholder:"Client's PO number"})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Due Date *"}),(0,mi.jsx)("input",{type:"date",name:"due_date",value:i.due_date,onChange:Q,min:(new Date).toISOString().split("T")[0],className:"misty-input w-full ".concat(b.due_date?"border-red-500":""),required:!0}),b.due_date&&(0,mi.jsx)("p",{className:"text-red-400 text-sm mt-1",children:b.due_date})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Priority *"}),(0,mi.jsxs)("select",{name:"priority",value:i.priority,onChange:Q,className:"misty-select w-full",required:!0,children:[(0,mi.jsx)("option",{value:"ASAP",children:"ASAP"}),(0,mi.jsx)("option",{value:"Must Delivery On Date",children:"Must Delivery On Date"}),(0,mi.jsx)("option",{value:"Normal/Low",children:"Normal/Low"})]})]})]})]}),(0,mi.jsxs)("div",{className:"mb-8",children:[(0,mi.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Delivery Information"}),(0,mi.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Delivery Address"}),(0,mi.jsx)("textarea",{name:"delivery_address",value:i.delivery_address,onChange:Q,rows:3,className:"misty-textarea w-full",placeholder:p?"Default: ".concat(p.address,", ").concat(p.city,", ").concat(p.state," ").concat(p.postal_code):"Enter delivery address..."})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Delivery Instructions"}),(0,mi.jsx)("textarea",{name:"delivery_instructions",value:i.delivery_instructions,onChange:Q,rows:3,className:"misty-textarea w-full",placeholder:"Special delivery instructions..."})]})]})]}),i.client_id&&(0,mi.jsxs)("div",{className:"mb-8",children:[(0,mi.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,mi.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Order Items"}),(0,mi.jsxs)("button",{type:"button",onClick:()=>{l(e=>m(m({},e),{},{items:[...e.items,{product_id:"",product_name:"",quantity:1,unit_price:0,total_price:0}]}))},className:"misty-button misty-button-secondary flex items-center text-sm",children:[(0,mi.jsx)(Cl,{className:"h-4 w-4 mr-1"}),"Add Item"]})]}),b.items&&(0,mi.jsx)("p",{className:"text-red-400 text-sm mb-4",children:b.items}),(0,mi.jsx)("div",{className:"space-y-4",children:i.items.map((e,t)=>{var a;return(0,mi.jsxs)("div",{className:"border border-gray-600 rounded-lg p-4",children:[(0,mi.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,mi.jsxs)("h4",{className:"text-white font-medium",children:["Item ",t+1]}),i.items.length>1&&(0,mi.jsx)("button",{type:"button",onClick:()=>(e=>{i.items.length>1&&l(t=>m(m({},t),{},{items:t.items.filter((t,a)=>a!==e)}))})(t),className:"text-red-400 hover:text-red-300 transition-colors",children:(0,mi.jsx)(Ol,{className:"h-4 w-4"})})]}),(0,mi.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,mi.jsxs)("div",{className:"md:col-span-2",children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Product Name *"}),d.length>0?(0,mi.jsxs)("select",{value:e.product_id,onChange:a=>{const s=d.find(e=>e.id===a.target.value);if(s&&a.target.value){const a=Number(e.quantity)||1,n=Number(s.price_ex_gst)||0,r=a*n,o=[...i.items];o[t]=m(m({},o[t]),{},{product_id:s.id,product_name:s.product_description,unit_price:n,total_price:r}),l(e=>m(m({},e),{},{items:o})),o[t].quantity>0&&setTimeout(()=>{U(s.id,i.client_id,t,o[t].quantity)},100)}else{const e=[...i.items];e[t]=m(m({},e[t]),{},{product_id:"",product_name:"",unit_price:0,total_price:0}),l(t=>m(m({},t),{},{items:e}))}},className:"misty-select w-full ".concat(b["item_".concat(t,"_product_name")]?"border-red-500":""),children:[(0,mi.jsx)("option",{value:"",children:"Select a product"}),d.map(e=>(0,mi.jsxs)("option",{value:e.id,children:[e.product_description," - $",parseFloat(e.price_ex_gst).toFixed(2)]},e.id))]}):(0,mi.jsxs)("div",{className:"text-center text-gray-400 py-3",children:["No products available for this client.",(0,mi.jsx)("br",{}),(0,mi.jsx)("span",{className:"text-sm",children:"Add products to the client profile first."})]}),b["item_".concat(t,"_product_name")]&&(0,mi.jsx)("p",{className:"text-red-400 text-sm mt-1",children:b["item_".concat(t,"_product_name")]})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Quantity *"}),(0,mi.jsx)("input",{type:"number",min:"1",step:"1",value:e.quantity||1,onChange:e=>Y(t,"quantity",e.target.value),className:"misty-input w-full ".concat(b["item_".concat(t,"_quantity")]?"border-red-500":k[t]&&!k[t].isValid?"border-red-500 bg-red-900/20":"")}),b["item_".concat(t,"_quantity")]&&(0,mi.jsx)("p",{className:"text-red-400 text-sm mt-1",children:b["item_".concat(t,"_quantity")]}),k[t]&&(0,mi.jsx)("div",{className:"mt-1",children:k[t].isValid?(0,mi.jsxs)("p",{className:"text-green-400 text-sm",children:["\u2713 Perfect! ",k[t].cartons," full carton",1!==k[t].cartons?"s":"","(",k[t].tubesPerCarton," tubes per carton)"]}):(0,mi.jsxs)("div",{className:"text-red-400 text-sm",children:[(0,mi.jsxs)("p",{children:["\u26a0 Quantity not divisible by ",k[t].tubesPerCarton," tubes per carton"]}),(0,mi.jsxs)("p",{className:"text-yellow-400 mt-1",children:["\ud83d\udca1 Suggested: ",(0,mi.jsxs)("span",{className:"font-semibold",children:[k[t].suggestedQuantity," units"]}),"(",k[t].cartons," full carton",1!==k[t].cartons?"s":"",")",(0,mi.jsx)("button",{type:"button",onClick:()=>Y(t,"quantity",k[t].suggestedQuantity),className:"ml-2 px-2 py-0.5 bg-yellow-600 hover:bg-yellow-700 text-black text-xs rounded font-medium transition-colors",children:"Use This"})]})]})})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Unit Price *"}),(0,mi.jsx)("input",{type:"number",min:"0",step:"0.01",value:e.unit_price||0,onChange:e=>Y(t,"unit_price",e.target.value),className:"misty-input w-full ".concat(b["item_".concat(t,"_unit_price")]?"border-red-500":"")}),b["item_".concat(t,"_unit_price")]&&(0,mi.jsx)("p",{className:"text-red-400 text-sm mt-1",children:b["item_".concat(t,"_unit_price")]})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Total Price"}),(0,mi.jsx)("input",{type:"number",value:(e.total_price||0).toFixed(2),className:"misty-input w-full bg-gray-600",readOnly:!0})]})]}),e.quantity>0&&!(null!==(a=C[t])&&void 0!==a&&a.showAllocation)&&!e.allocated_stock&&(0,mi.jsx)("div",{className:"mt-4 p-3 bg-gray-700/20 border border-gray-500 rounded-lg",children:(0,mi.jsxs)("div",{className:"flex items-center justify-between",children:[(0,mi.jsxs)("div",{className:"text-gray-300 text-sm",children:[(0,mi.jsx)("span",{className:"font-medium",children:"No stock available for this product"}),(0,mi.jsxs)("div",{className:"text-xs text-gray-400 mt-1",children:["View raw materials needed for manufacturing ",e.quantity," units"]})]}),(0,mi.jsx)("button",{type:"button",onClick:()=>W(t,e.quantity),className:"px-3 py-1 bg-orange-600 hover:bg-orange-700 text-white text-sm rounded transition-colors font-medium",children:"Raw Materials Needed"})]})}),C[t]&&C[t].showAllocation&&(0,mi.jsxs)("div",{className:"mt-4 p-4 bg-blue-900/20 border border-blue-500 rounded-lg",children:[(0,mi.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,mi.jsxs)("div",{className:"flex items-center",children:[(0,mi.jsx)("span",{className:"text-blue-300 font-medium mr-2",children:"\ud83d\udce6 Stock Available"}),(0,mi.jsxs)("span",{className:"text-blue-200 text-sm",children:["(",C[t].stockOnHand," units in stock)"]})]}),(0,mi.jsx)("button",{type:"button",onClick:()=>$(t),className:"text-gray-400 hover:text-white text-sm",children:"\u2715"})]}),(0,mi.jsx)("div",{className:"mb-3 text-sm text-blue-200",children:(0,mi.jsxs)("div",{className:"grid grid-cols-3 gap-3 mb-3",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("span",{className:"text-gray-300",children:"Order Quantity:"}),(0,mi.jsxs)("div",{className:"font-medium",children:[C[t].quantity," units"]})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("span",{className:"text-gray-300",children:"Available Stock:"}),(0,mi.jsxs)("div",{className:"font-medium",children:[C[t].stockOnHand," units"]})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("span",{className:"text-gray-300",children:"Max Allocation:"}),(0,mi.jsxs)("div",{className:"font-medium text-yellow-400",children:[C[t].maxAllocation," units"]})]})]})}),(0,mi.jsxs)("div",{className:"bg-blue-800/30 p-3 rounded mb-3",children:[(0,mi.jsx)("p",{className:"text-blue-100 text-sm font-medium mb-2",children:"Would you like to allocate stock to this order?"}),(0,mi.jsx)("p",{className:"text-blue-200 text-xs",children:"This will reduce your stock on hand and show the allocated amount in the job card."})]}),(0,mi.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,mi.jsx)("button",{type:"button",onClick:()=>$(t),className:"px-3 py-1 bg-gray-600 hover:bg-gray-700 text-white text-sm rounded transition-colors",children:"No, Don't Allocate"}),(0,mi.jsx)("button",{type:"button",onClick:()=>W(t,e.quantity-C[t].maxAllocation),className:"px-3 py-1 bg-yellow-600 hover:bg-yellow-700 text-white text-sm rounded transition-colors",children:"View Materials Needed"}),(0,mi.jsxs)("button",{type:"button",onClick:()=>(async(e,t)=>{try{const a=C[e];if(!a)return;const s=i.items[e].quantity-t;await ni("/stock/allocate",{product_id:a.productId,client_id:i.client_id,quantity:t,order_reference:"Pending Order - ".concat((new Date).toISOString())});const n=[...i.items];n[e]=m(m({},n[e]),{},{allocated_stock:t,remaining_to_produce:s}),l(e=>m(m({},e),{},{items:n})),E(t=>m(m({},t),{},{[e]:m(m({},t[e]),{},{showAllocation:!1,allocated:!0})})),Bt.success("".concat(t," units allocated from stock")),s>0&&setTimeout(async()=>{await W(e,s)},1500)}catch(a){console.error("Failed to allocate stock:",a),Bt.error("Failed to allocate stock")}})(t,C[t].maxAllocation),className:"px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white text-sm rounded transition-colors font-medium",children:["Yes, Allocate ",C[t].maxAllocation," Units"]})]})]}),e.allocated_stock>0&&(0,mi.jsx)("div",{className:"mt-4 p-3 bg-green-900/20 border border-green-500 rounded-lg",children:(0,mi.jsxs)("div",{className:"flex items-center justify-between",children:[(0,mi.jsxs)("div",{className:"flex items-center text-green-300 text-sm",children:[(0,mi.jsx)("span",{className:"mr-2",children:"\u2713"}),(0,mi.jsxs)("span",{className:"font-medium",children:[e.allocated_stock," units allocated from stock"]}),(0,mi.jsxs)("span",{className:"ml-2 text-green-400",children:["\u2022 ",e.remaining_to_produce||e.quantity-e.allocated_stock," to produce"]})]}),(e.remaining_to_produce||e.quantity-e.allocated_stock)>0&&(0,mi.jsx)("button",{type:"button",onClick:()=>W(t,e.remaining_to_produce||e.quantity-e.allocated_stock),className:"px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white text-xs rounded transition-colors font-medium",children:"Raw Materials Needed"})]})})]},t)})})]}),!i.client_id&&(0,mi.jsx)("div",{className:"mb-8",children:(0,mi.jsxs)("div",{className:"misty-card p-6 text-center",children:[(0,mi.jsx)("h3",{className:"text-lg font-semibold text-gray-300 mb-2",children:"Select a Client"}),(0,mi.jsx)("p",{className:"text-gray-400",children:"Please select a client above to add order items."})]})}),i.client_id&&(0,mi.jsx)("div",{className:"mb-8",children:(0,mi.jsxs)("div",{className:"misty-card p-4 bg-gray-700",children:[(0,mi.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Discount (Optional)"}),(0,mi.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Discount Percentage (%)"}),(0,mi.jsx)("input",{type:"number",name:"discount_percentage",min:"0",max:"100",step:"0.1",value:i.discount_percentage,onChange:Q,className:"misty-input w-full",placeholder:"0.0"}),(0,mi.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Enter percentage (0-100). Applied before GST calculation."})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Discount Reason"}),(0,mi.jsx)("input",{type:"text",name:"discount_notes",value:i.discount_notes,onChange:Q,className:"misty-input w-full",placeholder:"Reason for discount (e.g., Bulk order, Loyalty discount)"})]})]}),parseFloat(i.discount_percentage)>0&&_.subtotal>0&&(0,mi.jsx)("div",{className:"mt-4 p-3 bg-gray-600 rounded-lg",children:(0,mi.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,mi.jsx)("span",{className:"text-gray-300",children:"Discount Amount:"}),(0,mi.jsxs)("span",{className:"text-red-400 font-medium",children:["-$",_.discountAmount.toFixed(2)]})]})})]})}),i.client_id&&i.items.some(e=>e.product_name&&e.quantity>0)&&(0,mi.jsx)("div",{className:"mb-8",children:(0,mi.jsxs)("div",{className:"misty-card p-4 bg-gray-700",children:[(0,mi.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Order Summary"}),(0,mi.jsxs)("div",{className:"space-y-2",children:[(0,mi.jsxs)("div",{className:"flex justify-between",children:[(0,mi.jsx)("span",{className:"text-gray-300",children:"Subtotal:"}),(0,mi.jsxs)("span",{className:"text-white font-medium",children:["$",_.subtotal.toFixed(2)]})]}),_.discountAmount>0&&(0,mi.jsxs)(mi.Fragment,{children:[(0,mi.jsxs)("div",{className:"flex justify-between",children:[(0,mi.jsxs)("span",{className:"text-gray-300",children:["Discount (",i.discount_percentage,"%):"]}),(0,mi.jsxs)("span",{className:"text-red-400 font-medium",children:["-$",_.discountAmount.toFixed(2)]})]}),(0,mi.jsxs)("div",{className:"flex justify-between border-b border-gray-600 pb-2",children:[(0,mi.jsx)("span",{className:"text-gray-300",children:"Discounted Subtotal:"}),(0,mi.jsxs)("span",{className:"text-white font-medium",children:["$",_.discountedSubtotal.toFixed(2)]})]})]}),(0,mi.jsxs)("div",{className:"flex justify-between",children:[(0,mi.jsx)("span",{className:"text-gray-300",children:"GST (10%):"}),(0,mi.jsxs)("span",{className:"text-white font-medium",children:["$",_.gst.toFixed(2)]})]}),(0,mi.jsxs)("div",{className:"flex justify-between text-lg font-bold border-t border-gray-600 pt-2",children:[(0,mi.jsx)("span",{className:"text-white",children:"Total:"}),(0,mi.jsxs)("span",{className:"text-yellow-400",children:["$",_.total.toFixed(2)]})]}),i.discount_notes&&_.discountAmount>0&&(0,mi.jsx)("div",{className:"mt-3 pt-2 border-t border-gray-600",children:(0,mi.jsxs)("p",{className:"text-xs text-gray-400",children:[(0,mi.jsx)("span",{className:"font-medium",children:"Discount Reason:"})," ",i.discount_notes]})})]})]})}),(0,mi.jsxs)("div",{className:"mb-8",children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Order Notes"}),(0,mi.jsx)("textarea",{name:"notes",value:i.notes,onChange:Q,rows:3,className:"misty-textarea w-full",placeholder:"Additional notes for this order..."})]}),(0,mi.jsxs)("div",{className:"flex justify-between pt-6 border-t border-gray-700",children:[(0,mi.jsx)("div",{children:a&&(0,mi.jsxs)("button",{type:"button",onClick:()=>{w(!0)},className:"misty-button misty-button-danger",disabled:x,children:[(0,mi.jsx)(Ol,{className:"h-4 w-4 mr-2"}),"Delete Order"]})}),(0,mi.jsxs)("div",{className:"flex space-x-3",children:[(0,mi.jsx)("button",{type:"button",onClick:s,className:"misty-button misty-button-secondary",disabled:x,children:"Cancel"}),(0,mi.jsx)("button",{type:"submit",className:"misty-button misty-button-primary",disabled:x||g,children:x?(0,mi.jsxs)("div",{className:"flex items-center",children:[(0,mi.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-900 mr-2"}),a?"Updating...":"Creating..."]}):a?"Update Order":"Create Order"})]})]})]})}),j&&a&&(0,mi.jsx)("div",{className:"modal-overlay",onClick:e=>e.target===e.currentTarget&&J(),children:(0,mi.jsx)("div",{className:"modal-content max-w-md",children:(0,mi.jsxs)("div",{className:"p-6",children:[(0,mi.jsxs)("div",{className:"flex items-center mb-4",children:[(0,mi.jsx)("div",{className:"flex-shrink-0",children:(0,mi.jsx)(Ol,{className:"h-8 w-8 text-red-400"})}),(0,mi.jsxs)("div",{className:"ml-4",children:[(0,mi.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Delete Order"}),(0,mi.jsx)("p",{className:"text-sm text-gray-400",children:"This action cannot be undone."})]})]}),(0,mi.jsxs)("div",{className:"mb-6",children:[(0,mi.jsxs)("p",{className:"text-gray-300",children:["Are you sure you wish to delete order ",(0,mi.jsxs)("span",{className:"font-semibold text-white",children:['"',a.order_number,'"']}),"?"]}),(0,mi.jsx)("p",{className:"text-sm text-gray-400 mt-2",children:"This will cancel the order and remove it from active production. Orders in production cannot be deleted."})]}),(0,mi.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,mi.jsx)("button",{type:"button",onClick:J,className:"misty-button misty-button-secondary",disabled:x,children:"No, Cancel"}),(0,mi.jsx)("button",{type:"button",onClick:async()=>{if(a)try{f(!0),await nr(a.id),Bt.success("Order deleted successfully"),w(!1),null===r||void 0===r||r(),s()}catch(n){var e,t;console.error("Failed to delete order:",n);const a=(null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.detail)||"Failed to delete order";Bt.error(a)}finally{f(!1)}},className:"misty-button misty-button-danger",disabled:x,children:x?(0,mi.jsxs)("div",{className:"flex items-center",children:[(0,mi.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Deleting..."]}):"Yes, Delete Order"})]})]})})}),D&&A&&F&&(0,mi.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,mi.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-5xl max-h-[90vh] overflow-y-auto",children:[(0,mi.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,mi.jsxs)("h3",{className:"text-xl font-semibold text-white",children:["Material Requirements - ",(null===F||void 0===F||null===(t=F.item)||void 0===t?void 0:t.product_name)||A.productName]}),(0,mi.jsx)("button",{onClick:()=>P(!1),className:"text-gray-400 hover:text-white",children:(0,mi.jsx)(nl,{className:"h-6 w-6"})})]}),(0,mi.jsxs)("div",{className:"mb-4 p-4 bg-blue-900/20 border border-blue-700 rounded-lg",children:[(0,mi.jsx)("h4",{className:"text-lg font-medium text-white mb-2",children:"Production Requirements"}),(0,mi.jsxs)("p",{className:"text-sm text-blue-200 mb-3",children:["Raw materials needed for manufacturing the remaining ",F.remainingQuantity," units"]}),A.materials.some(e=>e.notes&&e.notes.includes("No product specifications"))&&(0,mi.jsxs)("div",{className:"p-3 bg-yellow-900/20 border border-yellow-600 rounded mb-3",children:[(0,mi.jsxs)("div",{className:"flex items-center text-yellow-300 text-sm",children:[(0,mi.jsx)("span",{className:"mr-2",children:"\u26a0\ufe0f"}),(0,mi.jsx)("span",{className:"font-medium",children:"Product specifications missing"})]}),(0,mi.jsx)("p",{className:"text-yellow-200 text-xs mt-1",children:"Showing available raw materials. Please add product specifications for accurate material requirements."})]}),(0,mi.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("span",{className:"text-gray-300",children:"Total Required:"}),(0,mi.jsxs)("div",{className:"font-medium text-white",children:[F.item.quantity," units"]})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("span",{className:"text-gray-300",children:"Stock Allocated:"}),(0,mi.jsxs)("div",{className:"font-medium text-green-400",children:[F.item.allocated_stock||0," units"]})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("span",{className:"text-gray-300",children:"To Manufacture:"}),(0,mi.jsxs)("div",{className:"font-medium text-yellow-400",children:[F.remainingQuantity," units"]})]})]})]}),(0,mi.jsxs)("div",{className:"mb-6 p-4 bg-gray-700/30 border border-gray-600 rounded-lg",children:[(0,mi.jsxs)("h4",{className:"text-lg font-medium text-white mb-3 flex items-center",children:[(0,mi.jsx)("span",{className:"mr-2",children:"\ud83d\udcca"}),"Material Requirements & Spiral Formation Overview"]}),(0,mi.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("h5",{className:"text-sm font-medium text-gray-300 mb-2",children:"Material Requirements"}),(0,mi.jsxs)("div",{className:"space-y-2",children:[A.materials.map((e,t)=>(0,mi.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,mi.jsxs)("div",{className:"flex items-center",children:[(0,mi.jsx)("span",{className:"w-3 h-3 bg-blue-500 rounded-full mr-3"}),(0,mi.jsxs)("span",{className:"text-gray-300",children:[e.layer_position,":"]}),(0,mi.jsx)("span",{className:"text-white ml-2",children:e.material_name})]}),(0,mi.jsxs)("div",{className:"text-right",children:[(0,mi.jsxs)("div",{className:"text-blue-300 font-medium",children:[e.required_quantity_meters.toFixed(1),"m"]}),(0,mi.jsxs)("div",{className:"text-gray-500 text-xs",children:[e.quantity_per_unit,"m \xd7 ",F.remainingQuantity," units"]})]})]},t)),(0,mi.jsx)("div",{className:"border-t border-gray-600 pt-2 mt-3",children:(0,mi.jsxs)("div",{className:"flex items-center justify-between text-sm font-medium",children:[(0,mi.jsx)("span",{className:"text-gray-300",children:"Total Required:"}),(0,mi.jsxs)("span",{className:"text-yellow-300",children:[A.materials.reduce((e,t)=>e+t.required_quantity_meters,0).toFixed(1),"m"]})]})})]})]}),A.materials.some(e=>e.spiral_specifications&&e.spiral_specifications.sequence)&&(0,mi.jsxs)("div",{children:[(0,mi.jsxs)("h5",{className:"text-sm font-medium text-gray-300 mb-2 flex items-center",children:[(0,mi.jsx)("span",{className:"mr-2",children:"\ud83c\udf00"}),"Spiral Formation Process"]}),(0,mi.jsxs)("div",{className:"space-y-2",children:[A.materials.filter(e=>{var t;return null===(t=e.spiral_specifications)||void 0===t?void 0:t.sequence}).sort((e,t)=>parseInt(e.spiral_specifications.sequence)-parseInt(t.spiral_specifications.sequence)).map((e,t)=>(0,mi.jsxs)("div",{className:"bg-gray-800/50 rounded p-2 text-xs",children:[(0,mi.jsxs)("div",{className:"flex items-center mb-1",children:[(0,mi.jsx)("div",{className:"w-6 h-6 bg-green-600 text-white rounded-full flex items-center justify-center mr-2 text-xs font-bold",children:e.spiral_specifications.sequence}),(0,mi.jsx)("div",{className:"font-medium text-white",children:e.material_name})]}),(0,mi.jsxs)("div",{className:"ml-8 grid grid-cols-2 gap-2 text-gray-300",children:[(0,mi.jsxs)("div",{className:"flex items-center",children:[(0,mi.jsx)("span",{className:"text-blue-300",children:"\ud83c\udfaf"}),(0,mi.jsxs)("span",{className:"ml-1",children:[e.spiral_specifications.allocation_percent,"% allocation"]})]}),e.spiral_specifications.winding_direction&&(0,mi.jsxs)("div",{className:"flex items-center",children:[(0,mi.jsx)("span",{className:"text-purple-300",children:"clockwise"===e.spiral_specifications.winding_direction?"\u21bb":"\u21ba"}),(0,mi.jsx)("span",{className:"ml-1 capitalize",children:e.spiral_specifications.winding_direction})]}),e.spiral_specifications.tension_level&&(0,mi.jsxs)("div",{className:"flex items-center",children:[(0,mi.jsx)("span",{className:"text-red-300",children:"\u26a1"}),(0,mi.jsxs)("span",{className:"ml-1 capitalize",children:[e.spiral_specifications.tension_level," tension"]})]}),e.spiral_specifications.feed_rate_mpm&&(0,mi.jsxs)("div",{className:"flex items-center",children:[(0,mi.jsx)("span",{className:"text-indigo-300",children:"\ud83c\udfc3"}),(0,mi.jsxs)("span",{className:"ml-1",children:[e.spiral_specifications.feed_rate_mpm," m/min"]})]})]})]},t)),(()=>{const e=A.materials.filter(e=>{var t;return null===(t=e.spiral_specifications)||void 0===t?void 0:t.allocation_percent}).reduce((e,t)=>e+parseFloat(t.spiral_specifications.allocation_percent),0);return e>0?(0,mi.jsx)("div",{className:"mt-2 p-2 rounded text-xs text-center font-medium ".concat(Math.abs(e-100)<.1?"bg-green-900/20 border border-green-600 text-green-300":"bg-yellow-900/20 border border-yellow-600 text-yellow-300"),children:Math.abs(e-100)<.1?"\u2705 Perfect spiral formation: ".concat(e.toFixed(1),"%"):"\u26a0\ufe0f Spiral allocation: ".concat(e.toFixed(1),"% (should be 100%)")}):null})()]})]})]})]}),(0,mi.jsx)("div",{className:"space-y-6",children:L.map((e,t)=>(0,mi.jsxs)("div",{className:"bg-gray-700 rounded-lg p-4",children:[(0,mi.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("h4",{className:"text-lg font-medium text-white",children:e.material_name}),(0,mi.jsxs)("div",{className:"text-sm text-gray-400",children:[e.layer_position," \u2022 ",e.purpose]})]}),(0,mi.jsxs)("div",{className:"text-right text-sm text-gray-300",children:[(0,mi.jsxs)("div",{children:["Required: ",e.required_width_mm,"mm"]}),(0,mi.jsxs)("div",{children:["Quantity: ",e.required_quantity_meters.toFixed(1),"m"]}),(0,mi.jsxs)("div",{className:"text-xs text-gray-400",children:["(",e.quantity_per_unit," per unit)"]})]})]}),(0,mi.jsxs)("div",{className:"mb-4 p-3 bg-blue-900/10 border border-blue-600 rounded-lg",children:[(0,mi.jsxs)("h5",{className:"text-sm font-medium text-blue-300 mb-2 flex items-center",children:[(0,mi.jsx)("span",{className:"mr-2",children:"\ud83d\udccb"}),e.layer_position," Requirements"]}),(0,mi.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-xs mb-3",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("span",{className:"text-gray-400",children:"Layer Type:"}),(0,mi.jsx)("div",{className:"text-white",children:e.layer_position})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("span",{className:"text-gray-400",children:"Quantity per Unit:"}),(0,mi.jsxs)("div",{className:"text-white",children:[e.quantity_per_unit,"m/unit"]})]}),(0,mi.jsxs)("div",{className:"col-span-2",children:[(0,mi.jsx)("span",{className:"text-gray-400",children:"Formula Calculation:"}),(0,mi.jsx)("div",{className:"text-blue-300 font-medium bg-blue-900/20 border border-blue-600 rounded p-2 mt-1",children:e.calculation_formula||"".concat(e.order_quantity||F.remainingQuantity," units \xd7 ").concat(e.quantity_per_unit,"m/unit = ").concat(e.required_quantity_meters.toFixed(1),"m")})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("span",{className:"text-gray-400",children:"Material Specs:"}),(0,mi.jsxs)("div",{className:"text-white",children:[e.layer_thickness_mm,"mm thick",e.layer_gsm>0&&", ".concat(e.layer_gsm," GSM")]})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("span",{className:"text-gray-400",children:"Required Width:"}),(0,mi.jsxs)("div",{className:"text-white",children:[e.required_width_mm,"mm"]})]})]}),e.spiral_specifications&&Object.values(e.spiral_specifications).some(e=>null!==e&&""!==e)&&(0,mi.jsxs)("div",{className:"border-t border-blue-700 pt-3",children:[(0,mi.jsxs)("h6",{className:"text-sm font-medium text-green-300 mb-2 flex items-center",children:[(0,mi.jsx)("span",{className:"mr-2",children:"\ud83c\udf00"}),"Spiral Core Formation Specs"]}),(0,mi.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-xs",children:[e.spiral_specifications.allocation_percent&&(0,mi.jsxs)("div",{className:"bg-green-900/20 border border-green-700 rounded p-2",children:[(0,mi.jsx)("span",{className:"text-green-300 font-medium block",children:"Layer Allocation"}),(0,mi.jsxs)("div",{className:"text-green-200 text-sm font-medium",children:[e.spiral_specifications.allocation_percent,"%"]}),(0,mi.jsx)("div",{className:"text-green-400 text-xs",children:"of spiral formation"})]}),e.spiral_specifications.sequence&&(0,mi.jsxs)("div",{className:"bg-blue-900/20 border border-blue-700 rounded p-2",children:[(0,mi.jsx)("span",{className:"text-blue-300 font-medium block",children:"Layer Sequence"}),(0,mi.jsxs)("div",{className:"text-blue-200 text-sm font-medium",children:["#",e.spiral_specifications.sequence]}),(0,mi.jsx)("div",{className:"text-blue-400 text-xs",children:"application order"})]}),e.spiral_specifications.winding_direction&&(0,mi.jsxs)("div",{className:"bg-purple-900/20 border border-purple-700 rounded p-2",children:[(0,mi.jsx)("span",{className:"text-purple-300 font-medium block",children:"Winding Direction"}),(0,mi.jsxs)("div",{className:"text-purple-200 text-sm font-medium flex items-center",children:["clockwise"===e.spiral_specifications.winding_direction&&"\u21bb","counterclockwise"===e.spiral_specifications.winding_direction&&"\u21ba","alternating"===e.spiral_specifications.winding_direction&&"\u2934\ufe0f",(0,mi.jsx)("span",{className:"ml-1 capitalize",children:e.spiral_specifications.winding_direction})]})]}),e.spiral_specifications.overlap_factor&&(0,mi.jsxs)("div",{className:"bg-yellow-900/20 border border-yellow-700 rounded p-2",children:[(0,mi.jsx)("span",{className:"text-yellow-300 font-medium block",children:"Overlap Factor"}),(0,mi.jsxs)("div",{className:"text-yellow-200 text-sm font-medium",children:[e.spiral_specifications.overlap_factor,"x"]}),(0,mi.jsx)("div",{className:"text-yellow-400 text-xs",children:"material overlap"})]}),e.spiral_specifications.tension_level&&(0,mi.jsxs)("div",{className:"bg-red-900/20 border border-red-700 rounded p-2",children:[(0,mi.jsx)("span",{className:"text-red-300 font-medium block",children:"Tension Level"}),(0,mi.jsxs)("div",{className:"text-red-200 text-sm font-medium flex items-center",children:["high"===e.spiral_specifications.tension_level&&"\u26a1\u26a1\u26a1","medium"===e.spiral_specifications.tension_level&&"\u26a1\u26a1","low"===e.spiral_specifications.tension_level&&"\u26a1",(0,mi.jsx)("span",{className:"ml-1 capitalize",children:e.spiral_specifications.tension_level})]})]}),e.spiral_specifications.feed_rate_mpm&&(0,mi.jsxs)("div",{className:"bg-indigo-900/20 border border-indigo-700 rounded p-2",children:[(0,mi.jsx)("span",{className:"text-indigo-300 font-medium block",children:"Feed Rate"}),(0,mi.jsxs)("div",{className:"text-indigo-200 text-sm font-medium",children:[e.spiral_specifications.feed_rate_mpm," m/min"]}),(0,mi.jsx)("div",{className:"text-indigo-400 text-xs",children:"application speed"})]}),e.spiral_specifications.qc_checkpoints&&(0,mi.jsxs)("div",{className:"bg-orange-900/20 border border-orange-700 rounded p-2 md:col-span-2",children:[(0,mi.jsx)("span",{className:"text-orange-300 font-medium block",children:"Quality Control"}),(0,mi.jsx)("div",{className:"text-orange-200 text-sm",children:e.spiral_specifications.qc_checkpoints})]})]})]})]}),M[e.material_id]>0&&(0,mi.jsxs)("div",{className:"mb-4 p-3 bg-green-900/20 border border-green-600 rounded-lg",children:[(0,mi.jsxs)("div",{className:"flex items-center justify-between text-sm mb-2",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsxs)("span",{className:"text-green-300 font-medium",children:["Allocated: ",M[e.material_id].toFixed(1),"m"]}),(0,mi.jsxs)("span",{className:"text-gray-400 ml-2",children:["of ",e.required_quantity_meters.toFixed(1),"m required for ",e.layer_position]})]}),(0,mi.jsx)("div",{className:"px-2 py-1 rounded text-xs ".concat(M[e.material_id]>=e.required_quantity_meters?"bg-green-900 text-green-300":"bg-yellow-900 text-yellow-300"),children:M[e.material_id]>=e.required_quantity_meters?"\u2705 Complete":"".concat((M[e.material_id]/e.required_quantity_meters*100).toFixed(0),"% Complete")})]}),(0,mi.jsxs)("div",{className:"text-xs text-green-200",children:["Remaining needed: ",Math.max(0,e.required_quantity_meters-M[e.material_id]).toFixed(1),"m"]})]}),e.available_widths.length>0?(0,mi.jsx)("div",{className:"overflow-hidden rounded-lg",children:(0,mi.jsxs)("table",{className:"w-full",children:[(0,mi.jsx)("thead",{className:"bg-gray-600",children:(0,mi.jsxs)("tr",{children:[(0,mi.jsx)("th",{className:"px-3 py-2 text-left text-sm font-medium text-gray-300",children:"Width (mm)"}),(0,mi.jsx)("th",{className:"px-3 py-2 text-right text-sm font-medium text-gray-300",children:"Available (m)"}),(0,mi.jsx)("th",{className:"px-3 py-2 text-center text-sm font-medium text-gray-300",children:"Match"}),(0,mi.jsx)("th",{className:"px-3 py-2 text-center text-sm font-medium text-gray-300",children:"Actions"})]})}),(0,mi.jsx)("tbody",{className:"divide-y divide-gray-600",children:e.available_widths.filter(t=>Math.abs(t.slit_width_mm-e.required_width_mm)<=10).map((t,a)=>(0,mi.jsxs)("tr",{className:"hover:bg-gray-600",children:[(0,mi.jsxs)("td",{className:"px-3 py-2 text-sm font-medium text-white",children:[t.slit_width_mm,"mm"]}),(0,mi.jsx)("td",{className:"px-3 py-2 text-right text-sm text-white",children:t.available_quantity_meters.toFixed(2)}),(0,mi.jsx)("td",{className:"px-3 py-2 text-center",children:t.slit_width_mm===e.required_width_mm?(0,mi.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-green-900 text-green-300",children:"\u2713 Exact Match"}):Math.abs(t.slit_width_mm-e.required_width_mm)<=5?(0,mi.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-yellow-900 text-yellow-300",children:["\xb1 Close Match (",Math.abs(t.slit_width_mm-e.required_width_mm),"mm off)"]}):t.slit_width_mm>e.required_width_mm?(0,mi.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-blue-900 text-blue-300",children:["\u2191 Wider (",t.slit_width_mm-e.required_width_mm,"mm over)"]}):(0,mi.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-red-900 text-red-300",children:["\u2193 Narrower (",e.required_width_mm-t.slit_width_mm,"mm under)"]})}),(0,mi.jsx)("td",{className:"px-3 py-2 text-center",children:t.available_quantity_meters>0&&(0,mi.jsxs)("div",{className:"flex flex-col items-center space-y-1",children:[(0,mi.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,mi.jsx)("input",{type:"number",step:"0.1",max:Math.min(t.available_quantity_meters,e.required_quantity_meters),defaultValue:Math.min(t.available_quantity_meters,e.required_quantity_meters-(M[e.material_id]||0)).toFixed(1),placeholder:"Meters",className:"misty-input w-24 text-sm",id:"allocate-".concat(e.material_id,"-").concat(a)}),(0,mi.jsx)("button",{onClick:()=>{const s=document.getElementById("allocate-".concat(e.material_id,"-").concat(a)),n=parseFloat(s.value);if(n>0){const a=t.entries[0];(async(e,t,a)=>{try{const s={slit_width_id:t,order_id:"pending-order-".concat(Date.now()),required_quantity_meters:parseFloat(a)};console.log("Allocating slit width:",s);const n=await Jr(s);if(n.data.success){const n=(M[e]||0)+parseFloat(a);I(t=>m(m({},t),{},{[e]:n}));const r=A.materials.find(t=>t.material_id===e),i=r?r.required_quantity_meters:0;if(n>=i)Bt.success("\u2705 Correct Quantity Of Material Allocated!\n"+"Formula: ".concat(r.order_quantity||F.remainingQuantity," units \xd7 ").concat(r.quantity_per_unit,"m/unit = ").concat(i.toFixed(1),"m\n")+"Allocated: ".concat(n.toFixed(1),"m \u2713"));else{const e=i-n;Bt.warning("\u26a0\ufe0f Further Material Requires Slitting!\n"+"Formula: ".concat(r.order_quantity||F.remainingQuantity," units \xd7 ").concat(r.quantity_per_unit,"m/unit = ").concat(i.toFixed(1),"m\n")+"Still need: ".concat(e.toFixed(1),"m (allocated ").concat(n.toFixed(1),"m)"))}const l={material_id:e,material_name:r.material_name,layer_position:r.layer_position,slit_width_id:t,allocated_quantity:parseFloat(a),allocation_timestamp:(new Date).toISOString(),order_reference:s.order_id,formula_used:r.calculation_formula};console.log("Material allocation recorded:",l),await V(A.materials)}else Bt.error(n.data.message||"Failed to allocate slit width")}catch(r){var s,n;console.error("Failed to allocate slit width:",r);const e=(null===(s=r.response)||void 0===s||null===(n=s.data)||void 0===n?void 0:n.message)||r.message||"Network error occurred";Bt.error("Failed to allocate slit width: ".concat(e))}})(e.material_id,a.id,n),s.value=""}else Bt.error("Please enter a valid quantity greater than 0")},className:"misty-button misty-button-primary text-xs py-1 px-3",children:"Allocate"})]}),(0,mi.jsxs)("div",{className:"text-xs text-center",children:[(0,mi.jsxs)("div",{className:"text-gray-400",children:["Need: ",(e.required_quantity_meters-(M[e.material_id]||0)).toFixed(1),"m"]}),(0,mi.jsxs)("div",{className:"text-blue-300 text-xs",children:["Formula: ",e.order_quantity||F.remainingQuantity," \xd7 ",e.quantity_per_unit,"m"]})]})]})})]},a))})]})}):(0,mi.jsx)("div",{className:"p-8 text-center text-gray-400",children:0===e.available_widths.length?(0,mi.jsxs)(mi.Fragment,{children:[(0,mi.jsx)("div",{className:"text-lg mb-2",children:"No slit widths available"}),(0,mi.jsxs)("p",{className:"text-sm",children:["Required width: ",e.required_width_mm,"mm \xd7 ",e.required_quantity_meters.toFixed(1),"m"]}),(0,mi.jsx)("p",{className:"text-xs mt-2 text-yellow-400",children:"This material will need to be slit from raw stock"})]}):(0,mi.jsxs)(mi.Fragment,{children:[(0,mi.jsx)("div",{className:"text-lg mb-2",children:"No relevant slit widths available"}),(0,mi.jsxs)("p",{className:"text-sm",children:["Required width: ",e.required_width_mm,"mm \xd7 ",e.required_quantity_meters.toFixed(1),"m"]}),(0,mi.jsx)("p",{className:"text-xs mt-2 text-yellow-400",children:"Available widths are too different from requirement (>10mm difference)"}),(0,mi.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Material will need to be slit to ",e.required_width_mm,"mm width"]})]})})]},t))}),(0,mi.jsxs)("div",{className:"flex justify-between mt-6 pt-4 border-t border-gray-600",children:[(0,mi.jsxs)("div",{className:"text-sm text-gray-400",children:[(0,mi.jsx)("p",{children:"\u2022 Exact matches are preferred for optimal material usage"}),(0,mi.jsx)("p",{children:"\u2022 Close matches (\xb15mm) may be acceptable depending on specifications"}),(0,mi.jsx)("p",{children:"\u2022 Allocated slit widths will be reserved for this production order"})]}),(0,mi.jsxs)("div",{className:"flex space-x-3",children:[(0,mi.jsx)("button",{onClick:()=>P(!1),className:"misty-button misty-button-secondary",children:"Close"}),(0,mi.jsx)("button",{onClick:()=>{P(!1),Bt.success("Raw materials allocated for production. Continue with order creation.")},className:"misty-button misty-button-primary",children:"Continue Order"})]})]})]})})]})},go=["title","titleId"];function yo(e,t){let{title:a,titleId:s}=e,r=l(e,go);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},r),a?n.createElement("title",{id:s},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const bo=n.forwardRef(yo),vo=()=>{const[e,t]=(0,n.useState)([]),[a,s]=(0,n.useState)(!0),[r,i]=(0,n.useState)(""),[l,o]=(0,n.useState)(""),[c,d]=(0,n.useState)(!1),[u,m]=(0,n.useState)(!1),[p,h]=(0,n.useState)(null);(0,n.useEffect)(()=>{x()},[l]);const x=async()=>{try{s(!0);const e=await tr(l);t(e.data)}catch(e){console.error("Failed to load orders:",e),Bt.error("Failed to load orders")}finally{s(!1)}},f=()=>{h(null),d(!0)},g=()=>{m(!1),h(null)},y=async(e,t)=>{try{const a=await Nr(e),s=window.URL.createObjectURL(new Blob([a.data])),n=document.createElement("a");n.href=s,n.download="acknowledgment_".concat(t,".pdf"),document.body.appendChild(n),n.click(),document.body.removeChild(n),window.URL.revokeObjectURL(s),Bt.success("Acknowledgment downloaded successfully")}catch(a){console.error("Failed to download acknowledgment:",a),Bt.error("Failed to download acknowledgment")}},b=e.filter(e=>e.order_number.toLowerCase().includes(r.toLowerCase())||e.client_name.toLowerCase().includes(r.toLowerCase())),v=e=>{switch(e){case"active":return"text-green-400";case"completed":return"text-blue-400";case"cancelled":return"text-red-400";case"overdue":return"text-orange-400";default:return"text-gray-400"}},j=e=>{switch(e){case"order_entered":return"bg-blue-600";case"pending_material":return"bg-orange-600";case"paper_slitting":return"bg-purple-600";case"winding":return"bg-indigo-600";case"finishing":return"bg-green-600";case"delivery":return"bg-teal-600";case"invoicing":return"bg-yellow-600";default:return"bg-gray-600"}};return a?(0,mi.jsx)(hl,{children:(0,mi.jsx)("div",{className:"p-8",children:(0,mi.jsxs)("div",{className:"animate-pulse",children:[(0,mi.jsx)("div",{className:"h-8 bg-gray-700 rounded w-1/4 mb-8"}),(0,mi.jsx)("div",{className:"space-y-4",children:[...Array(5)].map((e,t)=>(0,mi.jsx)("div",{className:"h-16 bg-gray-700 rounded"},t))})]})})}):(0,mi.jsxs)(hl,{children:[(0,mi.jsxs)("div",{className:"p-8","data-testid":"order-management",children:[(0,mi.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"Order Management"}),(0,mi.jsx)("p",{className:"text-gray-400",children:"Track and manage all manufacturing orders"})]}),(0,mi.jsxs)("button",{onClick:f,className:"misty-button misty-button-primary flex items-center","data-testid":"add-order-button",children:[(0,mi.jsx)(Cl,{className:"h-5 w-5 mr-2"}),"New Order"]})]}),(0,mi.jsxs)("div",{className:"mb-6 flex flex-col sm:flex-row gap-4",children:[(0,mi.jsxs)("div",{className:"relative flex-1",children:[(0,mi.jsx)(io,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,mi.jsx)("input",{type:"text",placeholder:"",className:"misty-input pl-16 w-full",value:r,onChange:e=>i(e.target.value),"data-testid":"order-search"})]}),(0,mi.jsxs)("select",{className:"misty-select",value:l,onChange:e=>o(e.target.value),"data-testid":"status-filter",children:[(0,mi.jsx)("option",{value:"",children:"All Statuses"}),(0,mi.jsx)("option",{value:"active",children:"Active"}),(0,mi.jsx)("option",{value:"completed",children:"Completed"}),(0,mi.jsx)("option",{value:"cancelled",children:"Cancelled"}),(0,mi.jsx)("option",{value:"overdue",children:"Overdue"})]})]}),b.length>0?(0,mi.jsx)("div",{className:"misty-table",children:(0,mi.jsxs)("table",{className:"w-full",children:[(0,mi.jsx)("thead",{children:(0,mi.jsxs)("tr",{children:[(0,mi.jsx)("th",{children:"Order #"}),(0,mi.jsx)("th",{children:"Client"}),(0,mi.jsx)("th",{children:"Amount"}),(0,mi.jsx)("th",{children:"Status"}),(0,mi.jsx)("th",{children:"Stage"}),(0,mi.jsx)("th",{children:"Due Date"}),(0,mi.jsx)("th",{children:"Actions"})]})}),(0,mi.jsx)("tbody",{children:b.map(e=>{const t=new Date(e.due_date)<new Date&&"active"===e.status;return(0,mi.jsxs)("tr",{"data-testid":"order-row-".concat(e.id),className:t?"bg-red-900/20":"",children:[(0,mi.jsx)("td",{className:"font-medium",children:(0,mi.jsxs)("div",{children:[e.order_number,t&&(0,mi.jsx)("span",{className:"text-red-400 text-xs block",children:"Overdue"})]})}),(0,mi.jsx)("td",{children:e.client_name}),(0,mi.jsx)("td",{className:"font-medium text-yellow-400",children:li(e.total_amount)}),(0,mi.jsx)("td",{children:(0,mi.jsx)("span",{className:"capitalize ".concat(v(e.status)),children:e.status})}),(0,mi.jsx)("td",{children:(0,mi.jsx)("span",{className:"text-xs px-2 py-1 rounded text-white ".concat(j(e.current_stage)),children:ci[e.current_stage]||e.current_stage})}),(0,mi.jsx)("td",{children:(0,mi.jsx)("div",{className:t?"text-red-400":"",children:oi(e.due_date)})}),(0,mi.jsx)("td",{children:(0,mi.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,mi.jsx)("button",{onClick:()=>(e=>{h(e),m(!0)})(e),className:"text-gray-400 hover:text-yellow-400 transition-colors","data-testid":"view-order-".concat(e.id),title:"View details",children:(0,mi.jsx)(bo,{className:"h-4 w-4"})}),(0,mi.jsx)("button",{onClick:()=>(e=>{h(e),d(!0)})(e),className:"text-gray-400 hover:text-blue-400 transition-colors","data-testid":"edit-order-".concat(e.id),title:"Edit order",children:(0,mi.jsx)(ho,{className:"h-4 w-4"})}),(0,mi.jsx)("button",{onClick:()=>y(e.id,e.order_number),className:"text-gray-400 hover:text-green-400 transition-colors","data-testid":"download-acknowledgment-".concat(e.id),title:"Download acknowledgment",children:(0,mi.jsx)(eo,{className:"h-4 w-4"})})]})})]},e.id)})})]})}):(0,mi.jsxs)("div",{className:"text-center py-12",children:[(0,mi.jsx)(eo,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,mi.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-300",children:r||l?"No orders found":"No orders"}),(0,mi.jsx)("p",{className:"mt-1 text-sm text-gray-400",children:r||l?"Try adjusting your search criteria.":"Get started by creating your first order."}),!r&&!l&&(0,mi.jsx)("div",{className:"mt-6",children:(0,mi.jsxs)("button",{onClick:f,className:"misty-button misty-button-primary",children:[(0,mi.jsx)(Cl,{className:"h-5 w-5 mr-2"}),"Create Order"]})})]})]}),c&&(0,mi.jsx)(fo,{order:p,onClose:()=>{d(!1),h(null)},onSuccess:()=>{x()}}),u&&p&&(0,mi.jsx)("div",{className:"modal-overlay",children:(0,mi.jsx)("div",{className:"modal-content max-w-4xl max-h-[90vh] overflow-y-auto",children:(0,mi.jsxs)("div",{className:"p-6",children:[(0,mi.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,mi.jsxs)("h2",{className:"text-xl font-bold text-white",children:["Order Details - ",p.order_number]}),(0,mi.jsx)("button",{onClick:g,className:"text-gray-400 hover:text-white transition-colors",children:(0,mi.jsx)(nl,{className:"h-6 w-6"})})]}),(0,mi.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("h3",{className:"font-semibold text-white mb-3",children:"Order Information"}),(0,mi.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,mi.jsxs)("div",{className:"flex justify-between",children:[(0,mi.jsx)("span",{className:"text-gray-400",children:"Client:"}),(0,mi.jsx)("span",{className:"text-white",children:p.client_name})]}),(0,mi.jsxs)("div",{className:"flex justify-between",children:[(0,mi.jsx)("span",{className:"text-gray-400",children:"Total:"}),(0,mi.jsx)("span",{className:"text-yellow-400 font-medium",children:li(p.total_amount)})]}),(0,mi.jsxs)("div",{className:"flex justify-between",children:[(0,mi.jsx)("span",{className:"text-gray-400",children:"Status:"}),(0,mi.jsx)("span",{className:"capitalize ".concat(v(p.status)),children:p.status})]}),(0,mi.jsxs)("div",{className:"flex justify-between",children:[(0,mi.jsx)("span",{className:"text-gray-400",children:"Stage:"}),(0,mi.jsx)("span",{className:"text-xs px-2 py-1 rounded text-white ".concat(j(p.current_stage)),children:ci[p.current_stage]})]}),(0,mi.jsxs)("div",{className:"flex justify-between",children:[(0,mi.jsx)("span",{className:"text-gray-400",children:"Due Date:"}),(0,mi.jsx)("span",{className:"text-white",children:oi(p.due_date)})]}),(0,mi.jsxs)("div",{className:"flex justify-between",children:[(0,mi.jsx)("span",{className:"text-gray-400",children:"Created:"}),(0,mi.jsx)("span",{className:"text-white",children:oi(p.created_at)})]})]})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("h3",{className:"font-semibold text-white mb-3",children:"Delivery Information"}),(0,mi.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("span",{className:"text-gray-400",children:"Address:"}),(0,mi.jsx)("p",{className:"text-white mt-1",children:p.delivery_address||"Use client default address"})]}),p.delivery_instructions&&(0,mi.jsxs)("div",{children:[(0,mi.jsx)("span",{className:"text-gray-400",children:"Instructions:"}),(0,mi.jsx)("p",{className:"text-white mt-1",children:p.delivery_instructions})]})]})]})]}),(0,mi.jsxs)("div",{className:"mb-6",children:[(0,mi.jsx)("h3",{className:"font-semibold text-white mb-3",children:"Order Items"}),(0,mi.jsx)("div",{className:"misty-table",children:(0,mi.jsxs)("table",{className:"w-full",children:[(0,mi.jsx)("thead",{children:(0,mi.jsxs)("tr",{children:[(0,mi.jsx)("th",{children:"Product"}),(0,mi.jsx)("th",{children:"Quantity"}),(0,mi.jsx)("th",{children:"Unit Price"}),(0,mi.jsx)("th",{children:"Total"})]})}),(0,mi.jsxs)("tbody",{children:[p.items.map((e,t)=>(0,mi.jsxs)("tr",{children:[(0,mi.jsx)("td",{children:e.product_name}),(0,mi.jsx)("td",{children:e.quantity}),(0,mi.jsx)("td",{children:li(e.unit_price)}),(0,mi.jsx)("td",{className:"text-yellow-400 font-medium",children:li(e.total_price)})]},t)),(0,mi.jsxs)("tr",{className:"border-t-2 border-gray-600",children:[(0,mi.jsx)("td",{colSpan:"3",className:"text-right font-medium",children:"Subtotal:"}),(0,mi.jsx)("td",{className:"font-medium",children:li(p.subtotal)})]}),(0,mi.jsxs)("tr",{children:[(0,mi.jsx)("td",{colSpan:"3",className:"text-right font-medium",children:"GST (10%):"}),(0,mi.jsx)("td",{className:"font-medium",children:li(p.gst)})]}),(0,mi.jsxs)("tr",{children:[(0,mi.jsx)("td",{colSpan:"3",className:"text-right font-bold text-lg",children:"Total:"}),(0,mi.jsx)("td",{className:"font-bold text-lg text-yellow-400",children:li(p.total_amount)})]})]})]})})]}),p.notes&&(0,mi.jsxs)("div",{className:"mb-6",children:[(0,mi.jsx)("h3",{className:"font-semibold text-white mb-3",children:"Notes"}),(0,mi.jsx)("p",{className:"text-gray-300 bg-gray-700 p-3 rounded",children:p.notes})]}),(0,mi.jsxs)("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-700",children:[(0,mi.jsxs)("button",{onClick:()=>y(p.id,p.order_number),className:"misty-button misty-button-secondary flex items-center",children:[(0,mi.jsx)(eo,{className:"h-4 w-4 mr-2"}),"Download Acknowledgment"]}),(0,mi.jsx)("button",{onClick:g,className:"misty-button misty-button-primary",children:"Close"})]})]})})})]})};var jo,wo=Object.defineProperty,_o=Object.getOwnPropertySymbols,No=Object.prototype.hasOwnProperty,ko=Object.prototype.propertyIsEnumerable,So=(e,t,a)=>t in e?wo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Co=(e,t)=>{for(var a in t||(t={}))No.call(t,a)&&So(e,a,t[a]);if(_o)for(var a of _o(t))ko.call(t,a)&&So(e,a,t[a]);return e},Eo=(e,t)=>{var a={};for(var s in e)No.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(null!=e&&_o)for(var s of _o(e))t.indexOf(s)<0&&ko.call(e,s)&&(a[s]=e[s]);return a};(e=>{const t=class t{constructor(e,a,s,r){if(this.version=e,this.errorCorrectionLevel=a,this.modules=[],this.isFunction=[],e<t.MIN_VERSION||e>t.MAX_VERSION)throw new RangeError("Version value out of range");if(r<-1||r>7)throw new RangeError("Mask value out of range");this.size=4*e+17;let i=[];for(let t=0;t<this.size;t++)i.push(!1);for(let t=0;t<this.size;t++)this.modules.push(i.slice()),this.isFunction.push(i.slice());this.drawFunctionPatterns();const l=this.addEccAndInterleave(s);if(this.drawCodewords(l),-1==r){let e=1e9;for(let t=0;t<8;t++){this.applyMask(t),this.drawFormatBits(t);const a=this.getPenaltyScore();a<e&&(r=t,e=a),this.applyMask(t)}}n(0<=r&&r<=7),this.mask=r,this.applyMask(r),this.drawFormatBits(r),this.isFunction=[]}static encodeText(a,s){const n=e.QrSegment.makeSegments(a);return t.encodeSegments(n,s)}static encodeBinary(a,s){const n=e.QrSegment.makeBytes(a);return t.encodeSegments([n],s)}static encodeSegments(e,s){let r,l,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:40,d=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,u=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];if(!(t.MIN_VERSION<=o&&o<=c&&c<=t.MAX_VERSION)||d<-1||d>7)throw new RangeError("Invalid value");for(r=o;;r++){const a=8*t.getNumDataCodewords(r,s),n=i.getTotalBits(e,r);if(n<=a){l=n;break}if(r>=c)throw new RangeError("Data too long")}for(const a of[t.Ecc.MEDIUM,t.Ecc.QUARTILE,t.Ecc.HIGH])u&&l<=8*t.getNumDataCodewords(r,a)&&(s=a);let m=[];for(const t of e){a(t.mode.modeBits,4,m),a(t.numChars,t.mode.numCharCountBits(r),m);for(const e of t.getData())m.push(e)}n(m.length==l);const p=8*t.getNumDataCodewords(r,s);n(m.length<=p),a(0,Math.min(4,p-m.length),m),a(0,(8-m.length%8)%8,m),n(m.length%8==0);for(let t=236;m.length<p;t^=253)a(t,8,m);let h=[];for(;8*h.length<m.length;)h.push(0);return m.forEach((e,t)=>h[t>>>3]|=e<<7-(7&t)),new t(r,s,h,d)}getModule(e,t){return 0<=e&&e<this.size&&0<=t&&t<this.size&&this.modules[t][e]}getModules(){return this.modules}drawFunctionPatterns(){for(let a=0;a<this.size;a++)this.setFunctionModule(6,a,a%2==0),this.setFunctionModule(a,6,a%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const e=this.getAlignmentPatternPositions(),t=e.length;for(let a=0;a<t;a++)for(let s=0;s<t;s++)0==a&&0==s||0==a&&s==t-1||a==t-1&&0==s||this.drawAlignmentPattern(e[a],e[s]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(e){const t=this.errorCorrectionLevel.formatBits<<3|e;let a=t;for(let s=0;s<10;s++)a=a<<1^1335*(a>>>9);const r=21522^(t<<10|a);n(r>>>15==0);for(let n=0;n<=5;n++)this.setFunctionModule(8,n,s(r,n));this.setFunctionModule(8,7,s(r,6)),this.setFunctionModule(8,8,s(r,7)),this.setFunctionModule(7,8,s(r,8));for(let n=9;n<15;n++)this.setFunctionModule(14-n,8,s(r,n));for(let n=0;n<8;n++)this.setFunctionModule(this.size-1-n,8,s(r,n));for(let n=8;n<15;n++)this.setFunctionModule(8,this.size-15+n,s(r,n));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let e=this.version;for(let a=0;a<12;a++)e=e<<1^7973*(e>>>11);const t=this.version<<12|e;n(t>>>18==0);for(let a=0;a<18;a++){const e=s(t,a),n=this.size-11+a%3,r=Math.floor(a/3);this.setFunctionModule(n,r,e),this.setFunctionModule(r,n,e)}}drawFinderPattern(e,t){for(let a=-4;a<=4;a++)for(let s=-4;s<=4;s++){const n=Math.max(Math.abs(s),Math.abs(a)),r=e+s,i=t+a;0<=r&&r<this.size&&0<=i&&i<this.size&&this.setFunctionModule(r,i,2!=n&&4!=n)}}drawAlignmentPattern(e,t){for(let a=-2;a<=2;a++)for(let s=-2;s<=2;s++)this.setFunctionModule(e+s,t+a,1!=Math.max(Math.abs(s),Math.abs(a)))}setFunctionModule(e,t,a){this.modules[t][e]=a,this.isFunction[t][e]=!0}addEccAndInterleave(e){const a=this.version,s=this.errorCorrectionLevel;if(e.length!=t.getNumDataCodewords(a,s))throw new RangeError("Invalid argument");const r=t.NUM_ERROR_CORRECTION_BLOCKS[s.ordinal][a],i=t.ECC_CODEWORDS_PER_BLOCK[s.ordinal][a],l=Math.floor(t.getNumRawDataModules(a)/8),o=r-l%r,c=Math.floor(l/r);let d=[];const u=t.reedSolomonComputeDivisor(i);for(let n=0,p=0;n<r;n++){let a=e.slice(p,p+c-i+(n<o?0:1));p+=a.length;const s=t.reedSolomonComputeRemainder(a,u);n<o&&a.push(0),d.push(a.concat(s))}let m=[];for(let t=0;t<d[0].length;t++)d.forEach((e,a)=>{(t!=c-i||a>=o)&&m.push(e[t])});return n(m.length==l),m}drawCodewords(e){if(e.length!=Math.floor(t.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let a=0;for(let t=this.size-1;t>=1;t-=2){6==t&&(t=5);for(let n=0;n<this.size;n++)for(let r=0;r<2;r++){const i=t-r,l=0==(t+1&2)?this.size-1-n:n;!this.isFunction[l][i]&&a<8*e.length&&(this.modules[l][i]=s(e[a>>>3],7-(7&a)),a++)}}n(a==8*e.length)}applyMask(e){if(e<0||e>7)throw new RangeError("Mask value out of range");for(let t=0;t<this.size;t++)for(let a=0;a<this.size;a++){let s;switch(e){case 0:s=(a+t)%2==0;break;case 1:s=t%2==0;break;case 2:s=a%3==0;break;case 3:s=(a+t)%3==0;break;case 4:s=(Math.floor(a/3)+Math.floor(t/2))%2==0;break;case 5:s=a*t%2+a*t%3==0;break;case 6:s=(a*t%2+a*t%3)%2==0;break;case 7:s=((a+t)%2+a*t%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[t][a]&&s&&(this.modules[t][a]=!this.modules[t][a])}}getPenaltyScore(){let e=0;for(let n=0;n<this.size;n++){let a=!1,s=0,r=[0,0,0,0,0,0,0];for(let i=0;i<this.size;i++)this.modules[n][i]==a?(s++,5==s?e+=t.PENALTY_N1:s>5&&e++):(this.finderPenaltyAddHistory(s,r),a||(e+=this.finderPenaltyCountPatterns(r)*t.PENALTY_N3),a=this.modules[n][i],s=1);e+=this.finderPenaltyTerminateAndCount(a,s,r)*t.PENALTY_N3}for(let n=0;n<this.size;n++){let a=!1,s=0,r=[0,0,0,0,0,0,0];for(let i=0;i<this.size;i++)this.modules[i][n]==a?(s++,5==s?e+=t.PENALTY_N1:s>5&&e++):(this.finderPenaltyAddHistory(s,r),a||(e+=this.finderPenaltyCountPatterns(r)*t.PENALTY_N3),a=this.modules[i][n],s=1);e+=this.finderPenaltyTerminateAndCount(a,s,r)*t.PENALTY_N3}for(let n=0;n<this.size-1;n++)for(let a=0;a<this.size-1;a++){const s=this.modules[n][a];s==this.modules[n][a+1]&&s==this.modules[n+1][a]&&s==this.modules[n+1][a+1]&&(e+=t.PENALTY_N2)}let a=0;for(const t of this.modules)a=t.reduce((e,t)=>e+(t?1:0),a);const s=this.size*this.size,r=Math.ceil(Math.abs(20*a-10*s)/s)-1;return n(0<=r&&r<=9),e+=r*t.PENALTY_N4,n(0<=e&&e<=2568888),e}getAlignmentPatternPositions(){if(1==this.version)return[];{const e=Math.floor(this.version/7)+2,t=32==this.version?26:2*Math.ceil((4*this.version+4)/(2*e-2));let a=[6];for(let s=this.size-7;a.length<e;s-=t)a.splice(1,0,s);return a}}static getNumRawDataModules(e){if(e<t.MIN_VERSION||e>t.MAX_VERSION)throw new RangeError("Version number out of range");let a=(16*e+128)*e+64;if(e>=2){const t=Math.floor(e/7)+2;a-=(25*t-10)*t-55,e>=7&&(a-=36)}return n(208<=a&&a<=29648),a}static getNumDataCodewords(e,a){return Math.floor(t.getNumRawDataModules(e)/8)-t.ECC_CODEWORDS_PER_BLOCK[a.ordinal][e]*t.NUM_ERROR_CORRECTION_BLOCKS[a.ordinal][e]}static reedSolomonComputeDivisor(e){if(e<1||e>255)throw new RangeError("Degree out of range");let a=[];for(let t=0;t<e-1;t++)a.push(0);a.push(1);let s=1;for(let n=0;n<e;n++){for(let e=0;e<a.length;e++)a[e]=t.reedSolomonMultiply(a[e],s),e+1<a.length&&(a[e]^=a[e+1]);s=t.reedSolomonMultiply(s,2)}return a}static reedSolomonComputeRemainder(e,a){let s=a.map(e=>0);for(const n of e){const e=n^s.shift();s.push(0),a.forEach((a,n)=>s[n]^=t.reedSolomonMultiply(a,e))}return s}static reedSolomonMultiply(e,t){if(e>>>8!=0||t>>>8!=0)throw new RangeError("Byte out of range");let a=0;for(let s=7;s>=0;s--)a=a<<1^285*(a>>>7),a^=(t>>>s&1)*e;return n(a>>>8==0),a}finderPenaltyCountPatterns(e){const t=e[1];n(t<=3*this.size);const a=t>0&&e[2]==t&&e[3]==3*t&&e[4]==t&&e[5]==t;return(a&&e[0]>=4*t&&e[6]>=t?1:0)+(a&&e[6]>=4*t&&e[0]>=t?1:0)}finderPenaltyTerminateAndCount(e,t,a){return e&&(this.finderPenaltyAddHistory(t,a),t=0),t+=this.size,this.finderPenaltyAddHistory(t,a),this.finderPenaltyCountPatterns(a)}finderPenaltyAddHistory(e,t){0==t[0]&&(e+=this.size),t.pop(),t.unshift(e)}};t.MIN_VERSION=1,t.MAX_VERSION=40,t.PENALTY_N1=3,t.PENALTY_N2=3,t.PENALTY_N3=40,t.PENALTY_N4=10,t.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],t.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]];function a(e,t,a){if(t<0||t>31||e>>>t!=0)throw new RangeError("Value out of range");for(let s=t-1;s>=0;s--)a.push(e>>>s&1)}function s(e,t){return 0!=(e>>>t&1)}function n(e){if(!e)throw new Error("Assertion error")}e.QrCode=t;const r=class e{constructor(e,t,a){if(this.mode=e,this.numChars=t,this.bitData=a,t<0)throw new RangeError("Invalid argument");this.bitData=a.slice()}static makeBytes(t){let s=[];for(const e of t)a(e,8,s);return new e(e.Mode.BYTE,t.length,s)}static makeNumeric(t){if(!e.isNumeric(t))throw new RangeError("String contains non-numeric characters");let s=[];for(let e=0;e<t.length;){const n=Math.min(t.length-e,3);a(parseInt(t.substring(e,e+n),10),3*n+1,s),e+=n}return new e(e.Mode.NUMERIC,t.length,s)}static makeAlphanumeric(t){if(!e.isAlphanumeric(t))throw new RangeError("String contains unencodable characters in alphanumeric mode");let s,n=[];for(s=0;s+2<=t.length;s+=2){let r=45*e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(s));r+=e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(s+1)),a(r,11,n)}return s<t.length&&a(e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(s)),6,n),new e(e.Mode.ALPHANUMERIC,t.length,n)}static makeSegments(t){return""==t?[]:e.isNumeric(t)?[e.makeNumeric(t)]:e.isAlphanumeric(t)?[e.makeAlphanumeric(t)]:[e.makeBytes(e.toUtf8ByteArray(t))]}static makeEci(t){let s=[];if(t<0)throw new RangeError("ECI assignment value out of range");if(t<128)a(t,8,s);else if(t<16384)a(2,2,s),a(t,14,s);else{if(!(t<1e6))throw new RangeError("ECI assignment value out of range");a(6,3,s),a(t,21,s)}return new e(e.Mode.ECI,0,s)}static isNumeric(t){return e.NUMERIC_REGEX.test(t)}static isAlphanumeric(t){return e.ALPHANUMERIC_REGEX.test(t)}getData(){return this.bitData.slice()}static getTotalBits(e,t){let a=0;for(const s of e){const e=s.mode.numCharCountBits(t);if(s.numChars>=1<<e)return 1/0;a+=4+e+s.bitData.length}return a}static toUtf8ByteArray(e){e=encodeURI(e);let t=[];for(let a=0;a<e.length;a++)"%"!=e.charAt(a)?t.push(e.charCodeAt(a)):(t.push(parseInt(e.substring(a+1,a+3),16)),a+=2);return t}};r.NUMERIC_REGEX=/^[0-9]*$/,r.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,r.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let i=r;e.QrSegment=r})(jo||(jo={})),(e=>{let t;(e=>{const t=class{constructor(e,t){this.ordinal=e,this.formatBits=t}};t.LOW=new t(0,1),t.MEDIUM=new t(1,0),t.QUARTILE=new t(2,3),t.HIGH=new t(3,2);e.Ecc=t})(t=e.QrCode||(e.QrCode={}))})(jo||(jo={})),(e=>{let t;(e=>{const t=class{constructor(e,t){this.modeBits=e,this.numBitsCharCount=t}numCharCountBits(e){return this.numBitsCharCount[Math.floor((e+7)/17)]}};t.NUMERIC=new t(1,[10,12,14]),t.ALPHANUMERIC=new t(2,[9,11,13]),t.BYTE=new t(4,[8,16,16]),t.KANJI=new t(8,[8,10,12]),t.ECI=new t(7,[0,0,0]);e.Mode=t})(t=e.QrSegment||(e.QrSegment={}))})(jo||(jo={}));var Do=jo,Po={L:Do.QrCode.Ecc.LOW,M:Do.QrCode.Ecc.MEDIUM,Q:Do.QrCode.Ecc.QUARTILE,H:Do.QrCode.Ecc.HIGH},Ao=128,To="L",Lo="#FFFFFF",Ro="#000000",Fo=!1,Oo=1;function Mo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const a=[];return e.forEach(function(e,s){let n=null;e.forEach(function(r,i){if(!r&&null!==n)return a.push("M".concat(n+t," ").concat(s+t,"h").concat(i-n,"v1H").concat(n+t,"z")),void(n=null);if(i!==e.length-1)r&&null===n&&(n=i);else{if(!r)return;null===n?a.push("M".concat(i+t,",").concat(s+t," h1v1H").concat(i+t,"z")):a.push("M".concat(n+t,",").concat(s+t," h").concat(i+1-n,"v1H").concat(n+t,"z"))}})}),a.join("")}function Io(e,t){return e.slice().map((e,a)=>a<t.y||a>=t.y+t.h?e:e.map((e,a)=>(a<t.x||a>=t.x+t.w)&&e))}function qo(e){let{value:t,level:a,minVersion:s,includeMargin:r,marginSize:i,imageSettings:l,size:o,boostLevel:c}=e,d=n.useMemo(()=>{const e=(Array.isArray(t)?t:[t]).reduce((e,t)=>(e.push(...Do.QrSegment.makeSegments(t)),e),[]);return Do.QrCode.encodeSegments(e,Po[a],s,void 0,void 0,c)},[t,a,s,c]);const{cells:u,margin:m,numCells:p,calculatedImageSettings:h}=n.useMemo(()=>{let e=d.getModules();const t=function(e,t){return null!=t?Math.max(Math.floor(t),0):e?4:0}(r,i),a=e.length+2*t,s=function(e,t,a,s){if(null==s)return null;const n=e.length+2*a,r=Math.floor(.1*t),i=n/t,l=(s.width||r)*i,o=(s.height||r)*i,c=null==s.x?e.length/2-l/2:s.x*i,d=null==s.y?e.length/2-o/2:s.y*i,u=null==s.opacity?1:s.opacity;let m=null;if(s.excavate){let e=Math.floor(c),t=Math.floor(d);m={x:e,y:t,w:Math.ceil(l+c-e),h:Math.ceil(o+d-t)}}return{x:c,y:d,h:o,w:l,excavation:m,opacity:u,crossOrigin:s.crossOrigin}}(e,o,t,l);return{cells:e,margin:t,numCells:a,calculatedImageSettings:s}},[d,o,l,r,i]);return{qrcode:d,margin:m,cells:u,numCells:p,calculatedImageSettings:h}}var Bo=function(){try{(new Path2D).addPath(new Path2D)}catch(Zf){return!1}return!0}(),zo=n.forwardRef(function(e,t){const a=e,{value:s,size:r=Ao,level:i=To,bgColor:l=Lo,fgColor:o=Ro,includeMargin:c=Fo,minVersion:d=Oo,boostLevel:u,marginSize:m,imageSettings:p}=a,h=Eo(a,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:x}=h,f=Eo(h,["style"]),g=null==p?void 0:p.src,y=n.useRef(null),b=n.useRef(null),v=n.useCallback(e=>{y.current=e,"function"===typeof t?t(e):t&&(t.current=e)},[t]),[j,w]=n.useState(!1),{margin:_,cells:N,numCells:k,calculatedImageSettings:S}=qo({value:s,level:i,minVersion:d,boostLevel:u,includeMargin:c,marginSize:m,imageSettings:p,size:r});n.useEffect(()=>{if(null!=y.current){const e=y.current,t=e.getContext("2d");if(!t)return;let a=N;const s=b.current,n=null!=S&&null!==s&&s.complete&&0!==s.naturalHeight&&0!==s.naturalWidth;n&&null!=S.excavation&&(a=Io(N,S.excavation));const i=window.devicePixelRatio||1;e.height=e.width=r*i;const c=r/k*i;t.scale(c,c),t.fillStyle=l,t.fillRect(0,0,k,k),t.fillStyle=o,Bo?t.fill(new Path2D(Mo(a,_))):N.forEach(function(e,a){e.forEach(function(e,s){e&&t.fillRect(s+_,a+_,1,1)})}),S&&(t.globalAlpha=S.opacity),n&&t.drawImage(s,S.x+_,S.y+_,S.w,S.h)}}),n.useEffect(()=>{w(!1)},[g]);const C=Co({height:r,width:r},x);let E=null;return null!=g&&(E=n.createElement("img",{src:g,key:g,style:{display:"none"},onLoad:()=>{w(!0)},ref:b,crossOrigin:null==S?void 0:S.crossOrigin})),n.createElement(n.Fragment,null,n.createElement("canvas",Co({style:C,height:r,width:r,ref:v,role:"img"},f)),E)});zo.displayName="QRCodeCanvas";var Uo=n.forwardRef(function(e,t){const a=e,{value:s,size:r=Ao,level:i=To,bgColor:l=Lo,fgColor:o=Ro,includeMargin:c=Fo,minVersion:d=Oo,boostLevel:u,title:m,marginSize:p,imageSettings:h}=a,x=Eo(a,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:f,cells:g,numCells:y,calculatedImageSettings:b}=qo({value:s,level:i,minVersion:d,boostLevel:u,includeMargin:c,marginSize:p,imageSettings:h,size:r});let v=g,j=null;null!=h&&null!=b&&(null!=b.excavation&&(v=Io(g,b.excavation)),j=n.createElement("image",{href:h.src,height:b.h,width:b.w,x:b.x+f,y:b.y+f,preserveAspectRatio:"none",opacity:b.opacity,crossOrigin:b.crossOrigin}));const w=Mo(v,f);return n.createElement("svg",Co({height:r,width:r,viewBox:"0 0 ".concat(y," ").concat(y),ref:t,role:"img"},x),!!m&&n.createElement("title",null,m),n.createElement("path",{fill:l,d:"M0,0 h".concat(y,"v").concat(y,"H0z"),shapeRendering:"crispEdges"}),n.createElement("path",{fill:o,d:w,shapeRendering:"crispEdges"}),j)});Uo.displayName="QRCodeSVG";const Wo=["title","titleId"];function Ho(e,t){let{title:a,titleId:s}=e,r=l(e,Wo);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},r),a?n.createElement("title",{id:s},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12a7.5 7.5 0 0 0 15 0m-15 0a7.5 7.5 0 1 1 15 0m-15 0H3m16.5 0H21m-1.5 0H12m-8.457 3.077 1.41-.513m14.095-5.13 1.41-.513M5.106 17.785l1.15-.964m11.49-9.642 1.149-.964M7.501 19.795l.75-1.3m7.5-12.99.75-1.3m-6.063 16.658.26-1.477m2.605-14.772.26-1.477m0 17.726-.26-1.477M10.698 4.614l-.26-1.477M16.5 19.794l-.75-1.299M7.5 4.205 12 12m6.894 5.785-1.149-.964M6.256 7.178l-1.15-.964m15.352 8.864-1.41-.513M4.954 9.435l-1.41-.514M12.002 12l-3.75 6.495"}))}const Go=n.forwardRef(Ho),Vo="order_entered",$o="pending_material",Qo="paper_slitting",Yo="winding",Jo="finishing",Zo="delivery",Xo="invoicing",Ko={paper_slitting:{name:"Paper Slitting Line",machines:["Slitter A1","Slitter B2","Slitter C3"],standardSetupTime:45,ratePerMinute:250},winding:{name:"Core Winder Line",machines:["Core Winder X1","Core Winder Y2","Core Winder Z3"],standardSetupTime:30,ratePerMinute:180},finishing:{name:"Cutting/Indexing Line",machines:["Cutter M1","Cutter N2","Index P3"],standardSetupTime:20,ratePerMinute:120},delivery:{name:"Packing/Delivery Line",machines:["Pack Station 1","Pack Station 2","Loading Dock"],standardSetupTime:15,ratePerMinute:60}},ec=e=>{let{jobId:t,stage:a,orderId:s,onClose:r,onJobStarted:i}=e;const[l,o]=(0,n.useState)(null),[c,d]=(0,n.useState)(null),[u,p]=(0,n.useState)({}),[h,x]=(0,n.useState)(!0),[f,g]=(0,n.useState)(""),[y,b]=(0,n.useState)(""),[v,j]=(0,n.useState)(!1),[w,_]=(0,n.useState)(null),[N,k]=(0,n.useState)(0),[S,C]=(0,n.useState)(!1),[E,D]=(0,n.useState)(0),[P,A]=(0,n.useState)(Date.now()),[T,L]=(0,n.useState)({setup:{name:"",date:"",isEditing:!1},production:{name:"",date:"",isEditing:!1},qc:{name:"",date:"",isEditing:!1}}),[R,F]=(0,n.useState)({type:"",tempName:""}),[O,M]=(0,n.useState)(0),[I,q]=(0,n.useState)(!1),[B,z]=(0,n.useState)(0),[U,W]=(0,n.useState)([]),[H,G]=(0,n.useState)(!1),[V,$]=(0,n.useState)({width:"",quantity:"",addToStock:!1}),[Q,Y]=(0,n.useState)({slittingWidths:[],extraMaterial:0}),[J,Z]=(0,n.useState)(!1),[X,K]=(0,n.useState)({material_id:"",material_name:"",width:"",meters:""}),[ee,te]=(0,n.useState)([]),[ae,se]=(0,n.useState)([]),[ne,re]=(0,n.useState)({}),[ie,le]=(0,n.useState)(""),[oe,ce]=(0,n.useState)(!1),[de,ue]=(0,n.useState)([]),[me,pe]=(0,n.useState)(null),[he,xe]=(0,n.useState)(!1),[fe,ge]=(0,n.useState)(!1),[ye,be]=(0,n.useState)([]),[ve,je]=(0,n.useState)(null);(0,n.useEffect)(()=>{t&&a&&s&&(we(),_e(),Ne())},[t,a]),(0,n.useEffect)(()=>{if(t&&a){const e=setTimeout(()=>{const e="job_timing_".concat(t,"_").concat(a),s={isJobRunning:v,jobStartTime:w,actualRunTime:N,selectedMachine:f,setupNotes:y,signOffs:T,finishedQuantity:O,additionalProduction:Q,masterCores:U,completedProducts:ne};localStorage.setItem(e,JSON.stringify(s))},500);return()=>clearTimeout(e)}},[v,w,N,f,y,T,O,Q,ne,t,a]),(0,n.useEffect)(()=>{let e;return v&&w&&(e=setInterval(()=>{A(Date.now())},6e4)),()=>{e&&clearInterval(e)}},[v,w]);const we=async()=>{try{var e;if(x(!0),console.log("Loading job card data with params:",{jobId:t,stage:a,orderId:s}),!t||!a)return console.error("Missing required parameters:",{jobId:t,stage:a}),void x(!1);const f=s||t,y=await sr(f),b=(null===(e=y.data)||void 0===e?void 0:e.data)||y.data;if(console.log("Fetched order data:",b),!b)throw new Error("Order data not found");const v={id:t,run_number:1,status:"in_progress",created_date:(new Date).toISOString(),order:{id:b.id,order_number:b.order_number,client_name:b.client_name,quantity:b.items&&b.items.length>0?b.items[0].quantity:0,due_date:b.due_date,priority:b.priority||"Normal/Low",items:b.items||[],other_products:b.items?b.items.slice(1):[]}};let j=null;if(b.items&&b.items.length>0){const e=b.items[0];try{var n;const t=await Xn(b.client_id,e.product_id),a=(null===(n=t.data)||void 0===n?void 0:n.data)||t.data;if(console.log("Fetched client product:",a),a){var r,i,l,c,u;let e=[],t=null;if(a.material_used&&a.material_used.length>0)try{var p;const s=a.material_used[0];console.log("Fetching Product Specification:",s);const n=await Bn(s);if(t=(null===(p=n.data)||void 0===p?void 0:p.data)||n.data,console.log("Fetched Product Specification:",t),t&&t.material_layers){const a=t.material_layers.map(async e=>{try{var t;const a=await An(e.material_id),s=(null===(t=a.data)||void 0===t?void 0:t.data)||a.data;return m(m({},e),{},{material_name:(null===s||void 0===s?void 0:s.material_description)||e.material_name||"Unknown Material",product_name:(null===s||void 0===s?void 0:s.material_description)||"Unknown Product",gsm:(null===s||void 0===s?void 0:s.gsm)||e.gsm||0,supplier:(null===s||void 0===s?void 0:s.supplier)||"Unknown Supplier"})}catch(a){return console.warn("Could not fetch material data for ".concat(e.material_id,":"),a),m(m({},e),{},{material_name:e.material_name||"Unknown Material",product_name:e.material_name||"Unknown Product",gsm:e.gsm||0,supplier:"Unknown Supplier"})}});e=await Promise.all(a),console.log("Enhanced material layers with names and GSM:",e)}}catch(h){console.warn("Could not fetch Product Specification ".concat(a.material_used[0],":"),h)}j={id:a.id,product_code:a.product_code,product_description:a.product_description,product_type:a.product_type,core_id:(null===(r=t)||void 0===r||null===(i=r.specifications)||void 0===i?void 0:i.internal_diameter)||a.core_id||"N/A",core_width:a.core_width||"N/A",core_thickness:(null===(l=t)||void 0===l||null===(c=l.specifications)||void 0===c?void 0:c.wall_thickness_required)||a.core_thickness||"N/A",material_layers:e,makeready_allowance_percent:a.makeready_allowance_percent||10,setup_time_minutes:a.setup_time_minutes||45,waste_percentage:a.waste_percentage||5,qc_tolerances:a.qc_tolerances||{id_tolerance:.5,od_tolerance:.5,wall_tolerance:.1},inspection_interval_minutes:a.inspection_interval_minutes||60,tubes_per_carton:a.tubes_per_carton||50,cartons_per_pallet:a.cartons_per_pallet||20,special_tooling_notes:a.special_tooling_notes||(null===(u=t)||void 0===u?void 0:u.manufacturing_notes)||"Standard processing",packing_instructions:a.packing_instructions||"Handle with care",consumables:a.consumables||[]}}}catch(h){console.warn("Could not fetch client product:",h)}j||(j={id:e.product_id,product_code:e.product_name,product_description:e.product_name,product_type:"Unknown",core_id:"N/A",core_width:"N/A",core_thickness:"N/A",material_layers:[],makeready_allowance_percent:10,setup_time_minutes:45,waste_percentage:5,qc_tolerances:{id_tolerance:.5,od_tolerance:.5,wall_tolerance:.1},inspection_interval_minutes:60,tubes_per_carton:50,cartons_per_pallet:20,special_tooling_notes:"Standard processing",packing_instructions:"Handle with care",consumables:[]})}o(v),d(j);const w=Ko[a];w&&w.machines.length>0&&g(w.machines[0]),ke(v,v.order,j)}catch(h){console.error("Failed to load job card data:",h),Bt.error("Failed to load job card data: ".concat(h.message))}finally{x(!1)}},_e=()=>{if(t&&a){const s="job_timing_".concat(t,"_").concat(a),n=localStorage.getItem(s);if(n)try{const e=JSON.parse(n);void 0!==e.isJobRunning&&j(e.isJobRunning),e.jobStartTime&&_(e.jobStartTime),void 0!==e.actualRunTime&&k(e.actualRunTime),e.selectedMachine&&g(e.selectedMachine),e.setupNotes&&b(e.setupNotes),e.signOffs&&L(e.signOffs),void 0!==e.finishedQuantity&&M(e.finishedQuantity),e.additionalProduction&&Y(e.additionalProduction),e.masterCores&&W(e.masterCores),e.completedProducts&&re(e.completedProducts)}catch(e){console.error("Error loading job timing data:",e)}}},Ne=async()=>{try{var e;const t=await si("/stock/raw-materials"),a=(null===(e=t.data)||void 0===e?void 0:e.data)||t.data||[],s=Array.isArray(a)?a:[];console.log("Loaded raw materials for slitting dropdown:",s),se(s),0===s.length&&console.warn("No raw materials found. Make sure materials are added to Raw Materials stock.")}catch(t){console.error("Failed to load raw materials:",t),Bt.error("Failed to load raw materials list"),se([])}},ke=(e,t,s)=>{if(!e||!t||!s)return console.log("Missing data for calculation:",{job:!!e,order:!!t,product:!!s}),void p({goodMaterialLength:0,makereadyLength:0,wasteLength:0,totalLengthRequired:0,setupTime:30,runTime:0,totalProductionTime:30,tubesPerCarton:50,cartonsRequired:0,cartonsPerPallet:20,palletsRequired:0,tapeRollsRequired:0,wastePercentage:"5.0",makereadyPercentage:"10.0"});if(!t.quantity)return console.log("Missing order quantity, using default"),void p({goodMaterialLength:0,makereadyLength:0,wasteLength:0,totalLengthRequired:0,setupTime:30,runTime:0,totalProductionTime:30,tubesPerCarton:50,cartonsRequired:0,cartonsPerPallet:20,palletsRequired:0,tapeRollsRequired:0,wastePercentage:"5.0",makereadyPercentage:"10.0"});const n=parseInt(t.quantity)||0,r=n*((s.core_width?parseFloat(s.core_width):1e3)/1e3),i=(s.makeready_allowance_percent||10)/100,l=(s.waste_percentage||5)/100,o=r*i,c=r+o,d=c*l,u=c+d,m=Ko[a]||{},h=s.setup_time_minutes||m.standardSetupTime||30,x=u/(m.ratePerMinute||150),f=h+x,g=s.tubes_per_carton||50,y=Math.ceil(n/g),b=s.cartons_per_pallet||20,v=Math.ceil(y/b),j=Math.ceil(y/25);p({goodMaterialLength:Math.round(r),makereadyLength:Math.round(o),wasteLength:Math.round(d),totalLengthRequired:Math.round(u),setupTime:h,runTime:Math.round(x),totalProductionTime:Math.round(f),tubesPerCarton:g,cartonsRequired:y,cartonsPerPallet:b,palletsRequired:v,tapeRollsRequired:j,wastePercentage:(100*l).toFixed(1),makereadyPercentage:(100*i).toFixed(1)})},Se=()=>{window.print()},Ce=async()=>{const e=new Date;_(e),j(!0),Bt.success("Job started at ".concat(e.toLocaleTimeString()));try{const t=(await sr(s)).data.stage_start_times||{};t[a]=e.toISOString(),await rr(s,{production_started_at:e.toISOString(),stage_start_times:t}),i&&i()}catch(t){console.error("Failed to update production start time:",t),Bt.error("Failed to mark job as started")}},Ee=async()=>{if(w){const n=new Date,l=n.getTime()-new Date(w).getTime(),o=Math.round(l/6e4);k(o),j(!1);const d={order_id:s,job_id:t,stage:a,machine:f,setup_notes:y,job_start_time:w,job_end_time:n,actual_run_time_minutes:o,finished_quantity:O,additional_production:Q,master_cores:U,completed_products:ne,operator_signoffs:T,product_specs:c,calculations:u,completed_at:n.toISOString(),completed_by:localStorage.getItem("user_name")||"Unknown"};try{await hr(d);const e=[Vo,$o,Qo,Yo,Jo,Zo,Xo],n=e.indexOf(a),l=e[n+1];l?(await ir(s,{from_stage:a,to_stage:l}),Bt.success((0,mi.jsxs)("div",{children:[(0,mi.jsxs)("p",{children:["Job completed! Actual run time: ",Math.floor(o/60),"h ",o%60,"m"]}),(0,mi.jsxs)("p",{className:"text-sm",children:["Job moved to: ",l.replace(/_/g," ").toUpperCase()]})]}),{duration:5e3})):Bt.success("Job completed! Actual run time: ".concat(Math.floor(o/60),"h ").concat(o%60,"m"));const c="jobTiming_".concat(t,"_").concat(a);localStorage.removeItem(c),i&&i(),setTimeout(()=>{r()},2e3)}catch(e){console.error("Failed to complete job card:",e),Bt.error("Failed to save job card and move to next stage: "+(e.message||"Unknown error"))}}},De=()=>{D(N),C(!0)},Pe=()=>{const e=parseInt(E)||0;k(e),C(!1),Bt.success("Run time updated to ".concat(Math.floor(e/60),"h ").concat(e%60,"m"))},Ae=()=>{C(!1),D(N)},Te=e=>{F({type:e,tempName:T[e].name})},Le=()=>{const{type:e,tempName:t}=R,a=(new Date).toLocaleDateString();L(s=>m(m({},s),{},{[e]:{name:t.trim(),date:a,isEditing:!1}})),F({type:"",tempName:""}),Bt.success("".concat(e.charAt(0).toUpperCase()+e.slice(1)," sign-off saved"))},Re=()=>{F({type:"",tempName:""})},Fe=e=>{window.confirm("Clear ".concat(e," sign-off?"))&&(L(t=>m(m({},t),{},{[e]:{name:"",date:"",isEditing:!1}})),Bt.success("".concat(e.charAt(0).toUpperCase()+e.slice(1)," sign-off cleared")))},Oe=()=>{z(O),q(!0)},Me=()=>{var e;const t=parseInt(B)||0;M(t),q(!1);const a=(null===l||void 0===l||null===(e=l.order)||void 0===e?void 0:e.quantity)||0,s=Math.max(0,t-a);s>0?Bt.success("Finished quantity updated: ".concat(t.toLocaleString(),". Excess: ").concat(s.toLocaleString()," units for stocktake")):Bt.success("Finished quantity updated: ".concat(t.toLocaleString()))},Ie=()=>{q(!1),z(O)},qe=()=>{if(X.material_id&&X.width&&X.meters){const e={material_id:X.material_id,material_name:X.material_name,width:parseFloat(X.width),meters:parseFloat(X.meters),id:Date.now()};te(t=>[...t,e]),K({material_id:"",material_name:"",width:"",meters:""})}},Be=async()=>{if(0!==ee.length)try{for(const e of ee)console.log("Submitting slit width:",e),await ze(e);Y(e=>m(m({},e),{},{slittingWidths:[...e.slittingWidths,...ee]})),te([]),Bt.success("Successfully submitted ".concat(ee.length," slit width(s) to Raw Materials"))}catch(t){var e;console.error("Error submitting slit widths:",t),console.error("Error details:",t.message,null===(e=t.response)||void 0===e?void 0:e.data),Bt.error("Failed to submit slit widths: ".concat(t.message||"Unknown error"))}else Bt.error("No slit widths to submit")},ze=async e=>{try{var a,s,n;console.log("Looking for material with ID:",e.material_id),console.log("Available raw materials:",ae);const o=ae.find(t=>t.material_id===e.material_id);if(!o)throw console.error("Selected material not found in raw materials inventory"),console.error("Looking for material_id:",e.material_id),new Error("Material not found in inventory (ID: ".concat(e.material_id,")"));console.log("Found raw material stock:",o);const c={raw_material_id:e.material_id,raw_material_name:e.material_name,slit_width_mm:e.width,quantity_meters:e.meters,source_job_id:t||"unknown",source_order_id:(null===l||void 0===l||null===(a=l.order)||void 0===a?void 0:a.id)||"unknown",created_from_additional_widths:!0,material_specifications:{}};console.log("Posting slit width data:",c);const d=await ni("/slit-widths",c);if(console.log("Slit width response:",d),!d.success&&(null===(s=d.data)||void 0===s||!s.success)){var r;const e=d.message||(null===(r=d.data)||void 0===r?void 0:r.message)||"Failed to save slit width";throw console.error("Failed to save slit width:",e),new Error(e)}console.log("Slit width saved to database successfully");const u=o.quantity_on_hand+e.meters;console.log("Updating raw material stock from ".concat(o.quantity_on_hand," to ").concat(u));const m=await vn.put("/stock/raw-materials/".concat(o.id),{quantity_on_hand:u,notes:"Added ".concat(e.meters," meters from slitting job ").concat(t," (").concat(e.width,"mm width)")});var i;if(console.log("Stock update response:",m.data),null!==(n=m.data)&&void 0!==n&&n.success)console.log("Updated raw material stock: ".concat(o.material_name," quantity increased to ").concat(u));else console.error("Failed to update raw material stock quantity:",null===(i=m.data)||void 0===i?void 0:i.message),Bt.warning("Slit width saved but stock quantity update failed")}catch(o){throw console.error("Error saving slit width to database:",o),console.error("Error stack:",o.stack),o}},Ue=()=>{if(V.width&&V.quantity){const e={id:Date.now(),width:parseFloat(V.width),quantity:parseInt(V.quantity),addToStock:V.addToStock,addedToStock:!1};W(t=>[...t,e]),$({width:"",quantity:"",addToStock:!1}),e.addToStock&&He(e)}},We=e=>{W(t=>t.filter(t=>t.id!==e))},He=async e=>{if(null===l||void 0===l||!l.order||!c)return Bt.error("Missing job or product data for stock entry"),!1;try{const a=e.quantity,s=l.order.quantity||0,n=Math.max(0,a-s);if(n<=0)return Bt.info("No excess cores to add to stock"),!1;const r={client_id:l.order.client_id,client_name:l.order.client_name||"Unknown Client",product_id:c.id,product_code:c.product_code,product_description:"".concat(c.product_code," - Biscuits (").concat(e.width,"mm width)"),quantity_on_hand:n,unit_of_measure:"pieces",source_order_id:l.order.id,source_job_id:t,is_shared_product:!1,shared_with_clients:[],created_from_excess:!0,material_specifications:{biscuit_width:e.width,core_diameter:c.core_diameter,material_layers:c.material_layers},minimum_stock_level:0},i=await ni("/stock/raw-substrates",r);if(i.success)return Bt.success("".concat(n," excess biscuit pieces added to Raw Substrates stock")),!0;throw new Error(i.message||"Failed to add to stock")}catch(a){return console.error("Failed to add biscuit pieces to stock:",a),Bt.error("Failed to add biscuit pieces to stock"),!1}},Ge=async()=>{try{const e=await Zr();e.data.success?(ue(e.data.data||[]),ce(!0)):Bt.error("Failed to load label templates")}catch(e){console.error("Error loading label templates:",e),Bt.error("Failed to load label templates")}},Ve=async()=>{try{const e=await ti();if(e.data.success){be(e.data.data||[]);const t=e.data.data.find(e=>e.is_default);je(t||e.data.data[0]),xe(!1),ge(!0)}else Bt.error("Failed to load printers")}catch(e){console.error("Error loading printers:",e),Bt.error("Failed to load printers")}},$e=async()=>{if(ve)try{if(ve.is_browser)window.print(),Bt.success("Printing ".concat(u.cartonsRequired||0," label(s)..."));else{const e=await ai({printer_name:ve.name,is_browser:!1,template:me,data:Qe(),copies:u.cartonsRequired||1});e.data.success?(e.data.use_browser_print&&window.print(),Bt.success(e.data.message)):Bt.error("Failed to print labels")}ge(!1)}catch(e){console.error("Error printing:",e),Bt.error("Failed to print labels")}else Bt.error("Please select a printer")},Qe=()=>{if(null===l||void 0===l||!l.order||!c)return{};const e=u.tubesPerCarton||c.tubes_per_carton||0;let t="";if(l.order.product_description)t=l.order.product_description;else if(c.product_description)t=c.product_description;else{const e=c.product_type||"Paper Core",a=c.internal_diameter?"".concat(c.internal_diameter,"mm ID"):"",s=c.wall_thickness?"".concat(c.wall_thickness,"mm T"):"",n=c.width?"".concat(c.width,"mm W"):"";t="".concat(e).concat(a?" - "+a:"").concat(s?" x "+s:"").concat(n?" x "+n:"")}return{customer:l.order.client_name||"",order_number:l.order.order_number||l.order.id||"",due_date:l.order.due_date?new Date(l.order.due_date).toLocaleDateString():"",product_item:c.product_code||"",product_details:t,product_quantity:"".concat(l.order.quantity||0," units"),carton_qty:"".concat(e," cores per carton")}},Ye=async()=>{if(!ie||ie<=0)Bt.error("Please enter a valid quantity");else if(null!==l&&void 0!==l&&l.order&&c)try{const e=parseInt(ie),a={client_id:l.order.client_id,client_name:l.order.client_name||"Unknown Client",product_id:c.id,product_code:c.product_code,product_description:"".concat(c.product_code," - Finished Cores"),quantity_on_hand:e,unit_of_measure:"pieces",source_order_id:l.order.id,source_job_id:t,is_shared_product:!1,shared_with_clients:[],created_from_excess:!0,material_specifications:{core_diameter:c.core_diameter||c.internal_diameter,wall_thickness:c.wall_thickness,material_layers:c.material_layers},minimum_stock_level:0},s=await Hr(a);if(s.data.success)return Bt.success("".concat(e," finished cores added to Products on Hand")),le(""),!0;throw new Error(s.data.message||"Failed to add to stock")}catch(e){return console.error("Failed to add finished cores to stock:",e),Bt.error("Failed to add finished cores to stock"),!1}else Bt.error("Missing job or product data")},Je=()=>({paper_slitting:"Paper Slitting Job Card",winding:"Core Winding Job Card",finishing:"Cutting/Indexing Job Card",delivery:"Packing/Delivery Job Card"}[a]||"Job Card"),Ze=()=>{switch(a){case"winding":return"Additional Biscuit Widths Produced";case"finishing":return"Total Finished Cores";case"paper_slitting":return"Additional Widths & Meters";default:return"Finished Production Quantity"}};if(h)return(0,mi.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,mi.jsxs)("div",{className:"bg-gray-800 rounded-lg p-8",children:[(0,mi.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-yellow-400 mx-auto"}),(0,mi.jsx)("p",{className:"text-white mt-4",children:"Loading job card..."})]})});if(!l||!l.order)return(0,mi.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,mi.jsxs)("div",{className:"bg-gray-800 rounded-lg p-8",children:[(0,mi.jsx)("p",{className:"text-white",children:"Failed to load job card data"}),(0,mi.jsx)("button",{onClick:r,className:"misty-button misty-button-secondary mt-4",children:"Close"})]})});const{order:Xe}=l,Ke=Ko[a]||{};if(!Xe||!Xe.id&&!s&&!t)return(0,mi.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,mi.jsxs)("div",{className:"bg-gray-800 rounded-lg p-8",children:[(0,mi.jsx)("p",{className:"text-white",children:"Invalid job card data - missing order ID"}),(0,mi.jsx)("button",{onClick:r,className:"misty-button misty-button-secondary mt-4",children:"Close"})]})});try{var et,tt,at,st,nt,rt,it,lt,ot,ct,dt,ut,mt,pt,ht,xt,ft,gt,yt,bt,vt,jt;return(0,mi.jsxs)(mi.Fragment,{children:[(0,mi.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,mi.jsxs)("div",{className:"bg-gray-800 rounded-lg w-[90vw] max-w-4xl max-h-[90vh] overflow-y-auto border border-gray-700",children:[(0,mi.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-700 no-print",children:[(0,mi.jsx)("h2",{className:"text-xl font-bold text-white",children:Je()}),(0,mi.jsxs)("div",{className:"flex items-center space-x-2",children:[v?(0,mi.jsxs)("button",{onClick:Ee,className:"flex items-center px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors",children:[(0,mi.jsx)(_l,{className:"h-4 w-4 mr-2"}),"Complete Run"]}):(0,mi.jsxs)("button",{onClick:Ce,className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors",children:[(0,mi.jsx)(_l,{className:"h-4 w-4 mr-2"}),"Start Job"]}),(0,mi.jsxs)("button",{onClick:Se,className:"misty-button misty-button-primary flex items-center",children:[(0,mi.jsx)(Gl,{className:"h-4 w-4 mr-2"}),"Print"]}),(0,mi.jsxs)("button",{onClick:r,className:"misty-button misty-button-secondary flex items-center",children:[(0,mi.jsx)(nl,{className:"h-4 w-4 mr-2"}),"Close"]})]})]}),(0,mi.jsxs)("div",{className:"p-6 print-content",children:[(0,mi.jsxs)("div",{className:"text-center mb-6 border-b-2 border-gray-600 pb-4",children:[(0,mi.jsx)("h1",{className:"text-2xl font-bold text-white",children:Je()}),(0,mi.jsxs)("p",{className:"text-gray-400",children:["Generated: ",(new Date).toLocaleDateString()," ",(new Date).toLocaleTimeString()]}),v&&w&&(0,mi.jsxs)("div",{className:"mt-2 inline-flex items-center px-3 py-1 bg-green-600 text-white text-sm rounded-full animate-pulse",children:[(0,mi.jsx)(_l,{className:"h-4 w-4 mr-1"}),"Job Running Since: ",new Date(w).toLocaleTimeString()]}),!v&&N>0&&(0,mi.jsxs)("div",{className:"mt-2 inline-flex items-center px-3 py-1 bg-blue-600 text-white text-sm rounded-full",children:[(0,mi.jsx)(_l,{className:"h-4 w-4 mr-1"}),"Completed - Runtime: ",Math.floor(N/60),"h ",N%60,"m"]})]}),(0,mi.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 mb-6",children:[(0,mi.jsxs)("div",{className:"bg-gray-700 p-4 rounded-lg border border-gray-600",children:[(0,mi.jsxs)("h3",{className:"text-lg font-semibold text-white mb-3 flex items-center",children:[(0,mi.jsx)(Vi,{className:"h-5 w-5 mr-2"}),"Order Information"]}),(0,mi.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,mi.jsxs)("div",{className:"text-gray-300",children:[(0,mi.jsx)("strong",{className:"text-white",children:"Order ID:"})," ",(null===l||void 0===l||null===(et=l.order)||void 0===et?void 0:et.order_number)||"ORD-".concat(s||t)||0]}),(0,mi.jsxs)("div",{className:"text-gray-300",children:[(0,mi.jsx)("strong",{className:"text-white",children:"Customer:"})," ",(null===l||void 0===l||null===(tt=l.order)||void 0===tt?void 0:tt.client_name)||"Unknown Client"]}),(0,mi.jsxs)("div",{className:"text-gray-300",children:[(0,mi.jsx)("strong",{className:"text-white",children:"Quantity:"})," ",null===(at=(null===l||void 0===l||null===(st=l.order)||void 0===st?void 0:st.quantity)||1e3)||void 0===at?void 0:at.toLocaleString()," units"]}),(null===l||void 0===l||null===(nt=l.order)||void 0===nt||null===(rt=nt.items)||void 0===rt?void 0:rt.some(e=>e.allocated_stock>0))&&(0,mi.jsxs)("div",{className:"mt-3 p-3 bg-blue-900/20 border border-blue-500 rounded",children:[(0,mi.jsx)("div",{className:"text-blue-300 font-medium mb-2",children:"\ud83d\udce6 Stock Allocated"}),l.order.items.map((e,t)=>{var a,s;return e.allocated_stock>0&&(0,mi.jsxs)("div",{className:"text-sm space-y-1",children:[(0,mi.jsxs)("div",{className:"text-blue-200",children:[(0,mi.jsx)("strong",{children:"Product:"})," ",e.product_name]}),(0,mi.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[(0,mi.jsxs)("div",{className:"text-blue-200",children:[(0,mi.jsx)("strong",{children:"From Stock:"})," ",null===(a=e.allocated_stock)||void 0===a?void 0:a.toLocaleString()," units"]}),(0,mi.jsxs)("div",{className:"text-blue-200",children:[(0,mi.jsx)("strong",{children:"To Produce:"})," ",null===(s=e.remaining_to_produce)||void 0===s?void 0:s.toLocaleString()," units"]})]}),t<l.order.items.filter(e=>e.allocated_stock>0).length-1&&(0,mi.jsx)("hr",{className:"border-blue-600 my-2"})]},t)})]}),(0,mi.jsxs)("div",{className:"text-gray-300",children:[(0,mi.jsx)("strong",{className:"text-white",children:"Due Date:"})," ",null!==l&&void 0!==l&&null!==(it=l.order)&&void 0!==it&&it.due_date?new Date(l.order.due_date).toLocaleDateString():"Not set"]}),(0,mi.jsxs)("div",{className:"text-gray-300",children:[(0,mi.jsx)("strong",{className:"text-white",children:"Priority:"}),(0,mi.jsx)("span",{className:"ml-2 px-2 py-1 rounded text-xs ".concat("ASAP"===(null===l||void 0===l||null===(lt=l.order)||void 0===lt?void 0:lt.priority)?"bg-red-600 text-white":"Must Delivery On Date"===(null===l||void 0===l||null===(ot=l.order)||void 0===ot?void 0:ot.priority)?"bg-orange-600 text-white":"bg-green-600 text-white"),children:(null===l||void 0===l||null===(ct=l.order)||void 0===ct?void 0:ct.priority)||"Normal/Low"})]}),(0,mi.jsxs)("div",{className:"text-gray-300",children:[(0,mi.jsx)("strong",{className:"text-white",children:"Run Number:"})," ",(null===l||void 0===l?void 0:l.run_number)||"1"]})]})]}),(0,mi.jsxs)("div",{className:"bg-gray-700 p-4 rounded-lg border border-gray-600",children:[(0,mi.jsxs)("h3",{className:"text-lg font-semibold text-white mb-3 flex items-center",children:[(0,mi.jsx)(Go,{className:"h-5 w-5 mr-2"}),"Machine Line: ",Ke.name]}),(0,mi.jsxs)("div",{className:"space-y-3",children:["paper_slitting"===a&&(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Selected Machine:"}),(0,mi.jsx)("select",{value:f,onChange:e=>g(e.target.value),className:"misty-select w-full",children:null===(dt=Ke.machines)||void 0===dt?void 0:dt.map(e=>(0,mi.jsx)("option",{value:e,children:e},e))})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Setup Notes:"}),(0,mi.jsx)("textarea",{value:y,onChange:e=>b(e.target.value),className:"misty-input w-full h-16 resize-none",placeholder:"Special tooling, mandrel requirements..."})]})]})]})]}),c&&(0,mi.jsxs)("div",{className:"mb-6",children:[(0,mi.jsx)("h3",{className:"text-lg font-semibold text-white mb-3 border-b border-gray-600 pb-2",children:"Product Specifications"}),(0,mi.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,mi.jsxs)("div",{className:"bg-gray-700 p-3 rounded border border-gray-600",children:[(0,mi.jsx)("div",{className:"text-sm text-gray-400",children:"Product Code"}),(0,mi.jsx)("div",{className:"font-medium text-white",children:c.product_code})]}),(0,mi.jsxs)("div",{className:"bg-gray-700 p-3 rounded border border-gray-600",children:[(0,mi.jsx)("div",{className:"text-sm text-gray-400",children:"Core ID (mm)"}),(0,mi.jsx)("div",{className:"font-medium text-white",children:c.core_id||"N/A"})]}),(0,mi.jsxs)("div",{className:"bg-gray-700 p-3 rounded border border-gray-600",children:[(0,mi.jsx)("div",{className:"text-sm text-gray-400",children:"Tube Length (mm)"}),(0,mi.jsx)("div",{className:"font-medium text-white",children:c.core_width||"N/A"})]}),(0,mi.jsxs)("div",{className:"bg-gray-700 p-3 rounded border border-gray-600",children:[(0,mi.jsx)("div",{className:"text-sm text-gray-400",children:"Wall Thickness (mm)"}),(0,mi.jsx)("div",{className:"font-medium text-white",children:c.core_thickness||"N/A"})]}),(0,mi.jsxs)("div",{className:"bg-gray-700 p-3 rounded border border-gray-600",children:[(0,mi.jsx)("div",{className:"text-sm text-gray-400",children:"Special Tooling"}),(0,mi.jsx)("div",{className:"font-medium text-white text-xs",children:c.special_tooling_notes||"None"})]}),(0,mi.jsxs)("div",{className:"bg-gray-700 p-3 rounded border border-gray-600",children:[(0,mi.jsx)("div",{className:"text-sm text-gray-400",children:"Packing Notes"}),(0,mi.jsx)("div",{className:"font-medium text-white text-xs",children:c.packing_instructions||"Standard"})]})]})]}),("paper_slitting"===a||"winding"===a)&&(0,mi.jsxs)("div",{className:"mb-4",children:[(0,mi.jsx)("h3",{className:"text-lg font-semibold text-white mb-2 border-b border-gray-600 pb-1",children:"Materials Required"}),(0,mi.jsx)("div",{className:"bg-gray-700 p-3 rounded border border-gray-600",children:null!==c&&void 0!==c&&c.material_layers&&c.material_layers.length>0?((e,t)=>{(()=>{const e=[{id:"cw_15_20",range:[15,20],recommendedAngle:"72\xb0",lengthFactor:"3.236"},{id:"cw_21_30",range:[21,30],recommendedAngle:"70\xb0",lengthFactor:"2.924"},{id:"cw_31_50",range:[31,50],recommendedAngle:"68\xb0",lengthFactor:"2.670"},{id:"cw_51_70",range:[51,70],recommendedAngle:"66\xb0",lengthFactor:"2.459"},{id:"cw_71_120",range:[71,120],recommendedAngle:"65\xb0",lengthFactor:"2.366"},{id:"cw_121_200",range:[121,200],recommendedAngle:"64\xb0",lengthFactor:"2.281"},{id:"cw_201_plus",range:[201,999],recommendedAngle:"62\xb0",lengthFactor:"2.130"}];if(null!==c&&void 0!==c&&c.core_winding_spec_id){const t=e.find(e=>e.id===c.core_winding_spec_id);if(t)return t}const t=parseFloat(null===c||void 0===c?void 0:c.core_id)||76;for(const a of e)if(t>=a.range[0]&&t<=a.range[1])return a;e[4]})();const a=((e,t)=>{var a;if(null===e||void 0===e||!e.material_layers||0===e.material_layers.length)return[];const s=parseFloat(e.core_id)||76,n=parseFloat(e.core_width)||parseFloat(e.width)||1200,r=(null===t||void 0===t||null===(a=t.order)||void 0===a?void 0:a.quantity)||1,i=n/1e3;let l=s/1e3/2;return e.material_layers.map((e,t)=>{const a=parseFloat(e.thickness)||0,s=parseFloat(e.gsm)||0,n=parseInt(e.quantity)||1,o=(parseFloat(e.width)||0)/1e3,c=a/1e3*n,d=l,u=l+c,p=Math.PI*i*(u**2-d**2),h=a>0&&s>0?s/a:0,x=p*h,f=c>0?p/c:0,g=o>0?f/o:0,y=x*r,b=f*r,v=g*r,j=g>0?g:f,w=j*r;return l=u,m(m({},e),{},{metersPerCore:j,totalMeters:w,massKgPerCore:x,totalMassKg:y,areaM2PerCore:f,totalAreaM2:b,stripLengthMPerCore:g,totalStripLengthM:v,lapsPerCore:n,streamInnerRadiusMm:1e3*d,streamOuterRadiusMm:1e3*u,volumeM3PerCore:p,densityKgM3:h,layerOrder:t+1})})})(c,l);return(0,mi.jsxs)("div",{className:"space-y-2",children:[a.map((e,t)=>(0,mi.jsxs)("div",{className:"flex items-center justify-between bg-gray-800 p-2 rounded border border-gray-500",children:[(0,mi.jsxs)("div",{className:"flex-1",children:[(0,mi.jsx)("div",{className:"text-sm text-white font-medium",children:e.product_name||e.material_name||"Unknown Product"}),(0,mi.jsxs)("div",{className:"text-xs text-gray-400",children:[e.layer_type," \u2022 ",e.width||"N/A","mm \xd7 ",e.thickness||"N/A","mm \u2022 GSM: ",e.gsm||"N/A"," \u2022 ",e.lapsPerCore," laps"]})]}),(0,mi.jsxs)("div",{className:"text-right ml-3",children:[(0,mi.jsxs)("div",{className:"text-sm font-bold text-green-400",children:[e.totalMeters.toFixed(1),"m"]}),(0,mi.jsxs)("div",{className:"text-xs text-gray-500",children:[e.metersPerCore.toFixed(1),"m/core"]})]})]},t)),(0,mi.jsxs)("div",{className:"text-xs text-gray-400 mt-2 pt-2 border-t border-gray-600",children:["Formula: Layer Circumference \xd7 Angle Factor ",(null===(e=a[0])||void 0===e?void 0:e.lengthFactor)||"2.366"," \xd7 Laps \xd7 ",(null===l||void 0===l||null===(t=l.order)||void 0===t?void 0:t.quantity)||1," cores",(0,mi.jsx)("br",{}),(0,mi.jsx)("span",{className:"text-gray-500",children:"Layers ordered by width (narrower=inner, wider=outer), each layer calculated at its radius"})]})]})})():(0,mi.jsx)("div",{className:"bg-yellow-600/20 p-2 rounded border border-yellow-600",children:(0,mi.jsx)("div",{className:"text-yellow-200 text-sm",children:"No material layers found in product specifications"})})})]}),"finishing"!==a&&(0,mi.jsxs)("div",{className:"mb-6",children:[(0,mi.jsxs)("h3",{className:"text-lg font-semibold text-white mb-3 border-b border-gray-600 pb-2 flex items-center",children:[(0,mi.jsx)(Yi,{className:"h-5 w-5 mr-2"}),"Production Calculations"]}),(0,mi.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("h4",{className:"font-semibold text-white mb-2",children:"Material Requirements (metres)"}),(0,mi.jsx)("table",{className:"w-full text-sm border border-gray-600",children:(0,mi.jsxs)("tbody",{children:[(0,mi.jsxs)("tr",{className:"border-b border-gray-600",children:[(0,mi.jsx)("td",{className:"p-2 bg-gray-700 text-gray-300",children:"Good Material Length"}),(0,mi.jsx)("td",{className:"p-2 text-right font-medium text-white",children:null===(ut=u.goodMaterialLength)||void 0===ut?void 0:ut.toLocaleString()})]}),(0,mi.jsxs)("tr",{className:"border-b border-gray-600",children:[(0,mi.jsxs)("td",{className:"p-2 bg-gray-700 text-gray-300",children:["Makeready Allowance (",u.makereadyPercentage,"%)"]}),(0,mi.jsx)("td",{className:"p-2 text-right font-medium text-white",children:null===(mt=u.makereadyLength)||void 0===mt?void 0:mt.toLocaleString()})]}),(0,mi.jsxs)("tr",{className:"border-b border-gray-600",children:[(0,mi.jsxs)("td",{className:"p-2 bg-gray-700 text-gray-300",children:["Waste Allowance (",u.wastePercentage,"%)"]}),(0,mi.jsx)("td",{className:"p-2 text-right font-medium text-white",children:null===(pt=u.wasteLength)||void 0===pt?void 0:pt.toLocaleString()})]}),(0,mi.jsxs)("tr",{className:"bg-yellow-600 font-bold text-white",children:[(0,mi.jsx)("td",{className:"p-2",children:"TOTAL LENGTH REQUIRED"}),(0,mi.jsx)("td",{className:"p-2 text-right",children:null===(ht=u.totalLengthRequired)||void 0===ht?void 0:ht.toLocaleString()})]})]})}),(0,mi.jsxs)("div",{className:"mt-4",children:[(0,mi.jsx)("h4",{className:"font-semibold text-white mb-2",children:Ze()}),"winding"===a?(0,mi.jsxs)("div",{className:"bg-green-600 p-3 rounded border border-green-500",children:[(0,mi.jsx)("span",{className:"text-white font-medium block mb-2",children:"Additional Biscuit Widths:"}),(0,mi.jsxs)("div",{className:"mb-3 space-y-2",children:[(0,mi.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,mi.jsx)("div",{children:(0,mi.jsx)("input",{type:"number",step:"0.1",placeholder:"Width (mm)",value:V.width,onChange:e=>$(t=>m(m({},t),{},{width:e.target.value})),className:"w-full px-2 py-1 text-sm bg-gray-600 border border-gray-500 rounded text-white"})}),(0,mi.jsx)("div",{children:(0,mi.jsx)("input",{type:"number",placeholder:"Quantity",value:V.quantity,onChange:e=>$(t=>m(m({},t),{},{quantity:e.target.value})),className:"w-full px-2 py-1 text-sm bg-gray-600 border border-gray-500 rounded text-white"})})]}),(0,mi.jsxs)("div",{className:"flex items-center justify-between",children:[(0,mi.jsxs)("label",{className:"flex items-center text-sm text-green-100",children:[(0,mi.jsx)("input",{type:"checkbox",checked:V.addToStock,onChange:e=>$(t=>m(m({},t),{},{addToStock:e.target.checked})),className:"w-4 h-4 text-green-500 bg-gray-600 border-gray-500 rounded mr-2"}),"Add excess to stock"]}),(0,mi.jsx)("button",{onClick:Ue,disabled:!V.width||!V.quantity,className:"px-3 py-1 bg-yellow-600 text-white text-sm rounded hover:bg-yellow-700 disabled:opacity-50",children:"+ Add Entry"})]})]}),U.length>0&&(0,mi.jsxs)("div",{className:"space-y-1",children:[(0,mi.jsx)("div",{className:"text-xs text-green-100 font-semibold border-b border-green-500 pb-1",children:"Biscuit Width Entries:"}),U.map(e=>{var t;const a=(null===l||void 0===l||null===(t=l.order)||void 0===t?void 0:t.quantity)||0,s=Math.max(0,e.quantity-a);return(0,mi.jsx)("div",{className:"bg-green-700 p-2 rounded text-sm",children:(0,mi.jsxs)("div",{className:"flex justify-between items-center",children:[(0,mi.jsxs)("span",{className:"text-white",children:[e.width,"mm \xd7 ",e.quantity," pieces"]}),(0,mi.jsxs)("div",{className:"flex items-center space-x-2",children:[s>0&&(0,mi.jsxs)("span",{className:"text-yellow-300 text-xs",children:["+",s," excess"]}),e.addToStock&&(0,mi.jsx)("span",{className:"text-yellow-300 text-xs",children:"\ud83d\udce6"}),(0,mi.jsx)("button",{onClick:()=>We(e.id),className:"text-red-300 hover:text-red-200 text-xs",children:"\u2715"})]})]})},e.id)}),(null===l||void 0===l||null===(xt=l.order)||void 0===xt?void 0:xt.quantity)&&(0,mi.jsxs)("div",{className:"text-xs text-green-100 pt-1 border-t border-green-500",children:["Total: ",U.reduce((e,t)=>e+t.quantity,0)," pieces | Required: ",l.order.quantity," | Excess: ",U.reduce((e,t)=>e+Math.max(0,t.quantity-l.order.quantity),0)]})]})]}):"finishing"===a?(0,mi.jsxs)("div",{className:"bg-blue-600 p-3 rounded border border-blue-500",children:[(0,mi.jsx)("span",{className:"text-white font-medium block mb-2",children:"Finishing Operations:"}),(0,mi.jsxs)("div",{className:"flex items-center justify-between",children:[(0,mi.jsx)("span",{className:"text-white font-medium",children:"Total Finished Cores:"}),(0,mi.jsx)("div",{className:"flex items-center",children:I?(0,mi.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,mi.jsx)("input",{type:"number",value:B,onChange:e=>z(e.target.value),className:"w-24 px-2 py-1 text-sm bg-gray-600 border border-gray-500 rounded text-white text-center",min:"0",autoFocus:!0}),(0,mi.jsx)("button",{onClick:Me,className:"px-2 py-1 bg-blue-700 text-white text-xs rounded hover:bg-blue-800",children:"\u2713"}),(0,mi.jsx)("button",{onClick:Ie,className:"px-2 py-1 bg-red-600 text-white text-xs rounded hover:bg-red-700",children:"\u2715"})]}):(0,mi.jsxs)("span",{onDoubleClick:Oe,className:"cursor-pointer hover:bg-blue-700 px-2 py-1 rounded text-white font-bold",title:"Double-click to edit finished quantity",children:[O.toLocaleString()," cores"]})})]}),O>0&&(null===l||void 0===l||null===(ft=l.order)||void 0===ft?void 0:ft.quantity)&&(0,mi.jsxs)("div",{className:"mt-2 text-sm",children:[(0,mi.jsxs)("div",{className:"flex justify-between text-blue-100",children:[(0,mi.jsx)("span",{children:"Required Quantity:"}),(0,mi.jsx)("span",{children:l.order.quantity.toLocaleString()})]}),O>l.order.quantity&&(0,mi.jsxs)("div",{className:"flex justify-between text-yellow-200 font-medium",children:[(0,mi.jsx)("span",{children:"Excess for Stocktake:"}),(0,mi.jsx)("span",{children:(O-l.order.quantity).toLocaleString()})]})]}),(0,mi.jsxs)("div",{className:"mt-4 border-t border-blue-500 pt-3",children:[(0,mi.jsx)("span",{className:"text-white font-medium block mb-2",children:"Additional Cores Produced:"}),(0,mi.jsx)("div",{className:"mb-3 space-y-2",children:(0,mi.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,mi.jsx)("div",{children:(0,mi.jsx)("input",{type:"number",step:"0.1",placeholder:"Width (mm)",value:V.width,onChange:e=>$(t=>m(m({},t),{},{width:e.target.value})),className:"w-full px-2 py-1 text-sm bg-gray-600 border border-gray-500 rounded text-white"})}),(0,mi.jsx)("div",{children:(0,mi.jsx)("input",{type:"number",placeholder:"Quantity",value:V.quantity,onChange:e=>$(t=>m(m({},t),{},{quantity:e.target.value})),className:"w-full px-2 py-1 text-sm bg-gray-600 border border-gray-500 rounded text-white"})}),(0,mi.jsx)("div",{children:(0,mi.jsx)("button",{onClick:Ue,disabled:!V.width||!V.quantity,className:"w-full px-3 py-1 bg-blue-700 text-white text-sm rounded hover:bg-blue-800 disabled:opacity-50",children:"+ Add Core"})})]})}),U.length>0&&(0,mi.jsxs)("div",{className:"space-y-1",children:[(0,mi.jsx)("div",{className:"text-xs text-blue-100 font-semibold border-b border-blue-500 pb-1",children:"Additional Cores Produced:"}),U.map(e=>(0,mi.jsx)("div",{className:"bg-blue-700 p-2 rounded text-sm",children:(0,mi.jsxs)("div",{className:"flex justify-between items-center",children:[(0,mi.jsxs)("span",{className:"text-white",children:[e.width,"mm \xd7 ",e.quantity," cores"]}),(0,mi.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,mi.jsx)("button",{onClick:()=>(async e=>{if(null===l||void 0===l||!l.order||!c)return Bt.error("Missing job or product data for stock entry"),!1;try{const a={client_id:l.order.client_id,client_name:l.order.client_name||"Unknown Client",product_id:c.id,product_code:c.product_code,product_description:"".concat(c.product_code," - Finished Cores (").concat(e.width,"mm)"),quantity_on_hand:e.quantity,unit_of_measure:"pieces",source_order_id:l.order.id,source_job_id:t,is_shared_product:!1,shared_with_clients:[],created_from_excess:!0,material_specifications:{core_width:e.width,core_diameter:c.core_diameter||c.internal_diameter,material_layers:c.material_layers},minimum_stock_level:0},s=await Hr(a);if(s.data.success)return Bt.success("".concat(e.quantity," finished cores added to stock")),W(t=>t.map(t=>t.id===e.id?m(m({},t),{},{addedToStock:!0}):t)),!0;throw new Error(s.data.message||"Failed to add to stock")}catch(a){return console.error("Failed to add finished cores to stock:",a),Bt.error("Failed to add finished cores to stock"),!1}})(e),className:"px-2 py-1 bg-green-600 text-white text-xs rounded hover:bg-green-700",title:"Add to Stock on Hand",children:"Add to Stock"}),(0,mi.jsx)("button",{onClick:()=>We(e.id),className:"text-red-300 hover:text-red-200 text-xs",children:"\u2715"})]})]})},e.id))]})]}),(0,mi.jsxs)("div",{className:"mt-4 border-t border-blue-500 pt-3",children:[(0,mi.jsx)("span",{className:"text-white font-medium block mb-2",children:"Add Additional Finished Cores to Stock:"}),(0,mi.jsxs)("div",{className:"bg-blue-700/30 p-3 rounded border border-blue-500",children:[(0,mi.jsx)("p",{className:"text-xs text-blue-200 mb-2",children:"Enter the quantity of finished cores to add directly to Products on Hand stock list"}),(0,mi.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,mi.jsx)("input",{type:"number",placeholder:"Quantity",value:ie,onChange:e=>le(e.target.value),className:"flex-1 px-3 py-2 bg-gray-600 border border-gray-500 rounded text-white",min:"1"}),(0,mi.jsx)("button",{onClick:Ye,disabled:!ie||ie<=0,className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Add to Stock"})]})]})]})]}):(0,mi.jsxs)("div",{className:"bg-green-600 p-3 rounded border border-green-500",children:[(0,mi.jsxs)("div",{className:"flex items-center justify-between",children:[(0,mi.jsx)("span",{className:"text-white font-medium",children:"paper_slitting"===a?"Additional Production:":"Finished Quantity:"}),(0,mi.jsx)("div",{className:"flex items-center",children:I?(0,mi.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,mi.jsx)("input",{type:"number",value:B,onChange:e=>z(e.target.value),className:"w-24 px-2 py-1 text-sm bg-gray-600 border border-gray-500 rounded text-white text-center",min:"0",autoFocus:!0}),(0,mi.jsx)("button",{onClick:Me,className:"px-2 py-1 bg-green-700 text-white text-xs rounded hover:bg-green-800",children:"\u2713"}),(0,mi.jsx)("button",{onClick:Ie,className:"px-2 py-1 bg-red-600 text-white text-xs rounded hover:bg-red-700",children:"\u2715"})]}):(0,mi.jsxs)("span",{onDoubleClick:Oe,className:"cursor-pointer hover:bg-green-700 px-2 py-1 rounded text-white font-bold",title:"Double-click to edit finished quantity",children:[O.toLocaleString()," ","finishing"===a?"cores":"units"]})})]}),O>0&&(null===l||void 0===l||null===(gt=l.order)||void 0===gt?void 0:gt.quantity)&&(0,mi.jsxs)("div",{className:"mt-2 text-sm",children:[(0,mi.jsxs)("div",{className:"flex justify-between text-green-100",children:[(0,mi.jsx)("span",{children:"Required Quantity:"}),(0,mi.jsx)("span",{children:l.order.quantity.toLocaleString()})]}),O>l.order.quantity&&(0,mi.jsxs)("div",{className:"flex justify-between text-yellow-200 font-medium",children:[(0,mi.jsx)("span",{children:"Excess for Stocktake:"}),(0,mi.jsx)("span",{children:(O-l.order.quantity).toLocaleString()})]})]})]})]}),"paper_slitting"===a&&(0,mi.jsxs)("div",{className:"mt-3",children:[(0,mi.jsx)("div",{className:"text-sm text-green-200 font-medium mb-3",children:"Additional Widths Produced:"}),(0,mi.jsx)("div",{className:"bg-gray-800 p-3 rounded-lg mb-3",children:(0,mi.jsxs)("div",{className:"space-y-2",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"text-xs text-gray-300 block mb-1",children:"Select Material from Raw Materials:"}),(0,mi.jsxs)("select",{value:X.material_id,onChange:e=>{const t=e.target.value,a=ae.find(e=>e.material_id===t);K(e=>m(m({},e),{},{material_id:t,material_name:a?a.material_name:""}))},className:"w-full px-2 py-1 text-xs bg-gray-600 border border-gray-500 rounded text-white",children:[(0,mi.jsx)("option",{value:"",children:"-- Select Raw Material --"}),0===ae.length?(0,mi.jsx)("option",{disabled:!0,children:"No raw materials available"}):ae.map(e=>(0,mi.jsx)("option",{value:e.material_id,children:e.material_name||"Unknown Material"},e.material_id))]}),0===ae.length&&(0,mi.jsx)("p",{className:"text-xs text-yellow-400 mt-1",children:"No raw materials found. Add materials to Raw Materials stock first."})]}),(0,mi.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,mi.jsxs)("div",{className:"flex-1",children:[(0,mi.jsx)("label",{className:"text-xs text-gray-300 block mb-1",children:"Width (mm):"}),(0,mi.jsx)("input",{type:"number",placeholder:"Width",value:X.width,onChange:e=>K(t=>m(m({},t),{},{width:e.target.value})),className:"w-full px-2 py-1 text-xs bg-gray-600 border border-gray-500 rounded text-white"})]}),(0,mi.jsxs)("div",{className:"flex-1",children:[(0,mi.jsx)("label",{className:"text-xs text-gray-300 block mb-1",children:"Meters:"}),(0,mi.jsx)("input",{type:"number",placeholder:"Meters",value:X.meters,onChange:e=>K(t=>m(m({},t),{},{meters:e.target.value})),className:"w-full px-2 py-1 text-xs bg-gray-600 border border-gray-500 rounded text-white"})]}),(0,mi.jsx)("div",{className:"pt-5",children:(0,mi.jsx)("button",{onClick:qe,className:"px-3 py-1 bg-green-700 text-white text-xs rounded hover:bg-green-800 whitespace-nowrap",disabled:!X.material_id||!X.width||!X.meters,children:"+ Add"})})]})]})}),ee.length>0&&(0,mi.jsxs)("div",{className:"mb-3",children:[(0,mi.jsx)("div",{className:"text-xs text-gray-400 mb-2",children:"Pending Submissions:"}),(0,mi.jsx)("div",{className:"space-y-1 max-h-40 overflow-y-auto bg-gray-800 p-2 rounded",children:ee.map(e=>(0,mi.jsxs)("div",{className:"flex items-center justify-between bg-gray-700 px-2 py-1 rounded text-xs",children:[(0,mi.jsxs)("div",{className:"flex-1",children:[(0,mi.jsx)("div",{className:"text-green-200 font-medium",children:e.material_name}),(0,mi.jsxs)("div",{className:"text-gray-300",children:[e.width,"mm \xd7 ",e.meters,"m"]})]}),(0,mi.jsx)("button",{onClick:()=>{return t=e.id,void te(e=>e.filter(e=>e.id!==t));var t},className:"text-red-400 hover:text-red-300 ml-2",title:"Remove width",children:"\u2715"})]},e.id))}),(0,mi.jsxs)("button",{onClick:Be,className:"mt-3 w-full px-4 py-2 bg-yellow-600 text-white text-sm font-medium rounded hover:bg-yellow-700",children:["Submit to Raw Materials On Hand (",ee.length,")"]})]}),0===ee.length&&(0,mi.jsx)("div",{className:"text-xs text-gray-400 italic",children:"No pending slit widths. Add materials above to submit to Raw Materials."})]})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("h4",{className:"font-semibold text-white mb-2",children:"Production Times (minutes)"}),(0,mi.jsx)("table",{className:"w-full text-sm border border-gray-600",children:(0,mi.jsxs)("tbody",{children:[(0,mi.jsxs)("tr",{className:"border-b border-gray-600",children:[(0,mi.jsx)("td",{className:"p-2 bg-gray-700 text-gray-300",children:"Setup Time"}),(0,mi.jsx)("td",{className:"p-2 text-right font-medium text-white",children:u.setupTime})]}),(0,mi.jsxs)("tr",{className:"border-b border-gray-600",children:[(0,mi.jsx)("td",{className:"p-2 bg-gray-700 text-gray-300",children:"Run Time (Estimated)"}),(0,mi.jsx)("td",{className:"p-2 text-right font-medium text-white",children:u.runTime})]}),(0,mi.jsxs)("tr",{className:"border-b border-gray-600",children:[(0,mi.jsxs)("td",{className:"p-2 bg-gray-700 text-gray-300",children:["Actual Run Time",v&&(0,mi.jsx)("span",{className:"ml-2 px-2 py-1 bg-green-600 text-white text-xs rounded-full animate-pulse",children:"RUNNING"})]}),(0,mi.jsx)("td",{className:"p-2 text-right font-medium text-white",children:S?(0,mi.jsxs)("div",{className:"flex items-center justify-end space-x-2",children:[(0,mi.jsx)("input",{type:"number",value:E,onChange:e=>D(e.target.value),className:"w-20 px-2 py-1 text-sm bg-gray-600 border border-gray-500 rounded text-white text-center",min:"0",autoFocus:!0}),(0,mi.jsx)("button",{onClick:Pe,className:"px-2 py-1 bg-green-600 text-white text-xs rounded hover:bg-green-700",children:"\u2713"}),(0,mi.jsx)("button",{onClick:Ae,className:"px-2 py-1 bg-red-600 text-white text-xs rounded hover:bg-red-700",children:"\u2715"})]}):(0,mi.jsx)("span",{onDoubleClick:N>0?De:void 0,className:"".concat(N>0?"cursor-pointer hover:bg-gray-600 px-2 py-1 rounded":""," ").concat(v?"text-green-400":N>0?"text-blue-400":"text-gray-500"),title:N>0?"Double-click to edit actual run time":"Start job to track actual time",children:v?"".concat(Math.floor((P-new Date(w).getTime())/6e4)," min (Live)"):N>0?"".concat(Math.floor(N/60),"h ").concat(N%60,"m"):"\u2014"})})]}),(0,mi.jsxs)("tr",{className:"bg-green-600 font-bold text-white",children:[(0,mi.jsx)("td",{className:"p-2",children:"TOTAL PRODUCTION TIME"}),(0,mi.jsx)("td",{className:"p-2 text-right",children:u.totalProductionTime})]}),(0,mi.jsx)("tr",{children:(0,mi.jsxs)("td",{className:"p-2 text-gray-400 text-xs",colSpan:"2",children:["Estimated finish: ",u.totalProductionTime?"".concat(u.totalProductionTime," minutes from start"):"N/A",N>0&&(0,mi.jsx)("div",{className:"mt-1",children:"Tip: Double-click actual run time to adjust for stoppages"})]})})]})})]})]})]}),(null===Xe||void 0===Xe?void 0:Xe.other_products)&&Xe.other_products.length>0&&(0,mi.jsxs)("div",{className:"mb-6",children:[(0,mi.jsx)("h3",{className:"text-lg font-semibold text-white mb-3 border-b border-gray-600 pb-2",children:"Other Products in this Order"}),(0,mi.jsx)("div",{className:"bg-gray-700 p-3 rounded border border-gray-600",children:(0,mi.jsx)("ul",{className:"text-sm space-y-1",children:null===Xe||void 0===Xe||null===(yt=Xe.other_products)||void 0===yt?void 0:yt.map((e,t)=>(0,mi.jsxs)("li",{className:"flex justify-between text-gray-300",children:[(0,mi.jsxs)("span",{children:[e.code," - ",e.description]}),(0,mi.jsxs)("span",{children:["Qty: ",e.quantity]})]},t))})})]}),(null===c||void 0===c?void 0:c.qc_tolerances)&&"winding"!==a&&"paper_slitting"!==a&&(0,mi.jsxs)("div",{className:"mb-6",children:[(0,mi.jsxs)("h3",{className:"text-lg font-semibold text-white mb-3 border-b border-gray-600 pb-2 flex items-center",children:[(0,mi.jsx)(tl,{className:"h-5 w-5 mr-2"}),"Quality Control & Safety"]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("h4",{className:"font-semibold text-white mb-2",children:"QC Tolerances"}),(0,mi.jsx)("table",{className:"w-full text-sm border border-gray-600 max-w-md",children:(0,mi.jsxs)("tbody",{children:[(0,mi.jsxs)("tr",{className:"border-b border-gray-600",children:[(0,mi.jsx)("td",{className:"p-2 bg-gray-700 text-gray-300",children:"ID Tolerance"}),(0,mi.jsxs)("td",{className:"p-2 text-right text-white",children:["\xb1",c.qc_tolerances.id_tolerance," mm"]})]}),(0,mi.jsxs)("tr",{className:"border-b border-gray-600",children:[(0,mi.jsx)("td",{className:"p-2 bg-gray-700 text-gray-300",children:"OD Tolerance"}),(0,mi.jsxs)("td",{className:"p-2 text-right text-white",children:["\xb1",c.qc_tolerances.od_tolerance," mm"]})]}),(0,mi.jsxs)("tr",{className:"border-b border-gray-600",children:[(0,mi.jsx)("td",{className:"p-2 bg-gray-700 text-gray-300",children:"Wall Tolerance"}),(0,mi.jsxs)("td",{className:"p-2 text-right text-white",children:["\xb1",c.qc_tolerances.wall_tolerance," mm"]})]})]})})]})]}),"finishing"===a&&(0,mi.jsxs)("div",{className:"mb-6",children:[(0,mi.jsxs)("h3",{className:"text-lg font-semibold text-white mb-3 border-b border-gray-600 pb-2 flex items-center",children:[(0,mi.jsx)(Vi,{className:"h-5 w-5 mr-2"}),"Consumables Required"]}),(0,mi.jsxs)("div",{className:"bg-gray-700 p-4 rounded border border-gray-600",children:[(0,mi.jsxs)("table",{className:"w-full text-sm border border-gray-600",children:[(0,mi.jsx)("thead",{children:(0,mi.jsxs)("tr",{className:"bg-gray-600",children:[(0,mi.jsx)("th",{className:"p-2 text-left text-white",children:"Item"}),(0,mi.jsx)("th",{className:"p-2 text-right text-white",children:"Quantity Required"})]})}),(0,mi.jsxs)("tbody",{children:[(0,mi.jsxs)("tr",{className:"border-b border-gray-600",children:[(0,mi.jsx)("td",{className:"p-2 bg-gray-700 text-gray-300",children:"Cartons Required"}),(0,mi.jsx)("td",{className:"p-2 text-right font-medium text-white",children:u.cartonsRequired||"N/A"})]}),(0,mi.jsxs)("tr",{className:"border-b border-gray-600",children:[(0,mi.jsx)("td",{className:"p-2 bg-gray-700 text-gray-300",children:"Tape Rolls Required"}),(0,mi.jsx)("td",{className:"p-2 text-right font-medium text-white",children:u.tapeRollsRequired||"N/A"})]}),(0,mi.jsxs)("tr",{className:"border-b border-gray-600",children:[(0,mi.jsx)("td",{className:"p-2 bg-gray-700 text-gray-300",children:"Pallet Wrap"}),(0,mi.jsx)("td",{className:"p-2 text-right font-medium text-white",children:"As needed"})]}),(0,mi.jsxs)("tr",{className:"border-b border-gray-600",children:[(0,mi.jsx)("td",{className:"p-2 bg-gray-700 text-gray-300",children:"Labels (Carton Labels)"}),(0,mi.jsx)("td",{className:"p-2 text-right font-medium text-white",children:u.cartonsRequired||"N/A"})]}),(null===c||void 0===c?void 0:c.consumables)&&c.consumables.length>0&&c.consumables.map((e,t)=>(0,mi.jsxs)("tr",{className:"border-b border-gray-600",children:[(0,mi.jsx)("td",{className:"p-2 bg-gray-700 text-gray-300",children:e.specification_name}),(0,mi.jsx)("td",{className:"p-2 text-right font-medium text-white",children:e.measurement_unit})]},t))]})]}),(0,mi.jsx)("div",{className:"mt-4",children:(0,mi.jsxs)("button",{onClick:Ge,className:"w-full px-4 py-2 bg-yellow-600 text-white rounded hover:bg-yellow-700 flex items-center justify-center space-x-2",children:[(0,mi.jsx)(Gl,{className:"h-5 w-5"}),(0,mi.jsxs)("span",{children:["Print Carton Labels (",u.cartonsRequired||0," labels)"]})]})})]})]}),"finishing"===a&&(null===l||void 0===l||null===(bt=l.order)||void 0===bt?void 0:bt.items)&&l.order.items.length>0&&(0,mi.jsxs)("div",{className:"mb-6",children:[(0,mi.jsxs)("h3",{className:"text-lg font-semibold text-white mb-3 border-b border-gray-600 pb-2 flex items-center",children:[(0,mi.jsx)(Vi,{className:"h-5 w-5 mr-2"}),"Order Products Checklist"]}),(0,mi.jsxs)("div",{className:"bg-gray-700 p-4 rounded border border-gray-600",children:[(0,mi.jsx)("p",{className:"text-sm text-gray-300 mb-3",children:"Check off each product as it's completed and ready for packing:"}),(0,mi.jsx)("div",{className:"space-y-2",children:l.order.items.map((e,t)=>(0,mi.jsxs)("div",{className:"flex items-center p-3 rounded border transition-all ".concat(ne[t]?"bg-green-900/30 border-green-500":"bg-gray-600 border-gray-500"),children:[(0,mi.jsx)("input",{type:"checkbox",id:"product-".concat(t),checked:ne[t]||!1,onChange:()=>{return e=t,void re(t=>m(m({},t),{},{[e]:!t[e]}));var e},className:"w-5 h-5 text-green-600 bg-gray-700 border-gray-500 rounded focus:ring-green-500 focus:ring-2 cursor-pointer"}),(0,mi.jsx)("label",{htmlFor:"product-".concat(t),className:"ml-3 flex-1 cursor-pointer",children:(0,mi.jsxs)("div",{className:"flex justify-between items-center",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("span",{className:"font-medium ".concat(ne[t]?"text-green-300":"text-white"),children:e.product_name||e.product_code||"Product"}),e.allocated_stock&&(0,mi.jsxs)("span",{className:"ml-2 text-xs text-blue-300",children:["(Stock Allocated: ",e.allocated_stock.quantity,")"]})]}),(0,mi.jsxs)("div",{className:"text-right",children:[(0,mi.jsxs)("span",{className:"text-sm ".concat(ne[t]?"text-green-300":"text-gray-300"),children:["Qty: ",e.quantity]}),e.unit_price&&(0,mi.jsxs)("span",{className:"ml-3 text-xs text-gray-400",children:["$",parseFloat(e.unit_price).toFixed(2)," ea"]})]})]})}),ne[t]&&(0,mi.jsx)("div",{className:"ml-3",children:(0,mi.jsx)("span",{className:"text-green-400 text-xl",children:"\u2713"})})]},t))}),(0,mi.jsxs)("div",{className:"mt-4 pt-3 border-t border-gray-600",children:[(0,mi.jsxs)("div",{className:"flex justify-between items-center",children:[(0,mi.jsx)("span",{className:"text-sm font-medium text-gray-300",children:"Completion Progress:"}),(0,mi.jsxs)("span",{className:"text-sm font-bold text-white",children:[Object.values(ne).filter(Boolean).length," / ",l.order.items.length," products completed"]})]}),Object.values(ne).filter(Boolean).length===l.order.items.length&&(0,mi.jsx)("div",{className:"mt-2 p-2 bg-green-900/50 border border-green-500 rounded text-center",children:(0,mi.jsx)("span",{className:"text-green-300 font-medium text-sm",children:"\u2713 All products completed and ready for packing!"})})]})]})]}),"winding"!==a&&"paper_slitting"!==a&&"finishing"!==a&&(0,mi.jsxs)("div",{className:"mb-6",children:[(0,mi.jsxs)("h3",{className:"text-lg font-semibold text-white mb-3 border-b border-gray-600 pb-2 flex items-center",children:[(0,mi.jsx)(Wi,{className:"h-5 w-5 mr-2"}),"Packing & Delivery"]}),(0,mi.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("h4",{className:"font-semibold text-white mb-2",children:"Packing Requirements"}),(0,mi.jsx)("table",{className:"w-full text-sm border border-gray-600",children:(0,mi.jsxs)("tbody",{children:[(0,mi.jsxs)("tr",{className:"border-b border-gray-600",children:[(0,mi.jsx)("td",{className:"p-2 bg-gray-700 text-gray-300",children:"Tubes per Carton"}),(0,mi.jsx)("td",{className:"p-2 text-right font-medium text-white",children:u.tubesPerCarton})]}),(0,mi.jsxs)("tr",{className:"border-b border-gray-600",children:[(0,mi.jsx)("td",{className:"p-2 bg-gray-700 text-gray-300",children:"Cartons Required"}),(0,mi.jsx)("td",{className:"p-2 text-right font-medium text-white",children:u.cartonsRequired})]}),(0,mi.jsxs)("tr",{className:"border-b border-gray-600",children:[(0,mi.jsx)("td",{className:"p-2 bg-gray-700 text-gray-300",children:"Cartons per Pallet"}),(0,mi.jsx)("td",{className:"p-2 text-right font-medium text-white",children:u.cartonsPerPallet})]}),(0,mi.jsxs)("tr",{className:"bg-blue-600 font-bold text-white",children:[(0,mi.jsx)("td",{className:"p-2",children:"PALLETS REQUIRED"}),(0,mi.jsx)("td",{className:"p-2 text-right",children:u.palletsRequired})]})]})})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("h4",{className:"font-semibold text-white mb-2",children:"Consumables Usage"}),(0,mi.jsx)("table",{className:"w-full text-sm border border-gray-600",children:(0,mi.jsxs)("tbody",{children:[(0,mi.jsxs)("tr",{className:"border-b border-gray-600",children:[(0,mi.jsx)("td",{className:"p-2 bg-gray-700 text-gray-300",children:"Cartons Required"}),(0,mi.jsx)("td",{className:"p-2 text-right font-medium text-white",children:u.cartonsRequired})]}),(0,mi.jsxs)("tr",{className:"border-b border-gray-600",children:[(0,mi.jsx)("td",{className:"p-2 bg-gray-700 text-gray-300",children:"Tape Rolls Required"}),(0,mi.jsx)("td",{className:"p-2 text-right font-medium text-white",children:u.tapeRollsRequired})]}),(null===c||void 0===c?void 0:c.consumables)&&c.consumables.length>0&&c.consumables.map((e,t)=>(0,mi.jsxs)("tr",{className:"border-b border-gray-600",children:[(0,mi.jsx)("td",{className:"p-2 bg-gray-700 text-gray-300",children:e.specification_name}),(0,mi.jsx)("td",{className:"p-2 text-right font-medium text-white",children:e.measurement_unit})]},t))]})})]})]})]}),("finishing"===a||"winding"!==a&&"paper_slitting"!==a)&&(0,mi.jsxs)("div",{className:"border-t-2 border-gray-600 pt-4 mt-8",children:[(0,mi.jsxs)("h3",{className:"text-lg font-semibold text-white mb-4",children:["Operator Sign-off",(0,mi.jsx)("span",{className:"text-sm text-gray-400 ml-3 font-normal",children:"Double-click to sign"})]}),(0,mi.jsxs)("div",{className:"grid grid-cols-3 gap-6",children:[(0,mi.jsxs)("div",{className:"text-center",children:["setup"===R.type?(0,mi.jsx)("div",{className:"mb-2 h-8 flex items-center justify-center",children:(0,mi.jsx)("input",{type:"text",value:R.tempName,onChange:e=>F(t=>m(m({},t),{},{tempName:e.target.value})),className:"w-full px-2 py-1 text-sm bg-gray-600 border border-gray-500 rounded text-white text-center",placeholder:"Enter your name",autoFocus:!0,onKeyPress:e=>"Enter"===e.key&&Le()})}):(0,mi.jsx)("div",{className:"mb-2 h-8 border-b-2 border-gray-500 cursor-pointer hover:bg-gray-700 transition-colors flex items-center justify-center ".concat(T.setup.name?"bg-green-900":""),onDoubleClick:()=>Te("setup"),title:"Double-click to sign",children:T.setup.name?(0,mi.jsxs)("div",{className:"flex flex-col",children:[(0,mi.jsx)("div",{className:"font-medium text-white",children:T.setup.name}),T.setup.date&&(0,mi.jsx)("div",{className:"text-xs text-gray-300",children:T.setup.date})]}):(0,mi.jsx)("span",{className:"text-gray-400 text-sm",children:"Click to sign"})}),(0,mi.jsx)("div",{className:"text-sm text-gray-400",children:"Setup By / Date"}),"setup"===R.type&&(0,mi.jsxs)("div",{className:"flex justify-center space-x-1 mt-2",children:[(0,mi.jsx)("button",{onClick:Le,className:"px-2 py-1 bg-green-600 text-white text-xs rounded hover:bg-green-700",disabled:!R.tempName.trim(),children:"\u2713 Sign"}),(0,mi.jsx)("button",{onClick:Re,className:"px-2 py-1 bg-red-600 text-white text-xs rounded hover:bg-red-700",children:"\u2715 Cancel"})]}),T.setup.name&&"setup"!==R.type&&(0,mi.jsx)("button",{onClick:()=>Fe("setup"),className:"mt-1 text-xs text-red-400 hover:text-red-300",children:"Clear"})]}),(0,mi.jsxs)("div",{className:"text-center",children:["production"===R.type?(0,mi.jsx)("div",{className:"mb-2 h-8 flex items-center justify-center",children:(0,mi.jsx)("input",{type:"text",value:R.tempName,onChange:e=>F(t=>m(m({},t),{},{tempName:e.target.value})),className:"w-full px-2 py-1 text-sm bg-gray-600 border border-gray-500 rounded text-white text-center",placeholder:"Enter your name",autoFocus:!0,onKeyPress:e=>"Enter"===e.key&&Le()})}):(0,mi.jsx)("div",{className:"mb-2 h-8 border-b-2 border-gray-500 cursor-pointer hover:bg-gray-700 transition-colors flex items-center justify-center ".concat(T.production.name?"bg-green-900":""),onDoubleClick:()=>Te("production"),title:"Double-click to sign",children:T.production.name?(0,mi.jsxs)("div",{className:"flex flex-col",children:[(0,mi.jsx)("div",{className:"font-medium text-white",children:T.production.name}),T.production.date&&(0,mi.jsx)("div",{className:"text-xs text-gray-300",children:T.production.date})]}):(0,mi.jsx)("span",{className:"text-gray-400 text-sm",children:"Click to sign"})}),(0,mi.jsx)("div",{className:"text-sm text-gray-400",children:"Production By / Date"}),"production"===R.type&&(0,mi.jsxs)("div",{className:"flex justify-center space-x-1 mt-2",children:[(0,mi.jsx)("button",{onClick:Le,className:"px-2 py-1 bg-green-600 text-white text-xs rounded hover:bg-green-700",disabled:!R.tempName.trim(),children:"\u2713 Sign"}),(0,mi.jsx)("button",{onClick:Re,className:"px-2 py-1 bg-red-600 text-white text-xs rounded hover:bg-red-700",children:"\u2715 Cancel"})]}),T.production.name&&"production"!==R.type&&(0,mi.jsx)("button",{onClick:()=>Fe("production"),className:"mt-1 text-xs text-red-400 hover:text-red-300",children:"Clear"})]}),(0,mi.jsxs)("div",{className:"text-center",children:["qc"===R.type?(0,mi.jsx)("div",{className:"mb-2 h-8 flex items-center justify-center",children:(0,mi.jsx)("input",{type:"text",value:R.tempName,onChange:e=>F(t=>m(m({},t),{},{tempName:e.target.value})),className:"w-full px-2 py-1 text-sm bg-gray-600 border border-gray-500 rounded text-white text-center",placeholder:"Enter your name",autoFocus:!0,onKeyPress:e=>"Enter"===e.key&&Le()})}):(0,mi.jsx)("div",{className:"mb-2 h-8 border-b-2 border-gray-500 cursor-pointer hover:bg-gray-700 transition-colors flex items-center justify-center ".concat(T.qc.name?"bg-green-900":""),onDoubleClick:()=>Te("qc"),title:"Double-click to sign",children:T.qc.name?(0,mi.jsxs)("div",{className:"flex flex-col",children:[(0,mi.jsx)("div",{className:"font-medium text-white",children:T.qc.name}),T.qc.date&&(0,mi.jsx)("div",{className:"text-xs text-gray-300",children:T.qc.date})]}):(0,mi.jsx)("span",{className:"text-gray-400 text-sm",children:"Click to sign"})}),(0,mi.jsx)("div",{className:"text-sm text-gray-400",children:"QC Check By / Date"}),"qc"===R.type&&(0,mi.jsxs)("div",{className:"flex justify-center space-x-1 mt-2",children:[(0,mi.jsx)("button",{onClick:Le,className:"px-2 py-1 bg-green-600 text-white text-xs rounded hover:bg-green-700",disabled:!R.tempName.trim(),children:"\u2713 Sign"}),(0,mi.jsx)("button",{onClick:Re,className:"px-2 py-1 bg-red-600 text-white text-xs rounded hover:bg-red-700",children:"\u2715 Cancel"})]}),T.qc.name&&"qc"!==R.type&&(0,mi.jsx)("button",{onClick:()=>Fe("qc"),className:"mt-1 text-xs text-red-400 hover:text-red-300",children:"Clear"})]})]})]})]})]})}),oe&&(0,mi.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:(0,mi.jsxs)("div",{className:"bg-gray-800 rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto p-6",children:[(0,mi.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,mi.jsx)("h3",{className:"text-xl font-semibold text-white",children:"Select Label Template"}),(0,mi.jsx)("button",{onClick:()=>ce(!1),className:"text-gray-400 hover:text-white",children:(0,mi.jsx)(nl,{className:"h-6 w-6"})})]}),0===de.length?(0,mi.jsxs)("div",{className:"text-center py-12",children:[(0,mi.jsx)("p",{className:"text-gray-400 mb-4",children:"No label templates found."}),(0,mi.jsx)("p",{className:"text-sm text-gray-500",children:"Create a template in the Label Designer first."})]}):(0,mi.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:de.map(e=>{var t;return(0,mi.jsxs)("div",{onClick:()=>(e=>{pe(e),ce(!1),xe(!0)})(e),className:"bg-gray-700 border border-gray-600 rounded-lg p-4 cursor-pointer hover:border-yellow-600 transition-colors",children:[(0,mi.jsx)("h4",{className:"text-lg font-semibold text-white mb-2",children:e.template_name}),(0,mi.jsxs)("div",{className:"text-sm text-gray-400 space-y-1",children:[(0,mi.jsxs)("p",{children:["Size: ",e.width_mm," \xd7 ",e.height_mm," mm"]}),(0,mi.jsxs)("p",{children:["Fields: ",(null===(t=e.fields)||void 0===t?void 0:t.length)||0]}),e.logo&&(0,mi.jsx)("p",{className:"text-blue-400",children:"\u2713 Logo included"}),e.include_qr_code&&(0,mi.jsx)("p",{className:"text-blue-400",children:"\u2713 QR Code included"})]}),(0,mi.jsx)("button",{className:"mt-3 w-full px-3 py-2 bg-yellow-600 text-white rounded hover:bg-yellow-700 text-sm",children:"Select Template"})]},e.id)})})]})}),fe&&(0,mi.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:(0,mi.jsxs)("div",{className:"bg-gray-800 rounded-lg max-w-2xl w-full p-6",children:[(0,mi.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,mi.jsx)("h3",{className:"text-xl font-semibold text-white",children:"Select Printer"}),(0,mi.jsx)("button",{onClick:()=>ge(!1),className:"text-gray-400 hover:text-white",children:(0,mi.jsx)(nl,{className:"h-6 w-6"})})]}),(0,mi.jsx)("div",{className:"mb-4 bg-gray-700 p-3 rounded",children:(0,mi.jsxs)("p",{className:"text-white text-sm",children:[(0,mi.jsx)("strong",{children:"Quantity to print:"})," ",u.cartonsRequired||0," labels"]})}),(0,mi.jsx)("div",{className:"space-y-2 mb-6 max-h-96 overflow-y-auto",children:ye.map((e,t)=>(0,mi.jsx)("div",{onClick:()=>je(e),className:"p-4 rounded border-2 cursor-pointer transition-all ".concat((null===ve||void 0===ve?void 0:ve.name)===e.name?"border-yellow-600 bg-yellow-600/20":"border-gray-600 bg-gray-700 hover:border-gray-500"),children:(0,mi.jsxs)("div",{className:"flex items-center justify-between",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("p",{className:"text-white font-medium",children:e.name}),e.is_default&&(0,mi.jsx)("span",{className:"text-xs text-green-400",children:"Default Printer"}),e.is_browser&&(0,mi.jsx)("span",{className:"text-xs text-blue-400 block mt-1",children:"Uses your browser's print dialog"})]}),(null===ve||void 0===ve?void 0:ve.name)===e.name&&(0,mi.jsx)("div",{className:"text-yellow-400",children:(0,mi.jsx)("svg",{className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 20 20",children:(0,mi.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})})]})},t))}),(0,mi.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,mi.jsx)("button",{onClick:()=>{ge(!1),xe(!0)},className:"misty-button misty-button-secondary",children:"Back to Preview"}),(0,mi.jsxs)("button",{onClick:$e,disabled:!ve,className:"misty-button misty-button-primary flex items-center disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,mi.jsx)(Gl,{className:"h-5 w-5 mr-2"}),"Print ",u.cartonsRequired||0," Label(s)"]})]})]})}),he&&me&&(0,mi.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:(0,mi.jsxs)("div",{className:"bg-gray-800 rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto p-6",children:[(0,mi.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,mi.jsx)("h3",{className:"text-xl font-semibold text-white",children:"Label Preview"}),(0,mi.jsx)("button",{onClick:()=>xe(!1),className:"text-gray-400 hover:text-white",children:(0,mi.jsx)(nl,{className:"h-6 w-6"})})]}),(0,mi.jsxs)("div",{className:"mb-4 bg-gray-700 p-3 rounded",children:[(0,mi.jsxs)("p",{className:"text-white text-sm",children:[(0,mi.jsx)("strong",{children:"Template:"})," ",me.template_name]}),(0,mi.jsxs)("p",{className:"text-gray-300 text-sm mt-1",children:[(0,mi.jsx)("strong",{children:"Quantity to print:"})," ",u.cartonsRequired||0," labels"]})]}),(0,mi.jsx)("div",{className:"bg-white rounded-lg p-6 mb-4",children:(0,mi.jsxs)("div",{className:"relative bg-white border-2 border-gray-400 mx-auto print-label",style:{width:"".concat(3.779527559*me.width_mm,"px"),height:"".concat(3.779527559*me.height_mm,"px"),maxWidth:"100%"},children:[null===(vt=me.shapes)||void 0===vt?void 0:vt.map(e=>{const t="line"===e.shape_type;return(0,mi.jsx)("div",{className:"absolute",style:{left:"".concat(3.779527559*e.x_position,"px"),top:"".concat(3.779527559*e.y_position,"px"),width:"".concat(3.779527559*e.width,"px"),height:"".concat(3.779527559*e.height,"px"),border:t?"none":"".concat(e.border_width,"px solid ").concat(e.border_color),backgroundColor:t?e.border_color:e.fill_color||"transparent",borderRadius:"circle"===e.shape_type?"50%":"0"}},e.id)}),me.logo&&(0,mi.jsx)("img",{src:me.logo.image_data,alt:"Company Logo",className:"absolute",style:{left:"".concat(3.779527559*me.logo.x_position,"px"),top:"".concat(3.779527559*me.logo.y_position,"px"),width:"".concat(3.779527559*me.logo.width,"px"),height:"".concat(3.779527559*me.logo.height,"px"),objectFit:"contain"}}),null===(jt=me.fields)||void 0===jt?void 0:jt.map(e=>{const t=Qe()[e.field_name]||"N/A";return(0,mi.jsxs)("div",{className:"absolute text-black",style:{left:"".concat(3.779527559*e.x_position,"px"),top:"".concat(3.779527559*e.y_position,"px"),fontSize:"".concat(e.font_size,"pt"),fontWeight:e.font_weight,textAlign:e.text_align,maxWidth:e.max_width?"".concat(3.779527559*e.max_width,"px"):"none"},children:[(0,mi.jsxs)("div",{className:"text-xs text-gray-600",children:[e.label,":"]}),(0,mi.jsx)("div",{className:"font-medium",children:t})]},e.id)}),me.include_qr_code&&(0,mi.jsx)("div",{className:"absolute flex items-center justify-center bg-white p-1",style:{left:"".concat(3.779527559*me.qr_code_x,"px"),top:"".concat(3.779527559*me.qr_code_y,"px"),width:"".concat(3.779527559*me.qr_code_size,"px"),height:"".concat(3.779527559*me.qr_code_size,"px")},children:(0,mi.jsx)(Uo,{value:Qe().order_number,size:3.779527559*me.qr_code_size-8,level:"M",includeMargin:!1})})]})}),(0,mi.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,mi.jsx)("button",{onClick:()=>{xe(!1),ce(!0)},className:"misty-button misty-button-secondary",children:"Choose Different Template"}),(0,mi.jsxs)("button",{onClick:Ve,className:"misty-button misty-button-primary flex items-center",children:[(0,mi.jsx)(Gl,{className:"h-5 w-5 mr-2"}),"Continue to Print (",u.cartonsRequired||0," labels)"]})]})]})})]})}catch(wt){return console.error("JobCard render error:",wt),(0,mi.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,mi.jsxs)("div",{className:"bg-gray-800 rounded-lg p-8",children:[(0,mi.jsxs)("p",{className:"text-white",children:["Error loading job card: ",wt.message]}),(0,mi.jsx)("button",{onClick:r,className:"misty-button misty-button-secondary mt-4",children:"Close"})]})})}};function tc(e,t){return tc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},tc(e,t)}function ac(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,tc(e,t)}function sc(){return sc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},sc.apply(null,arguments)}function nc(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var rc="function"===typeof Symbol&&Symbol.observable||"@@observable",ic=function(){return Math.random().toString(36).substring(7).split("").join(".")},lc={INIT:"@@redux/INIT"+ic(),REPLACE:"@@redux/REPLACE"+ic(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+ic()}};function oc(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function cc(e,t,a){var s;if("function"===typeof t&&"function"===typeof a||"function"===typeof a&&"function"===typeof arguments[3])throw new Error(nc(0));if("function"===typeof t&&"undefined"===typeof a&&(a=t,t=void 0),"undefined"!==typeof a){if("function"!==typeof a)throw new Error(nc(1));return a(cc)(e,t)}if("function"!==typeof e)throw new Error(nc(2));var n=e,r=t,i=[],l=i,o=!1;function c(){l===i&&(l=i.slice())}function d(){if(o)throw new Error(nc(3));return r}function u(e){if("function"!==typeof e)throw new Error(nc(4));if(o)throw new Error(nc(5));var t=!0;return c(),l.push(e),function(){if(t){if(o)throw new Error(nc(6));t=!1,c();var a=l.indexOf(e);l.splice(a,1),i=null}}}function m(e){if(!oc(e))throw new Error(nc(7));if("undefined"===typeof e.type)throw new Error(nc(8));if(o)throw new Error(nc(9));try{o=!0,r=n(r,e)}finally{o=!1}for(var t=i=l,a=0;a<t.length;a++){(0,t[a])()}return e}return m({type:lc.INIT}),(s={dispatch:m,subscribe:u,getState:d,replaceReducer:function(e){if("function"!==typeof e)throw new Error(nc(10));n=e,m({type:lc.REPLACE})}})[rc]=function(){var e,t=u;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new Error(nc(11));function a(){e.next&&e.next(d())}return a(),{unsubscribe:t(a)}}})[rc]=function(){return this},e},s}function dc(e,t){return function(){return t(e.apply(this,arguments))}}function uc(e,t){if("function"===typeof e)return dc(e,t);if("object"!==typeof e||null===e)throw new Error(nc(16));var a={};for(var s in e){var n=e[s];"function"===typeof n&&(a[s]=dc(n,t))}return a}function mc(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})}var pc=n.createContext(null);var hc=function(e){e()},xc=function(){return hc};var fc={notify:function(){},get:function(){return[]}};function gc(e,t){var a,s=fc;function n(){i.onStateChange&&i.onStateChange()}function r(){a||(a=t?t.addNestedSub(n):e.subscribe(n),s=function(){var e=xc(),t=null,a=null;return{clear:function(){t=null,a=null},notify:function(){e(function(){for(var e=t;e;)e.callback(),e=e.next})},get:function(){for(var e=[],a=t;a;)e.push(a),a=a.next;return e},subscribe:function(e){var s=!0,n=a={callback:e,next:null,prev:a};return n.prev?n.prev.next=n:t=n,function(){s&&null!==t&&(s=!1,n.next?n.next.prev=n.prev:a=n.prev,n.prev?n.prev.next=n.next:t=n.next)}}}}())}var i={addNestedSub:function(e){return r(),s.subscribe(e)},notifyNestedSubs:function(){s.notify()},handleChangeWrapper:n,isSubscribed:function(){return Boolean(a)},trySubscribe:r,tryUnsubscribe:function(){a&&(a(),a=void 0,s.clear(),s=fc)},getListeners:function(){return s}};return i}var yc="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement?n.useLayoutEffect:n.useEffect;const bc=function(e){var t=e.store,a=e.context,s=e.children,r=(0,n.useMemo)(function(){var e=gc(t);return{store:t,subscription:e}},[t]),i=(0,n.useMemo)(function(){return t.getState()},[t]);yc(function(){var e=r.subscription;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),i!==t.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=null}},[r,i]);var l=a||pc;return n.createElement(l.Provider,{value:r},s)};var vc=a(219),jc=a.n(vc),wc=a(348),_c=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],Nc=["reactReduxForwardedRef"],kc=[],Sc=[null,null];function Cc(e,t){var a=e[1];return[t.payload,a+1]}function Ec(e,t,a){yc(function(){return e.apply(void 0,t)},a)}function Dc(e,t,a,s,n,r,i){e.current=s,t.current=n,a.current=!1,r.current&&(r.current=null,i())}function Pc(e,t,a,s,n,r,i,l,o,c){if(e){var d=!1,u=null,m=function(){if(!d){var e,a,m=t.getState();try{e=s(m,n.current)}catch(Zf){a=Zf,u=Zf}a||(u=null),e===r.current?i.current||o():(r.current=e,l.current=e,i.current=!0,c({type:"STORE_UPDATED",payload:{error:a}}))}};a.onStateChange=m,a.trySubscribe(),m();return function(){if(d=!0,a.tryUnsubscribe(),a.onStateChange=null,u)throw u}}}var Ac=function(){return[null,0]};function Tc(e,t){void 0===t&&(t={});var a=t,s=a.getDisplayName,r=void 0===s?function(e){return"ConnectAdvanced("+e+")"}:s,l=a.methodName,o=void 0===l?"connectAdvanced":l,c=a.renderCountProp,d=void 0===c?void 0:c,u=a.shouldHandleStateChanges,m=void 0===u||u,p=a.storeKey,h=void 0===p?"store":p,x=(a.withRef,a.forwardRef),f=void 0!==x&&x,g=a.context,y=void 0===g?pc:g,b=i(a,_c),v=y;return function(t){var a=t.displayName||t.name||"Component",s=r(a),l=sc({},b,{getDisplayName:r,methodName:o,renderCountProp:d,shouldHandleStateChanges:m,storeKey:h,displayName:s,wrappedComponentName:a,WrappedComponent:t}),c=b.pure;var u=c?n.useMemo:function(e){return e()};function p(a){var s=(0,n.useMemo)(function(){var e=a.reactReduxForwardedRef,t=i(a,Nc);return[a.context,e,t]},[a]),r=s[0],o=s[1],c=s[2],d=(0,n.useMemo)(function(){return r&&r.Consumer&&(0,wc.isContextConsumer)(n.createElement(r.Consumer,null))?r:v},[r,v]),p=(0,n.useContext)(d),h=Boolean(a.store)&&Boolean(a.store.getState)&&Boolean(a.store.dispatch);Boolean(p)&&Boolean(p.store);var x=h?a.store:p.store,f=(0,n.useMemo)(function(){return function(t){return e(t.dispatch,l)}(x)},[x]),g=(0,n.useMemo)(function(){if(!m)return Sc;var e=gc(x,h?null:p.subscription),t=e.notifyNestedSubs.bind(e);return[e,t]},[x,h,p]),y=g[0],b=g[1],j=(0,n.useMemo)(function(){return h?p:sc({},p,{subscription:y})},[h,p,y]),w=(0,n.useReducer)(Cc,kc,Ac),_=w[0][0],N=w[1];if(_&&_.error)throw _.error;var k=(0,n.useRef)(),S=(0,n.useRef)(c),C=(0,n.useRef)(),E=(0,n.useRef)(!1),D=u(function(){return C.current&&c===S.current?C.current:f(x.getState(),c)},[x,_,c]);Ec(Dc,[S,k,E,c,D,C,b]),Ec(Pc,[m,x,y,f,S,k,E,C,b,N],[x,y,f]);var P=(0,n.useMemo)(function(){return n.createElement(t,sc({},D,{ref:o}))},[o,t,D]);return(0,n.useMemo)(function(){return m?n.createElement(d.Provider,{value:j},P):P},[d,P,j])}var x=c?n.memo(p):p;if(x.WrappedComponent=t,x.displayName=p.displayName=s,f){var g=n.forwardRef(function(e,t){return n.createElement(x,sc({},e,{reactReduxForwardedRef:t}))});return g.displayName=s,g.WrappedComponent=t,jc()(g,t)}return jc()(x,t)}}function Lc(e,t){return e===t?0!==e||0!==t||1/e===1/t:e!==e&&t!==t}function Rc(e,t){if(Lc(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var a=Object.keys(e),s=Object.keys(t);if(a.length!==s.length)return!1;for(var n=0;n<a.length;n++)if(!Object.prototype.hasOwnProperty.call(t,a[n])||!Lc(e[a[n]],t[a[n]]))return!1;return!0}function Fc(e){return function(t,a){var s=e(t,a);function n(){return s}return n.dependsOnOwnProps=!1,n}}function Oc(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function Mc(e,t){return function(t,a){a.displayName;var s=function(e,t){return s.dependsOnOwnProps?s.mapToProps(e,t):s.mapToProps(e)};return s.dependsOnOwnProps=!0,s.mapToProps=function(t,a){s.mapToProps=e,s.dependsOnOwnProps=Oc(e);var n=s(t,a);return"function"===typeof n&&(s.mapToProps=n,s.dependsOnOwnProps=Oc(n),n=s(t,a)),n},s}}const Ic=[function(e){return"function"===typeof e?Mc(e):void 0},function(e){return e?void 0:Fc(function(e){return{dispatch:e}})},function(e){return e&&"object"===typeof e?Fc(function(t){return function(e,t){var a={},s=function(s){var n=e[s];"function"===typeof n&&(a[s]=function(){return t(n.apply(void 0,arguments))})};for(var n in e)s(n);return a}(e,t)}):void 0}];const qc=[function(e){return"function"===typeof e?Mc(e):void 0},function(e){return e?void 0:Fc(function(){return{}})}];function Bc(e,t,a){return sc({},a,e,t)}const zc=[function(e){return"function"===typeof e?function(e){return function(t,a){a.displayName;var s,n=a.pure,r=a.areMergedPropsEqual,i=!1;return function(t,a,l){var o=e(t,a,l);return i?n&&r(o,s)||(s=o):(i=!0,s=o),s}}}(e):void 0},function(e){return e?void 0:function(){return Bc}}];var Uc=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function Wc(e,t,a,s){return function(n,r){return a(e(n,r),t(s,r),r)}}function Hc(e,t,a,s,n){var r,i,l,o,c,d=n.areStatesEqual,u=n.areOwnPropsEqual,m=n.areStatePropsEqual,p=!1;function h(n,p){var h=!u(p,i),x=!d(n,r,p,i);return r=n,i=p,h&&x?(l=e(r,i),t.dependsOnOwnProps&&(o=t(s,i)),c=a(l,o,i)):h?(e.dependsOnOwnProps&&(l=e(r,i)),t.dependsOnOwnProps&&(o=t(s,i)),c=a(l,o,i)):x?function(){var t=e(r,i),s=!m(t,l);return l=t,s&&(c=a(l,o,i)),c}():c}return function(n,d){return p?h(n,d):(l=e(r=n,i=d),o=t(s,i),c=a(l,o,i),p=!0,c)}}function Gc(e,t){var a=t.initMapStateToProps,s=t.initMapDispatchToProps,n=t.initMergeProps,r=i(t,Uc),l=a(e,r),o=s(e,r),c=n(e,r);return(r.pure?Hc:Wc)(l,o,c,e,r)}var Vc=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function $c(e,t,a){for(var s=t.length-1;s>=0;s--){var n=t[s](e);if(n)return n}return function(t,s){throw new Error("Invalid value of type "+typeof e+" for "+a+" argument when connecting component "+s.wrappedComponentName+".")}}function Qc(e,t){return e===t}function Yc(e){var t=void 0===e?{}:e,a=t.connectHOC,s=void 0===a?Tc:a,n=t.mapStateToPropsFactories,r=void 0===n?qc:n,l=t.mapDispatchToPropsFactories,o=void 0===l?Ic:l,c=t.mergePropsFactories,d=void 0===c?zc:c,u=t.selectorFactory,m=void 0===u?Gc:u;return function(e,t,a,n){void 0===n&&(n={});var l=n,c=l.pure,u=void 0===c||c,p=l.areStatesEqual,h=void 0===p?Qc:p,x=l.areOwnPropsEqual,f=void 0===x?Rc:x,g=l.areStatePropsEqual,y=void 0===g?Rc:g,b=l.areMergedPropsEqual,v=void 0===b?Rc:b,j=i(l,Vc),w=$c(e,r,"mapStateToProps"),_=$c(t,o,"mapDispatchToProps"),N=$c(a,d,"mergeProps");return s(m,sc({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:w,initMapDispatchToProps:_,initMergeProps:N,pure:u,areStatesEqual:h,areOwnPropsEqual:f,areStatePropsEqual:y,areMergedPropsEqual:v},j))}}const Jc=Yc();var Zc;function Xc(e,t){var a=(0,n.useState)(function(){return{inputs:t,result:e()}})[0],s=(0,n.useRef)(!0),r=(0,n.useRef)(a),i=s.current||Boolean(t&&r.current.inputs&&function(e,t){if(e.length!==t.length)return!1;for(var a=0;a<e.length;a++)if(e[a]!==t[a])return!1;return!0}(t,r.current.inputs))?r.current:{inputs:t,result:e()};return(0,n.useEffect)(function(){s.current=!1,r.current=i},[i]),i.result}Zc=Ct.unstable_batchedUpdates,hc=Zc;var Kc=Xc,ed=function(e,t){return Xc(function(){return e},t)},td="Invariant failed";var ad=function(e){var t=e.top,a=e.right,s=e.bottom,n=e.left;return{top:t,right:a,bottom:s,left:n,width:a-n,height:s-t,x:n,y:t,center:{x:(a+n)/2,y:(s+t)/2}}},sd=function(e,t){return{top:e.top-t.top,left:e.left-t.left,bottom:e.bottom+t.bottom,right:e.right+t.right}},nd=function(e,t){return{top:e.top+t.top,left:e.left+t.left,bottom:e.bottom-t.bottom,right:e.right-t.right}},rd={top:0,right:0,bottom:0,left:0},id=function(e){var t=e.borderBox,a=e.margin,s=void 0===a?rd:a,n=e.border,r=void 0===n?rd:n,i=e.padding,l=void 0===i?rd:i,o=ad(sd(t,s)),c=ad(nd(t,r)),d=ad(nd(c,l));return{marginBox:o,borderBox:ad(t),paddingBox:c,contentBox:d,margin:s,border:r,padding:l}},ld=function(e){var t=e.slice(0,-2);if("px"!==e.slice(-2))return 0;var a=Number(t);return isNaN(a)&&function(e){if(!e)throw new Error(td)}(!1),a},od=function(e,t){var a,s,n=e.borderBox,r=e.border,i=e.margin,l=e.padding,o=(s=t,{top:(a=n).top+s.y,left:a.left+s.x,bottom:a.bottom+s.y,right:a.right+s.x});return id({borderBox:o,border:r,margin:i,padding:l})},cd=function(e,t){return void 0===t&&(t={x:window.pageXOffset,y:window.pageYOffset}),od(e,t)},dd=function(e,t){var a={top:ld(t.marginTop),right:ld(t.marginRight),bottom:ld(t.marginBottom),left:ld(t.marginLeft)},s={top:ld(t.paddingTop),right:ld(t.paddingRight),bottom:ld(t.paddingBottom),left:ld(t.paddingLeft)},n={top:ld(t.borderTopWidth),right:ld(t.borderRightWidth),bottom:ld(t.borderBottomWidth),left:ld(t.borderLeftWidth)};return id({borderBox:e,margin:a,padding:s,border:n})},ud=function(e){var t=e.getBoundingClientRect(),a=window.getComputedStyle(e);return dd(t,a)},md=Number.isNaN||function(e){return"number"===typeof e&&e!==e};function pd(e,t){return e===t||!(!md(e)||!md(t))}function hd(e,t){if(e.length!==t.length)return!1;for(var a=0;a<e.length;a++)if(!pd(e[a],t[a]))return!1;return!0}const xd=function(e,t){var a;void 0===t&&(t=hd);var s,n=[],r=!1;return function(){for(var i=[],l=0;l<arguments.length;l++)i[l]=arguments[l];return r&&a===this&&t(i,n)||(s=e.apply(this,i),r=!0,a=this,n=i),s}};const fd=function(e){var t=[],a=null,s=function(){for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];t=n,a||(a=requestAnimationFrame(function(){a=null,e.apply(void 0,t)}))};return s.cancel=function(){a&&(cancelAnimationFrame(a),a=null)},s};function gd(e,t){}gd.bind(null,"warn"),gd.bind(null,"error");function yd(){}function bd(e,t,a){var s=t.map(function(t){var s=function(e,t){return sc({},e,{},t)}(a,t.options);return e.addEventListener(t.eventName,t.fn,s),function(){e.removeEventListener(t.eventName,t.fn,s)}});return function(){s.forEach(function(e){e()})}}var vd="Invariant failed";function jd(e){this.message=e}function wd(e,t){if(!e)throw new jd(vd)}jd.prototype.toString=function(){return this.message};var _d=function(e){function t(){for(var t,a=arguments.length,s=new Array(a),n=0;n<a;n++)s[n]=arguments[n];return(t=e.call.apply(e,[this].concat(s))||this).callbacks=null,t.unbind=yd,t.onWindowError=function(e){var a=t.getCallbacks();a.isDragging()&&a.tryAbort(),e.error instanceof jd&&e.preventDefault()},t.getCallbacks=function(){if(!t.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return t.callbacks},t.setCallbacks=function(e){t.callbacks=e},t}ac(t,e);var a=t.prototype;return a.componentDidMount=function(){this.unbind=bd(window,[{eventName:"error",fn:this.onWindowError}])},a.componentDidCatch=function(e){if(!(e instanceof jd))throw e;this.setState({})},a.componentWillUnmount=function(){this.unbind()},a.render=function(){return this.props.children(this.setCallbacks)},t}(n.Component),Nd=function(e){return e+1},kd=function(e,t){var a=e.droppableId===t.droppableId,s=Nd(e.index),n=Nd(t.index);return a?"\n      You have moved the item from position "+s+"\n      to position "+n+"\n    ":"\n    You have moved the item from position "+s+"\n    in list "+e.droppableId+"\n    to list "+t.droppableId+"\n    in position "+n+"\n  "},Sd=function(e,t,a){return t.droppableId===a.droppableId?"\n      The item "+e+"\n      has been combined with "+a.draggableId:"\n      The item "+e+"\n      in list "+t.droppableId+"\n      has been combined with "+a.draggableId+"\n      in list "+a.droppableId+"\n    "},Cd=function(e){return"\n  The item has returned to its starting position\n  of "+Nd(e.index)+"\n"},Ed="\n  Press space bar to start a drag.\n  When dragging you can use the arrow keys to move the item around and escape to cancel.\n  Some screen readers may require you to be in focus mode or to use your pass through key\n",Dd=function(e){return"\n  You have lifted an item in position "+Nd(e.source.index)+"\n"},Pd=function(e){var t=e.destination;if(t)return kd(e.source,t);var a=e.combine;return a?Sd(e.draggableId,e.source,a):"You are over an area that cannot be dropped on"},Ad=function(e){if("CANCEL"===e.reason)return"\n      Movement cancelled.\n      "+Cd(e.source)+"\n    ";var t=e.destination,a=e.combine;return t?"\n      You have dropped the item.\n      "+kd(e.source,t)+"\n    ":a?"\n      You have dropped the item.\n      "+Sd(e.draggableId,e.source,a)+"\n    ":"\n    The item has been dropped while not over a drop area.\n    "+Cd(e.source)+"\n  "},Td={x:0,y:0},Ld=function(e,t){return{x:e.x+t.x,y:e.y+t.y}},Rd=function(e,t){return{x:e.x-t.x,y:e.y-t.y}},Fd=function(e,t){return e.x===t.x&&e.y===t.y},Od=function(e){return{x:0!==e.x?-e.x:0,y:0!==e.y?-e.y:0}},Md=function(e,t,a){var s;return void 0===a&&(a=0),(s={})[e]=t,s["x"===e?"y":"x"]=a,s},Id=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},qd=function(e,t){return Math.min.apply(Math,t.map(function(t){return Id(e,t)}))},Bd=function(e){return function(t){return{x:e(t.x),y:e(t.y)}}},zd=function(e,t){return{top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}},Ud=function(e){return[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}]},Wd=function(e,t){return t&&t.shouldClipSubject?function(e,t){var a=ad({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return a.width<=0||a.height<=0?null:a}(t.pageMarginBox,e):ad(e)},Hd=function(e){var t=e.page,a=e.withPlaceholder,s=e.axis,n=e.frame,r=function(e,t){return t?zd(e,t.scroll.diff.displacement):e}(t.marginBox,n),i=function(e,t,a){var s;return a&&a.increasedBy?sc({},e,((s={})[t.end]=e[t.end]+a.increasedBy[t.line],s)):e}(r,s,a);return{page:t,withPlaceholder:a,active:Wd(i,n)}},Gd=function(e,t){e.frame||wd(!1);var a=e.frame,s=Rd(t,a.scroll.initial),n=Od(s),r=sc({},a,{scroll:{initial:a.scroll.initial,current:t,diff:{value:s,displacement:n},max:a.scroll.max}});return sc({},e,{frame:r,subject:Hd({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:r})})};function Vd(e){return Object.values?Object.values(e):Object.keys(e).map(function(t){return e[t]})}function $d(e,t){if(e.findIndex)return e.findIndex(t);for(var a=0;a<e.length;a++)if(t(e[a]))return a;return-1}function Qd(e,t){if(e.find)return e.find(t);var a=$d(e,t);return-1!==a?e[a]:void 0}function Yd(e){return Array.prototype.slice.call(e)}var Jd=xd(function(e){return e.reduce(function(e,t){return e[t.descriptor.id]=t,e},{})}),Zd=xd(function(e){return e.reduce(function(e,t){return e[t.descriptor.id]=t,e},{})}),Xd=xd(function(e){return Vd(e)}),Kd=xd(function(e){return Vd(e)}),eu=xd(function(e,t){var a=Kd(t).filter(function(t){return e===t.descriptor.droppableId}).sort(function(e,t){return e.descriptor.index-t.descriptor.index});return a});function tu(e){return e.at&&"REORDER"===e.at.type?e.at.destination:null}function au(e){return e.at&&"COMBINE"===e.at.type?e.at.combine:null}var su=xd(function(e,t){return t.filter(function(t){return t.descriptor.id!==e.descriptor.id})}),nu=function(e,t){return e.descriptor.droppableId===t.descriptor.id},ru={point:Td,value:0},iu={invisible:{},visible:{},all:[]},lu={displaced:iu,displacedBy:ru,at:null},ou=function(e,t){return function(a){return e<=a&&a<=t}},cu=function(e){var t=ou(e.top,e.bottom),a=ou(e.left,e.right);return function(s){if(t(s.top)&&t(s.bottom)&&a(s.left)&&a(s.right))return!0;var n=t(s.top)||t(s.bottom),r=a(s.left)||a(s.right);if(n&&r)return!0;var i=s.top<e.top&&s.bottom>e.bottom,l=s.left<e.left&&s.right>e.right;return!(!i||!l)||(i&&r||l&&n)}},du=function(e){var t=ou(e.top,e.bottom),a=ou(e.left,e.right);return function(e){return t(e.top)&&t(e.bottom)&&a(e.left)&&a(e.right)}},uu={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},mu={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"},pu=function(e){var t=e.target,a=e.destination,s=e.viewport,n=e.withDroppableDisplacement,r=e.isVisibleThroughFrameFn,i=n?function(e,t){var a=t.frame?t.frame.scroll.diff.displacement:Td;return zd(e,a)}(t,a):t;return function(e,t,a){return!!t.subject.active&&a(t.subject.active)(e)}(i,a,r)&&function(e,t,a){return a(t)(e)}(i,s,r)},hu=function(e){return pu(sc({},e,{isVisibleThroughFrameFn:cu}))},xu=function(e){return pu(sc({},e,{isVisibleThroughFrameFn:du}))};function fu(e){var t=e.afterDragging,a=e.destination,s=e.displacedBy,n=e.viewport,r=e.forceShouldAnimate,i=e.last;return t.reduce(function(e,t){var l=function(e,t){var a=e.page.marginBox,s={top:t.point.y,right:0,bottom:0,left:t.point.x};return ad(sd(a,s))}(t,s),o=t.descriptor.id;if(e.all.push(o),!hu({target:l,destination:a,viewport:n,withDroppableDisplacement:!0}))return e.invisible[t.descriptor.id]=!0,e;var c=function(e,t,a){if("boolean"===typeof a)return a;if(!t)return!0;var s=t.invisible,n=t.visible;if(s[e])return!1;var r=n[e];return!r||r.shouldAnimate}(o,i,r),d={draggableId:o,shouldAnimate:c};return e.visible[o]=d,e},{all:[],visible:{},invisible:{}})}function gu(e){var t=e.insideDestination,a=e.inHomeList,s=e.displacedBy,n=e.destination,r=function(e,t){if(!e.length)return 0;var a=e[e.length-1].descriptor.index;return t.inHomeList?a:a+1}(t,{inHomeList:a});return{displaced:iu,displacedBy:s,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:r}}}}function yu(e){var t=e.draggable,a=e.insideDestination,s=e.destination,n=e.viewport,r=e.displacedBy,i=e.last,l=e.index,o=e.forceShouldAnimate,c=nu(t,s);if(null==l)return gu({insideDestination:a,inHomeList:c,displacedBy:r,destination:s});var d=Qd(a,function(e){return e.descriptor.index===l});if(!d)return gu({insideDestination:a,inHomeList:c,displacedBy:r,destination:s});var u=su(t,a),m=a.indexOf(d);return{displaced:fu({afterDragging:u.slice(m),destination:s,displacedBy:r,last:i,viewport:n.frame,forceShouldAnimate:o}),displacedBy:r,at:{type:"REORDER",destination:{droppableId:s.descriptor.id,index:l}}}}function bu(e,t){return Boolean(t.effected[e])}var vu=function(e){var t=e.isMovingForward,a=e.isInHomeList,s=e.draggable,n=e.draggables,r=e.destination,i=e.insideDestination,l=e.previousImpact,o=e.viewport,c=e.afterCritical,d=l.at;if(d||wd(!1),"REORDER"===d.type){var u=function(e){var t=e.isMovingForward,a=e.isInHomeList,s=e.insideDestination,n=e.location;if(!s.length)return null;var r=n.index,i=t?r+1:r-1,l=s[0].descriptor.index,o=s[s.length-1].descriptor.index;return i<l||i>(a?o:o+1)?null:i}({isMovingForward:t,isInHomeList:a,location:d.destination,insideDestination:i});return null==u?null:yu({draggable:s,insideDestination:i,destination:r,viewport:o,last:l.displaced,displacedBy:l.displacedBy,index:u})}var m=function(e){var t=e.isMovingForward,a=e.destination,s=e.draggables,n=e.combine,r=e.afterCritical;if(!a.isCombineEnabled)return null;var i=n.draggableId,l=s[i].descriptor.index;return bu(i,r)?t?l:l-1:t?l+1:l}({isMovingForward:t,destination:r,displaced:l.displaced,draggables:n,combine:d.combine,afterCritical:c});return null==m?null:yu({draggable:s,insideDestination:i,destination:r,viewport:o,last:l.displaced,displacedBy:l.displacedBy,index:m})},ju=function(e){var t=e.afterCritical,a=e.impact,s=e.draggables,n=au(a);n||wd(!1);var r=n.draggableId,i=s[r].page.borderBox.center,l=function(e){var t=e.displaced,a=e.afterCritical,s=e.combineWith,n=e.displacedBy,r=Boolean(t.visible[s]||t.invisible[s]);return bu(s,a)?r?Td:Od(n.point):r?n.point:Td}({displaced:a.displaced,afterCritical:t,combineWith:r,displacedBy:a.displacedBy});return Ld(i,l)},wu=function(e,t){return t.margin[e.start]+t.borderBox[e.size]/2},_u=function(e,t,a){return t[e.crossAxisStart]+a.margin[e.crossAxisStart]+a.borderBox[e.crossAxisSize]/2},Nu=function(e){var t=e.axis,a=e.moveRelativeTo,s=e.isMoving;return Md(t.line,a.marginBox[t.end]+wu(t,s),_u(t,a.marginBox,s))},ku=function(e){var t=e.axis,a=e.moveRelativeTo,s=e.isMoving;return Md(t.line,a.marginBox[t.start]-function(e,t){return t.margin[e.end]+t.borderBox[e.size]/2}(t,s),_u(t,a.marginBox,s))},Su=function(e){var t=e.impact,a=e.draggable,s=e.draggables,n=e.droppable,r=e.afterCritical,i=eu(n.descriptor.id,s),l=a.page,o=n.axis;if(!i.length)return function(e){var t=e.axis,a=e.moveInto,s=e.isMoving;return Md(t.line,a.contentBox[t.start]+wu(t,s),_u(t,a.contentBox,s))}({axis:o,moveInto:n.page,isMoving:l});var c=t.displaced,d=t.displacedBy,u=c.all[0];if(u){var m=s[u];if(bu(u,r))return ku({axis:o,moveRelativeTo:m.page,isMoving:l});var p=od(m.page,d.point);return ku({axis:o,moveRelativeTo:p,isMoving:l})}var h=i[i.length-1];if(h.descriptor.id===a.descriptor.id)return l.borderBox.center;if(bu(h.descriptor.id,r)){var x=od(h.page,Od(r.displacedBy.point));return Nu({axis:o,moveRelativeTo:x,isMoving:l})}return Nu({axis:o,moveRelativeTo:h.page,isMoving:l})},Cu=function(e,t){var a=e.frame;return a?Ld(t,a.scroll.diff.displacement):t},Eu=function(e){var t=function(e){var t=e.impact,a=e.draggable,s=e.droppable,n=e.draggables,r=e.afterCritical,i=a.page.borderBox.center,l=t.at;return s&&l?"REORDER"===l.type?Su({impact:t,draggable:a,draggables:n,droppable:s,afterCritical:r}):ju({impact:t,draggables:n,afterCritical:r}):i}(e),a=e.droppable;return a?Cu(a,t):t},Du=function(e,t){var a=Rd(t,e.scroll.initial),s=Od(a);return{frame:ad({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:a,displacement:s}}}};function Pu(e,t){return e.map(function(e){return t[e]})}var Au=function(e){var t=e.pageBorderBoxCenter,a=e.draggable,s=function(e,t){return Ld(e.scroll.diff.displacement,t)}(e.viewport,t),n=Rd(s,a.page.borderBox.center);return Ld(a.client.borderBox.center,n)},Tu=function(e){var t=e.draggable,a=e.destination,s=e.newPageBorderBoxCenter,n=e.viewport,r=e.withDroppableDisplacement,i=e.onlyOnMainAxis,l=void 0!==i&&i,o=Rd(s,t.page.borderBox.center),c={target:zd(t.page.borderBox,o),destination:a,withDroppableDisplacement:r,viewport:n};return l?function(e){return pu(sc({},e,{isVisibleThroughFrameFn:(t=e.destination.axis,function(e){var a=ou(e.top,e.bottom),s=ou(e.left,e.right);return function(e){return t===uu?a(e.top)&&a(e.bottom):s(e.left)&&s(e.right)}})}));var t}(c):xu(c)},Lu=function(e){var t=e.isMovingForward,a=e.draggable,s=e.destination,n=e.draggables,r=e.previousImpact,i=e.viewport,l=e.previousPageBorderBoxCenter,o=e.previousClientSelection,c=e.afterCritical;if(!s.isEnabled)return null;var d=eu(s.descriptor.id,n),u=nu(a,s),m=function(e){var t=e.isMovingForward,a=e.draggable,s=e.destination,n=e.insideDestination,r=e.previousImpact;if(!s.isCombineEnabled)return null;if(!tu(r))return null;function i(e){var t={type:"COMBINE",combine:{draggableId:e,droppableId:s.descriptor.id}};return sc({},r,{at:t})}var l=r.displaced.all,o=l.length?l[0]:null;if(t)return o?i(o):null;var c=su(a,n);if(!o)return c.length?i(c[c.length-1].descriptor.id):null;var d=$d(c,function(e){return e.descriptor.id===o});-1===d&&wd(!1);var u=d-1;return u<0?null:i(c[u].descriptor.id)}({isMovingForward:t,draggable:a,destination:s,insideDestination:d,previousImpact:r})||vu({isMovingForward:t,isInHomeList:u,draggable:a,draggables:n,destination:s,insideDestination:d,previousImpact:r,viewport:i,afterCritical:c});if(!m)return null;var p=Eu({impact:m,draggable:a,droppable:s,draggables:n,afterCritical:c});if(Tu({draggable:a,destination:s,newPageBorderBoxCenter:p,viewport:i.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:Au({pageBorderBoxCenter:p,draggable:a,viewport:i}),impact:m,scrollJumpRequest:null};var h=Rd(p,l),x=function(e){var t=e.impact,a=e.viewport,s=e.destination,n=e.draggables,r=e.maxScrollChange,i=Du(a,Ld(a.scroll.current,r)),l=s.frame?Gd(s,Ld(s.frame.scroll.current,r)):s,o=t.displaced,c=fu({afterDragging:Pu(o.all,n),destination:s,displacedBy:t.displacedBy,viewport:i.frame,last:o,forceShouldAnimate:!1}),d=fu({afterDragging:Pu(o.all,n),destination:l,displacedBy:t.displacedBy,viewport:a.frame,last:o,forceShouldAnimate:!1}),u={},m={},p=[o,c,d];return o.all.forEach(function(e){var t=function(e,t){for(var a=0;a<t.length;a++){var s=t[a].visible[e];if(s)return s}return null}(e,p);t?m[e]=t:u[e]=!0}),sc({},t,{displaced:{all:o.all,invisible:u,visible:m}})}({impact:m,viewport:i,destination:s,draggables:n,maxScrollChange:h});return{clientSelection:o,impact:x,scrollJumpRequest:h}},Ru=function(e){var t=e.subject.active;return t||wd(!1),t},Fu=function(e,t){var a=e.page.borderBox.center;return bu(e.descriptor.id,t)?Rd(a,t.displacedBy.point):a},Ou=function(e,t){var a=e.page.borderBox;return bu(e.descriptor.id,t)?zd(a,Od(t.displacedBy.point)):a},Mu=xd(function(e,t){var a=t[e.line];return{value:a,point:Md(e.line,a)}}),Iu=function(e,t){return sc({},e,{scroll:sc({},e.scroll,{max:t})})},qu=function(e,t,a){var s=e.frame;nu(t,e)&&wd(!1),e.subject.withPlaceholder&&wd(!1);var n=Mu(e.axis,t.displaceBy).point,r=function(e,t,a){var s=e.axis;if("virtual"===e.descriptor.mode)return Md(s.line,t[s.line]);var n=e.subject.page.contentBox[s.size],r=eu(e.descriptor.id,a).reduce(function(e,t){return e+t.client.marginBox[s.size]},0)+t[s.line]-n;return r<=0?null:Md(s.line,r)}(e,n,a),i={placeholderSize:n,increasedBy:r,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!s)return sc({},e,{subject:Hd({page:e.subject.page,withPlaceholder:i,axis:e.axis,frame:e.frame})});var l=r?Ld(s.scroll.max,r):s.scroll.max,o=Iu(s,l);return sc({},e,{subject:Hd({page:e.subject.page,withPlaceholder:i,axis:e.axis,frame:o}),frame:o})},Bu=function(e){var t=e.isMovingForward,a=e.previousPageBorderBoxCenter,s=e.draggable,n=e.isOver,r=e.draggables,i=e.droppables,l=e.viewport,o=e.afterCritical,c=function(e){var t=e.isMovingForward,a=e.pageBorderBoxCenter,s=e.source,n=e.droppables,r=e.viewport,i=s.subject.active;if(!i)return null;var l=s.axis,o=ou(i[l.start],i[l.end]),c=Xd(n).filter(function(e){return e!==s}).filter(function(e){return e.isEnabled}).filter(function(e){return Boolean(e.subject.active)}).filter(function(e){return cu(r.frame)(Ru(e))}).filter(function(e){var a=Ru(e);return t?i[l.crossAxisEnd]<a[l.crossAxisEnd]:a[l.crossAxisStart]<i[l.crossAxisStart]}).filter(function(e){var t=Ru(e),a=ou(t[l.start],t[l.end]);return o(t[l.start])||o(t[l.end])||a(i[l.start])||a(i[l.end])}).sort(function(e,a){var s=Ru(e)[l.crossAxisStart],n=Ru(a)[l.crossAxisStart];return t?s-n:n-s}).filter(function(e,t,a){return Ru(e)[l.crossAxisStart]===Ru(a[0])[l.crossAxisStart]});if(!c.length)return null;if(1===c.length)return c[0];var d=c.filter(function(e){return ou(Ru(e)[l.start],Ru(e)[l.end])(a[l.line])});return 1===d.length?d[0]:d.length>1?d.sort(function(e,t){return Ru(e)[l.start]-Ru(t)[l.start]})[0]:c.sort(function(e,t){var s=qd(a,Ud(Ru(e))),n=qd(a,Ud(Ru(t)));return s!==n?s-n:Ru(e)[l.start]-Ru(t)[l.start]})[0]}({isMovingForward:t,pageBorderBoxCenter:a,source:n,droppables:i,viewport:l});if(!c)return null;var d=eu(c.descriptor.id,r),u=function(e){var t=e.pageBorderBoxCenter,a=e.viewport,s=e.destination,n=e.insideDestination,r=e.afterCritical,i=n.filter(function(e){return xu({target:Ou(e,r),destination:s,viewport:a.frame,withDroppableDisplacement:!0})}).sort(function(e,a){var n=Id(t,Cu(s,Fu(e,r))),i=Id(t,Cu(s,Fu(a,r)));return n<i?-1:i<n?1:e.descriptor.index-a.descriptor.index});return i[0]||null}({pageBorderBoxCenter:a,viewport:l,destination:c,insideDestination:d,afterCritical:o}),m=function(e){var t=e.previousPageBorderBoxCenter,a=e.moveRelativeTo,s=e.insideDestination,n=e.draggable,r=e.draggables,i=e.destination,l=e.viewport,o=e.afterCritical;if(!a){if(s.length)return null;var c={displaced:iu,displacedBy:ru,at:{type:"REORDER",destination:{droppableId:i.descriptor.id,index:0}}},d=Eu({impact:c,draggable:n,droppable:i,draggables:r,afterCritical:o}),u=nu(n,i)?i:qu(i,n,r);return Tu({draggable:n,destination:u,newPageBorderBoxCenter:d,viewport:l.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?c:null}var m=Boolean(t[i.axis.line]<=a.page.borderBox.center[i.axis.line]),p=function(){var e=a.descriptor.index;return a.descriptor.id===n.descriptor.id||m?e:e+1}(),h=Mu(i.axis,n.displaceBy);return yu({draggable:n,insideDestination:s,destination:i,viewport:l,displacedBy:h,last:iu,index:p})}({previousPageBorderBoxCenter:a,destination:c,draggable:s,draggables:r,moveRelativeTo:u,insideDestination:d,viewport:l,afterCritical:o});if(!m)return null;var p=Eu({impact:m,draggable:s,droppable:c,draggables:r,afterCritical:o});return{clientSelection:Au({pageBorderBoxCenter:p,draggable:s,viewport:l}),impact:m,scrollJumpRequest:null}},zu=function(e){var t=e.at;return t?"REORDER"===t.type?t.destination.droppableId:t.combine.droppableId:null},Uu=function(e){var t=e.state,a=e.type,s=function(e,t){var a=zu(e);return a?t[a]:null}(t.impact,t.dimensions.droppables),n=Boolean(s),r=t.dimensions.droppables[t.critical.droppable.id],i=s||r,l=i.axis.direction,o="vertical"===l&&("MOVE_UP"===a||"MOVE_DOWN"===a)||"horizontal"===l&&("MOVE_LEFT"===a||"MOVE_RIGHT"===a);if(o&&!n)return null;var c="MOVE_DOWN"===a||"MOVE_RIGHT"===a,d=t.dimensions.draggables[t.critical.draggable.id],u=t.current.page.borderBoxCenter,m=t.dimensions,p=m.draggables,h=m.droppables;return o?Lu({isMovingForward:c,previousPageBorderBoxCenter:u,draggable:d,destination:i,draggables:p,viewport:t.viewport,previousClientSelection:t.current.client.selection,previousImpact:t.impact,afterCritical:t.afterCritical}):Bu({isMovingForward:c,previousPageBorderBoxCenter:u,draggable:d,isOver:i,draggables:p,droppables:h,viewport:t.viewport,afterCritical:t.afterCritical})};function Wu(e){return"DRAGGING"===e.phase||"COLLECTING"===e.phase}function Hu(e){var t=ou(e.top,e.bottom),a=ou(e.left,e.right);return function(e){return t(e.y)&&a(e.x)}}function Gu(e){var t=e.pageBorderBox,a=e.draggable,s=e.droppables,n=Xd(s).filter(function(e){if(!e.isEnabled)return!1;var a,s,n=e.subject.active;if(!n)return!1;if(s=n,!((a=t).left<s.right&&a.right>s.left&&a.top<s.bottom&&a.bottom>s.top))return!1;if(Hu(n)(t.center))return!0;var r=e.axis,i=n.center[r.crossAxisLine],l=t[r.crossAxisStart],o=t[r.crossAxisEnd],c=ou(n[r.crossAxisStart],n[r.crossAxisEnd]),d=c(l),u=c(o);return!d&&!u||(d?l<i:o>i)});return n.length?1===n.length?n[0].descriptor.id:function(e){var t=e.pageBorderBox,a=e.draggable,s=e.candidates,n=a.page.borderBox.center,r=s.map(function(e){var a=e.axis,s=Md(e.axis.line,t.center[a.line],e.page.borderBox.center[a.crossAxisLine]);return{id:e.descriptor.id,distance:Id(n,s)}}).sort(function(e,t){return t.distance-e.distance});return r[0]?r[0].id:null}({pageBorderBox:t,draggable:a,candidates:n}):null}var Vu=function(e,t){return ad(zd(e,t))};function $u(e){var t=e.displaced,a=e.id;return Boolean(t.visible[a]||t.invisible[a])}var Qu=function(e){var t=e.pageOffset,a=e.draggable,s=e.draggables,n=e.droppables,r=e.previousImpact,i=e.viewport,l=e.afterCritical,o=Vu(a.page.borderBox,t),c=Gu({pageBorderBox:o,draggable:a,droppables:n});if(!c)return lu;var d=n[c],u=eu(d.descriptor.id,s),m=function(e,t){var a=e.frame;return a?Vu(t,a.scroll.diff.value):t}(d,o);return function(e){var t=e.draggable,a=e.pageBorderBoxWithDroppableScroll,s=e.previousImpact,n=e.destination,r=e.insideDestination,i=e.afterCritical;if(!n.isCombineEnabled)return null;var l=n.axis,o=Mu(n.axis,t.displaceBy),c=o.value,d=a[l.start],u=a[l.end],m=Qd(su(t,r),function(e){var t=e.descriptor.id,a=e.page.borderBox,n=a[l.size]/4,r=bu(t,i),o=$u({displaced:s.displaced,id:t});return r?o?u>a[l.start]+n&&u<a[l.end]-n:d>a[l.start]-c+n&&d<a[l.end]-c-n:o?u>a[l.start]+c+n&&u<a[l.end]+c-n:d>a[l.start]+n&&d<a[l.end]-n});return m?{displacedBy:o,displaced:s.displaced,at:{type:"COMBINE",combine:{draggableId:m.descriptor.id,droppableId:n.descriptor.id}}}:null}({pageBorderBoxWithDroppableScroll:m,draggable:a,previousImpact:r,destination:d,insideDestination:u,afterCritical:l})||function(e){var t=e.pageBorderBoxWithDroppableScroll,a=e.draggable,s=e.destination,n=e.insideDestination,r=e.last,i=e.viewport,l=e.afterCritical,o=s.axis,c=Mu(s.axis,a.displaceBy),d=c.value,u=t[o.start],m=t[o.end],p=function(e){var t=e.draggable,a=e.closest,s=e.inHomeList;return a?s&&a.descriptor.index>t.descriptor.index?a.descriptor.index-1:a.descriptor.index:null}({draggable:a,closest:Qd(su(a,n),function(e){var t=e.descriptor.id,a=e.page.borderBox.center[o.line],s=bu(t,l),n=$u({displaced:r,id:t});return s?n?m<=a:u<a-d:n?m<=a+d:u<a}),inHomeList:nu(a,s)});return yu({draggable:a,insideDestination:n,destination:s,viewport:i,last:r,displacedBy:c,index:p})}({pageBorderBoxWithDroppableScroll:m,draggable:a,destination:d,insideDestination:u,last:r.displaced,viewport:i,afterCritical:l})},Yu=function(e,t){var a;return sc({},e,((a={})[t.descriptor.id]=t,a))},Ju=function(e){var t=e.previousImpact,a=e.impact,s=e.droppables,n=zu(t),r=zu(a);if(!n)return s;if(n===r)return s;var i=s[n];if(!i.subject.withPlaceholder)return s;var l=function(e){var t=e.subject.withPlaceholder;t||wd(!1);var a=e.frame;if(!a)return sc({},e,{subject:Hd({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null})});var s=t.oldFrameMaxScroll;s||wd(!1);var n=Iu(a,s);return sc({},e,{subject:Hd({page:e.subject.page,axis:e.axis,frame:n,withPlaceholder:null}),frame:n})}(i);return Yu(s,l)},Zu=function(e){var t=e.state,a=e.clientSelection,s=e.dimensions,n=e.viewport,r=e.impact,i=e.scrollJumpRequest,l=n||t.viewport,o=s||t.dimensions,c=a||t.current.client.selection,d=Rd(c,t.initial.client.selection),u={offset:d,selection:c,borderBoxCenter:Ld(t.initial.client.borderBoxCenter,d)},m={selection:Ld(u.selection,l.scroll.current),borderBoxCenter:Ld(u.borderBoxCenter,l.scroll.current),offset:Ld(u.offset,l.scroll.diff.value)},p={client:u,page:m};if("COLLECTING"===t.phase)return sc({phase:"COLLECTING"},t,{dimensions:o,viewport:l,current:p});var h=o.draggables[t.critical.draggable.id],x=r||Qu({pageOffset:m.offset,draggable:h,draggables:o.draggables,droppables:o.droppables,previousImpact:t.impact,viewport:l,afterCritical:t.afterCritical}),f=function(e){var t=e.draggable,a=e.draggables,s=e.droppables,n=e.previousImpact,r=e.impact,i=Ju({previousImpact:n,impact:r,droppables:s}),l=zu(r);if(!l)return i;var o=s[l];if(nu(t,o))return i;if(o.subject.withPlaceholder)return i;var c=qu(o,t,a);return Yu(i,c)}({draggable:h,impact:x,previousImpact:t.impact,draggables:o.draggables,droppables:o.droppables});return sc({},t,{current:p,dimensions:{draggables:o.draggables,droppables:f},impact:x,viewport:l,scrollJumpRequest:i||null,forceShouldAnimate:!i&&null})};var Xu=function(e){var t=e.impact,a=e.viewport,s=e.draggables,n=e.destination,r=e.forceShouldAnimate,i=t.displaced,l=function(e,t){return e.map(function(e){return t[e]})}(i.all,s);return sc({},t,{displaced:fu({afterDragging:l,destination:n,displacedBy:t.displacedBy,viewport:a.frame,forceShouldAnimate:r,last:i})})},Ku=function(e){var t=e.impact,a=e.draggable,s=e.droppable,n=e.draggables,r=e.viewport,i=e.afterCritical,l=Eu({impact:t,draggable:a,draggables:n,droppable:s,afterCritical:i});return Au({pageBorderBoxCenter:l,draggable:a,viewport:r})},em=function(e){var t=e.state,a=e.dimensions,s=e.viewport;"SNAP"!==t.movementMode&&wd(!1);var n=t.impact,r=s||t.viewport,i=a||t.dimensions,l=i.draggables,o=i.droppables,c=l[t.critical.draggable.id],d=zu(n);d||wd(!1);var u=o[d],m=Xu({impact:n,viewport:r,destination:u,draggables:l}),p=Ku({impact:m,draggable:c,droppable:u,draggables:l,viewport:r,afterCritical:t.afterCritical});return Zu({impact:m,clientSelection:p,state:t,dimensions:i,viewport:r})},tm=function(e){var t=e.draggable,a=e.home,s=e.draggables,n=e.viewport,r=Mu(a.axis,t.displaceBy),i=eu(a.descriptor.id,s),l=i.indexOf(t);-1===l&&wd(!1);var o,c=i.slice(l+1),d=c.reduce(function(e,t){return e[t.descriptor.id]=!0,e},{}),u={inVirtualList:"virtual"===a.descriptor.mode,displacedBy:r,effected:d};return{impact:{displaced:fu({afterDragging:c,destination:a,displacedBy:r,last:null,viewport:n.frame,forceShouldAnimate:!1}),displacedBy:r,at:{type:"REORDER",destination:(o=t.descriptor,{index:o.index,droppableId:o.droppableId})}},afterCritical:u}},am=function(e){0},sm=function(e){0},nm=function(e){var t=e.additions,a=e.updatedDroppables,s=e.viewport,n=s.scroll.diff.value;return t.map(function(e){var t=e.descriptor.droppableId,r=function(e){var t=e.frame;return t||wd(!1),t}(a[t]),i=r.scroll.diff.value,l=function(e){var t=e.draggable,a=e.offset,s=e.initialWindowScroll,n=od(t.client,a),r=cd(n,s);return sc({},t,{placeholder:sc({},t.placeholder,{client:n}),client:n,page:r})}({draggable:e,offset:Ld(n,i),initialWindowScroll:s.scroll.initial});return l})},rm=function(e){return"SNAP"===e.movementMode},im=function(e,t,a){var s=function(e,t){return{draggables:e.draggables,droppables:Yu(e.droppables,t)}}(e.dimensions,t);return!rm(e)||a?Zu({state:e,dimensions:s}):em({state:e,dimensions:s})};function lm(e){return e.isDragging&&"SNAP"===e.movementMode?sc({phase:"DRAGGING"},e,{scrollJumpRequest:null}):e}var om={phase:"IDLE",completed:null,shouldFlush:!1},cm=function(e,t){if(void 0===e&&(e=om),"FLUSH"===t.type)return sc({},om,{shouldFlush:!0});if("INITIAL_PUBLISH"===t.type){"IDLE"!==e.phase&&wd(!1);var a=t.payload,s=a.critical,n=a.clientSelection,r=a.viewport,i=a.dimensions,l=a.movementMode,o=i.draggables[s.draggable.id],c=i.droppables[s.droppable.id],d={selection:n,borderBoxCenter:o.client.borderBox.center,offset:Td},u={client:d,page:{selection:Ld(d.selection,r.scroll.initial),borderBoxCenter:Ld(d.selection,r.scroll.initial),offset:Ld(d.selection,r.scroll.diff.value)}},m=Xd(i.droppables).every(function(e){return!e.isFixedOnPage}),p=tm({draggable:o,home:c,draggables:i.draggables,viewport:r}),h=p.impact;return{phase:"DRAGGING",isDragging:!0,critical:s,movementMode:l,dimensions:i,initial:u,current:u,isWindowScrollAllowed:m,impact:h,afterCritical:p.afterCritical,onLiftImpact:h,viewport:r,scrollJumpRequest:null,forceShouldAnimate:null}}if("COLLECTION_STARTING"===t.type)return"COLLECTING"===e.phase||"DROP_PENDING"===e.phase?e:("DRAGGING"!==e.phase&&wd(!1),sc({phase:"COLLECTING"},e,{phase:"COLLECTING"}));if("PUBLISH_WHILE_DRAGGING"===t.type)return"COLLECTING"!==e.phase&&"DROP_PENDING"!==e.phase&&wd(!1),function(e){var t=e.state,a=e.published;am();var s=a.modified.map(function(e){var a=t.dimensions.droppables[e.droppableId];return Gd(a,e.scroll)}),n=sc({},t.dimensions.droppables,{},Jd(s)),r=Zd(nm({additions:a.additions,updatedDroppables:n,viewport:t.viewport})),i=sc({},t.dimensions.draggables,{},r);a.removals.forEach(function(e){delete i[e]});var l={droppables:n,draggables:i},o=zu(t.impact),c=o?l.droppables[o]:null,d=l.draggables[t.critical.draggable.id],u=l.droppables[t.critical.droppable.id],m=tm({draggable:d,home:u,draggables:i,viewport:t.viewport}),p=m.impact,h=m.afterCritical,x=c&&c.isCombineEnabled?t.impact:p,f=Qu({pageOffset:t.current.page.offset,draggable:l.draggables[t.critical.draggable.id],draggables:l.draggables,droppables:l.droppables,previousImpact:x,viewport:t.viewport,afterCritical:h});sm();var g=sc({phase:"DRAGGING"},t,{phase:"DRAGGING",impact:f,onLiftImpact:p,dimensions:l,afterCritical:h,forceShouldAnimate:!1});return"COLLECTING"===t.phase?g:sc({phase:"DROP_PENDING"},g,{phase:"DROP_PENDING",reason:t.reason,isWaiting:!1})}({state:e,published:t.payload});if("MOVE"===t.type){if("DROP_PENDING"===e.phase)return e;Wu(e)||wd(!1);var x=t.payload.client;return Fd(x,e.current.client.selection)?e:Zu({state:e,clientSelection:x,impact:rm(e)?e.impact:null})}if("UPDATE_DROPPABLE_SCROLL"===t.type){if("DROP_PENDING"===e.phase)return lm(e);if("COLLECTING"===e.phase)return lm(e);Wu(e)||wd(!1);var f=t.payload,g=f.id,y=f.newScroll,b=e.dimensions.droppables[g];if(!b)return e;var v=Gd(b,y);return im(e,v,!1)}if("UPDATE_DROPPABLE_IS_ENABLED"===t.type){if("DROP_PENDING"===e.phase)return e;Wu(e)||wd(!1);var j=t.payload,w=j.id,_=j.isEnabled,N=e.dimensions.droppables[w];N||wd(!1),N.isEnabled===_&&wd(!1);var k=sc({},N,{isEnabled:_});return im(e,k,!0)}if("UPDATE_DROPPABLE_IS_COMBINE_ENABLED"===t.type){if("DROP_PENDING"===e.phase)return e;Wu(e)||wd(!1);var S=t.payload,C=S.id,E=S.isCombineEnabled,D=e.dimensions.droppables[C];D||wd(!1),D.isCombineEnabled===E&&wd(!1);var P=sc({},D,{isCombineEnabled:E});return im(e,P,!0)}if("MOVE_BY_WINDOW_SCROLL"===t.type){if("DROP_PENDING"===e.phase||"DROP_ANIMATING"===e.phase)return e;Wu(e)||wd(!1),e.isWindowScrollAllowed||wd(!1);var A=t.payload.newScroll;if(Fd(e.viewport.scroll.current,A))return lm(e);var T=Du(e.viewport,A);return rm(e)?em({state:e,viewport:T}):Zu({state:e,viewport:T})}if("UPDATE_VIEWPORT_MAX_SCROLL"===t.type){if(!Wu(e))return e;var L=t.payload.maxScroll;if(Fd(L,e.viewport.scroll.max))return e;var R=sc({},e.viewport,{scroll:sc({},e.viewport.scroll,{max:L})});return sc({phase:"DRAGGING"},e,{viewport:R})}if("MOVE_UP"===t.type||"MOVE_DOWN"===t.type||"MOVE_LEFT"===t.type||"MOVE_RIGHT"===t.type){if("COLLECTING"===e.phase||"DROP_PENDING"===e.phase)return e;"DRAGGING"!==e.phase&&wd(!1);var F=Uu({state:e,type:t.type});return F?Zu({state:e,impact:F.impact,clientSelection:F.clientSelection,scrollJumpRequest:F.scrollJumpRequest}):e}if("DROP_PENDING"===t.type){var O=t.payload.reason;return"COLLECTING"!==e.phase&&wd(!1),sc({phase:"DROP_PENDING"},e,{phase:"DROP_PENDING",isWaiting:!0,reason:O})}if("DROP_ANIMATE"===t.type){var M=t.payload,I=M.completed,q=M.dropDuration,B=M.newHomeClientOffset;return"DRAGGING"!==e.phase&&"DROP_PENDING"!==e.phase&&wd(!1),{phase:"DROP_ANIMATING",completed:I,dropDuration:q,newHomeClientOffset:B,dimensions:e.dimensions}}return"DROP_COMPLETE"===t.type?{phase:"IDLE",completed:t.payload.completed,shouldFlush:!1}:e},dm=function(e){return{type:"PUBLISH_WHILE_DRAGGING",payload:e}},um=function(){return{type:"COLLECTION_STARTING",payload:null}},mm=function(e){return{type:"UPDATE_DROPPABLE_SCROLL",payload:e}},pm=function(e){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}},hm=function(e){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}},xm=function(e){return{type:"MOVE",payload:e}},fm=function(){return{type:"MOVE_UP",payload:null}},gm=function(){return{type:"MOVE_DOWN",payload:null}},ym=function(){return{type:"MOVE_RIGHT",payload:null}},bm=function(){return{type:"MOVE_LEFT",payload:null}},vm=function(e){return{type:"DROP_COMPLETE",payload:e}},jm=function(e){return{type:"DROP",payload:e}},wm=function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}};var _m="cubic-bezier(.2,1,.1,1)",Nm={drop:0,combining:.7},km={drop:.75},Sm=.2+"s "+"cubic-bezier(0.2, 0, 0, 1)",Cm={fluid:"opacity "+Sm,snap:"transform "+Sm+", opacity "+Sm,drop:function(e){var t=e+"s "+_m;return"transform "+t+", opacity "+t},outOfTheWay:"transform "+Sm,placeholder:"height "+Sm+", width "+Sm+", margin "+Sm},Em=function(e){return Fd(e,Td)?null:"translate("+e.x+"px, "+e.y+"px)"},Dm=Em,Pm=function(e,t){var a=Em(e);return a?t?a+" scale("+km.drop+")":a:null},Am=.33,Tm=.55,Lm=Tm-Am,Rm=function(e){var t=e.getState,a=e.dispatch;return function(e){return function(s){if("DROP"===s.type){var n=t(),r=s.payload.reason;if("COLLECTING"!==n.phase){if("IDLE"!==n.phase){"DROP_PENDING"===n.phase&&n.isWaiting&&wd(!1),"DRAGGING"!==n.phase&&"DROP_PENDING"!==n.phase&&wd(!1);var i=n.critical,l=n.dimensions,o=l.draggables[n.critical.draggable.id],c=function(e){var t=e.draggables,a=e.reason,s=e.lastImpact,n=e.home,r=e.viewport,i=e.onLiftImpact;return s.at&&"DROP"===a?"REORDER"===s.at.type?{impact:s,didDropInsideDroppable:!0}:{impact:sc({},s,{displaced:iu}),didDropInsideDroppable:!0}:{impact:Xu({draggables:t,impact:i,destination:n,viewport:r,forceShouldAnimate:!0}),didDropInsideDroppable:!1}}({reason:r,lastImpact:n.impact,afterCritical:n.afterCritical,onLiftImpact:n.onLiftImpact,home:n.dimensions.droppables[n.critical.droppable.id],viewport:n.viewport,draggables:n.dimensions.draggables}),d=c.impact,u=c.didDropInsideDroppable,m=u?tu(d):null,p=u?au(d):null,h={index:i.draggable.index,droppableId:i.droppable.id},x={draggableId:o.descriptor.id,type:o.descriptor.type,source:h,reason:r,mode:n.movementMode,destination:m,combine:p},f=function(e){var t=e.impact,a=e.draggable,s=e.dimensions,n=e.viewport,r=e.afterCritical,i=s.draggables,l=s.droppables,o=zu(t),c=o?l[o]:null,d=l[a.descriptor.droppableId],u=Ku({impact:t,draggable:a,draggables:i,afterCritical:r,droppable:c||d,viewport:n});return Rd(u,a.client.borderBox.center)}({impact:d,draggable:o,dimensions:l,viewport:n.viewport,afterCritical:n.afterCritical}),g={critical:n.critical,afterCritical:n.afterCritical,result:x,impact:d};if(!Fd(n.current.client.offset,f)||Boolean(x.combine)){var y=function(e){var t=e.current,a=e.destination,s=e.reason,n=Id(t,a);if(n<=0)return Am;if(n>=1500)return Tm;var r=Am+Lm*(n/1500);return Number(("CANCEL"===s?.6*r:r).toFixed(2))}({current:n.current.client.offset,destination:f,reason:r});a(function(e){return{type:"DROP_ANIMATE",payload:e}}({newHomeClientOffset:f,dropDuration:y,completed:g}))}else a(vm({completed:g}))}}else a(function(e){return{type:"DROP_PENDING",payload:e}}({reason:r}))}else e(s)}}},Fm=function(){return{x:window.pageXOffset,y:window.pageYOffset}};function Om(e){var t=e.onWindowScroll;var a=fd(function(){t(Fm())}),s=function(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(t){t.target!==window&&t.target!==window.document||e()}}}(a),n=yd;function r(){return n!==yd}return{start:function(){r()&&wd(!1),n=bd(window,[s])},stop:function(){r()||wd(!1),a.cancel(),n(),n=yd},isActive:r}}var Mm=function(e){var t=Om({onWindowScroll:function(t){e.dispatch({type:"MOVE_BY_WINDOW_SCROLL",payload:{newScroll:t}})}});return function(e){return function(a){t.isActive()||"INITIAL_PUBLISH"!==a.type||t.start(),t.isActive()&&function(e){return"DROP_COMPLETE"===e.type||"DROP_ANIMATE"===e.type||"FLUSH"===e.type}(a)&&t.stop(),e(a)}}},Im=function(){var e=[];return{add:function(t){var a=setTimeout(function(){return function(t){var a=$d(e,function(e){return e.timerId===t});-1===a&&wd(!1),e.splice(a,1)[0].callback()}(a)}),s={timerId:a,callback:t};e.push(s)},flush:function(){if(e.length){var t=[].concat(e);e.length=0,t.forEach(function(e){clearTimeout(e.timerId),e.callback()})}}}},qm=function(e,t){am(),t(),sm()},Bm=function(e,t){return{draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:t}},zm=function(e,t,a,s){if(e){var n=function(e){var t=!1,a=!1,s=setTimeout(function(){a=!0}),n=function(n){t||a||(t=!0,e(n),clearTimeout(s))};return n.wasCalled=function(){return t},n}(a);e(t,{announce:n}),n.wasCalled()||a(s(t))}else a(s(t))},Um=function(e,t){var a=function(e,t){var a=Im(),s=null,n=function(a){s||wd(!1),s=null,qm(0,function(){return zm(e().onDragEnd,a,t,Ad)})};return{beforeCapture:function(t,a){s&&wd(!1),qm(0,function(){var s=e().onBeforeCapture;s&&s({draggableId:t,mode:a})})},beforeStart:function(t,a){s&&wd(!1),qm(0,function(){var s=e().onBeforeDragStart;s&&s(Bm(t,a))})},start:function(n,r){s&&wd(!1);var i=Bm(n,r);s={mode:r,lastCritical:n,lastLocation:i.source,lastCombine:null},a.add(function(){qm(0,function(){return zm(e().onDragStart,i,t,Dd)})})},update:function(n,r){var i=tu(r),l=au(r);s||wd(!1);var o=!function(e,t){if(e===t)return!0;var a=e.draggable.id===t.draggable.id&&e.draggable.droppableId===t.draggable.droppableId&&e.draggable.type===t.draggable.type&&e.draggable.index===t.draggable.index,s=e.droppable.id===t.droppable.id&&e.droppable.type===t.droppable.type;return a&&s}(n,s.lastCritical);o&&(s.lastCritical=n);var c,d,u=(d=i,!(null==(c=s.lastLocation)&&null==d||null!=c&&null!=d&&c.droppableId===d.droppableId&&c.index===d.index));u&&(s.lastLocation=i);var m=!function(e,t){return null==e&&null==t||null!=e&&null!=t&&e.draggableId===t.draggableId&&e.droppableId===t.droppableId}(s.lastCombine,l);if(m&&(s.lastCombine=l),o||u||m){var p=sc({},Bm(n,s.mode),{combine:l,destination:i});a.add(function(){qm(0,function(){return zm(e().onDragUpdate,p,t,Pd)})})}},flush:function(){s||wd(!1),a.flush()},drop:n,abort:function(){if(s){var e=sc({},Bm(s.lastCritical,s.mode),{combine:null,destination:null,reason:"CANCEL"});n(e)}}}}(e,t);return function(e){return function(t){return function(s){if("BEFORE_INITIAL_CAPTURE"!==s.type){if("INITIAL_PUBLISH"===s.type){var n=s.payload.critical;return a.beforeStart(n,s.payload.movementMode),t(s),void a.start(n,s.payload.movementMode)}if("DROP_COMPLETE"===s.type){var r=s.payload.completed.result;return a.flush(),t(s),void a.drop(r)}if(t(s),"FLUSH"!==s.type){var i=e.getState();"DRAGGING"===i.phase&&a.update(i.critical,i.impact)}else a.abort()}else a.beforeCapture(s.payload.draggableId,s.payload.movementMode)}}}},Wm=function(e){return function(t){return function(a){if("DROP_ANIMATION_FINISHED"===a.type){var s=e.getState();"DROP_ANIMATING"!==s.phase&&wd(!1),e.dispatch(vm({completed:s.completed}))}else t(a)}}},Hm=function(e){var t=null,a=null;return function(s){return function(n){if("FLUSH"!==n.type&&"DROP_COMPLETE"!==n.type&&"DROP_ANIMATION_FINISHED"!==n.type||(a&&(cancelAnimationFrame(a),a=null),t&&(t(),t=null)),s(n),"DROP_ANIMATE"===n.type){var r={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){"DROP_ANIMATING"===e.getState().phase&&e.dispatch({type:"DROP_ANIMATION_FINISHED",payload:null})}};a=requestAnimationFrame(function(){a=null,t=bd(window,[r])})}}}},Gm=function(e){return function(t){return function(a){if(t(a),"PUBLISH_WHILE_DRAGGING"===a.type){var s=e.getState();"DROP_PENDING"===s.phase&&(s.isWaiting||e.dispatch(jm({reason:s.reason})))}}}},Vm=mc,$m=function(e){var t,a=e.dimensionMarshal,s=e.focusMarshal,n=e.styleMarshal,r=e.getResponders,i=e.announce,l=e.autoScroller;return cc(cm,Vm(function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return function(e){return function(){var a=e.apply(void 0,arguments),s=function(){throw new Error(nc(15))},n={getState:a.getState,dispatch:function(){return s.apply(void 0,arguments)}},r=t.map(function(e){return e(n)});return s=mc.apply(void 0,r)(a.dispatch),m(m({},a),{},{dispatch:s})}}}((t=n,function(){return function(e){return function(a){"INITIAL_PUBLISH"===a.type&&t.dragging(),"DROP_ANIMATE"===a.type&&t.dropping(a.payload.completed.result.reason),"FLUSH"!==a.type&&"DROP_COMPLETE"!==a.type||t.resting(),e(a)}}}),function(e){return function(){return function(t){return function(a){"DROP_COMPLETE"!==a.type&&"FLUSH"!==a.type&&"DROP_ANIMATE"!==a.type||e.stopPublishing(),t(a)}}}}(a),function(e){return function(t){var a=t.getState,s=t.dispatch;return function(t){return function(n){if("LIFT"===n.type){var r=n.payload,i=r.id,l=r.clientSelection,o=r.movementMode,c=a();"DROP_ANIMATING"===c.phase&&s(vm({completed:c.completed})),"IDLE"!==a().phase&&wd(!1),s({type:"FLUSH",payload:null}),s({type:"BEFORE_INITIAL_CAPTURE",payload:{draggableId:i,movementMode:o}});var d={draggableId:i,scrollOptions:{shouldPublishImmediately:"SNAP"===o}},u=e.startPublishing(d),m=u.critical,p=u.dimensions,h=u.viewport;s({type:"INITIAL_PUBLISH",payload:{critical:m,dimensions:p,clientSelection:l,movementMode:o,viewport:h}})}else t(n)}}}}(a),Rm,Wm,Hm,Gm,function(e){return function(t){return function(a){return function(s){if(function(e){return"DROP_COMPLETE"===e.type||"DROP_ANIMATE"===e.type||"FLUSH"===e.type}(s))return e.stop(),void a(s);if("INITIAL_PUBLISH"===s.type){a(s);var n=t.getState();return"DRAGGING"!==n.phase&&wd(!1),void e.start(n)}a(s),e.scroll(t.getState())}}}}(l),Mm,function(e){var t=!1;return function(){return function(a){return function(s){if("INITIAL_PUBLISH"===s.type)return t=!0,e.tryRecordFocus(s.payload.critical.draggable.id),a(s),void e.tryRestoreFocusRecorded();if(a(s),t){if("FLUSH"===s.type)return t=!1,void e.tryRestoreFocusRecorded();if("DROP_COMPLETE"===s.type){t=!1;var n=s.payload.completed.result;n.combine&&e.tryShiftRecord(n.draggableId,n.combine.draggableId),e.tryRestoreFocusRecorded()}}}}}}(s),Um(r,i))))};var Qm=function(e){var t=e.scrollHeight,a=e.scrollWidth,s=e.height,n=e.width,r=Rd({x:a,y:t},{x:n,y:s});return{x:Math.max(0,r.x),y:Math.max(0,r.y)}},Ym=function(){var e=document.documentElement;return e||wd(!1),e},Jm=function(){var e=Ym();return Qm({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})},Zm=function(e){var t=e.critical,a=e.scrollOptions,s=e.registry;am();var n=function(){var e=Fm(),t=Jm(),a=e.y,s=e.x,n=Ym(),r=n.clientWidth,i=n.clientHeight;return{frame:ad({top:a,left:s,right:s+r,bottom:a+i}),scroll:{initial:e,current:e,max:t,diff:{value:Td,displacement:Td}}}}(),r=n.scroll.current,i=t.droppable,l=s.droppable.getAllByType(i.type).map(function(e){return e.callbacks.getDimensionAndWatchScroll(r,a)}),o=s.draggable.getAllByType(t.draggable.type).map(function(e){return e.getDimension(r)}),c={draggables:Zd(o),droppables:Jd(l)};return sm(),{dimensions:c,critical:t,viewport:n}};function Xm(e,t,a){return a.descriptor.id!==t.id&&(a.descriptor.type===t.type&&"virtual"===e.droppable.getById(a.descriptor.droppableId).descriptor.mode)}var Km=function(e,t){var a=null,s=function(e){var t=e.registry,a=e.callbacks,s={additions:{},removals:{},modified:{}},n=null,r=function(){n||(a.collectionStarting(),n=requestAnimationFrame(function(){n=null,am();var e=s,r=e.additions,i=e.removals,l=e.modified,o=Object.keys(r).map(function(e){return t.draggable.getById(e).getDimension(Td)}).sort(function(e,t){return e.descriptor.index-t.descriptor.index}),c=Object.keys(l).map(function(e){return{droppableId:e,scroll:t.droppable.getById(e).callbacks.getScrollWhileDragging()}}),d={additions:o,removals:Object.keys(i),modified:c};s={additions:{},removals:{},modified:{}},sm(),a.publish(d)}))};return{add:function(e){var t=e.descriptor.id;s.additions[t]=e,s.modified[e.descriptor.droppableId]=!0,s.removals[t]&&delete s.removals[t],r()},remove:function(e){var t=e.descriptor;s.removals[t.id]=!0,s.modified[t.droppableId]=!0,s.additions[t.id]&&delete s.additions[t.id],r()},stop:function(){n&&(cancelAnimationFrame(n),n=null,s={additions:{},removals:{},modified:{}})}}}({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),n=function(t){a||wd(!1);var n=a.critical.draggable;"ADDITION"===t.type&&Xm(e,n,t.value)&&s.add(t.value),"REMOVAL"===t.type&&Xm(e,n,t.value)&&s.remove(t.value)},r={updateDroppableIsEnabled:function(s,n){e.droppable.exists(s)||wd(!1),a&&t.updateDroppableIsEnabled({id:s,isEnabled:n})},updateDroppableIsCombineEnabled:function(s,n){a&&(e.droppable.exists(s)||wd(!1),t.updateDroppableIsCombineEnabled({id:s,isCombineEnabled:n}))},scrollDroppable:function(t,s){a&&e.droppable.getById(t).callbacks.scroll(s)},updateDroppableScroll:function(s,n){a&&(e.droppable.exists(s)||wd(!1),t.updateDroppableScroll({id:s,newScroll:n}))},startPublishing:function(t){a&&wd(!1);var s=e.draggable.getById(t.draggableId),r=e.droppable.getById(s.descriptor.droppableId),i={draggable:s.descriptor,droppable:r.descriptor},l=e.subscribe(n);return a={critical:i,unsubscribe:l},Zm({critical:i,registry:e,scrollOptions:t.scrollOptions})},stopPublishing:function(){if(a){s.stop();var t=a.critical.droppable;e.droppable.getAllByType(t.type).forEach(function(e){return e.callbacks.dragStopped()}),a.unsubscribe(),a=null}}};return r},ep=function(e,t){return"IDLE"===e.phase||"DROP_ANIMATING"===e.phase&&(e.completed.result.draggableId!==t&&"DROP"===e.completed.result.reason)},tp=function(e){window.scrollBy(e.x,e.y)},ap=xd(function(e){return Xd(e).filter(function(e){return!!e.isEnabled&&!!e.frame})}),sp=function(e){var t=e.center,a=e.destination,s=e.droppables;if(a){var n=s[a];return n.frame?n:null}var r=function(e,t){var a=Qd(ap(t),function(t){return t.frame||wd(!1),Hu(t.frame.pageMarginBox)(e)});return a}(t,s);return r},np=.25,rp=.05,ip=28,lp=function(e){return Math.pow(e,2)},op={stopDampeningAt:1200,accelerateAt:360},cp=function(e){var t=e.startOfRange,a=e.endOfRange,s=e.current,n=a-t;return 0===n?0:(s-t)/n},dp=op.accelerateAt,up=op.stopDampeningAt,mp=function(e){var t=e.distanceToEdge,a=e.thresholds,s=e.dragStartTime,n=e.shouldUseTimeDampening,r=function(e,t){if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return ip;if(e===t.startScrollingFrom)return 1;var a=cp({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),s=ip*lp(1-a);return Math.ceil(s)}(t,a);return 0===r?0:n?Math.max(function(e,t){var a=t,s=up,n=Date.now()-a;if(n>=up)return e;if(n<dp)return 1;var r=cp({startOfRange:dp,endOfRange:s,current:n}),i=e*lp(r);return Math.ceil(i)}(r,s),1):r},pp=function(e){var t=e.container,a=e.distanceToEdges,s=e.dragStartTime,n=e.axis,r=e.shouldUseTimeDampening,i=function(e,t){return{startScrollingFrom:e[t.size]*np,maxScrollValueAt:e[t.size]*rp}}(t,n);return a[n.end]<a[n.start]?mp({distanceToEdge:a[n.end],thresholds:i,dragStartTime:s,shouldUseTimeDampening:r}):-1*mp({distanceToEdge:a[n.start],thresholds:i,dragStartTime:s,shouldUseTimeDampening:r})},hp=Bd(function(e){return 0===e?0:e}),xp=function(e){var t=e.dragStartTime,a=e.container,s=e.subject,n=e.center,r=e.shouldUseTimeDampening,i={top:n.y-a.top,right:a.right-n.x,bottom:a.bottom-n.y,left:n.x-a.left},l=pp({container:a,distanceToEdges:i,dragStartTime:t,axis:uu,shouldUseTimeDampening:r}),o=pp({container:a,distanceToEdges:i,dragStartTime:t,axis:mu,shouldUseTimeDampening:r}),c=hp({x:o,y:l});if(Fd(c,Td))return null;var d=function(e){var t=e.container,a=e.subject,s=e.proposedScroll,n=a.height>t.height,r=a.width>t.width;return r||n?r&&n?null:{x:r?0:s.x,y:n?0:s.y}:s}({container:a,subject:s,proposedScroll:c});return d?Fd(d,Td)?null:d:null},fp=Bd(function(e){return 0===e?0:e>0?1:-1}),gp=function(){var e=function(e,t){return e<0?e:e>t?e-t:0};return function(t){var a=t.current,s=t.max,n=t.change,r=Ld(a,n),i={x:e(r.x,s.x),y:e(r.y,s.y)};return Fd(i,Td)?null:i}}(),yp=function(e){var t=e.max,a=e.current,s=e.change,n={x:Math.max(a.x,t.x),y:Math.max(a.y,t.y)},r=fp(s),i=gp({max:n,current:a,change:r});return!i||(0!==r.x&&0===i.x||0!==r.y&&0===i.y)},bp=function(e,t){return yp({current:e.scroll.current,max:e.scroll.max,change:t})},vp=function(e,t){var a=e.frame;return!!a&&yp({current:a.scroll.current,max:a.scroll.max,change:t})},jp=function(e){var t=e.state,a=e.dragStartTime,s=e.shouldUseTimeDampening,n=e.scrollWindow,r=e.scrollDroppable,i=t.current.page.borderBoxCenter,l=t.dimensions.draggables[t.critical.draggable.id].page.marginBox;if(t.isWindowScrollAllowed){var o=function(e){var t=e.viewport,a=e.subject,s=e.center,n=e.dragStartTime,r=e.shouldUseTimeDampening,i=xp({dragStartTime:n,container:t.frame,subject:a,center:s,shouldUseTimeDampening:r});return i&&bp(t,i)?i:null}({dragStartTime:a,viewport:t.viewport,subject:l,center:i,shouldUseTimeDampening:s});if(o)return void n(o)}var c=sp({center:i,destination:zu(t.impact),droppables:t.dimensions.droppables});if(c){var d=function(e){var t=e.droppable,a=e.subject,s=e.center,n=e.dragStartTime,r=e.shouldUseTimeDampening,i=t.frame;if(!i)return null;var l=xp({dragStartTime:n,container:i.pageMarginBox,subject:a,center:s,shouldUseTimeDampening:r});return l&&vp(t,l)?l:null}({dragStartTime:a,droppable:c,subject:l,center:i,shouldUseTimeDampening:s});d&&r(c.descriptor.id,d)}},wp=function(e){var t=e.move,a=e.scrollDroppable,s=e.scrollWindow,n=function(e,t){if(!vp(e,t))return t;var s=function(e,t){var a=e.frame;return a&&vp(e,t)?gp({current:a.scroll.current,max:a.scroll.max,change:t}):null}(e,t);if(!s)return a(e.descriptor.id,t),null;var n=Rd(t,s);return a(e.descriptor.id,n),Rd(t,n)},r=function(e,t,a){if(!e)return a;if(!bp(t,a))return a;var n=function(e,t){if(!bp(e,t))return null;var a=e.scroll.max,s=e.scroll.current;return gp({current:s,max:a,change:t})}(t,a);if(!n)return s(a),null;var r=Rd(a,n);return s(r),Rd(a,r)};return function(e){var a=e.scrollJumpRequest;if(a){var s=zu(e.impact);s||wd(!1);var i=n(e.dimensions.droppables[s],a);if(i){var l=e.viewport,o=r(e.isWindowScrollAllowed,l,i);o&&function(e,a){var s=Ld(e.current.client.selection,a);t({client:s})}(e,o)}}}},_p=function(e){var t=e.scrollDroppable,a=e.scrollWindow,s=e.move,n=function(e){var t=e.scrollWindow,a=e.scrollDroppable,s=fd(t),n=fd(a),r=null,i=function(e){r||wd(!1);var t=r,a=t.shouldUseTimeDampening,i=t.dragStartTime;jp({state:e,scrollWindow:s,scrollDroppable:n,dragStartTime:i,shouldUseTimeDampening:a})};return{start:function(e){am(),r&&wd(!1);var t=Date.now(),a=!1,s=function(){a=!0};jp({state:e,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:s,scrollDroppable:s}),r={dragStartTime:t,shouldUseTimeDampening:a},sm(),a&&i(e)},stop:function(){r&&(s.cancel(),n.cancel(),r=null)},scroll:i}}({scrollWindow:a,scrollDroppable:t}),r=wp({move:s,scrollWindow:a,scrollDroppable:t});return{scroll:function(e){"DRAGGING"===e.phase&&("FLUID"!==e.movementMode?e.scrollJumpRequest&&r(e):n.scroll(e))},start:n.start,stop:n.stop}},Np="data-rbd",kp=function(){var e=Np+"-drag-handle";return{base:e,draggableId:e+"-draggable-id",contextId:e+"-context-id"}}(),Sp=function(){var e=Np+"-draggable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),Cp=function(){var e=Np+"-droppable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),Ep={contextId:Np+"-scroll-container-context-id"},Dp=function(e,t){return e.map(function(e){var a=e.styles[t];return a?e.selector+" { "+a+" }":""}).join(" ")},Pp="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement?n.useLayoutEffect:n.useEffect,Ap=function(){var e=document.querySelector("head");return e||wd(!1),e},Tp=function(e){var t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.type="text/css",t};function Lp(e,t){var a=Kc(function(){return function(e){var t,a=(t=e,function(e){return"["+e+'="'+t+'"]'}),s=function(){var e="\n      cursor: -webkit-grab;\n      cursor: grab;\n    ";return{selector:a(kp.contextId),styles:{always:"\n          -webkit-touch-callout: none;\n          -webkit-tap-highlight-color: rgba(0,0,0,0);\n          touch-action: manipulation;\n        ",resting:e,dragging:"pointer-events: none;",dropAnimating:e}}}(),n=[function(){var e="\n      transition: "+Cm.outOfTheWay+";\n    ";return{selector:a(Sp.contextId),styles:{dragging:e,dropAnimating:e,userCancel:e}}}(),s,{selector:a(Cp.contextId),styles:{always:"overflow-anchor: none;"}},{selector:"body",styles:{dragging:"\n        cursor: grabbing;\n        cursor: -webkit-grabbing;\n        user-select: none;\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        overflow-anchor: none;\n      "}}];return{always:Dp(n,"always"),resting:Dp(n,"resting"),dragging:Dp(n,"dragging"),dropAnimating:Dp(n,"dropAnimating"),userCancel:Dp(n,"userCancel")}}(e)},[e]),s=(0,n.useRef)(null),r=(0,n.useRef)(null),i=ed(xd(function(e){var t=r.current;t||wd(!1),t.textContent=e}),[]),l=ed(function(e){var t=s.current;t||wd(!1),t.textContent=e},[]);Pp(function(){(s.current||r.current)&&wd(!1);var n=Tp(t),o=Tp(t);return s.current=n,r.current=o,n.setAttribute(Np+"-always",e),o.setAttribute(Np+"-dynamic",e),Ap().appendChild(n),Ap().appendChild(o),l(a.always),i(a.resting),function(){var e=function(e){var t=e.current;t||wd(!1),Ap().removeChild(t),e.current=null};e(s),e(r)}},[t,l,i,a.always,a.resting,e]);var o=ed(function(){return i(a.dragging)},[i,a.dragging]),c=ed(function(e){i("DROP"!==e?a.userCancel:a.dropAnimating)},[i,a.dropAnimating,a.userCancel]),d=ed(function(){r.current&&i(a.resting)},[i,a.resting]);return Kc(function(){return{dragging:o,dropping:c,resting:d}},[o,c,d])}var Rp=function(e){return e&&e.ownerDocument?e.ownerDocument.defaultView:window};function Fp(e){return e instanceof Rp(e).HTMLElement}function Op(e,t){var a="["+kp.contextId+'="'+e+'"]',s=Yd(document.querySelectorAll(a));if(!s.length)return null;var n=Qd(s,function(e){return e.getAttribute(kp.draggableId)===t});return n&&Fp(n)?n:null}function Mp(){var e={draggables:{},droppables:{}},t=[];function a(e){t.length&&t.forEach(function(t){return t(e)})}function s(t){return e.draggables[t]||null}function n(t){return e.droppables[t]||null}return{draggable:{register:function(t){e.draggables[t.descriptor.id]=t,a({type:"ADDITION",value:t})},update:function(t,a){var s=e.draggables[a.descriptor.id];s&&s.uniqueId===t.uniqueId&&(delete e.draggables[a.descriptor.id],e.draggables[t.descriptor.id]=t)},unregister:function(t){var n=t.descriptor.id,r=s(n);r&&t.uniqueId===r.uniqueId&&(delete e.draggables[n],a({type:"REMOVAL",value:t}))},getById:function(e){var t=s(e);return t||wd(!1),t},findById:s,exists:function(e){return Boolean(s(e))},getAllByType:function(t){return Vd(e.draggables).filter(function(e){return e.descriptor.type===t})}},droppable:{register:function(t){e.droppables[t.descriptor.id]=t},unregister:function(t){var a=n(t.descriptor.id);a&&t.uniqueId===a.uniqueId&&delete e.droppables[t.descriptor.id]},getById:function(e){var t=n(e);return t||wd(!1),t},findById:n,exists:function(e){return Boolean(n(e))},getAllByType:function(t){return Vd(e.droppables).filter(function(e){return e.descriptor.type===t})}},subscribe:function(e){return t.push(e),function(){var a=t.indexOf(e);-1!==a&&t.splice(a,1)}},clean:function(){e.draggables={},e.droppables={},t.length=0}}}var Ip=n.createContext(null),qp=function(){var e=document.body;return e||wd(!1),e},Bp={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"};var zp=0,Up={separator:"::"};function Wp(e,t){return void 0===t&&(t=Up),Kc(function(){return""+e+t.separator+zp++},[t.separator,e])}var Hp=n.createContext(null);function Gp(e){0}function Vp(e,t){Gp()}function $p(){Vp()}function Qp(e){var t=(0,n.useRef)(e);return(0,n.useEffect)(function(){t.current=e}),t}var Yp,Jp=((Yp={})[13]=!0,Yp[9]=!0,Yp),Zp=function(e){Jp[e.keyCode]&&e.preventDefault()},Xp=function(){var e="visibilitychange";return"undefined"===typeof document?e:Qd([e,"ms"+e,"webkit"+e,"moz"+e,"o"+e],function(e){return"on"+e in document})||e}();var Kp,eh={type:"IDLE"};function th(e){var t=e.cancel,a=e.completed,s=e.getPhase,n=e.setPhase;return[{eventName:"mousemove",fn:function(e){var t=e.button,a=e.clientX,r=e.clientY;if(0===t){var i={x:a,y:r},l=s();if("DRAGGING"===l.type)return e.preventDefault(),void l.actions.move(i);"PENDING"!==l.type&&wd(!1);var o=l.point;if(c=o,d=i,Math.abs(d.x-c.x)>=5||Math.abs(d.y-c.y)>=5){var c,d;e.preventDefault();var u=l.actions.fluidLift(i);n({type:"DRAGGING",actions:u})}}}},{eventName:"mouseup",fn:function(e){var n=s();"DRAGGING"===n.type?(e.preventDefault(),n.actions.drop({shouldBlockNextClick:!0}),a()):t()}},{eventName:"mousedown",fn:function(e){"DRAGGING"===s().type&&e.preventDefault(),t()}},{eventName:"keydown",fn:function(e){if("PENDING"!==s().type)return 27===e.keyCode?(e.preventDefault(),void t()):void Zp(e);t()}},{eventName:"resize",fn:t},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){"PENDING"===s().type&&t()}},{eventName:"webkitmouseforcedown",fn:function(e){var a=s();"IDLE"===a.type&&wd(!1),a.actions.shouldRespectForcePress()?t():e.preventDefault()}},{eventName:Xp,fn:t}]}function ah(){}var sh=((Kp={})[34]=!0,Kp[33]=!0,Kp[36]=!0,Kp[35]=!0,Kp);function nh(e,t){function a(){t(),e.cancel()}return[{eventName:"keydown",fn:function(s){return 27===s.keyCode?(s.preventDefault(),void a()):32===s.keyCode?(s.preventDefault(),t(),void e.drop()):40===s.keyCode?(s.preventDefault(),void e.moveDown()):38===s.keyCode?(s.preventDefault(),void e.moveUp()):39===s.keyCode?(s.preventDefault(),void e.moveRight()):37===s.keyCode?(s.preventDefault(),void e.moveLeft()):void(sh[s.keyCode]?s.preventDefault():Zp(s))}},{eventName:"mousedown",fn:a},{eventName:"mouseup",fn:a},{eventName:"click",fn:a},{eventName:"touchstart",fn:a},{eventName:"resize",fn:a},{eventName:"wheel",fn:a,options:{passive:!0}},{eventName:Xp,fn:a}]}var rh={type:"IDLE"};var ih={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function lh(e,t){if(null==t)return!1;if(Boolean(ih[t.tagName.toLowerCase()]))return!0;var a=t.getAttribute("contenteditable");return"true"===a||""===a||t!==e&&lh(e,t.parentElement)}function oh(e,t){var a=t.target;return!!Fp(a)&&lh(e,a)}var ch=function(e){return ad(e.getBoundingClientRect()).center};var dh=function(){var e="matches";return"undefined"===typeof document?e:Qd([e,"msMatchesSelector","webkitMatchesSelector"],function(e){return e in Element.prototype})||e}();function uh(e,t){return null==e?null:e[dh](t)?e:uh(e.parentElement,t)}function mh(e,t){return e.closest?e.closest(t):uh(e,t)}function ph(e,t){var a,s=t.target;if(!((a=s)instanceof Rp(a).Element))return null;var n=function(e){return"["+kp.contextId+'="'+e+'"]'}(e),r=mh(s,n);return r&&Fp(r)?r:null}function hh(e){e.preventDefault()}function xh(e){var t=e.expected,a=e.phase,s=e.isLockActive;e.shouldWarn;return!!s()&&t===a}function fh(e){var t=e.lockAPI,a=e.store,s=e.registry,n=e.draggableId;if(t.isClaimed())return!1;var r=s.draggable.findById(n);return!!r&&(!!r.options.isEnabled&&!!ep(a.getState(),n))}function gh(e){var t=e.lockAPI,a=e.contextId,s=e.store,n=e.registry,r=e.draggableId,i=e.forceSensorStop,l=e.sourceEvent;if(!fh({lockAPI:t,store:s,registry:n,draggableId:r}))return null;var o=n.draggable.getById(r),c=function(e,t){var a="["+Sp.contextId+'="'+e+'"]',s=Qd(Yd(document.querySelectorAll(a)),function(e){return e.getAttribute(Sp.id)===t});return s&&Fp(s)?s:null}(a,o.descriptor.id);if(!c)return null;if(l&&!o.options.canDragInteractiveElements&&oh(c,l))return null;var d=t.claim(i||yd),u="PRE_DRAG";function m(){return o.options.shouldRespectForcePress}function p(){return t.isActive(d)}var h=function(e,t){xh({expected:e,phase:u,isLockActive:p,shouldWarn:!0})&&s.dispatch(t())}.bind(null,"DRAGGING");function x(e){function a(){t.release(),u="COMPLETED"}function n(t,n){if(void 0===n&&(n={shouldBlockNextClick:!1}),e.cleanup(),n.shouldBlockNextClick){var r=bd(window,[{eventName:"click",fn:hh,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(r)}a(),s.dispatch(jm({reason:t}))}return"PRE_DRAG"!==u&&(a(),"PRE_DRAG"!==u&&wd(!1)),s.dispatch(function(e){return{type:"LIFT",payload:e}}(e.liftActionArgs)),u="DRAGGING",sc({isActive:function(){return xh({expected:"DRAGGING",phase:u,isLockActive:p,shouldWarn:!1})},shouldRespectForcePress:m,drop:function(e){return n("DROP",e)},cancel:function(e){return n("CANCEL",e)}},e.actions)}var f={isActive:function(){return xh({expected:"PRE_DRAG",phase:u,isLockActive:p,shouldWarn:!1})},shouldRespectForcePress:m,fluidLift:function(e){var t=fd(function(e){h(function(){return xm({client:e})})});return sc({},x({liftActionArgs:{id:r,clientSelection:e,movementMode:"FLUID"},cleanup:function(){return t.cancel()},actions:{move:t}}),{move:t})},snapLift:function(){var e={moveUp:function(){return h(fm)},moveRight:function(){return h(ym)},moveDown:function(){return h(gm)},moveLeft:function(){return h(bm)}};return x({liftActionArgs:{id:r,clientSelection:ch(c),movementMode:"SNAP"},cleanup:yd,actions:e})},abort:function(){xh({expected:"PRE_DRAG",phase:u,isLockActive:p,shouldWarn:!0})&&t.release()}};return f}var yh=[function(e){var t=(0,n.useRef)(eh),a=(0,n.useRef)(yd),s=Kc(function(){return{eventName:"mousedown",fn:function(t){if(!t.defaultPrevented&&0===t.button&&!(t.ctrlKey||t.metaKey||t.shiftKey||t.altKey)){var s=e.findClosestDraggableId(t);if(s){var n=e.tryGetLock(s,l,{sourceEvent:t});if(n){t.preventDefault();var r={x:t.clientX,y:t.clientY};a.current(),d(n,r)}}}}}},[e]),r=Kc(function(){return{eventName:"webkitmouseforcewillbegin",fn:function(t){if(!t.defaultPrevented){var a=e.findClosestDraggableId(t);if(a){var s=e.findOptionsForDraggable(a);s&&(s.shouldRespectForcePress||e.canGetLock(a)&&t.preventDefault())}}}}},[e]),i=ed(function(){a.current=bd(window,[r,s],{passive:!1,capture:!0})},[r,s]),l=ed(function(){"IDLE"!==t.current.type&&(t.current=eh,a.current(),i())},[i]),o=ed(function(){var e=t.current;l(),"DRAGGING"===e.type&&e.actions.cancel({shouldBlockNextClick:!0}),"PENDING"===e.type&&e.actions.abort()},[l]),c=ed(function(){var e=th({cancel:o,completed:l,getPhase:function(){return t.current},setPhase:function(e){t.current=e}});a.current=bd(window,e,{capture:!0,passive:!1})},[o,l]),d=ed(function(e,a){"IDLE"!==t.current.type&&wd(!1),t.current={type:"PENDING",point:a,actions:e},c()},[c]);Pp(function(){return i(),function(){a.current()}},[i])},function(e){var t=(0,n.useRef)(ah),a=Kc(function(){return{eventName:"keydown",fn:function(a){if(!a.defaultPrevented&&32===a.keyCode){var n=e.findClosestDraggableId(a);if(n){var r=e.tryGetLock(n,o,{sourceEvent:a});if(r){a.preventDefault();var i=!0,l=r.snapLift();t.current(),t.current=bd(window,nh(l,o),{capture:!0,passive:!1})}}}function o(){i||wd(!1),i=!1,t.current(),s()}}}},[e]),s=ed(function(){t.current=bd(window,[a],{passive:!1,capture:!0})},[a]);Pp(function(){return s(),function(){t.current()}},[s])},function(e){var t=(0,n.useRef)(rh),a=(0,n.useRef)(yd),s=ed(function(){return t.current},[]),r=ed(function(e){t.current=e},[]),i=Kc(function(){return{eventName:"touchstart",fn:function(t){if(!t.defaultPrevented){var s=e.findClosestDraggableId(t);if(s){var n=e.tryGetLock(s,o,{sourceEvent:t});if(n){var r=t.touches[0],i={x:r.clientX,y:r.clientY};a.current(),m(n,i)}}}}}},[e]),l=ed(function(){a.current=bd(window,[i],{capture:!0,passive:!1})},[i]),o=ed(function(){var e=t.current;"IDLE"!==e.type&&("PENDING"===e.type&&clearTimeout(e.longPressTimerId),r(rh),a.current(),l())},[l,r]),c=ed(function(){var e=t.current;o(),"DRAGGING"===e.type&&e.actions.cancel({shouldBlockNextClick:!0}),"PENDING"===e.type&&e.actions.abort()},[o]),d=ed(function(){var e={capture:!0,passive:!1},t={cancel:c,completed:o,getPhase:s},n=bd(window,function(e){var t=e.cancel,a=e.completed,s=e.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(e){var a=s();if("DRAGGING"===a.type){a.hasMoved=!0;var n=e.touches[0],r={x:n.clientX,y:n.clientY};e.preventDefault(),a.actions.move(r)}else t()}},{eventName:"touchend",fn:function(e){var n=s();"DRAGGING"===n.type?(e.preventDefault(),n.actions.drop({shouldBlockNextClick:!0}),a()):t()}},{eventName:"touchcancel",fn:function(e){"DRAGGING"===s().type?(e.preventDefault(),t()):t()}},{eventName:"touchforcechange",fn:function(e){var a=s();"IDLE"===a.type&&wd(!1);var n=e.touches[0];if(n&&n.force>=.15){var r=a.actions.shouldRespectForcePress();if("PENDING"!==a.type)return r?a.hasMoved?void e.preventDefault():void t():void e.preventDefault();r&&t()}}},{eventName:Xp,fn:t}]}(t),e),r=bd(window,function(e){var t=e.cancel,a=e.getPhase;return[{eventName:"orientationchange",fn:t},{eventName:"resize",fn:t},{eventName:"contextmenu",fn:function(e){e.preventDefault()}},{eventName:"keydown",fn:function(e){"DRAGGING"===a().type?(27===e.keyCode&&e.preventDefault(),t()):t()}},{eventName:Xp,fn:t}]}(t),e);a.current=function(){n(),r()}},[c,s,o]),u=ed(function(){var e=s();"PENDING"!==e.type&&wd(!1);var t=e.actions.fluidLift(e.point);r({type:"DRAGGING",actions:t,hasMoved:!1})},[s,r]),m=ed(function(e,t){"IDLE"!==s().type&&wd(!1);var a=setTimeout(u,120);r({type:"PENDING",point:t,actions:e,longPressTimerId:a}),d()},[d,s,r,u]);Pp(function(){return l(),function(){a.current();var e=s();"PENDING"===e.type&&(clearTimeout(e.longPressTimerId),r(rh))}},[s,l,r]),Pp(function(){return bd(window,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}])},[])}];function bh(e){var t=e.contextId,a=e.store,s=e.registry,r=e.customSensors,i=e.enableDefaultSensors,l=[].concat(i?yh:[],r||[]),o=(0,n.useState)(function(){return function(){var e=null;function t(){e||wd(!1),e=null}return{isClaimed:function(){return Boolean(e)},isActive:function(t){return t===e},claim:function(t){e&&wd(!1);var a={abandon:t};return e=a,a},release:t,tryAbandon:function(){e&&(e.abandon(),t())}}}()})[0],c=ed(function(e,t){e.isDragging&&!t.isDragging&&o.tryAbandon()},[o]);Pp(function(){var e=a.getState();return a.subscribe(function(){var t=a.getState();c(e,t),e=t})},[o,a,c]),Pp(function(){return o.tryAbandon},[o.tryAbandon]);var d=ed(function(e){return fh({lockAPI:o,registry:s,store:a,draggableId:e})},[o,s,a]),u=ed(function(e,n,r){return gh({lockAPI:o,registry:s,contextId:t,store:a,draggableId:e,forceSensorStop:n,sourceEvent:r&&r.sourceEvent?r.sourceEvent:null})},[t,o,s,a]),m=ed(function(e){return function(e,t){var a=ph(e,t);return a?a.getAttribute(kp.draggableId):null}(t,e)},[t]),p=ed(function(e){var t=s.draggable.findById(e);return t?t.options:null},[s.draggable]),h=ed(function(){o.isClaimed()&&(o.tryAbandon(),"IDLE"!==a.getState().phase&&a.dispatch({type:"FLUSH",payload:null}))},[o,a]),x=ed(o.isClaimed,[o]),f=Kc(function(){return{canGetLock:d,tryGetLock:u,findClosestDraggableId:m,findOptionsForDraggable:p,tryReleaseLock:h,isLockClaimed:x}},[d,u,m,p,h,x]);Gp();for(var g=0;g<l.length;g++)l[g](f)}function vh(e){return e.current||wd(!1),e.current}function jh(e){var t=e.contextId,a=e.setCallbacks,s=e.sensors,r=e.nonce,i=e.dragHandleUsageInstructions,l=(0,n.useRef)(null);$p();var o=Qp(e),c=ed(function(){return function(e){return{onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}}(o.current)},[o]),d=function(e){var t=Kc(function(){return function(e){return"rbd-announcement-"+e}(e)},[e]),a=(0,n.useRef)(null);return(0,n.useEffect)(function(){var e=document.createElement("div");return a.current=e,e.id=t,e.setAttribute("aria-live","assertive"),e.setAttribute("aria-atomic","true"),sc(e.style,Bp),qp().appendChild(e),function(){setTimeout(function(){var t=qp();t.contains(e)&&t.removeChild(e),e===a.current&&(a.current=null)})}},[t]),ed(function(e){var t=a.current;t&&(t.textContent=e)},[])}(t),u=function(e){var t=e.contextId,a=e.text,s=Wp("hidden-text",{separator:"-"}),r=Kc(function(){return"rbd-hidden-text-"+(e={contextId:t,uniqueId:s}).contextId+"-"+e.uniqueId;var e},[s,t]);return(0,n.useEffect)(function(){var e=document.createElement("div");return e.id=r,e.textContent=a,e.style.display="none",qp().appendChild(e),function(){var t=qp();t.contains(e)&&t.removeChild(e)}},[r,a]),r}({contextId:t,text:i}),m=Lp(t,r),p=ed(function(e){vh(l).dispatch(e)},[]),h=Kc(function(){return uc({publishWhileDragging:dm,updateDroppableScroll:mm,updateDroppableIsEnabled:pm,updateDroppableIsCombineEnabled:hm,collectionStarting:um},p)},[p]),x=function(){var e=Kc(Mp,[]);return(0,n.useEffect)(function(){return function(){requestAnimationFrame(e.clean)}},[e]),e}(),f=Kc(function(){return Km(x,h)},[x,h]),g=Kc(function(){return _p(sc({scrollWindow:tp,scrollDroppable:f.scrollDroppable},uc({move:xm},p)))},[f.scrollDroppable,p]),y=function(e){var t=(0,n.useRef)({}),a=(0,n.useRef)(null),s=(0,n.useRef)(null),r=(0,n.useRef)(!1),i=ed(function(e,a){var s={id:e,focus:a};return t.current[e]=s,function(){var a=t.current;a[e]!==s&&delete a[e]}},[]),l=ed(function(t){var a=Op(e,t);a&&a!==document.activeElement&&a.focus()},[e]),o=ed(function(e,t){a.current===e&&(a.current=t)},[]),c=ed(function(){s.current||r.current&&(s.current=requestAnimationFrame(function(){s.current=null;var e=a.current;e&&l(e)}))},[l]),d=ed(function(e){a.current=null;var t=document.activeElement;t&&t.getAttribute(kp.draggableId)===e&&(a.current=e)},[]);return Pp(function(){return r.current=!0,function(){r.current=!1;var e=s.current;e&&cancelAnimationFrame(e)}},[]),Kc(function(){return{register:i,tryRecordFocus:d,tryRestoreFocusRecorded:c,tryShiftRecord:o}},[i,d,c,o])}(t),b=Kc(function(){return $m({announce:d,autoScroller:g,dimensionMarshal:f,focusMarshal:y,getResponders:c,styleMarshal:m})},[d,g,f,y,c,m]);l.current=b;var v=ed(function(){var e=vh(l);"IDLE"!==e.getState().phase&&e.dispatch({type:"FLUSH",payload:null})},[]),j=ed(function(){var e=vh(l).getState();return e.isDragging||"DROP_ANIMATING"===e.phase},[]);a(Kc(function(){return{isDragging:j,tryAbort:v}},[j,v]));var w=ed(function(e){return ep(vh(l).getState(),e)},[]),_=ed(function(){return Wu(vh(l).getState())},[]),N=Kc(function(){return{marshal:f,focus:y,contextId:t,canLift:w,isMovementAllowed:_,dragHandleUsageInstructionsId:u,registry:x}},[t,f,u,y,w,_,x]);return bh({contextId:t,store:b,registry:x,customSensors:s,enableDefaultSensors:!1!==e.enableDefaultSensors}),(0,n.useEffect)(function(){return v},[v]),n.createElement(Hp.Provider,{value:N},n.createElement(bc,{context:Ip,store:b},e.children))}var wh=0;function _h(e){var t=Kc(function(){return""+wh++},[]),a=e.dragHandleUsageInstructions||Ed;return n.createElement(_d,null,function(s){return n.createElement(jh,{nonce:e.nonce,contextId:t,setCallbacks:s,dragHandleUsageInstructions:a,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd},e.children)})}var Nh=function(e){return function(t){return e===t}},kh=Nh("scroll"),Sh=Nh("auto"),Ch=(Nh("visible"),function(e,t){return t(e.overflowX)||t(e.overflowY)}),Eh=function e(t){return null==t||t===document.body||t===document.documentElement?null:function(e){var t=window.getComputedStyle(e),a={overflowX:t.overflowX,overflowY:t.overflowY};return Ch(a,kh)||Ch(a,Sh)}(t)?t:e(t.parentElement)},Dh=function(e){return{x:e.scrollLeft,y:e.scrollTop}},Ph=function e(t){return!!t&&("fixed"===window.getComputedStyle(t).position||e(t.parentElement))},Ah=function(e){return{closestScrollable:Eh(e),isFixedOnPage:Ph(e)}},Th=function(e){var t=e.ref,a=e.descriptor,s=e.env,n=e.windowScroll,r=e.direction,i=e.isDropDisabled,l=e.isCombineEnabled,o=e.shouldClipSubject,c=s.closestScrollable,d=function(e,t){var a=ud(e);if(!t)return a;if(e!==t)return a;var s=a.paddingBox.top-t.scrollTop,n=a.paddingBox.left-t.scrollLeft,r=s+t.scrollHeight,i=n+t.scrollWidth,l=sd({top:s,right:i,bottom:r,left:n},a.border);return id({borderBox:l,margin:a.margin,border:a.border,padding:a.padding})}(t,c),u=cd(d,n),m=function(){if(!c)return null;var e=ud(c),t={scrollHeight:c.scrollHeight,scrollWidth:c.scrollWidth};return{client:e,page:cd(e,n),scroll:Dh(c),scrollSize:t,shouldClipSubject:o}}(),p=function(e){var t=e.descriptor,a=e.isEnabled,s=e.isCombineEnabled,n=e.isFixedOnPage,r=e.direction,i=e.client,l=e.page,o=e.closest,c=function(){if(!o)return null;var e=o.scrollSize,t=o.client,a=Qm({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,height:t.paddingBox.height,width:t.paddingBox.width});return{pageMarginBox:o.page.marginBox,frameClient:t,scrollSize:e,shouldClipSubject:o.shouldClipSubject,scroll:{initial:o.scroll,current:o.scroll,max:a,diff:{value:Td,displacement:Td}}}}(),d="vertical"===r?uu:mu;return{descriptor:t,isCombineEnabled:s,isFixedOnPage:n,axis:d,isEnabled:a,client:i,page:l,frame:c,subject:Hd({page:l,withPlaceholder:null,axis:d,frame:c})}}({descriptor:a,isEnabled:!i,isCombineEnabled:l,isFixedOnPage:s.isFixedOnPage,direction:r,client:d,page:u,closest:m});return p},Lh={passive:!1},Rh={passive:!0},Fh=function(e){return e.shouldPublishImmediately?Lh:Rh};function Oh(e){var t=(0,n.useContext)(e);return t||wd(!1),t}var Mh=function(e){return e&&e.env.closestScrollable||null};function Ih(){}var qh={width:0,height:0,margin:{top:0,right:0,bottom:0,left:0}},Bh=function(e){var t=e.isAnimatingOpenOnMount,a=e.placeholder,s=e.animate,n=function(e){var t=e.isAnimatingOpenOnMount,a=e.placeholder,s=e.animate;return t||"close"===s?qh:{height:a.client.borderBox.height,width:a.client.borderBox.width,margin:a.client.margin}}({isAnimatingOpenOnMount:t,placeholder:a,animate:s});return{display:a.display,boxSizing:"border-box",width:n.width,height:n.height,marginTop:n.margin.top,marginRight:n.margin.right,marginBottom:n.margin.bottom,marginLeft:n.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:"none"!==s?Cm.placeholder:null}};var zh=n.memo(function(e){var t=(0,n.useRef)(null),a=ed(function(){t.current&&(clearTimeout(t.current),t.current=null)},[]),s=e.animate,r=e.onTransitionEnd,i=e.onClose,l=e.contextId,o=(0,n.useState)("open"===e.animate),c=o[0],d=o[1];(0,n.useEffect)(function(){return c?"open"!==s?(a(),d(!1),Ih):t.current?Ih:(t.current=setTimeout(function(){t.current=null,d(!1)}),a):Ih},[s,c,a]);var u=ed(function(e){"height"===e.propertyName&&(r(),"close"===s&&i())},[s,i,r]),m=Bh({isAnimatingOpenOnMount:c,animate:e.animate,placeholder:e.placeholder});return n.createElement(e.placeholder.tagName,{style:m,"data-rbd-placeholder-context-id":l,onTransitionEnd:u,ref:e.innerRef})}),Uh=n.createContext(null);var Wh=function(e){function t(){for(var t,a=arguments.length,s=new Array(a),n=0;n<a;n++)s[n]=arguments[n];return(t=e.call.apply(e,[this].concat(s))||this).state={isVisible:Boolean(t.props.on),data:t.props.on,animate:t.props.shouldAnimate&&t.props.on?"open":"none"},t.onClose=function(){"close"===t.state.animate&&t.setState({isVisible:!1})},t}return ac(t,e),t.getDerivedStateFromProps=function(e,t){return e.shouldAnimate?e.on?{isVisible:!0,data:e.on,animate:"open"}:t.isVisible?{isVisible:!0,data:t.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:Boolean(e.on),data:e.on,animate:"none"}},t.prototype.render=function(){if(!this.state.isVisible)return null;var e={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(e)},t}(n.PureComponent),Hh=5e3,Gh=4500,Vh=function(e,t){return t?Cm.drop(t.duration):e?Cm.snap:Cm.fluid},$h=function(e,t){return e?t?Nm.drop:Nm.combining:null};function Qh(e){return"DRAGGING"===e.type?function(e){var t=e.dimension.client,a=e.offset,s=e.combineWith,n=e.dropping,r=Boolean(s),i=function(e){return null!=e.forceShouldAnimate?e.forceShouldAnimate:"SNAP"===e.mode}(e),l=Boolean(n),o=l?Pm(a,r):Dm(a);return{position:"fixed",top:t.marginBox.top,left:t.marginBox.left,boxSizing:"border-box",width:t.borderBox.width,height:t.borderBox.height,transition:Vh(i,n),transform:o,opacity:$h(r,l),zIndex:l?Gh:Hh,pointerEvents:"none"}}(e):{transform:Dm((t=e).offset),transition:t.shouldAnimateDisplacement?null:"none"};var t}function Yh(e){var t=Wp("draggable"),a=e.descriptor,s=e.registry,r=e.getDraggableRef,i=e.canDragInteractiveElements,l=e.shouldRespectForcePress,o=e.isEnabled,c=Kc(function(){return{canDragInteractiveElements:i,shouldRespectForcePress:l,isEnabled:o}},[i,o,l]),d=ed(function(e){var t=r();return t||wd(!1),function(e,t,a){void 0===a&&(a=Td);var s=window.getComputedStyle(t),n=t.getBoundingClientRect(),r=dd(n,s),i=cd(r,a);return{descriptor:e,placeholder:{client:r,tagName:t.tagName.toLowerCase(),display:s.display},displaceBy:{x:r.marginBox.width,y:r.marginBox.height},client:r,page:i}}(a,t,e)},[a,r]),u=Kc(function(){return{uniqueId:t,descriptor:a,options:c,getDimension:d}},[a,d,c,t]),m=(0,n.useRef)(u),p=(0,n.useRef)(!0);Pp(function(){return s.draggable.register(m.current),function(){return s.draggable.unregister(m.current)}},[s.draggable]),Pp(function(){if(p.current)p.current=!1;else{var e=m.current;m.current=u,s.draggable.update(u,e)}},[u,s.draggable])}function Jh(e,t,a){Vp()}function Zh(e){e.preventDefault()}var Xh=function(e,t){return e===t},Kh=function(e){var t=e.combine,a=e.destination;return a?a.droppableId:t?t.droppableId:null};function ex(e){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}var tx={mapped:{type:"SECONDARY",offset:Td,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:ex(null)}};var ax=Jc(function(){var e=function(){var e=xd(function(e,t){return{x:e,y:t}}),t=xd(function(e,t,a,s,n){return{isDragging:!0,isClone:t,isDropAnimating:Boolean(n),dropAnimation:n,mode:e,draggingOver:a,combineWith:s,combineTargetFor:null}}),a=xd(function(e,a,s,n,r,i,l){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:r,combineWith:i,mode:a,offset:e,dimension:s,forceShouldAnimate:l,snapshot:t(a,n,r,i,null)}}});return function(s,n){if(s.isDragging){if(s.critical.draggable.id!==n.draggableId)return null;var r=s.current.client.offset,i=s.dimensions.draggables[n.draggableId],l=zu(s.impact),o=(d=s.impact).at&&"COMBINE"===d.at.type?d.at.combine.draggableId:null,c=s.forceShouldAnimate;return a(e(r.x,r.y),s.movementMode,i,n.isClone,l,o,c)}var d;if("DROP_ANIMATING"===s.phase){var u=s.completed;if(u.result.draggableId!==n.draggableId)return null;var m=n.isClone,p=s.dimensions.draggables[n.draggableId],h=u.result,x=h.mode,f=Kh(h),g=function(e){return e.combine?e.combine.draggableId:null}(h),y={duration:s.dropDuration,curve:_m,moveTo:s.newHomeClientOffset,opacity:g?Nm.drop:null,scale:g?km.drop:null};return{mapped:{type:"DRAGGING",offset:s.newHomeClientOffset,dimension:p,dropping:y,draggingOver:f,combineWith:g,mode:x,forceShouldAnimate:null,snapshot:t(x,m,f,g,y)}}}return null}}(),t=function(){var e=xd(function(e,t){return{x:e,y:t}}),t=xd(ex),a=xd(function(e,a,s){return void 0===a&&(a=null),{mapped:{type:"SECONDARY",offset:e,combineTargetFor:a,shouldAnimateDisplacement:s,snapshot:t(a)}}}),s=function(e){return e?a(Td,e,!0):null},n=function(t,n,r,i){var l=r.displaced.visible[t],o=Boolean(i.inVirtualList&&i.effected[t]),c=au(r),d=c&&c.draggableId===t?n:null;if(!l){if(!o)return s(d);if(r.displaced.invisible[t])return null;var u=Od(i.displacedBy.point),m=e(u.x,u.y);return a(m,d,!0)}if(o)return s(d);var p=r.displacedBy.point,h=e(p.x,p.y);return a(h,d,l.shouldAnimate)};return function(e,t){if(e.isDragging)return e.critical.draggable.id===t.draggableId?null:n(t.draggableId,e.critical.draggable.id,e.impact,e.afterCritical);if("DROP_ANIMATING"===e.phase){var a=e.completed;return a.result.draggableId===t.draggableId?null:n(t.draggableId,a.result.draggableId,a.impact,a.afterCritical)}return null}}();return function(a,s){return e(a,s)||t(a,s)||tx}},{dropAnimationFinished:wm},null,{context:Ip,pure:!0,areStatePropsEqual:Xh})(function(e){var t=(0,n.useRef)(null),a=ed(function(e){t.current=e},[]),s=ed(function(){return t.current},[]),r=Oh(Hp),i=r.contextId,l=r.dragHandleUsageInstructionsId,o=r.registry,c=Oh(Uh),d=c.type,u=c.droppableId,m=Kc(function(){return{id:e.draggableId,index:e.index,type:d,droppableId:u}},[e.draggableId,e.index,d,u]),p=e.children,h=e.draggableId,x=e.isEnabled,f=e.shouldRespectForcePress,g=e.canDragInteractiveElements,y=e.isClone,b=e.mapped,v=e.dropAnimationFinished;Jh(),Gp(),y||Yh(Kc(function(){return{descriptor:m,registry:o,getDraggableRef:s,canDragInteractiveElements:g,shouldRespectForcePress:f,isEnabled:x}},[m,o,s,g,f,x]));var j=Kc(function(){return x?{tabIndex:0,role:"button","aria-describedby":l,"data-rbd-drag-handle-draggable-id":h,"data-rbd-drag-handle-context-id":i,draggable:!1,onDragStart:Zh}:null},[i,l,h,x]),w=ed(function(e){"DRAGGING"===b.type&&b.dropping&&"transform"===e.propertyName&&v()},[v,b]),_=Kc(function(){var e=Qh(b),t="DRAGGING"===b.type&&b.dropping?w:null;return{innerRef:a,draggableProps:{"data-rbd-draggable-context-id":i,"data-rbd-draggable-id":h,style:e,onTransitionEnd:t},dragHandleProps:j}},[i,j,h,b,w,a]),N=Kc(function(){return{draggableId:m.id,type:m.type,source:{index:m.index,droppableId:m.droppableId}}},[m.droppableId,m.id,m.index,m.type]);return p(_,b.snapshot,N)});function sx(e){return Oh(Uh).isUsingCloneFor!==e.draggableId||e.isClone?n.createElement(ax,e):null}function nx(e){var t="boolean"!==typeof e.isDragDisabled||!e.isDragDisabled,a=Boolean(e.disableInteractiveElementBlocking),s=Boolean(e.shouldRespectForcePress);return n.createElement(sx,sc({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:a,shouldRespectForcePress:s}))}var rx=function(e,t){return e===t.droppable.type},ix=function(e,t){return t.draggables[e.draggable.id]};var lx={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:function(){return document.body||wd(!1),document.body}},ox=Jc(function(){var e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t=sc({},e,{shouldAnimatePlaceholder:!1}),a=xd(function(e){return{draggableId:e.id,type:e.type,source:{index:e.index,droppableId:e.droppableId}}}),s=xd(function(s,n,r,i,l,o){var c=l.descriptor.id;if(l.descriptor.droppableId===s){var d=o?{render:o,dragging:a(l.descriptor)}:null,u={isDraggingOver:r,draggingOverWith:r?c:null,draggingFromThisWith:c,isUsingPlaceholder:!0};return{placeholder:l.placeholder,shouldAnimatePlaceholder:!1,snapshot:u,useClone:d}}if(!n)return t;if(!i)return e;var m={isDraggingOver:r,draggingOverWith:c,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:l.placeholder,shouldAnimatePlaceholder:!0,snapshot:m,useClone:null}});return function(a,n){var r=n.droppableId,i=n.type,l=!n.isDropDisabled,o=n.renderClone;if(a.isDragging){var c=a.critical;if(!rx(i,c))return t;var d=ix(c,a.dimensions),u=zu(a.impact)===r;return s(r,l,u,u,d,o)}if("DROP_ANIMATING"===a.phase){var m=a.completed;if(!rx(i,m.critical))return t;var p=ix(m.critical,a.dimensions);return s(r,l,Kh(m.result)===r,zu(m.impact)===r,p,o)}if("IDLE"===a.phase&&a.completed&&!a.shouldFlush){var h=a.completed;if(!rx(i,h.critical))return t;var x=zu(h.impact)===r,f=Boolean(h.impact.at&&"COMBINE"===h.impact.at.type),g=h.critical.droppable.id===r;return x?f?e:t:g?e:t}return t}},{updateViewportMaxScroll:function(e){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}}},null,{context:Ip,pure:!0,areStatePropsEqual:Xh})(function(e){var t=(0,n.useContext)(Hp);t||wd(!1);var a=t.contextId,s=t.isMovementAllowed,r=(0,n.useRef)(null),i=(0,n.useRef)(null),l=e.children,o=e.droppableId,c=e.type,d=e.mode,u=e.direction,m=e.ignoreContainerClipping,p=e.isDropDisabled,h=e.isCombineEnabled,x=e.snapshot,f=e.useClone,g=e.updateViewportMaxScroll,y=e.getContainerForClone,b=ed(function(){return r.current},[]),v=ed(function(e){r.current=e},[]),j=(ed(function(){return i.current},[]),ed(function(e){i.current=e},[]));Vp();var w=ed(function(){s()&&g({maxScroll:Jm()})},[s,g]);!function(e){var t=(0,n.useRef)(null),a=Oh(Hp),s=Wp("droppable"),r=a.registry,i=a.marshal,l=Qp(e),o=Kc(function(){return{id:e.droppableId,type:e.type,mode:e.mode}},[e.droppableId,e.mode,e.type]),c=(0,n.useRef)(o),d=Kc(function(){return xd(function(e,a){t.current||wd(!1);var s={x:e,y:a};i.updateDroppableScroll(o.id,s)})},[o.id,i]),u=ed(function(){var e=t.current;return e&&e.env.closestScrollable?Dh(e.env.closestScrollable):Td},[]),m=ed(function(){var e=u();d(e.x,e.y)},[u,d]),p=Kc(function(){return fd(m)},[m]),h=ed(function(){var e=t.current,a=Mh(e);e&&a||wd(!1),e.scrollOptions.shouldPublishImmediately?m():p()},[p,m]),x=ed(function(e,s){t.current&&wd(!1);var n=l.current,r=n.getDroppableRef();r||wd(!1);var i=Ah(r),c={ref:r,descriptor:o,env:i,scrollOptions:s};t.current=c;var d=Th({ref:r,descriptor:o,env:i,windowScroll:e,direction:n.direction,isDropDisabled:n.isDropDisabled,isCombineEnabled:n.isCombineEnabled,shouldClipSubject:!n.ignoreContainerClipping}),u=i.closestScrollable;return u&&(u.setAttribute(Ep.contextId,a.contextId),u.addEventListener("scroll",h,Fh(c.scrollOptions))),d},[a.contextId,o,h,l]),f=ed(function(){var e=t.current,a=Mh(e);return e&&a||wd(!1),Dh(a)},[]),g=ed(function(){var e=t.current;e||wd(!1);var a=Mh(e);t.current=null,a&&(p.cancel(),a.removeAttribute(Ep.contextId),a.removeEventListener("scroll",h,Fh(e.scrollOptions)))},[h,p]),y=ed(function(e){var a=t.current;a||wd(!1);var s=Mh(a);s||wd(!1),s.scrollTop+=e.y,s.scrollLeft+=e.x},[]),b=Kc(function(){return{getDimensionAndWatchScroll:x,getScrollWhileDragging:f,dragStopped:g,scroll:y}},[g,x,f,y]),v=Kc(function(){return{uniqueId:s,descriptor:o,callbacks:b}},[b,o,s]);Pp(function(){return c.current=v.descriptor,r.droppable.register(v),function(){t.current&&g(),r.droppable.unregister(v)}},[b,o,g,v,i,r.droppable]),Pp(function(){t.current&&i.updateDroppableIsEnabled(c.current.id,!e.isDropDisabled)},[e.isDropDisabled,i]),Pp(function(){t.current&&i.updateDroppableIsCombineEnabled(c.current.id,e.isCombineEnabled)},[e.isCombineEnabled,i])}({droppableId:o,type:c,mode:d,direction:u,isDropDisabled:p,isCombineEnabled:h,ignoreContainerClipping:m,getDroppableRef:b});var _=n.createElement(Wh,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},function(e){var t=e.onClose,s=e.data,r=e.animate;return n.createElement(zh,{placeholder:s,onClose:t,innerRef:j,animate:r,contextId:a,onTransitionEnd:w})}),N=Kc(function(){return{innerRef:v,placeholder:_,droppableProps:{"data-rbd-droppable-id":o,"data-rbd-droppable-context-id":a}}},[a,o,_,v]),k=f?f.dragging.draggableId:null,S=Kc(function(){return{droppableId:o,type:c,isUsingCloneFor:k}},[o,k,c]);return n.createElement(Uh.Provider,{value:S},l(N,x),function(){if(!f)return null;var e=f.dragging,t=f.render,a=n.createElement(sx,{draggableId:e.draggableId,index:e.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},function(a,s){return t(a,s,e)});return Ct.createPortal(a,y())}())});ox.defaultProps=lx;const cx=["title","titleId"];function dx(e,t){let{title:a,titleId:s}=e,r=l(e,cx);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},r),a?n.createElement("title",{id:s},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"}))}const ux=n.forwardRef(dx),mx=["title","titleId"];function px(e,t){let{title:a,titleId:s}=e,r=l(e,mx);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},r),a?n.createElement("title",{id:s},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"}))}const hx=n.forwardRef(px),xx=["title","titleId"];function fx(e,t){let{title:a,titleId:s}=e,r=l(e,xx);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},r),a?n.createElement("title",{id:s},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"}))}const gx=n.forwardRef(fx),yx=e=>{let{className:t="h-5 w-5"}=e;return(0,mi.jsxs)("svg",{className:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,mi.jsx)("circle",{cx:"12",cy:"5",r:"2"}),(0,mi.jsx)("path",{d:"M12 7v6"}),(0,mi.jsx)("path",{d:"M8 9l4-2 4 2"}),(0,mi.jsx)("path",{d:"M9 17l3-4 3 4"}),(0,mi.jsx)("path",{d:"M10 21v-2"}),(0,mi.jsx)("path",{d:"M14 21v-2"})]})},bx=()=>{const[e,t]=(0,n.useState)({}),[a,s]=(0,n.useState)(!0),[r,i]=(0,n.useState)({}),[l,o]=(0,n.useState)(!1),[c,d]=(0,n.useState)({jobId:null,currentStage:null,stages:[]}),[u,p]=(0,n.useState)(!1),[h,x]=(0,n.useState)({jobId:null,stage:null,orderId:null});(0,n.useEffect)(()=>{f();const e=setInterval(()=>{u?console.log("Skipping auto-refresh (job card is open)"):(console.log("Auto-refreshing production board (no job card open)"),f())},3e4);return()=>clearInterval(e)},[u]);const f=async()=>{try{var e;a&&s(!0);const n=await lr();t((null===(e=n.data)||void 0===e?void 0:e.data)||{})}catch(n){console.error("Failed to load production board:",n),Bt.error("Failed to load production board")}finally{s(!1)}},g=e=>Object.keys(ci).filter(t=>t!==e),y=async(e,t,a)=>{try{await or(e,{direction:a}),Bt.success("Job moved ".concat(a)),f()}catch(r){var s,n;console.error("Failed to move job stage:",r),null!==(s=r.response)&&void 0!==s&&null!==(n=s.data)&&void 0!==n&&n.detail?Bt.error(r.response.data.detail):Bt.error("Failed to move job stage")}},b=e=>{let{status:t}=e;return(0,mi.jsx)(_l,{className:"h-5 w-5 ".concat("started"===t?"text-green-500 animate-pulse":"text-red-500")})},v=e=>{let{job:t,stageKey:a,isDragging:s=!1}=e;const n=r[t.id],l=t.is_overdue,c=((e=>{e.materials_ready})(t),((e,t)=>e.stage_start_times&&e.stage_start_times[t]?"started":"not_started")(t,a));return(0,mi.jsxs)("div",{className:"\n          relative bg-gray-800 border rounded-lg p-3 transition-all duration-200 hover:shadow-lg overflow-hidden cursor-move\n          ".concat(di[a]||"border-gray-600","\n          ").concat(l?"border-red-500 bg-red-900/20":"","\n          ").concat(s?"shadow-2xl ring-2 ring-yellow-400":"","\n        "),"data-testid":"job-card-".concat(t.id),children:[(0,mi.jsxs)("div",{className:"mb-2 relative z-10",children:[(0,mi.jsxs)("div",{className:"flex items-center mb-1",children:[(0,mi.jsx)("div",{className:"flex-1 min-w-0",children:(0,mi.jsx)("h4",{className:"font-semibold text-white text-sm truncate",children:t.order_number})}),l&&(0,mi.jsx)(gl,{className:"h-4 w-4 text-red-400 ml-1 flex-shrink-0"})]}),(0,mi.jsx)("p",{className:"text-xs text-gray-400 truncate",children:t.client_name}),(0,mi.jsxs)("div",{className:"flex items-center justify-between mt-2 flex-wrap gap-1",children:[(0,mi.jsx)("button",{onClick:e=>e.stopPropagation(),className:"cursor-default",title:"Job ".concat("started"===c?"Started":"Not Started"),children:(0,mi.jsx)(b,{status:c})}),(0,mi.jsx)("button",{onClick:()=>{return e=t.id,void i(t=>m(m({},t),{},{[e]:!t[e]}));var e},className:"text-gray-400 hover:text-yellow-400 transition-colors",title:"View Order Items","data-testid":"expand-job-".concat(t.id),children:(0,mi.jsx)(ux,{className:"h-4 w-4"})}),(0,mi.jsx)("button",{onClick:e=>{e.stopPropagation(),((e,t)=>{const a=g(t);d({jobId:e,currentStage:t,stages:a}),o(!0)})(t.id,a)},className:"text-gray-400 hover:text-green-400 transition-colors",title:"Jump to Stage","data-testid":"jump-stage-".concat(t.id),children:(0,mi.jsx)(yx,{className:"h-4 w-4"})}),(0,mi.jsx)("button",{onClick:()=>((e,t,a)=>{if(console.log("Opening job card:",{jobId:e,stage:t,orderId:a}),!e||!t)return Bt.error("Missing job information for job card"),void console.error("Missing required parameters:",{jobId:e,stage:t,orderId:a});const s=a||e;console.log("Job card opening with:",{jobId:e,stage:t,orderId:s}),x({jobId:e,stage:t,orderId:s}),p(!0)})(t.id,a,t.order_id||t.id),className:"text-gray-400 hover:text-purple-400 transition-colors",title:"View Job Card","data-testid":"view-job-card-".concat(t.id),children:(0,mi.jsx)(ki,{className:"h-4 w-4"})}),(0,mi.jsx)("button",{onClick:()=>(async(e,t)=>{try{const a=await kr(e),s=window.URL.createObjectURL(new Blob([a.data])),n=document.createElement("a");n.href=s,n.download="job_card_".concat(t,".pdf"),document.body.appendChild(n),n.click(),document.body.removeChild(n),window.URL.revokeObjectURL(s),Bt.success("Job card downloaded successfully")}catch(a){console.error("Failed to download job card:",a),Bt.error("Failed to download job card")}})(t.id,t.order_number),className:"text-gray-400 hover:text-blue-400 transition-colors",title:"Download","data-testid":"download-job-card-".concat(t.id),children:(0,mi.jsx)(eo,{className:"h-4 w-4"})})]})]}),(0,mi.jsxs)("div",{className:"space-y-1 text-xs mt-2 relative z-10",children:[(0,mi.jsxs)("div",{className:"flex justify-between",children:[(0,mi.jsx)("span",{className:"text-gray-400",children:"Runtime:"}),(0,mi.jsx)("span",{className:"text-yellow-400 font-medium truncate ml-1",children:t.runtime||"2-3d"})]}),(0,mi.jsxs)("div",{className:"flex justify-between",children:[(0,mi.jsx)("span",{className:"text-gray-400",children:"Due:"}),(0,mi.jsx)("span",{className:"truncate ml-1 ".concat(l?"text-red-400":"text-gray-300"),children:oi(t.due_date)})]})]}),(0,mi.jsxs)("div",{className:"flex justify-between mt-2 pt-2 border-t border-gray-700 relative z-10",children:[(0,mi.jsx)("button",{onClick:()=>y(t.id,0,"backward"),className:"text-gray-400 hover:text-yellow-400 transition-colors",title:"Move to Previous Stage",children:(0,mi.jsx)(hx,{className:"h-5 w-5"})}),(0,mi.jsx)("button",{onClick:()=>y(t.id,0,"forward"),className:"text-gray-400 hover:text-yellow-400 transition-colors",title:"Move to Next Stage",children:(0,mi.jsx)(gx,{className:"h-5 w-5"})})]}),n&&(0,mi.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-700 relative z-10",children:(0,mi.jsxs)("div",{className:"space-y-3",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("h5",{className:"font-medium text-white mb-2",children:"Order Items:"}),(0,mi.jsx)("div",{className:"space-y-2",children:t.items.map((e,a)=>(0,mi.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,mi.jsxs)("div",{className:"flex items-center",children:[(0,mi.jsx)("input",{type:"checkbox",checked:e.is_completed||!1,onChange:()=>(async(e,t,a)=>{try{await ur(e,{item_index:t,is_completed:!a}),Bt.success("Item status updated"),f()}catch(s){console.error("Failed to update item status:",s),Bt.error("Failed to update item status")}})(t.id,a,e.is_completed),className:"mr-2 rounded bg-gray-700 border-gray-600"}),(0,mi.jsxs)("span",{className:"".concat(e.is_completed?"line-through text-gray-500":"text-gray-300"),children:[e.product_name," (x",e.quantity,")"]})]}),(0,mi.jsx)("span",{className:"text-gray-400",children:li(e.total_price)})]},a))})]}),t.delivery_address&&(0,mi.jsxs)("div",{children:[(0,mi.jsx)("h5",{className:"font-medium text-white mb-1",children:"Delivery:"}),(0,mi.jsx)("p",{className:"text-sm text-gray-300",children:t.delivery_address})]})]})})]})},j=e=>{let{stageKey:t,jobs:a,stageName:s}=e;const n=a.filter(e=>e.is_overdue).length;return(0,mi.jsxs)("div",{className:"mb-6","data-testid":"stage-".concat(t),children:[(0,mi.jsx)("div",{className:"bg-gray-700 rounded-t-lg p-4 border-l-4 ".concat(di[t]||"border-gray-500"),children:(0,mi.jsxs)("div",{className:"flex items-center justify-between",children:[(0,mi.jsx)("h3",{className:"font-semibold text-white text-lg",children:s}),(0,mi.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,mi.jsx)("span",{className:"bg-gray-600 text-white text-sm px-2 py-1 rounded",children:a.length}),n>0&&(0,mi.jsxs)("span",{className:"bg-red-600 text-white text-sm px-2 py-1 rounded flex items-center",children:[(0,mi.jsx)(gl,{className:"h-4 w-4 mr-1"}),n]})]})]})}),(0,mi.jsx)(ox,{droppableId:t,direction:"horizontal",children:(e,s)=>(0,mi.jsx)("div",m(m({ref:e.innerRef},e.droppableProps),{},{className:"bg-gray-700/30 rounded-b-lg p-4 min-h-32 transition-colors ".concat(s.isDraggingOver?"bg-gray-600/50 border-2 border-yellow-400":""),children:a.length>0?(0,mi.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6 gap-3",children:[a.map((e,a)=>(0,mi.jsx)(nx,{draggableId:e.id,index:a,children:(a,s)=>(0,mi.jsx)("div",m(m(m({ref:a.innerRef},a.draggableProps),a.dragHandleProps),{},{className:s.isDragging?"opacity-75 rotate-2":"",children:(0,mi.jsx)(v,{job:e,stageKey:t,isDragging:s.isDragging})}))},e.id)),e.placeholder]}):(0,mi.jsx)("p",{className:"text-gray-400 text-center py-8",children:"No jobs in this stage"})}))})]})};return a?(0,mi.jsx)(hl,{children:(0,mi.jsx)("div",{className:"p-8",children:(0,mi.jsxs)("div",{className:"animate-pulse",children:[(0,mi.jsx)("div",{className:"h-8 bg-gray-700 rounded w-1/4 mb-8"}),(0,mi.jsx)("div",{className:"space-y-4",children:[...Array(7)].map((e,t)=>(0,mi.jsx)("div",{className:"h-32 bg-gray-700 rounded"},t))})]})})}):(0,mi.jsxs)(hl,{children:[(0,mi.jsxs)("div",{className:"p-8","data-testid":"production-board",children:[(0,mi.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"Production Board"}),(0,mi.jsx)("p",{className:"text-gray-400",children:"Track jobs through the manufacturing process"})]}),(0,mi.jsx)("button",{onClick:f,className:"misty-button misty-button-secondary","data-testid":"refresh-board",children:"Refresh"})]}),(0,mi.jsx)(_h,{onDragEnd:async a=>{const{source:s,destination:n,draggableId:r}=a;if(!n)return;if(s.droppableId===n.droppableId&&s.index===n.index)return;const i=s.droppableId,l=[...e[i]],[o]=l.splice(s.index,1);l.splice(n.index,0,o),t(e=>m(m({},e),{},{[i]:l}));try{const e=l.map(e=>e.id);await dr({stage:i,job_order:e}),Bt.success("Job order updated successfully")}catch(c){console.error("Failed to reorder jobs:",c),Bt.error("Failed to save job order"),f()}},children:(0,mi.jsx)("div",{className:"space-y-4 pb-4",children:Object.entries(e).map(e=>{let[t,a]=e;return(0,mi.jsx)(j,{stageKey:t,jobs:a,stageName:ci[t]||t},t)})})})]}),u&&(0,mi.jsx)(ec,{jobId:h.jobId,stage:h.stage,orderId:h.orderId,onClose:()=>{p(!1),x({jobId:null,stage:null,orderId:null}),setTimeout(()=>{console.log("Refreshing production board after job card closed"),f()},500)},onJobStarted:()=>{console.log("Job started - refreshing production board"),f()}}),l&&(0,mi.jsx)("div",{className:"modal-overlay",onClick:e=>e.target===e.currentTarget&&o(!1),children:(0,mi.jsx)("div",{className:"modal-content max-w-md",children:(0,mi.jsxs)("div",{className:"p-6",children:[(0,mi.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Jump to Stage"}),(0,mi.jsx)("p",{className:"text-sm text-gray-400",children:"Select a stage to jump this job to"})]}),(0,mi.jsx)("button",{onClick:()=>o(!1),className:"text-gray-400 hover:text-white text-2xl",children:"\xd7"})]}),(0,mi.jsxs)("div",{className:"mb-6",children:[(0,mi.jsxs)("p",{className:"text-sm text-gray-400 mb-4",children:["Current Stage: ",(0,mi.jsx)("span",{className:"text-white font-medium",children:ci[c.currentStage]})]}),c.stages.length>0?(0,mi.jsx)("div",{className:"space-y-2",children:c.stages.map(e=>(0,mi.jsx)("button",{onClick:()=>(async e=>{try{await cr(c.jobId,{target_stage:e}),Bt.success("Job jumped to ".concat(ci[e])),o(!1),f()}catch(s){var t,a;console.error("Failed to jump job to stage:",s),null!==(t=s.response)&&void 0!==t&&null!==(a=t.data)&&void 0!==a&&a.detail?Bt.error(s.response.data.detail):Bt.error("Failed to jump job to stage")}})(e),className:"w-full text-left px-4 py-3 bg-gray-800 hover:bg-gray-700 border border-gray-600 rounded-lg transition-colors text-white",children:(0,mi.jsxs)("div",{className:"flex items-center justify-between",children:[(0,mi.jsxs)("span",{children:["Jump to ",ci[e]]}),(0,mi.jsx)("svg",{className:"h-5 w-5 text-green-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,mi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})},e))}):(0,mi.jsx)("p",{className:"text-gray-400 text-sm py-4 text-center",children:"No other stages available"})]}),(0,mi.jsx)("div",{className:"flex justify-end",children:(0,mi.jsx)("button",{onClick:()=>o(!1),className:"misty-button misty-button-secondary",children:"Cancel"})})]})})})]})},vx=["title","titleId"];function jx(e,t){let{title:a,titleId:s}=e,r=l(e,vx);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},r),a?n.createElement("title",{id:s},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const wx=n.forwardRef(jx),_x=["title","titleId"];function Nx(e,t){let{title:a,titleId:s}=e,r=l(e,_x);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},r),a?n.createElement("title",{id:s},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25M9 16.5v.75m3-3v3M15 12v5.25m-4.5-15H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const kx=n.forwardRef(Nx),Sx=["title","titleId"];function Cx(e,t){let{title:a,titleId:s}=e,r=l(e,Sx);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},r),a?n.createElement("title",{id:s},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 15.75 7.5-7.5 7.5 7.5"}))}const Ex=n.forwardRef(Cx),Dx=["title","titleId"];function Px(e,t){let{title:a,titleId:s}=e,r=l(e,Dx);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},r),a?n.createElement("title",{id:s},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"}))}const Ax=n.forwardRef(Px),Tx=()=>{var e,t,a,s,r,i,l,o;const[c,d]=(0,n.useState)(!0),[u,p]=(0,n.useState)(null),[h,x]=(0,n.useState)(null),[f,g]=(0,n.useState)((new Date).getFullYear()),[y,b]=(0,n.useState)([]),[v,j]=(0,n.useState)(""),[w,_]=(0,n.useState)(null),[N,k]=(0,n.useState)([]),[S,C]=(0,n.useState)(""),[E,D]=(0,n.useState)(""),[P,A]=(0,n.useState)(""),[T,L]=(0,n.useState)("last_30_days"),[R,F]=(0,n.useState)((new Date).getFullYear()),[O,M]=(0,n.useState)((new Date).getMonth()),[I,q]=(0,n.useState)((new Date).getFullYear()),[B,z]=(0,n.useState)((new Date).getMonth()),[U,W]=(0,n.useState)(!1),[H,G]=(0,n.useState)(null),[V,$]=(0,n.useState)(!1),[Q,Y]=(0,n.useState)(""),[J,Z]=(0,n.useState)("last_30_days"),[X,K]=(0,n.useState)(""),[ee,te]=(0,n.useState)(""),[ae,se]=(0,n.useState)((new Date).getFullYear()),[ne,re]=(0,n.useState)((new Date).getMonth()),[ie,le]=(0,n.useState)((new Date).getFullYear()),[oe,ce]=(0,n.useState)((new Date).getMonth()),[de,ue]=(0,n.useState)(!1),[me,pe]=(0,n.useState)(null),[he,xe]=(0,n.useState)(!1),[fe,ge]=(0,n.useState)(""),[ye,be]=(0,n.useState)("last_90_days"),[ve,je]=(0,n.useState)(""),[we,_e]=(0,n.useState)(""),[Ne,ke]=(0,n.useState)((new Date).getFullYear()),[Se,Ce]=(0,n.useState)((new Date).getMonth()),[Ee,De]=(0,n.useState)((new Date).getFullYear()),[Pe,Ae]=(0,n.useState)((new Date).getMonth()),[Te,Le]=(0,n.useState)(null),[Re,Fe]=(0,n.useState)(!1),[Oe,Me]=(0,n.useState)({}),[Ie,qe]=(0,n.useState)({}),[Be,ze]=(0,n.useState)(""),[Ue,We]=(0,n.useState)("customer"),[He,Ge]=(0,n.useState)([]),[Ve,$e]=(0,n.useState)(!1),[Qe,Ye]=(0,n.useState)(null),[Je,Ze]=(0,n.useState)(!1),[Xe,Ke]=(0,n.useState)(null),[et,tt]=(0,n.useState)("3_months"),[at,st]=(0,n.useState)(!1),[nt,rt]=(0,n.useState)(!1),[it,lt]=(0,n.useState)(!1),[ot,ct]=(0,n.useState)(!1),[dt,ut]=(0,n.useState)(!1),[mt,pt]=(0,n.useState)(!1),[ht,xt]=(0,n.useState)(!1),[ft,gt]=(0,n.useState)(""),[yt,bt]=(0,n.useState)(""),[vt,jt]=(0,n.useState)("last_30_days"),[wt,_t]=(0,n.useState)((new Date).getFullYear()),[Nt,kt]=(0,n.useState)((new Date).getMonth()),[St,Ct]=(0,n.useState)((new Date).getFullYear()),[Et,Dt]=(0,n.useState)((new Date).getMonth()),[Pt,At]=(0,n.useState)(null),[Tt,Lt]=(0,n.useState)(!1),[Rt,Ft]=(0,n.useState)({}),[Ot,Mt]=(0,n.useState)(!1),[It,qt]=(0,n.useState)(!1),[zt,Ut]=(0,n.useState)(!1),[Wt,Ht]=(0,n.useState)("all"),[Gt,Vt]=(0,n.useState)([]),[$t,Qt]=(0,n.useState)([]),[Yt,Jt]=(0,n.useState)([]),[Zt,Xt]=(0,n.useState)(""),[Kt,ea]=(0,n.useState)(""),[ta,aa]=(0,n.useState)("last_30_days"),[sa,na]=(0,n.useState)(0),[ra,ia]=(0,n.useState)(null),[la,oa]=(0,n.useState)(!1),[ca,da]=(0,n.useState)([]),[ua,ma]=(0,n.useState)({});(0,n.useEffect)(()=>{pa(),ha();const{start:e,end:t}=xa("last_30_days");D(e),A(t),K(e),te(t),gt(e),bt(t),Xt(e),ea(t);const a=xa("last_90_days");je(a.start),_e(a.end)},[]);const pa=async()=>{try{var e,t;d(!0);const[a,s,n]=await Promise.all([yr(),br(),jn()]);p(null===(e=a.data)||void 0===e?void 0:e.data),x(null===(t=s.data)||void 0===t?void 0:t.data),b(n.data)}catch(a){console.error("Failed to load reports data:",a),Bt.error("Failed to load reports data")}finally{d(!1)}},ha=async()=>{try{const e=await En();k(e.data||[])}catch(e){console.error("Failed to load materials:",e),Bt.error("Failed to load materials")}},xa=e=>{const t=new Date;let a,s;switch(e){case"last_30_days":default:s=new Date,a=new Date,a.setDate(a.getDate()-30);break;case"last_90_days":s=new Date,a=new Date,a.setDate(a.getDate()-90);break;case"this_month":a=new Date(t.getFullYear(),t.getMonth(),1),s=new Date(t.getFullYear(),t.getMonth()+1,0);break;case"last_month":a=new Date(t.getFullYear(),t.getMonth()-1,1),s=new Date(t.getFullYear(),t.getMonth(),0);break;case"this_year":a=new Date(t.getFullYear(),0,1),s=new Date(t.getFullYear(),11,31);break;case"last_year":a=new Date(t.getFullYear()-1,0,1),s=new Date(t.getFullYear()-1,11,31);break;case"custom":a=new Date(R,O,1),s=new Date(I,B+1,0)}return{start:a.toISOString().split("T")[0],end:s.toISOString().split("T")[0]}},fa=async()=>{const e=Be.trim();if(e)try{var t,a,s;$e(!0);const i={};"customer"===Ue?i.customer=e:"invoice"===Ue?i.invoice_number=e:"product"===Ue&&(i.product=e);const l=await gr(i);var n,r;if(Ge((null===(t=l.data)||void 0===t?void 0:t.data)||[]),0===(null===(a=l.data)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.length))Bt.info("No job cards found for this search");else Bt.success("Found ".concat(null===(n=l.data)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.length," orders with job cards"))}catch(i){console.error("Failed to search job cards:",i),Bt.error("Failed to search job cards")}finally{$e(!1)}else Bt.error('Please enter a search term or click "Search All"')},ga=e=>{let{title:t,description:a,icon:s,onClick:n}=e;return(0,mi.jsx)("div",{className:"misty-card p-6 cursor-pointer hover:bg-gray-700/50 transition-all duration-200 hover:scale-105 hover:shadow-xl border-2 border-gray-700 hover:border-yellow-500",onDoubleClick:n,title:"Double-click to open",children:(0,mi.jsxs)("div",{className:"flex flex-col items-center text-center h-full justify-center",children:[(0,mi.jsx)(s,{className:"h-12 w-12 text-yellow-400 mb-4"}),(0,mi.jsx)("h3",{className:"text-lg font-semibold text-white mb-2",children:t}),(0,mi.jsx)("p",{className:"text-sm text-gray-400",children:a}),(0,mi.jsx)("p",{className:"text-xs text-gray-500 mt-3 italic",children:"Double-click to open"})]})})},ya=e=>{let{isOpen:t,onClose:a,title:s,children:n}=e;return t?(0,mi.jsx)("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",onClick:e=>{e.target===e.currentTarget&&a()},children:(0,mi.jsxs)("div",{className:"bg-gray-800 rounded-lg shadow-2xl max-w-6xl w-full max-h-[90vh] overflow-hidden border-2 border-gray-700",children:[(0,mi.jsxs)("div",{className:"bg-gray-900 px-6 py-4 border-b border-gray-700 flex justify-between items-center",children:[(0,mi.jsx)("h2",{className:"text-2xl font-bold text-white",children:s}),(0,mi.jsx)("button",{onClick:a,className:"text-gray-400 hover:text-white transition-colors text-2xl font-bold",children:"\xd7"})]}),(0,mi.jsx)("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-80px)]",children:n})]})}):null};return c?(0,mi.jsx)(hl,{children:(0,mi.jsx)("div",{className:"p-8",children:(0,mi.jsxs)("div",{className:"animate-pulse",children:[(0,mi.jsx)("div",{className:"h-8 bg-gray-700 rounded w-1/4 mb-8"}),(0,mi.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,mi.jsx)("div",{className:"h-64 bg-gray-700 rounded"}),(0,mi.jsx)("div",{className:"h-64 bg-gray-700 rounded"})]})]})})}):(0,mi.jsx)(hl,{children:(0,mi.jsxs)("div",{className:"p-6",children:[(0,mi.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,mi.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Reports Dashboard"}),(0,mi.jsx)("p",{className:"text-sm text-gray-400",children:"Double-click any report to open"})]}),(0,mi.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-6",children:[(0,mi.jsx)(ga,{title:"Material Usage Report",description:"Track raw material usage by width across selected time periods",icon:Bi,onClick:()=>st(!0)}),(0,mi.jsx)(ga,{title:"Consumable Usage Report",description:"Analyze consumable product usage excluding cores, with order breakdowns",icon:Bi,onClick:()=>rt(!0)}),(0,mi.jsx)(ga,{title:"Projected Order Analysis",description:"Forecast future orders for 3, 6, 9, and 12 months with material requirements",icon:Mi,onClick:()=>lt(!0)}),(0,mi.jsx)(ga,{title:"Outstanding Jobs",description:"View all active jobs currently in production",icon:ki,onClick:()=>ct(!0)}),(0,mi.jsx)(ga,{title:"Late Deliveries",description:"Track overdue orders and jobs that missed their delivery dates",icon:gl,onClick:()=>ut(!0)}),(0,mi.jsx)(ga,{title:"Customer Annual Report",description:"Comprehensive yearly analysis of customer orders and spending",icon:dl,onClick:()=>pt(!0)}),(0,mi.jsx)(ga,{title:"Job Card Performance",description:"Track time spent on each job and stock produced with averages",icon:ki,onClick:()=>xt(!0)}),(0,mi.jsx)(ga,{title:"Profitability Report",description:"Calculate Gross Profit and Net Profit for completed jobs",icon:wx,onClick:()=>{Ut(!0),(async()=>{try{const e=(await tr()).data.filter(e=>"completed"===e.status||"cleared"===e.current_stage);da(e)}catch(e){console.error("Failed to load completed orders:",e)}})(),(async()=>{try{const t=(await jn()).data;let a=[];for(const s of t)try{const e=await fetch("/api/clients/".concat(s.id,"/catalog"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(e.ok){const t=(await e.json()).map(e=>m(m({},e),{},{client_name:s.name||s.company_name}));a=[...a,...t]}}catch(e){console.error("Failed to load products for client ".concat(s.id,":"),e)}Jt(a),console.log("Loaded ".concat(a.length," products from ").concat(t.length," clients"))}catch(e){console.error("Failed to load client products:",e),Bt.error("Failed to load client products")}})()}})]}),(0,mi.jsx)(ya,{isOpen:at,onClose:()=>st(!1),title:"Material Usage Report by Width",children:(0,mi.jsxs)("div",{className:"space-y-4",children:[(0,mi.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,mi.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Material"}),(0,mi.jsxs)("select",{className:"misty-select",value:S,onChange:e=>C(e.target.value),"data-testid":"material-select",children:[(0,mi.jsx)("option",{value:"",children:"Select a material..."}),N.map(e=>(0,mi.jsxs)("option",{value:e.id,children:[e.material_description||e.supplier," (",e.product_code||"N/A",")"]},e.id))]})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Date Range"}),(0,mi.jsxs)("select",{className:"misty-select",value:T,onChange:e=>(e=>{if(L(e),"custom"!==e){const{start:t,end:a}=xa(e);D(t),A(a)}})(e.target.value),children:[(0,mi.jsx)("option",{value:"last_30_days",children:"Last 30 Days"}),(0,mi.jsx)("option",{value:"last_90_days",children:"Last 90 Days"}),(0,mi.jsx)("option",{value:"this_month",children:"This Month"}),(0,mi.jsx)("option",{value:"last_month",children:"Last Month"}),(0,mi.jsx)("option",{value:"this_year",children:"This Year"}),(0,mi.jsx)("option",{value:"last_year",children:"Last Year"}),(0,mi.jsx)("option",{value:"custom",children:"Custom Range"})]})]}),(0,mi.jsx)("div",{className:"flex items-end",children:(0,mi.jsx)("button",{onClick:async()=>{if(!S)return void Bt.error("Please select a material");let e=E,t=P;if("custom"===T){const{start:a,end:s}=xa("custom");e=a,t=s,D(a),A(s)}if(e&&t)try{var a;$(!0);const s=await jr(S,e+"T00:00:00Z",t+"T23:59:59Z",U);G(null===(a=s.data)||void 0===a?void 0:a.data),Bt.success("Material usage report generated successfully")}catch(s){console.error("Failed to load material usage report:",s),Bt.error("Failed to load material usage report")}finally{$(!1)}else Bt.error("Please select date range")},disabled:V,className:"misty-button misty-button-primary w-full","data-testid":"generate-material-report",children:V?"Loading...":"Generate Report"})})]}),"custom"===T&&(0,mi.jsxs)("div",{className:"bg-gray-700/30 rounded-lg p-4",children:[(0,mi.jsx)("h4",{className:"text-sm font-medium text-white mb-3",children:"Custom Date Range"}),(0,mi.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-xs text-gray-400 mb-1",children:"Start Year"}),(0,mi.jsx)("select",{className:"misty-select text-sm",value:R,onChange:e=>F(parseInt(e.target.value)),children:Array.from({length:10},(e,t)=>(new Date).getFullYear()-t).map(e=>(0,mi.jsx)("option",{value:e,children:e},e))})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-xs text-gray-400 mb-1",children:"Start Month"}),(0,mi.jsx)("select",{className:"misty-select text-sm",value:O,onChange:e=>M(parseInt(e.target.value)),children:["January","February","March","April","May","June","July","August","September","October","November","December"].map((e,t)=>(0,mi.jsx)("option",{value:t,children:e},t))})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-xs text-gray-400 mb-1",children:"End Year"}),(0,mi.jsx)("select",{className:"misty-select text-sm",value:I,onChange:e=>q(parseInt(e.target.value)),children:Array.from({length:10},(e,t)=>(new Date).getFullYear()-t).map(e=>(0,mi.jsx)("option",{value:e,children:e},e))})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-xs text-gray-400 mb-1",children:"End Month"}),(0,mi.jsx)("select",{className:"misty-select text-sm",value:B,onChange:e=>z(parseInt(e.target.value)),children:["January","February","March","April","May","June","July","August","September","October","November","December"].map((e,t)=>(0,mi.jsx)("option",{value:t,children:e},t))})]})]}),(0,mi.jsxs)("p",{className:"text-xs text-gray-400 mt-2",children:["Selected range: ",new Date(R,O,1).toLocaleDateString()," - ",new Date(I,B+1,0).toLocaleDateString()]})]}),"custom"!==T&&E&&P&&(0,mi.jsxs)("div",{className:"text-sm text-gray-400",children:["Period: ",new Date(E).toLocaleDateString()," - ",new Date(P).toLocaleDateString()]}),(0,mi.jsx)("div",{className:"flex items-center gap-2",children:(0,mi.jsxs)("button",{onClick:()=>W(!U),className:"flex items-center gap-2 px-4 py-2 rounded transition-colors ".concat(U?"bg-yellow-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"),children:[(0,mi.jsx)("div",{className:"w-5 h-5 border-2 rounded flex items-center justify-center ".concat(U?"border-white":"border-gray-400"),children:U&&(0,mi.jsx)(ql,{className:"h-4 w-4"})}),(0,mi.jsx)("span",{children:"Show breakdown by order"})]})})]}),H&&(0,mi.jsx)("div",{className:"mt-6 space-y-6",children:(0,mi.jsxs)("div",{className:"border-t border-gray-700 pt-4",children:[(0,mi.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("h4",{className:"font-medium text-white text-lg mb-1",children:H.material_name}),(0,mi.jsxs)("p",{className:"text-sm text-gray-400",children:["Code: ",H.material_code," | Period: ",new Date(H.report_period.start_date).toLocaleDateString()," - ",new Date(H.report_period.end_date).toLocaleDateString()]})]}),(0,mi.jsxs)("button",{onClick:()=>{const e=window.open("","_blank"),t=H;if(!t)return;const a="\n      <!DOCTYPE html>\n      <html>\n      <head>\n        <title>Material Usage Report - ".concat(t.material_name,'</title>\n        <style>\n          @page {\n            margin: 1cm;\n            size: A4;\n          }\n          \n          body {\n            font-family: Arial, sans-serif;\n            color: #000;\n            background: #fff;\n            padding: 20px;\n          }\n          \n          .header {\n            text-align: center;\n            border-bottom: 3px solid #000;\n            padding-bottom: 20px;\n            margin-bottom: 30px;\n          }\n          \n          .header h1 {\n            font-size: 24px;\n            margin: 0 0 10px 0;\n            color: #000;\n          }\n          \n          .header h2 {\n            font-size: 18px;\n            margin: 0 0 5px 0;\n            color: #333;\n          }\n          \n          .header p {\n            font-size: 12px;\n            color: #666;\n            margin: 5px 0;\n          }\n          \n          .summary-stats {\n            display: flex;\n            justify-content: space-around;\n            margin: 30px 0;\n            padding: 20px;\n            background: #f5f5f5;\n            border-radius: 8px;\n          }\n          \n          .stat-box {\n            text-align: center;\n          }\n          \n          .stat-value {\n            font-size: 28px;\n            font-weight: bold;\n            color: #000;\n          }\n          \n          .stat-label {\n            font-size: 12px;\n            color: #666;\n            margin-top: 5px;\n          }\n          \n          table {\n            width: 100%;\n            border-collapse: collapse;\n            margin-top: 20px;\n          }\n          \n          th {\n            background: #333;\n            color: white;\n            padding: 12px;\n            text-align: left;\n            font-weight: bold;\n          }\n          \n          th.right {\n            text-align: right;\n          }\n          \n          th.center {\n            text-align: center;\n          }\n          \n          td {\n            padding: 10px 12px;\n            border-bottom: 1px solid #ddd;\n          }\n          \n          td.right {\n            text-align: right;\n          }\n          \n          td.center {\n            text-align: center;\n          }\n          \n          tbody tr:nth-child(even) {\n            background: #f9f9f9;\n          }\n          \n          .order-breakdown {\n            background: #f0f0f0;\n            padding: 10px;\n            margin: 5px 0;\n            font-size: 11px;\n          }\n          \n          .order-breakdown-item {\n            display: flex;\n            justify-content: space-between;\n            padding: 3px 0;\n            margin-left: 30px;\n          }\n          \n          .total-row {\n            background: #333 !important;\n            color: white !important;\n            font-weight: bold;\n            font-size: 14px;\n          }\n          \n          .total-row td {\n            padding: 15px 12px;\n          }\n          \n          .highlight {\n            color: #d97706;\n            font-weight: bold;\n          }\n          \n          .footer {\n            margin-top: 40px;\n            text-align: center;\n            font-size: 10px;\n            color: #999;\n            border-top: 1px solid #ddd;\n            padding-top: 10px;\n          }\n          \n          @media print {\n            body {\n              padding: 0;\n            }\n            \n            .no-print {\n              display: none;\n            }\n          }\n        </style>\n      </head>\n      <body>\n        <div class="header">\n          <h1>Misty Manufacturing</h1>\n          <h2>Material Usage Report by Width</h2>\n          <p><strong>').concat(t.material_name,"</strong></p>\n          <p>Material Code: ").concat(t.material_code,"</p>\n          <p>Period: ").concat(new Date(t.report_period.start_date).toLocaleDateString()," - ").concat(new Date(t.report_period.end_date).toLocaleDateString(),'</p>\n        </div>\n        \n        <div class="summary-stats">\n          <div class="stat-box">\n            <div class="stat-value highlight">').concat(t.grand_total_m2.toLocaleString(),' m\xb2</div>\n            <div class="stat-label">Total Area Used</div>\n          </div>\n          <div class="stat-box">\n            <div class="stat-value">').concat(t.grand_total_length_m.toLocaleString(),' m</div>\n            <div class="stat-label">Total Length</div>\n          </div>\n          <div class="stat-box">\n            <div class="stat-value">').concat(t.total_widths_used,'</div>\n            <div class="stat-label">Different Widths Used</div>\n          </div>\n        </div>\n        \n        <table>\n          <thead>\n            <tr>\n              <th>Width (mm)</th>\n              <th class="right">Total Length (m)</th>\n              <th class="right">Area (m\xb2)</th>\n              ').concat(U?'<th class="center">Orders</th>':"","\n            </tr>\n          </thead>\n          <tbody>\n            ").concat(t.usage_by_width.map(e=>"\n              <tr>\n                <td><strong>".concat(e.width_mm,' mm</strong></td>\n                <td class="right">').concat(e.total_length_m.toLocaleString(),' m</td>\n                <td class="right highlight">').concat(e.m2.toLocaleString()," m\xb2</td>\n                ").concat(U?'<td class="center">'.concat(e.order_count||0,"</td>"):"","\n              </tr>\n              ").concat(U&&e.orders&&e.orders.length>0?'\n                <tr>\n                  <td colspan="'.concat(U?4:3,'" style="padding: 0;">\n                    <div class="order-breakdown">\n                      <strong>Order Breakdown:</strong>\n                      ').concat(e.orders.map(e=>'\n                        <div class="order-breakdown-item">\n                          <span>'.concat(e.order_number," - ").concat(e.client_name,"</span>\n                          <span>").concat(e.length_m," m</span>\n                        </div>\n                      ")).join(""),"\n                    </div>\n                  </td>\n                </tr>\n              "):"","\n            ")).join(""),'\n            <tr class="total-row">\n              <td>GRAND TOTAL</td>\n              <td class="right">').concat(t.grand_total_length_m.toLocaleString(),' m</td>\n              <td class="right">').concat(t.grand_total_m2.toLocaleString()," m\xb2</td>\n              ").concat(U?"<td></td>":"",'\n            </tr>\n          </tbody>\n        </table>\n        \n        <div class="footer">\n          <p>Generated: ').concat((new Date).toLocaleString(),"</p>\n          <p>Misty Manufacturing - Material Usage Report</p>\n        </div>\n      </body>\n      </html>\n    ");e.document.write(a),e.document.close(),e.onload=function(){e.focus(),e.print()}},className:"flex items-center gap-2 px-4 py-2 bg-yellow-600 hover:bg-yellow-700 text-white rounded transition-colors",title:"Print Report as PDF",children:[(0,mi.jsx)(Gl,{className:"h-5 w-5"}),(0,mi.jsx)("span",{children:"Print Report"})]})]}),(0,mi.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[(0,mi.jsxs)("div",{className:"bg-gray-700/50 rounded-lg p-4 text-center",children:[(0,mi.jsxs)("p",{className:"text-2xl font-bold text-yellow-400",children:[H.grand_total_m2," m\xb2"]}),(0,mi.jsx)("p",{className:"text-sm text-gray-400",children:"Total Area"})]}),(0,mi.jsxs)("div",{className:"bg-gray-700/50 rounded-lg p-4 text-center",children:[(0,mi.jsxs)("p",{className:"text-2xl font-bold text-green-400",children:[H.grand_total_length_m," m"]}),(0,mi.jsx)("p",{className:"text-sm text-gray-400",children:"Total Length"})]}),(0,mi.jsxs)("div",{className:"bg-gray-700/50 rounded-lg p-4 text-center",children:[(0,mi.jsx)("p",{className:"text-2xl font-bold text-blue-400",children:H.total_widths_used}),(0,mi.jsx)("p",{className:"text-sm text-gray-400",children:"Different Widths Used"})]}),(0,mi.jsxs)("div",{className:"bg-gray-700/50 rounded-lg p-4 text-center",children:[(0,mi.jsxs)("p",{className:"text-2xl font-bold text-green-400",children:["$",(null===(e=H.grand_total_cost_aud)||void 0===e?void 0:e.toLocaleString())||"0.00"]}),(0,mi.jsx)("p",{className:"text-sm text-gray-400",children:"Total Cost (AUD)"})]})]}),(0,mi.jsxs)("div",{className:"bg-blue-900/20 border border-blue-500/30 rounded-lg p-4 mb-6",children:[(0,mi.jsx)("h4",{className:"text-blue-300 font-medium mb-2",children:"Material Pricing Information"}),(0,mi.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("span",{className:"text-gray-400",children:"GSM:"}),(0,mi.jsx)("span",{className:"text-white ml-2",children:H.material_gsm})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("span",{className:"text-gray-400",children:"Price per Tonne:"}),(0,mi.jsxs)("span",{className:"text-white ml-2",children:["$",null===(t=H.material_price_per_tonne)||void 0===t?void 0:t.toLocaleString()]})]})]})]}),(0,mi.jsx)("div",{className:"overflow-x-auto",children:(0,mi.jsxs)("table",{className:"min-w-full",children:[(0,mi.jsx)("thead",{children:(0,mi.jsxs)("tr",{className:"border-b border-gray-700",children:[(0,mi.jsx)("th",{className:"text-left py-3 px-4 text-gray-300 font-medium",children:"Width (mm)"}),(0,mi.jsx)("th",{className:"text-right py-3 px-4 text-gray-300 font-medium",children:"Total Length (m)"}),(0,mi.jsx)("th",{className:"text-right py-3 px-4 text-gray-300 font-medium",children:"Area (m\xb2)"}),(0,mi.jsx)("th",{className:"text-right py-3 px-4 text-gray-300 font-medium",children:"Cost/Linear m"}),(0,mi.jsx)("th",{className:"text-right py-3 px-4 text-gray-300 font-medium",children:"Total Cost (AUD)"}),U&&(0,mi.jsx)("th",{className:"text-center py-3 px-4 text-gray-300 font-medium",children:"Orders"})]})}),(0,mi.jsxs)("tbody",{children:[H.usage_by_width.map((e,t)=>{var a,s;return(0,mi.jsxs)(n.Fragment,{children:[(0,mi.jsxs)("tr",{className:"border-b border-gray-700/50 hover:bg-gray-700/30",children:[(0,mi.jsxs)("td",{className:"py-3 px-4 text-white font-medium",children:[e.width_mm," mm"]}),(0,mi.jsxs)("td",{className:"py-3 px-4 text-right text-gray-300",children:[e.total_length_m.toLocaleString()," m"]}),(0,mi.jsxs)("td",{className:"py-3 px-4 text-right text-yellow-400 font-medium",children:[e.m2.toLocaleString()," m\xb2"]}),(0,mi.jsxs)("td",{className:"py-3 px-4 text-right text-blue-400",children:["$",(null===(a=e.cost_per_linear_meter_aud)||void 0===a?void 0:a.toFixed(4))||"0.0000"]}),(0,mi.jsxs)("td",{className:"py-3 px-4 text-right text-green-400 font-medium",children:["$",(null===(s=e.total_cost_aud)||void 0===s?void 0:s.toLocaleString())||"0.00"]}),U&&(0,mi.jsx)("td",{className:"py-3 px-4 text-center text-gray-300",children:e.order_count||0})]}),U&&e.orders&&e.orders.length>0&&(0,mi.jsx)("tr",{children:(0,mi.jsx)("td",{colSpan:U?6:5,className:"py-2 px-4 bg-gray-700/20",children:(0,mi.jsxs)("div",{className:"pl-8 space-y-1",children:[(0,mi.jsx)("p",{className:"text-sm font-medium text-gray-400 mb-2",children:"Order Breakdown:"}),e.orders.map((e,t)=>(0,mi.jsxs)("div",{className:"flex justify-between text-sm py-1",children:[(0,mi.jsxs)("span",{className:"text-gray-300",children:[e.order_number," - ",e.client_name]}),(0,mi.jsxs)("span",{className:"text-gray-400",children:[e.length_m," m"]})]},t))]})})})]},t)}),(0,mi.jsxs)("tr",{className:"bg-gray-700/50 font-bold",children:[(0,mi.jsx)("td",{className:"py-4 px-4 text-white",children:"GRAND TOTAL"}),(0,mi.jsxs)("td",{className:"py-4 px-4 text-right text-white",children:[H.grand_total_length_m.toLocaleString()," m"]}),(0,mi.jsxs)("td",{className:"py-4 px-4 text-right text-yellow-400 text-lg",children:[H.grand_total_m2.toLocaleString()," m\xb2"]}),(0,mi.jsx)("td",{className:"py-4 px-4 text-right text-gray-400",children:"-"}),(0,mi.jsxs)("td",{className:"py-4 px-4 text-right text-green-400 text-lg",children:["$",(null===(a=H.grand_total_cost_aud)||void 0===a?void 0:a.toLocaleString())||"0.00"]}),U&&(0,mi.jsx)("td",{})]})]})]})})]})})]})}),(0,mi.jsx)(ya,{isOpen:nt,onClose:()=>rt(!1),title:"Consumable Usage Report by Date",children:(0,mi.jsxs)("div",{className:"space-y-4",children:[(0,mi.jsx)("p",{className:"text-sm text-gray-400 mb-2",children:"Tracks usage of all consumables from Products & Specifications, excluding Spiral Paper Cores and Composite Cores"}),(0,mi.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,mi.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Client (Optional)"}),(0,mi.jsxs)("select",{className:"misty-select",value:Q,onChange:e=>Y(e.target.value),children:[(0,mi.jsx)("option",{value:"",children:"All Clients"}),y.map(e=>(0,mi.jsx)("option",{value:e.id,children:e.company_name},e.id))]})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Date Range"}),(0,mi.jsxs)("select",{className:"misty-select",value:J,onChange:e=>(e=>{if(Z(e),"custom"!==e){const{start:t,end:a}=xa(e);K(t),te(a)}})(e.target.value),children:[(0,mi.jsx)("option",{value:"last_30_days",children:"Last 30 Days"}),(0,mi.jsx)("option",{value:"last_90_days",children:"Last 90 Days"}),(0,mi.jsx)("option",{value:"this_month",children:"This Month"}),(0,mi.jsx)("option",{value:"last_month",children:"Last Month"}),(0,mi.jsx)("option",{value:"this_year",children:"This Year"}),(0,mi.jsx)("option",{value:"last_year",children:"Last Year"}),(0,mi.jsx)("option",{value:"custom",children:"Custom Range"})]})]}),(0,mi.jsx)("div",{className:"flex items-end",children:(0,mi.jsx)("button",{onClick:async()=>{let e=X,t=ee;if("custom"===J){const a=new Date(ae,ne,1),s=new Date(ie,oe+1,0);e=a.toISOString().split("T")[0],t=s.toISOString().split("T")[0],K(e),te(t)}if(e&&t)try{var a;xe(!0);const s=await wr(Q||null,e+"T00:00:00Z",t+"T23:59:59Z",de);pe(null===(a=s.data)||void 0===a?void 0:a.data),Bt.success("Consumable usage report generated successfully")}catch(s){console.error("Failed to load consumable usage report:",s),Bt.error("Failed to load consumable usage report")}finally{xe(!1)}else Bt.error("Please select date range")},disabled:he,className:"misty-button misty-button-primary w-full",children:he?"Loading...":"Generate Report"})})]}),"custom"===J&&(0,mi.jsxs)("div",{className:"bg-gray-700/30 rounded-lg p-4",children:[(0,mi.jsx)("h4",{className:"text-sm font-medium text-white mb-3",children:"Custom Date Range"}),(0,mi.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-xs text-gray-400 mb-1",children:"Start Year"}),(0,mi.jsx)("select",{className:"misty-select text-sm",value:ae,onChange:e=>se(parseInt(e.target.value)),children:Array.from({length:10},(e,t)=>(new Date).getFullYear()-t).map(e=>(0,mi.jsx)("option",{value:e,children:e},e))})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-xs text-gray-400 mb-1",children:"Start Month"}),(0,mi.jsx)("select",{className:"misty-select text-sm",value:ne,onChange:e=>re(parseInt(e.target.value)),children:["January","February","March","April","May","June","July","August","September","October","November","December"].map((e,t)=>(0,mi.jsx)("option",{value:t,children:e},t))})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-xs text-gray-400 mb-1",children:"End Year"}),(0,mi.jsx)("select",{className:"misty-select text-sm",value:ie,onChange:e=>le(parseInt(e.target.value)),children:Array.from({length:10},(e,t)=>(new Date).getFullYear()-t).map(e=>(0,mi.jsx)("option",{value:e,children:e},e))})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-xs text-gray-400 mb-1",children:"End Month"}),(0,mi.jsx)("select",{className:"misty-select text-sm",value:oe,onChange:e=>ce(parseInt(e.target.value)),children:["January","February","March","April","May","June","July","August","September","October","November","December"].map((e,t)=>(0,mi.jsx)("option",{value:t,children:e},t))})]})]}),(0,mi.jsxs)("p",{className:"text-xs text-gray-400 mt-2",children:["Selected range: ",new Date(ae,ne,1).toLocaleDateString()," - ",new Date(ie,oe+1,0).toLocaleDateString()]})]}),"custom"!==J&&X&&ee&&(0,mi.jsxs)("div",{className:"text-sm text-gray-400",children:["Period: ",new Date(X).toLocaleDateString()," - ",new Date(ee).toLocaleDateString()]}),(0,mi.jsx)("div",{className:"flex items-center gap-2",children:(0,mi.jsxs)("button",{onClick:()=>ue(!de),className:"flex items-center gap-2 px-4 py-2 rounded transition-colors ".concat(de?"bg-yellow-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"),children:[(0,mi.jsx)("div",{className:"w-5 h-5 border-2 rounded flex items-center justify-center ".concat(de?"border-white":"border-gray-400"),children:de&&(0,mi.jsx)(ql,{className:"h-4 w-4"})}),(0,mi.jsx)("span",{children:"Show breakdown by order"})]})})]}),me&&(0,mi.jsx)("div",{className:"mt-6 space-y-6",children:(0,mi.jsxs)("div",{className:"border-t border-gray-700 pt-4",children:[(0,mi.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("h4",{className:"font-medium text-white text-lg mb-1",children:"Consumable Usage Report"}),(0,mi.jsxs)("p",{className:"text-sm text-gray-400",children:["Period: ",new Date(me.report_period.start_date).toLocaleDateString()," - ",new Date(me.report_period.end_date).toLocaleDateString()]}),(0,mi.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Excludes: ",me.excluded_types.join(", ")]})]}),(0,mi.jsxs)("button",{onClick:()=>{const e=me;if(!e)return;const t=window.open("","_blank");let a="";e.products.forEach(e=>{a+='\n        <div class="product-section">\n          <h3>'.concat(e.product_info.product_description,'</h3>\n          <p class="product-meta">Code: ').concat(e.product_info.product_code," | Client: ").concat(e.product_info.client_name,'</p>\n          \n          <table class="product-table">\n            <thead>\n              <tr>\n                <th>Width (mm)</th>\n                <th class="right">Total Length (m)</th>\n                <th class="right">Area (m\xb2)</th>\n                ').concat(de?'<th class="center">Orders</th>':"","\n              </tr>\n            </thead>\n            <tbody>\n              ").concat(e.usage_by_width.map(e=>"\n                <tr>\n                  <td><strong>".concat(e.width_mm,' mm</strong></td>\n                  <td class="right">').concat(e.total_length_m.toLocaleString(),' m</td>\n                  <td class="right highlight">').concat(e.m2.toLocaleString()," m\xb2</td>\n                  ").concat(de?'<td class="center">'.concat(e.order_count||0,"</td>"):"","\n                </tr>\n                ").concat(de&&e.orders&&e.orders.length>0?'\n                  <tr>\n                    <td colspan="'.concat(de?4:3,'" style="padding: 0;">\n                      <div class="order-breakdown">\n                        <strong>Order Breakdown:</strong>\n                        ').concat(e.orders.map(e=>'\n                          <div class="order-breakdown-item">\n                            <span>'.concat(e.order_number," - ").concat(e.client_name,"</span>\n                            <span>").concat(e.total_length_m," m (").concat(e.quantity," \xd7 ").concat(e.length_per_unit,"m)</span>\n                          </div>\n                        ")).join(""),"\n                      </div>\n                    </td>\n                  </tr>\n                "):"","\n              ")).join(""),'\n              <tr class="subtotal-row">\n                <td>Product Total</td>\n                <td class="right">').concat(e.product_total_length_m.toLocaleString(),' m</td>\n                <td class="right highlight">').concat(e.product_total_m2.toLocaleString()," m\xb2</td>\n                ").concat(de?"<td></td>":"","\n              </tr>\n            </tbody>\n          </table>\n        </div>\n      ")});const s='\n      <!DOCTYPE html>\n      <html>\n      <head>\n        <title>Consumable Usage Report by Date</title>\n        <style>\n          @page { margin: 1cm; size: A4; }\n          body { font-family: Arial, sans-serif; color: #000; background: #fff; padding: 20px; }\n          .header { text-align: center; border-bottom: 3px solid #000; padding-bottom: 20px; margin-bottom: 30px; }\n          .header h1 { font-size: 24px; margin: 0 0 10px 0; }\n          .header h2 { font-size: 18px; margin: 0 0 5px 0; color: #333; }\n          .header p { font-size: 12px; color: #666; margin: 5px 0; }\n          .summary-stats { display: flex; justify-content: space-around; margin: 30px 0; padding: 20px; background: #f5f5f5; border-radius: 8px; }\n          .stat-box { text-align: center; }\n          .stat-value { font-size: 28px; font-weight: bold; color: #000; }\n          .stat-label { font-size: 12px; color: #666; margin-top: 5px; }\n          .product-section { margin: 30px 0; page-break-inside: avoid; }\n          .product-section h3 { margin: 15px 0 5px 0; color: #000; border-bottom: 2px solid #333; padding-bottom: 5px; }\n          .product-meta { font-size: 11px; color: #666; margin-bottom: 10px; }\n          table.product-table { width: 100%; border-collapse: collapse; margin: 10px 0; }\n          th { background: #555; color: white; padding: 10px; text-align: left; font-weight: bold; font-size: 11px; }\n          th.right, td.right { text-align: right; }\n          th.center, td.center { text-align: center; }\n          td { padding: 8px 10px; border-bottom: 1px solid #ddd; font-size: 11px; }\n          tbody tr:nth-child(even) { background: #f9f9f9; }\n          .order-breakdown { background: #f0f0f0; padding: 8px; margin: 3px 0; font-size: 10px; }\n          .order-breakdown-item { display: flex; justify-content: space-between; padding: 2px 0; margin-left: 20px; }\n          .subtotal-row { background: #e0e0e0 !important; font-weight: bold; }\n          .total-row { background: #333 !important; color: white !important; font-weight: bold; font-size: 13px; }\n          .total-row td { padding: 12px 10px; }\n          .highlight { color: #d97706; font-weight: bold; }\n          .footer { margin-top: 40px; text-align: center; font-size: 10px; color: #999; border-top: 1px solid #ddd; padding-top: 10px; }\n          @media print { body { padding: 0; } .no-print { display: none; } }\n        </style>\n      </head>\n      <body>\n        <div class="header">\n          <h1>Misty Manufacturing</h1>\n          <h2>Consumable Usage Report by Date</h2>\n          <p>Period: '.concat(new Date(e.report_period.start_date).toLocaleDateString()," - ").concat(new Date(e.report_period.end_date).toLocaleDateString(),'</p>\n          <p style="color: #999; font-size: 10px;">Excludes: ').concat(e.excluded_types.join(", "),'</p>\n        </div>\n        \n        <div class="summary-stats">\n          <div class="stat-box">\n            <div class="stat-value highlight">').concat(e.grand_total_m2.toLocaleString(),' m\xb2</div>\n            <div class="stat-label">Total Area Used</div>\n          </div>\n          <div class="stat-box">\n            <div class="stat-value">').concat(e.grand_total_length_m.toLocaleString(),' m</div>\n            <div class="stat-label">Total Length</div>\n          </div>\n          <div class="stat-box">\n            <div class="stat-value">').concat(e.total_products,'</div>\n            <div class="stat-label">Consumables Used</div>\n          </div>\n        </div>\n        \n        ').concat(a,'\n        \n        <table class="product-table">\n          <tbody>\n            <tr class="total-row">\n              <td>GRAND TOTAL (All Consumables)</td>\n              <td class="right">').concat(e.grand_total_length_m.toLocaleString(),' m</td>\n              <td class="right">').concat(e.grand_total_m2.toLocaleString()," m\xb2</td>\n              ").concat(de?"<td></td>":"",'\n            </tr>\n          </tbody>\n        </table>\n        \n        <div class="footer">\n          <p>Generated: ').concat((new Date).toLocaleString(),"</p>\n          <p>Misty Manufacturing - Consumable Usage Report</p>\n        </div>\n      </body>\n      </html>\n    ");t.document.write(s),t.document.close(),t.onload=function(){t.focus(),t.print()}},className:"flex items-center gap-2 px-4 py-2 bg-yellow-600 hover:bg-yellow-700 text-white rounded transition-colors",title:"Print Report as PDF",children:[(0,mi.jsx)(Gl,{className:"h-5 w-5"}),(0,mi.jsx)("span",{children:"Print Report"})]})]}),(0,mi.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,mi.jsxs)("div",{className:"bg-gray-700/50 rounded-lg p-4 text-center",children:[(0,mi.jsxs)("p",{className:"text-2xl font-bold text-yellow-400",children:[me.grand_total_m2," m\xb2"]}),(0,mi.jsx)("p",{className:"text-sm text-gray-400",children:"Total Area Used"})]}),(0,mi.jsxs)("div",{className:"bg-gray-700/50 rounded-lg p-4 text-center",children:[(0,mi.jsxs)("p",{className:"text-2xl font-bold text-green-400",children:[me.grand_total_length_m," m"]}),(0,mi.jsx)("p",{className:"text-sm text-gray-400",children:"Total Length"})]}),(0,mi.jsxs)("div",{className:"bg-gray-700/50 rounded-lg p-4 text-center",children:[(0,mi.jsx)("p",{className:"text-2xl font-bold text-blue-400",children:me.total_products}),(0,mi.jsx)("p",{className:"text-sm text-gray-400",children:"Consumables Used"})]})]}),me.products.map((e,t)=>(0,mi.jsxs)("div",{className:"mb-6 border border-gray-700 rounded-lg p-4",children:[(0,mi.jsxs)("div",{className:"mb-3",children:[(0,mi.jsx)("h5",{className:"font-medium text-white",children:e.product_info.product_description}),(0,mi.jsxs)("p",{className:"text-xs text-gray-400",children:["Code: ",e.product_info.product_code," | Client: ",e.product_info.client_name]})]}),(0,mi.jsx)("div",{className:"overflow-x-auto",children:(0,mi.jsxs)("table",{className:"min-w-full",children:[(0,mi.jsx)("thead",{children:(0,mi.jsxs)("tr",{className:"border-b border-gray-700",children:[(0,mi.jsx)("th",{className:"text-left py-2 px-3 text-gray-300 font-medium text-sm",children:"Width (mm)"}),(0,mi.jsx)("th",{className:"text-right py-2 px-3 text-gray-300 font-medium text-sm",children:"Length (m)"}),(0,mi.jsx)("th",{className:"text-right py-2 px-3 text-gray-300 font-medium text-sm",children:"Area (m\xb2)"}),de&&(0,mi.jsx)("th",{className:"text-center py-2 px-3 text-gray-300 font-medium text-sm",children:"Orders"})]})}),(0,mi.jsxs)("tbody",{children:[e.usage_by_width.map((e,t)=>(0,mi.jsxs)(n.Fragment,{children:[(0,mi.jsxs)("tr",{className:"border-b border-gray-700/30 hover:bg-gray-700/20",children:[(0,mi.jsxs)("td",{className:"py-2 px-3 text-white text-sm",children:[e.width_mm," mm"]}),(0,mi.jsxs)("td",{className:"py-2 px-3 text-right text-gray-300 text-sm",children:[e.total_length_m.toLocaleString()," m"]}),(0,mi.jsxs)("td",{className:"py-2 px-3 text-right text-yellow-400 font-medium text-sm",children:[e.m2.toLocaleString()," m\xb2"]}),de&&(0,mi.jsx)("td",{className:"py-2 px-3 text-center text-gray-300 text-sm",children:e.order_count||0})]}),de&&e.orders&&e.orders.length>0&&(0,mi.jsx)("tr",{children:(0,mi.jsx)("td",{colSpan:de?4:3,className:"py-2 px-3 bg-gray-700/20",children:(0,mi.jsxs)("div",{className:"pl-8 space-y-1",children:[(0,mi.jsx)("p",{className:"text-sm font-medium text-gray-400 mb-2",children:"Order Breakdown:"}),e.orders.map((e,t)=>(0,mi.jsxs)("div",{className:"flex justify-between text-sm py-1",children:[(0,mi.jsxs)("span",{className:"text-gray-300",children:[e.order_number," - ",e.client_name]}),(0,mi.jsxs)("span",{className:"text-gray-400",children:[e.total_length_m," m (",e.quantity," \xd7 ",e.length_per_unit,"m)"]})]},t))]})})})]},t)),(0,mi.jsxs)("tr",{className:"bg-gray-700/30 font-bold",children:[(0,mi.jsx)("td",{className:"py-3 px-3 text-white",children:"Product Total"}),(0,mi.jsxs)("td",{className:"py-3 px-3 text-right text-white",children:[e.product_total_length_m.toLocaleString()," m"]}),(0,mi.jsxs)("td",{className:"py-3 px-3 text-right text-yellow-400",children:[e.product_total_m2.toLocaleString()," m\xb2"]}),de&&(0,mi.jsx)("td",{})]})]})]})})]},t)),(0,mi.jsx)("div",{className:"border-t-2 border-gray-600 pt-4",children:(0,mi.jsx)("div",{className:"bg-gray-700/50 rounded-lg p-4",children:(0,mi.jsxs)("div",{className:"flex justify-between items-center",children:[(0,mi.jsx)("span",{className:"text-lg font-bold text-white",children:"GRAND TOTAL (All Consumables)"}),(0,mi.jsxs)("div",{className:"text-right",children:[(0,mi.jsxs)("div",{className:"text-lg font-bold text-yellow-400",children:[me.grand_total_m2," m\xb2"]}),(0,mi.jsxs)("div",{className:"text-sm text-gray-400",children:[me.grand_total_length_m," m"]})]})]})})})]})})]})}),(0,mi.jsx)(ya,{isOpen:it,onClose:()=>lt(!1),title:"Projected Order Analysis",children:(0,mi.jsxs)("div",{className:"space-y-4",children:[(0,mi.jsx)("p",{className:"text-sm text-gray-400 mb-2",children:"Analyze all orders (including orders on hand) and project future requirements for 3, 6, 9, and 12 months with material breakdown"}),(0,mi.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,mi.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Client (Optional)"}),(0,mi.jsxs)("select",{className:"misty-select",value:fe,onChange:e=>ge(e.target.value),children:[(0,mi.jsx)("option",{value:"",children:"All Clients"}),y.map(e=>(0,mi.jsx)("option",{value:e.id,children:e.company_name},e.id))]})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Historical Period"}),(0,mi.jsxs)("select",{className:"misty-select",value:ye,onChange:e=>(e=>{if(be(e),"custom"!==e){const{start:t,end:a}=xa(e);je(t),_e(a)}})(e.target.value),children:[(0,mi.jsx)("option",{value:"last_30_days",children:"Last 30 Days"}),(0,mi.jsx)("option",{value:"last_90_days",children:"Last 90 Days"}),(0,mi.jsx)("option",{value:"this_month",children:"This Month"}),(0,mi.jsx)("option",{value:"last_month",children:"Last Month"}),(0,mi.jsx)("option",{value:"this_year",children:"This Year"}),(0,mi.jsx)("option",{value:"last_year",children:"Last Year"}),(0,mi.jsx)("option",{value:"custom",children:"Custom Range"})]})]}),(0,mi.jsx)("div",{className:"flex items-end",children:(0,mi.jsx)("button",{onClick:async()=>{let e=ve,t=we;if("custom"===ye){const a=new Date(Ne,Se,1),s=new Date(Ee,Pe+1,0);e=a.toISOString().split("T")[0],t=s.toISOString().split("T")[0],je(e),_e(t)}if(e&&t)try{var a;Fe(!0);const s=await _r(fe||null,e+"T00:00:00Z",t+"T23:59:59Z");Le(null===(a=s.data)||void 0===a?void 0:a.data),Bt.success("Projected order analysis generated successfully")}catch(s){console.error("Failed to load projection report:",s),Bt.error("Failed to load projection report")}finally{Fe(!1)}else Bt.error("Please select date range")},disabled:Re,className:"misty-button misty-button-primary w-full",children:Re?"Loading...":"Generate Analysis"})})]}),"custom"===ye&&(0,mi.jsxs)("div",{className:"bg-gray-700/30 rounded-lg p-4",children:[(0,mi.jsx)("h4",{className:"text-sm font-medium text-white mb-3",children:"Custom Historical Period"}),(0,mi.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-xs text-gray-400 mb-1",children:"Start Year"}),(0,mi.jsx)("select",{className:"misty-select text-sm",value:Ne,onChange:e=>ke(parseInt(e.target.value)),children:Array.from({length:10},(e,t)=>(new Date).getFullYear()-t).map(e=>(0,mi.jsx)("option",{value:e,children:e},e))})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-xs text-gray-400 mb-1",children:"Start Month"}),(0,mi.jsx)("select",{className:"misty-select text-sm",value:Se,onChange:e=>Ce(parseInt(e.target.value)),children:["January","February","March","April","May","June","July","August","September","October","November","December"].map((e,t)=>(0,mi.jsx)("option",{value:t,children:e},t))})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-xs text-gray-400 mb-1",children:"End Year"}),(0,mi.jsx)("select",{className:"misty-select text-sm",value:Ee,onChange:e=>De(parseInt(e.target.value)),children:Array.from({length:10},(e,t)=>(new Date).getFullYear()-t).map(e=>(0,mi.jsx)("option",{value:e,children:e},e))})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-xs text-gray-400 mb-1",children:"End Month"}),(0,mi.jsx)("select",{className:"misty-select text-sm",value:Pe,onChange:e=>Ae(parseInt(e.target.value)),children:["January","February","March","April","May","June","July","August","September","October","November","December"].map((e,t)=>(0,mi.jsx)("option",{value:t,children:e},t))})]})]}),(0,mi.jsxs)("p",{className:"text-xs text-gray-400 mt-2",children:["Selected range: ",new Date(Ne,Se,1).toLocaleDateString()," - ",new Date(Ee,Pe+1,0).toLocaleDateString()]})]}),"custom"!==ye&&ve&&we&&(0,mi.jsxs)("div",{className:"text-sm text-gray-400",children:["Historical Period: ",new Date(ve).toLocaleDateString()," - ",new Date(we).toLocaleDateString()]})]}),Te&&Te.report_period&&(0,mi.jsx)("div",{className:"mt-6 space-y-6",children:(0,mi.jsxs)("div",{className:"border-t border-gray-700 pt-4",children:[(0,mi.jsxs)("div",{className:"mb-4",children:[(0,mi.jsx)("h4",{className:"font-medium text-white text-lg mb-1",children:"Projected Order Analysis"}),(0,mi.jsxs)("p",{className:"text-sm text-gray-400",children:["Based on historical period: ",new Date(Te.report_period.start_date).toLocaleDateString()," - ",new Date(Te.report_period.end_date).toLocaleDateString()]})]}),(0,mi.jsxs)("div",{className:"mb-6",children:[(0,mi.jsx)("label",{className:"block text-sm text-gray-400 mb-2",children:"View Projections For:"}),(0,mi.jsx)("div",{className:"flex flex-wrap gap-2",children:["3_months","6_months","9_months","12_months"].map(e=>(0,mi.jsx)("button",{onClick:()=>tt(e),className:"px-4 py-2 rounded transition-colors ".concat(et===e?"bg-yellow-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"),children:e.replace("_"," ").replace("months","Months")},e))})]}),(0,mi.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,mi.jsxs)("div",{className:"bg-gray-700/50 rounded-lg p-4 text-center",children:[(0,mi.jsx)("p",{className:"text-2xl font-bold text-yellow-400",children:(null===(s=Te.summary[et])||void 0===s?void 0:s.total_projected_orders)||0}),(0,mi.jsx)("p",{className:"text-sm text-gray-400",children:"Projected Orders"})]}),(0,mi.jsxs)("div",{className:"bg-gray-700/50 rounded-lg p-4 text-center",children:[(0,mi.jsx)("p",{className:"text-2xl font-bold text-green-400",children:null!==(r=Te.summary[et])&&void 0!==r&&r.total_projected_material_cost?li(Te.summary[et].total_projected_material_cost):"$0"}),(0,mi.jsx)("p",{className:"text-sm text-gray-400",children:"Projected Material Cost"})]}),(0,mi.jsxs)("div",{className:"bg-gray-700/50 rounded-lg p-4 text-center",children:[(0,mi.jsx)("p",{className:"text-2xl font-bold text-blue-400",children:(null===(i=Te.products)||void 0===i?void 0:i.length)||0}),(0,mi.jsx)("p",{className:"text-sm text-gray-400",children:"Products Analyzed"})]})]}),(0,mi.jsx)("div",{className:"space-y-4",children:Te.products.map((e,t)=>{const a=e.projections[et],s=e.material_requirements[et],n=Oe[e.product_info.product_id];return(0,mi.jsxs)("div",{className:"border border-gray-700 rounded-lg p-4 bg-gray-800/50",children:[(0,mi.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,mi.jsxs)("div",{className:"flex-1",children:[(0,mi.jsx)("h5",{className:"font-medium text-white text-lg",children:e.product_info.product_description}),(0,mi.jsxs)("p",{className:"text-xs text-gray-400",children:["Code: ",e.product_info.product_code," | Client: ",e.product_info.client_name]})]}),(0,mi.jsxs)("div",{className:"text-right",children:[(0,mi.jsxs)("div",{className:"text-xl font-bold text-yellow-400",children:[a," units"]}),(0,mi.jsxs)("div",{className:"text-sm text-gray-400",children:["Projected for ",et.replace("_"," ")]})]})]}),(0,mi.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,mi.jsxs)("div",{className:"text-center bg-gray-700/30 rounded p-3",children:[(0,mi.jsx)("p",{className:"text-lg font-bold text-green-400",children:e.historical_data.total_orders}),(0,mi.jsx)("p",{className:"text-xs text-gray-400",children:"Historical Orders"})]}),(0,mi.jsxs)("div",{className:"text-center bg-gray-700/30 rounded p-3",children:[(0,mi.jsx)("p",{className:"text-lg font-bold text-blue-400",children:e.historical_data.avg_monthly_orders}),(0,mi.jsx)("p",{className:"text-xs text-gray-400",children:"Avg Monthly Orders"})]})]}),(0,mi.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,mi.jsxs)("button",{onClick:()=>{return t=e.product_info.product_id,void Me(e=>m(m({},e),{},{[t]:!e[t]}));var t},className:"flex items-center gap-2 text-sm text-yellow-400 hover:text-yellow-300",children:[(0,mi.jsx)("span",{children:n?"\u25bc":"\u25b6"}),(0,mi.jsxs)("span",{children:["Material Requirements (",(null===s||void 0===s?void 0:s.length)||0," materials)"]})]}),(0,mi.jsxs)("button",{onClick:()=>{return t=e.product_info.product_id,void qe(e=>m(m({},e),{},{[t]:!e[t]}));var t},className:"flex items-center gap-2 text-sm text-blue-400 hover:text-blue-300",children:[(0,mi.jsx)("span",{children:Ie[e.product_info.product_id]?"\u25bc":"\u25b6"}),(0,mi.jsx)("span",{children:"Customer Breakdown"})]})]}),n&&s&&(0,mi.jsxs)("div",{className:"mt-4 border-t border-gray-700 pt-4",children:[(0,mi.jsx)("h6",{className:"text-xs text-gray-400 mb-3",children:"Formula: Volume = \u03c0 \xd7 core_length \xd7 (outer_radius\xb2 \u2212 inner_radius\xb2); Mass = Volume \xd7 Density; Area = Volume \xf7 Thickness"}),(0,mi.jsx)("div",{className:"space-y-3",children:s.map((e,t)=>{var a,s,n,r,i,l,o;return e.is_total?(0,mi.jsxs)("div",{className:"bg-yellow-900/20 border border-yellow-600 rounded-lg p-4",children:[(0,mi.jsx)("div",{className:"text-sm font-bold text-white mb-2",children:"TOTALS FOR CORE"}),(0,mi.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("p",{className:"text-gray-400",children:"Outer Diameter"}),(0,mi.jsxs)("p",{className:"text-white font-medium",children:[e.outer_diameter_mm,"mm"]})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("p",{className:"text-gray-400",children:"Total Mass"}),(0,mi.jsxs)("p",{className:"text-green-400 font-medium",children:[e.total_paper_mass_kg,"kg"]})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("p",{className:"text-gray-400",children:"Total Area"}),(0,mi.jsxs)("p",{className:"text-blue-400 font-medium",children:[e.total_paper_area_m2,"m\xb2"]})]}),e.total_strip_length_m&&(0,mi.jsxs)("div",{children:[(0,mi.jsx)("p",{className:"text-gray-400",children:"Total Strip Length"}),(0,mi.jsxs)("p",{className:"text-purple-400 font-medium",children:[null===(l=e.total_strip_length_m)||void 0===l?void 0:l.toLocaleString(),"m"]})]}),e.total_cost>0&&(0,mi.jsxs)("div",{children:[(0,mi.jsx)("p",{className:"text-gray-400",children:"Total Cost"}),(0,mi.jsxs)("p",{className:"text-yellow-400 font-bold text-lg",children:["$",null===(o=e.total_cost)||void 0===o?void 0:o.toLocaleString()]})]})]})]},t):(0,mi.jsx)("div",{className:"bg-gray-800/50 border border-gray-700 rounded-lg p-4",children:(0,mi.jsxs)("div",{className:"flex justify-between items-start gap-4",children:[(0,mi.jsxs)("div",{className:"flex-1",children:[(0,mi.jsxs)("div",{className:"mb-2",children:[(0,mi.jsx)("p",{className:"text-sm font-medium text-white",children:e.material_name}),(0,mi.jsx)("p",{className:"text-xs text-blue-400",children:e.layer_type})]}),(0,mi.jsxs)("div",{className:"text-xs text-gray-400 space-y-1",children:[(0,mi.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("span",{className:"text-gray-500",children:"Width:"})," ",e.width_mm,"mm"]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("span",{className:"text-gray-500",children:"Thickness:"})," ",e.thickness_mm,"mm"]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("span",{className:"text-gray-500",children:"GSM:"})," ",e.gsm]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("span",{className:"text-gray-500",children:"Layers:"})," ",e.num_layers]})]}),(0,mi.jsxs)("div",{className:"mt-2 text-xs",children:[(0,mi.jsxs)("div",{className:"text-purple-400",children:["Radius: ",e.stream_inner_radius_mm,"mm \u2192 ",e.stream_outer_radius_mm,"mm"]}),(0,mi.jsxs)("div",{className:"text-blue-400",children:["Density: ",e.density_kg_m3," kg/m\xb3 | Volume: ",e.volume_m3_per_core," m\xb3"]})]}),e.cost_per_meter>0&&e.total_meters_needed>0&&(0,mi.jsxs)("div",{className:"text-yellow-400 mt-1",children:["$",e.cost_per_meter,"/m \xd7 ",null===(a=e.total_meters_needed)||void 0===a?void 0:a.toLocaleString(),"m = $",null===(s=e.total_cost)||void 0===s?void 0:s.toLocaleString()]})]})]}),(0,mi.jsx)("div",{className:"text-right",children:(0,mi.jsxs)("div",{className:"space-y-1",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsxs)("div",{className:"text-lg font-bold text-yellow-400",children:[null===(n=e.total_meters_needed)||void 0===n?void 0:n.toLocaleString(),"m"]}),(0,mi.jsxs)("div",{className:"text-xs text-gray-400",children:["(",e.meters_per_core,"m/core)"]})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsxs)("div",{className:"text-sm font-medium text-green-400",children:[null===(r=e.total_mass_kg)||void 0===r?void 0:r.toLocaleString(),"kg"]}),(0,mi.jsxs)("div",{className:"text-xs text-gray-400",children:["(",e.mass_kg_per_core,"kg/core)"]})]}),e.total_cost>0&&(0,mi.jsxs)("div",{className:"text-lg font-bold text-green-400 mt-2",children:["$",null===(i=e.total_cost)||void 0===i?void 0:i.toLocaleString()]})]})})]})},t)})})]}),Ie[e.product_info.product_id]&&(0,mi.jsxs)("div",{className:"mt-4 border-t border-gray-700 pt-4",children:[(0,mi.jsxs)("h6",{className:"text-sm font-medium text-white mb-3",children:["Customer Breakdown for ",et.replace("_"," ")]}),e.customer_projections&&Object.keys(e.customer_projections).length>0?(0,mi.jsx)("div",{className:"space-y-2",children:Object.entries(e.customer_projections).map((e,t)=>{let[a,s]=e;const n=s[et];return(0,mi.jsxs)("div",{className:"bg-gray-700/40 rounded p-3",children:[(0,mi.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,mi.jsxs)("div",{className:"flex-1",children:[(0,mi.jsx)("p",{className:"text-sm font-medium text-white",children:a}),(0,mi.jsxs)("p",{className:"text-xs text-gray-400",children:["Historical: ",s.historical_total," units (",s.order_count," orders)"]})]}),(0,mi.jsxs)("div",{className:"text-right",children:[(0,mi.jsxs)("div",{className:"text-lg font-bold text-yellow-400",children:[n," units"]}),(0,mi.jsx)("div",{className:"text-xs text-gray-400",children:"Projected"})]})]}),(0,mi.jsxs)("div",{className:"mt-4 bg-gray-700/20 rounded p-3",children:[(0,mi.jsx)("p",{className:"text-xs font-medium text-gray-400 mb-2",children:"All Projection Periods:"}),(0,mi.jsxs)("div",{className:"grid grid-cols-4 gap-2 text-xs",children:[(0,mi.jsxs)("div",{className:"text-center",children:[(0,mi.jsx)("div",{className:"text-yellow-400 font-medium",children:s["3_months"]}),(0,mi.jsx)("div",{className:"text-gray-500",children:"3 months"})]}),(0,mi.jsxs)("div",{className:"text-center",children:[(0,mi.jsx)("div",{className:"text-yellow-400 font-medium",children:s["6_months"]}),(0,mi.jsx)("div",{className:"text-gray-500",children:"6 months"})]}),(0,mi.jsxs)("div",{className:"text-center",children:[(0,mi.jsx)("div",{className:"text-yellow-400 font-medium",children:s["9_months"]}),(0,mi.jsx)("div",{className:"text-gray-500",children:"9 months"})]}),(0,mi.jsxs)("div",{className:"text-center",children:[(0,mi.jsx)("div",{className:"text-yellow-400 font-medium",children:s["12_months"]}),(0,mi.jsx)("div",{className:"text-gray-500",children:"12 months"})]})]})]})]},t)})}):(0,mi.jsx)("p",{className:"text-sm text-gray-400",children:"No customer breakdown available"})]})]},t)})})]})})]})}),(0,mi.jsx)(ya,{isOpen:ot,onClose:()=>ct(!1),title:"Outstanding Jobs Report",children:u?(0,mi.jsxs)("div",{className:"space-y-4",children:[(0,mi.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,mi.jsxs)("div",{className:"text-center",children:[(0,mi.jsx)("p",{className:"text-2xl font-bold text-yellow-400",children:u.total_jobs}),(0,mi.jsx)("p",{className:"text-sm text-gray-400",children:"Total Jobs"})]}),(0,mi.jsxs)("div",{className:"text-center",children:[(0,mi.jsx)("p",{className:"text-2xl font-bold text-red-400",children:u.overdue_jobs}),(0,mi.jsx)("p",{className:"text-sm text-gray-400",children:"Overdue"})]})]}),(0,mi.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,mi.jsxs)("div",{className:"text-center",children:[(0,mi.jsx)("p",{className:"text-xl font-bold text-orange-400",children:u.jobs_due_today}),(0,mi.jsx)("p",{className:"text-sm text-gray-400",children:"Due Today"})]}),(0,mi.jsxs)("div",{className:"text-center",children:[(0,mi.jsx)("p",{className:"text-xl font-bold text-blue-400",children:u.jobs_due_this_week}),(0,mi.jsx)("p",{className:"text-sm text-gray-400",children:"Due This Week"})]})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("h4",{className:"font-medium text-white mb-2",children:"Jobs by Stage:"}),(0,mi.jsx)("div",{className:"space-y-1",children:Object.entries(u.jobs_by_stage||{}).map(e=>{let[t,a]=e;return(0,mi.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,mi.jsx)("span",{className:"text-gray-300 capitalize",children:t.replace("_"," ")}),(0,mi.jsx)("span",{className:"text-gray-400",children:a})]},t)})})]})]}):(0,mi.jsx)("p",{className:"text-gray-400",children:"No data available"})}),(0,mi.jsx)(ya,{isOpen:dt,onClose:()=>ut(!1),title:"Late Deliveries Report",children:h?(0,mi.jsxs)("div",{className:"space-y-4",children:[(0,mi.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,mi.jsxs)("div",{className:"text-center",children:[(0,mi.jsx)("p",{className:"text-2xl font-bold text-red-400",children:h.total_late_deliveries}),(0,mi.jsx)("p",{className:"text-sm text-gray-400",children:"Late Deliveries"})]}),(0,mi.jsxs)("div",{className:"text-center",children:[(0,mi.jsx)("p",{className:"text-2xl font-bold text-orange-400",children:(null===(l=h.average_delay_days)||void 0===l?void 0:l.toFixed(1))||0}),(0,mi.jsx)("p",{className:"text-sm text-gray-400",children:"Avg Delay (days)"})]})]}),Object.keys(h.late_deliveries_by_client||{}).length>0&&(0,mi.jsxs)("div",{children:[(0,mi.jsx)("h4",{className:"font-medium text-white mb-2",children:"Late Deliveries by Client:"}),(0,mi.jsx)("div",{className:"space-y-1",children:Object.entries(h.late_deliveries_by_client).map(e=>{let[t,a]=e;return(0,mi.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,mi.jsx)("span",{className:"text-gray-300",children:t}),(0,mi.jsx)("span",{className:"text-red-400",children:a})]},t)})})]})]}):(0,mi.jsx)("p",{className:"text-gray-400",children:"No data available"})}),(0,mi.jsx)(ya,{isOpen:mt,onClose:()=>pt(!1),title:"Customer Annual Report",children:(0,mi.jsxs)("div",{className:"space-y-4",children:[(0,mi.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,mi.jsxs)("select",{className:"misty-select flex-1",value:v,onChange:e=>j(e.target.value),"data-testid":"client-select",children:[(0,mi.jsx)("option",{value:"",children:"Select a client..."}),y.map(e=>(0,mi.jsx)("option",{value:e.id,children:e.company_name},e.id))]}),(0,mi.jsx)("select",{className:"misty-select",value:f,onChange:e=>g(parseInt(e.target.value)),"data-testid":"year-select",children:[...Array(5)].map((e,t)=>{const a=(new Date).getFullYear()-t;return(0,mi.jsx)("option",{value:a,children:a},a)})}),(0,mi.jsx)("button",{onClick:async()=>{if(v)try{var e;const t=await vr(v,f);_(null===(e=t.data)||void 0===e?void 0:e.data),Bt.success("Customer report loaded successfully")}catch(t){console.error("Failed to load customer report:",t),Bt.error("Failed to load customer report")}else Bt.error("Please select a client")},className:"misty-button misty-button-primary","data-testid":"generate-customer-report",children:"Generate Report"})]}),w&&(0,mi.jsx)("div",{className:"mt-6 space-y-4",children:(0,mi.jsxs)("div",{className:"border-t border-gray-700 pt-4",children:[(0,mi.jsxs)("h4",{className:"font-medium text-white mb-3",children:[w.client_name," - ",w.year," Report"]}),(0,mi.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,mi.jsxs)("div",{className:"text-center",children:[(0,mi.jsx)("p",{className:"text-xl font-bold text-yellow-400",children:w.total_orders}),(0,mi.jsx)("p",{className:"text-sm text-gray-400",children:"Total Orders"})]}),(0,mi.jsxs)("div",{className:"text-center",children:[(0,mi.jsx)("p",{className:"text-xl font-bold text-green-400",children:li(w.total_revenue)}),(0,mi.jsx)("p",{className:"text-sm text-gray-400",children:"Total Revenue"})]}),(0,mi.jsxs)("div",{className:"text-center",children:[(0,mi.jsx)("p",{className:"text-xl font-bold text-blue-400",children:li(w.average_order_value)}),(0,mi.jsx)("p",{className:"text-sm text-gray-400",children:"Avg Order Value"})]})]}),(0,mi.jsxs)("div",{className:"text-center",children:[(0,mi.jsxs)("p",{className:"text-lg font-bold text-teal-400",children:[(null===(o=w.on_time_delivery_rate)||void 0===o?void 0:o.toFixed(1))||0,"%"]}),(0,mi.jsx)("p",{className:"text-sm text-gray-400",children:"On-Time Delivery Rate"})]}),w.top_products&&w.top_products.length>0&&(0,mi.jsxs)("div",{className:"mt-4",children:[(0,mi.jsx)("h5",{className:"font-medium text-white mb-2",children:"Top Products:"}),(0,mi.jsx)("div",{className:"space-y-1",children:w.top_products.slice(0,5).map((e,t)=>(0,mi.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,mi.jsx)("span",{className:"text-gray-300",children:e.product}),(0,mi.jsx)("span",{className:"text-yellow-400",children:li(e.revenue)})]},t))})]})]})})]})}),(0,mi.jsx)(ya,{isOpen:ht,onClose:()=>xt(!1),title:"Job Card Performance Report",children:(0,mi.jsxs)("div",{className:"space-y-4",children:[(0,mi.jsxs)("div",{className:"border border-gray-700 rounded-lg p-4 bg-gray-800/50",children:[(0,mi.jsx)("h4",{className:"text-sm text-gray-300 mb-3",children:"Search Job Cards"}),(0,mi.jsxs)("div",{className:"grid grid-cols-5 gap-3",children:[(0,mi.jsxs)("select",{className:"misty-select",value:Ue,onChange:e=>We(e.target.value),children:[(0,mi.jsx)("option",{value:"customer",children:"Customer"}),(0,mi.jsx)("option",{value:"invoice",children:"Invoice Number"}),(0,mi.jsx)("option",{value:"product",children:"Product"})]}),(0,mi.jsx)("input",{type:"text",className:"misty-input col-span-2",placeholder:"Enter ".concat(Ue,"..."),value:Be,onChange:e=>ze(e.target.value),onKeyPress:e=>"Enter"===e.key&&Be.trim()&&fa()}),(0,mi.jsx)("button",{onClick:fa,disabled:Ve||!Be.trim(),className:"misty-button misty-button-primary",children:Ve?"Searching...":"Search"}),(0,mi.jsx)("button",{onClick:async()=>{try{var e,t,a;$e(!0);const r=await gr({});var s,n;if(Ge((null===(e=r.data)||void 0===e?void 0:e.data)||[]),0===(null===(t=r.data)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.length))Bt.info("No job cards found");else Bt.success("Found ".concat(null===(s=r.data)||void 0===s||null===(n=s.data)||void 0===n?void 0:n.length," orders with job cards"))}catch(r){console.error("Failed to search job cards:",r),Bt.error("Failed to search job cards")}finally{$e(!1)}},disabled:Ve,className:"misty-button misty-button-secondary",children:Ve?"Loading...":"Search All"})]})]}),He.length>0&&(0,mi.jsxs)("div",{className:"space-y-3",children:[(0,mi.jsxs)("h4",{className:"text-sm text-gray-300",children:["Found ",He.length," order(s) with completed job cards"]}),(0,mi.jsx)("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:He.map(e=>(0,mi.jsxs)("div",{onDoubleClick:()=>(async e=>{Ye(e),Ze(!0)})(e),className:"border border-gray-700 rounded-lg p-4 cursor-pointer hover:bg-gray-700 transition-colors",children:[(0,mi.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsxs)("h3",{className:"text-white font-semibold",children:[e.order_number," - ",e.client_name]}),e.invoice_number&&(0,mi.jsxs)("p",{className:"text-sm text-yellow-400",children:["Invoice: ",e.invoice_number]})]}),(0,mi.jsxs)("span",{className:"bg-green-900 text-green-200 px-3 py-1 rounded-full text-sm",children:[e.job_cards.length," Job Card",1!==e.job_cards.length?"s":""]})]}),(0,mi.jsxs)("div",{className:"text-sm text-gray-400",children:[(0,mi.jsxs)("p",{className:"mb-1",children:[(0,mi.jsx)("span",{className:"font-medium",children:"Stages Completed:"})," ",e.job_cards.map(e=>e.stage.replace(/_/g," ").toUpperCase()).join(" \u2192 ")]}),(0,mi.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"Double-click to view and edit job cards"})]})]},e.order_id))})]}),!Ve&&0===He.length&&Be&&(0,mi.jsxs)("div",{className:"text-center py-8",children:[(0,mi.jsx)(kx,{className:"mx-auto h-12 w-12 text-gray-600 mb-3"}),(0,mi.jsx)("p",{className:"text-gray-400",children:"No job cards found for this search"}),(0,mi.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Try a different search term"})]}),!Be&&(0,mi.jsxs)("div",{className:"text-center py-8",children:[(0,mi.jsx)(kx,{className:"mx-auto h-12 w-12 text-gray-600 mb-3"}),(0,mi.jsx)("p",{className:"text-gray-400",children:"Search for job cards by customer, invoice number, or product"}),(0,mi.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Results are grouped by order number"})]})]})}),Je&&Qe&&(0,mi.jsx)("div",{className:"modal-overlay",onClick:e=>e.target===e.currentTarget&&Ze(!1),children:(0,mi.jsx)("div",{className:"modal-content max-w-6xl max-h-[90vh] overflow-y-auto",children:(0,mi.jsxs)("div",{className:"p-6",children:[(0,mi.jsxs)("div",{className:"flex items-center justify-between mb-6 border-b border-gray-700 pb-4",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsxs)("h3",{className:"text-xl font-semibold text-white",children:[Qe.order_number," - Job Cards"]}),(0,mi.jsxs)("p",{className:"text-sm text-gray-400",children:[Qe.client_name,Qe.invoice_number&&(0,mi.jsxs)("span",{className:"ml-2 text-yellow-400",children:["\u2022 Invoice: ",Qe.invoice_number]})]})]}),(0,mi.jsx)("button",{onClick:()=>Ze(!1),className:"text-gray-400 hover:text-white text-2xl",children:"\xd7"})]}),(0,mi.jsx)("div",{className:"space-y-4",children:Qe.job_cards.map((e,t)=>(0,mi.jsxs)("div",{className:"border border-gray-700 rounded-lg p-5 bg-gray-800/50",children:[(0,mi.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,mi.jsxs)("div",{className:"flex items-center gap-3",children:[(0,mi.jsxs)("span",{className:"bg-purple-900 text-purple-200 px-3 py-1 rounded-full text-sm font-medium",children:["Stage ",t+1]}),(0,mi.jsx)("h4",{className:"text-lg font-semibold text-white",children:e.stage.replace(/_/g," ").toUpperCase()})]}),(0,mi.jsx)("button",{onClick:()=>Ke(e),className:"misty-button misty-button-secondary text-sm",children:"Edit"})]}),(0,mi.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("p",{className:"text-xs text-gray-400 mb-1",children:"Machine"}),(0,mi.jsx)("p",{className:"text-white font-medium",children:e.machine||"N/A"})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("p",{className:"text-xs text-gray-400 mb-1",children:"Start Time"}),(0,mi.jsx)("p",{className:"text-white font-medium",children:e.job_start_time?new Date(e.job_start_time).toLocaleString():"N/A"})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("p",{className:"text-xs text-gray-400 mb-1",children:"End Time"}),(0,mi.jsx)("p",{className:"text-white font-medium",children:e.job_end_time?new Date(e.job_end_time).toLocaleString():"N/A"})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("p",{className:"text-xs text-gray-400 mb-1",children:"Runtime"}),(0,mi.jsxs)("p",{className:"text-green-400 font-bold",children:[Math.floor((e.actual_run_time_minutes||0)/60),"h"," ",(e.actual_run_time_minutes||0)%60,"m"]})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("p",{className:"text-xs text-gray-400 mb-1",children:"Finished Quantity"}),(0,mi.jsx)("p",{className:"text-white font-medium",children:e.finished_quantity||0})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("p",{className:"text-xs text-gray-400 mb-1",children:"Master Cores"}),(0,mi.jsx)("p",{className:"text-white font-medium",children:e.master_cores||0})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("p",{className:"text-xs text-gray-400 mb-1",children:"Completed By"}),(0,mi.jsx)("p",{className:"text-white font-medium",children:e.completed_by||"Unknown"})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("p",{className:"text-xs text-gray-400 mb-1",children:"Completed At"}),(0,mi.jsx)("p",{className:"text-white font-medium",children:e.completed_at?new Date(e.completed_at).toLocaleDateString():"N/A"})]})]}),e.setup_notes&&(0,mi.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-700",children:[(0,mi.jsx)("p",{className:"text-xs text-gray-400 mb-2",children:"Setup Notes:"}),(0,mi.jsx)("p",{className:"text-sm text-gray-300",children:e.setup_notes})]}),e.additional_production&&e.additional_production.length>0&&(0,mi.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-700",children:[(0,mi.jsx)("p",{className:"text-xs text-gray-400 mb-2",children:"Additional Production:"}),(0,mi.jsx)("div",{className:"space-y-1",children:e.additional_production.map((e,t)=>(0,mi.jsxs)("p",{className:"text-sm text-gray-300",children:["\u2022 ",e.description,": ",e.quantity]},t))})]})]},e.id))}),(0,mi.jsx)("div",{className:"flex justify-end mt-6 pt-4 border-t border-gray-700",children:(0,mi.jsx)("button",{onClick:()=>Ze(!1),className:"misty-button misty-button-secondary",children:"Close"})})]})})}),Xe&&(0,mi.jsx)("div",{className:"modal-overlay",onClick:e=>e.target===e.currentTarget&&Ke(null),children:(0,mi.jsx)("div",{className:"modal-content max-w-2xl",children:(0,mi.jsxs)("div",{className:"p-6",children:[(0,mi.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,mi.jsxs)("h3",{className:"text-lg font-semibold text-white",children:["Edit Job Card - ",Xe.stage.replace(/_/g," ").toUpperCase()]}),(0,mi.jsx)("button",{onClick:()=>Ke(null),className:"text-gray-400 hover:text-white text-2xl",children:"\xd7"})]}),(0,mi.jsxs)("form",{onSubmit:e=>{e.preventDefault();const t=new FormData(e.target),a={machine:t.get("machine"),setup_notes:t.get("setup_notes"),finished_quantity:parseInt(t.get("finished_quantity")),master_cores:parseInt(t.get("master_cores"))};(async(e,t)=>{try{var a;await fr(e,t),Bt.success("Job card updated successfully");const s=(null===(a=(await xr(Qe.order_id)).data)||void 0===a?void 0:a.data)||[];Ye(m(m({},Qe),{},{job_cards:s}))}catch(s){console.error("Failed to update job card:",s),Bt.error("Failed to update job card")}})(Xe.id,a),Ke(null)},children:[(0,mi.jsxs)("div",{className:"space-y-4",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Machine"}),(0,mi.jsx)("input",{type:"text",name:"machine",className:"misty-input",defaultValue:Xe.machine})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Finished Quantity"}),(0,mi.jsx)("input",{type:"number",name:"finished_quantity",className:"misty-input",defaultValue:Xe.finished_quantity})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Master Cores"}),(0,mi.jsx)("input",{type:"number",name:"master_cores",className:"misty-input",defaultValue:Xe.master_cores})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm text-gray-400 mb-1",children:"Setup Notes"}),(0,mi.jsx)("textarea",{name:"setup_notes",rows:"3",className:"misty-input",defaultValue:Xe.setup_notes})]})]}),(0,mi.jsxs)("div",{className:"flex justify-end gap-3 mt-6",children:[(0,mi.jsx)("button",{type:"button",onClick:()=>Ke(null),className:"misty-button misty-button-secondary",children:"Cancel"}),(0,mi.jsx)("button",{type:"submit",className:"misty-button misty-button-primary",children:"Save Changes"})]})]})]})})}),(0,mi.jsx)(ya,{isOpen:zt,onClose:()=>Ut(!1),title:"Profitability Report - GP & NP Analysis",children:(0,mi.jsxs)("div",{className:"space-y-6",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm text-gray-400 mb-2",children:"Analysis Mode"}),(0,mi.jsxs)("div",{className:"flex gap-4",children:[(0,mi.jsxs)("label",{className:"flex items-center",children:[(0,mi.jsx)("input",{type:"radio",value:"all",checked:"all"===Wt,onChange:e=>Ht(e.target.value),className:"mr-2"}),(0,mi.jsx)("span",{className:"text-white",children:"All Jobs (All Clients)"})]}),(0,mi.jsxs)("label",{className:"flex items-center",children:[(0,mi.jsx)("input",{type:"radio",value:"filtered",checked:"filtered"===Wt,onChange:e=>Ht(e.target.value),className:"mr-2"}),(0,mi.jsx)("span",{className:"text-white",children:"Filtered (Select Clients & Products)"})]})]})]}),"all"===Wt&&(0,mi.jsxs)("div",{className:"bg-blue-900 bg-opacity-20 border border-blue-500 border-opacity-30 rounded-lg p-4",children:[(0,mi.jsx)("p",{className:"text-blue-300 text-sm mb-3",children:"\ud83d\udcca This will analyze ALL completed/archived jobs from ALL clients"}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm text-gray-400 mb-2",children:"Date Range (Optional)"}),(0,mi.jsxs)("select",{className:"misty-select w-full",value:ta,onChange:e=>{const t=e.target.value;if(aa(t),"all_time"!==t){const{start:e,end:a}=xa(t);Xt(e),ea(a)}},children:[(0,mi.jsx)("option",{value:"last_7_days",children:"Last 7 Days"}),(0,mi.jsx)("option",{value:"last_30_days",children:"Last 30 Days"}),(0,mi.jsx)("option",{value:"last_90_days",children:"Last 90 Days"}),(0,mi.jsx)("option",{value:"this_year",children:"This Year"}),(0,mi.jsx)("option",{value:"all_time",children:"All Time"})]})]})]}),"filtered"===Wt&&(0,mi.jsxs)("div",{className:"space-y-4",children:[(0,mi.jsx)("div",{className:"bg-yellow-900 bg-opacity-20 border border-yellow-500 border-opacity-30 rounded-lg p-4",children:(0,mi.jsx)("p",{className:"text-yellow-300 text-sm",children:"\ud83d\udd0d Select specific clients and/or products to analyze"})}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm text-gray-400 mb-2",children:"Select Clients (Hold Ctrl/Cmd for multiple)"}),y.length>0&&(0,mi.jsxs)("div",{className:"text-gray-400 text-xs mb-2",children:[y.length," client(s) available | ",Gt.length," selected"]}),(0,mi.jsx)("select",{multiple:!0,className:"misty-select w-full h-32",value:Gt,onChange:e=>{const t=Array.from(e.target.selectedOptions,e=>e.value);Vt(t)},children:y.map(e=>(0,mi.jsx)("option",{value:e.id,children:e.name},e.id))}),(0,mi.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Leave empty to include all clients"})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm text-gray-400 mb-2",children:"Select Products (Hold Ctrl/Cmd for multiple)"}),Yt.length>0&&(0,mi.jsxs)("div",{className:"text-gray-400 text-xs mb-2",children:[Yt.length," product(s) available | ",$t.length," selected"]}),(0,mi.jsx)("select",{multiple:!0,className:"misty-select w-full h-32",value:$t,onChange:e=>{const t=Array.from(e.target.selectedOptions,e=>e.value);Qt(t)},children:Yt.map(e=>(0,mi.jsxs)("option",{value:e.id,children:[e.product_name," (",e.client_name,")"]},e.id))}),(0,mi.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Leave empty to include all products"})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm text-gray-400 mb-2",children:"Date Range"}),(0,mi.jsxs)("select",{className:"misty-select w-full",value:ta,onChange:e=>{const t=e.target.value;if(aa(t),"all_time"!==t){const{start:e,end:a}=xa(t);Xt(e),ea(a)}},children:[(0,mi.jsx)("option",{value:"last_7_days",children:"Last 7 Days"}),(0,mi.jsx)("option",{value:"last_30_days",children:"Last 30 Days"}),(0,mi.jsx)("option",{value:"last_90_days",children:"Last 90 Days"}),(0,mi.jsx)("option",{value:"this_year",children:"This Year"}),(0,mi.jsx)("option",{value:"all_time",children:"All Time"})]})]})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm text-gray-400 mb-2",children:"Profit Warning Threshold (%)"}),(0,mi.jsx)("input",{type:"number",step:"1",value:sa,onChange:e=>na(parseFloat(e.target.value)),className:"misty-input w-full md:w-64",placeholder:"e.g., 10"}),(0,mi.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Jobs below this Net Profit % will be highlighted in red"})]}),(0,mi.jsx)("button",{onClick:async()=>{try{oa(!0);const e={profit_threshold:sa};if("all"===Wt){let t=Zt,a=Kt;t&&a&&(e.start_date=t+"T00:00:00Z",e.end_date=a+"T23:59:59Z")}else if("filtered"===Wt){Gt.length>0&&(e.client_ids=Gt),$t.length>0&&(e.product_ids=$t);let t=Zt,a=Kt;if("all_time"!==ta&&(!t||!a))return void Bt.error("Please select date range");t&&a&&(e.start_date=t+"T00:00:00Z",e.end_date=a+"T23:59:59Z")}const t=await fetch("/api/reports/profitability",{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"},body:JSON.stringify(e)});if(t.ok){const e=await t.json();ia(e.data),Bt.success(e.message)}else{const e=await t.json();Bt.error(e.detail||"Failed to generate profitability report")}}catch(e){console.error("Failed to load profitability report:",e),Bt.error("Failed to load profitability report")}finally{oa(!1)}},disabled:la,className:"misty-button misty-button-primary w-full md:w-auto",children:la?"Generating...":"\ud83d\udcca Generate Profitability Report"}),ra&&(0,mi.jsxs)("div",{className:"space-y-6 mt-6",children:[(0,mi.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,mi.jsxs)("div",{className:"bg-gray-700 rounded-lg p-4",children:[(0,mi.jsx)("p",{className:"text-sm text-gray-400",children:"Total Jobs"}),(0,mi.jsx)("p",{className:"text-2xl font-bold text-white",children:ra.summary.total_jobs})]}),(0,mi.jsxs)("div",{className:"bg-gray-700 rounded-lg p-4",children:[(0,mi.jsx)("p",{className:"text-sm text-gray-400",children:"Total Revenue"}),(0,mi.jsxs)("p",{className:"text-2xl font-bold text-green-400",children:["$",ra.summary.total_revenue.toLocaleString()]})]}),(0,mi.jsxs)("div",{className:"bg-gray-700 rounded-lg p-4",children:[(0,mi.jsx)("p",{className:"text-sm text-gray-400",children:"Avg GP %"}),(0,mi.jsxs)("p",{className:"text-2xl font-bold text-blue-400",children:[ra.summary.average_gp_percentage.toFixed(1),"%"]})]}),(0,mi.jsxs)("div",{className:"bg-gray-700 rounded-lg p-4",children:[(0,mi.jsx)("p",{className:"text-sm text-gray-400",children:"Avg NP %"}),(0,mi.jsxs)("p",{className:"text-2xl font-bold text-yellow-400",children:[ra.summary.average_np_percentage.toFixed(1),"%"]})]})]}),ra.summary.jobs_below_threshold>0&&(0,mi.jsx)("div",{className:"bg-red-900 bg-opacity-30 border border-red-500 rounded-lg p-4",children:(0,mi.jsxs)("p",{className:"text-red-400 font-medium",children:["\u26a0\ufe0f Alert: ",ra.summary.jobs_below_threshold," job(s) below profit threshold!"]})}),(0,mi.jsx)("div",{className:"overflow-x-auto",children:(0,mi.jsxs)("table",{className:"w-full",children:[(0,mi.jsx)("thead",{className:"bg-gray-700",children:(0,mi.jsxs)("tr",{children:[(0,mi.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-300 uppercase",children:"Job"}),(0,mi.jsx)("th",{className:"px-3 py-2 text-right text-xs font-medium text-gray-300 uppercase",children:"Revenue"}),(0,mi.jsx)("th",{className:"px-3 py-2 text-right text-xs font-medium text-gray-300 uppercase",children:"Material"}),(0,mi.jsx)("th",{className:"px-3 py-2 text-right text-xs font-medium text-gray-300 uppercase",children:"Labour"}),(0,mi.jsx)("th",{className:"px-3 py-2 text-right text-xs font-medium text-gray-300 uppercase",children:"Machine"}),(0,mi.jsx)("th",{className:"px-3 py-2 text-right text-xs font-medium text-gray-300 uppercase",children:"GP"}),(0,mi.jsx)("th",{className:"px-3 py-2 text-right text-xs font-medium text-gray-300 uppercase",children:"GP %"}),(0,mi.jsx)("th",{className:"px-3 py-2 text-right text-xs font-medium text-gray-300 uppercase",children:"NP"}),(0,mi.jsx)("th",{className:"px-3 py-2 text-right text-xs font-medium text-gray-300 uppercase",children:"NP %"})]})}),(0,mi.jsx)("tbody",{className:"bg-gray-800 divide-y divide-gray-700",children:ra.profitability_data.map((e,t)=>(0,mi.jsxs)(n.Fragment,{children:[(0,mi.jsxs)("tr",{className:e.alert_low_profit?"bg-red-900 bg-opacity-20":"",children:[(0,mi.jsx)("td",{className:"px-3 py-3 text-sm",children:(0,mi.jsxs)("div",{className:"flex items-center space-x-2",children:[e.material_layers_breakdown&&e.material_layers_breakdown.length>0&&(0,mi.jsx)("button",{onClick:()=>{return t=e.order_id,void ma(e=>m(m({},e),{},{[t]:!e[t]}));var t},className:"text-blue-400 hover:text-blue-300",children:ua[e.order_id]?(0,mi.jsx)(Ex,{className:"h-4 w-4"}):(0,mi.jsx)(Ax,{className:"h-4 w-4"})}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("div",{className:"text-white font-medium",children:e.order_number}),(0,mi.jsx)("div",{className:"text-gray-400 text-xs",children:e.client_name})]})]})}),(0,mi.jsxs)("td",{className:"px-3 py-3 text-sm text-right text-white",children:["$",e.job_revenue.toLocaleString()]}),(0,mi.jsxs)("td",{className:"px-3 py-3 text-sm text-right text-gray-300",children:["$",e.material_cost.toLocaleString()]}),(0,mi.jsxs)("td",{className:"px-3 py-3 text-sm text-right text-gray-300",children:["$",e.labour_cost.toLocaleString()]}),(0,mi.jsxs)("td",{className:"px-3 py-3 text-sm text-right text-gray-300",children:["$",e.machine_cost.toLocaleString()]}),(0,mi.jsxs)("td",{className:"px-3 py-3 text-sm text-right font-medium text-blue-400",children:["$",e.gross_profit.toLocaleString()]}),(0,mi.jsxs)("td",{className:"px-3 py-3 text-sm text-right font-medium text-blue-400",children:[e.gp_percentage.toFixed(1),"%"]}),(0,mi.jsxs)("td",{className:"px-3 py-3 text-sm text-right font-medium ".concat(e.alert_low_profit?"text-red-400":"text-green-400"),children:["$",e.net_profit.toLocaleString()]}),(0,mi.jsxs)("td",{className:"px-3 py-3 text-sm text-right font-medium ".concat(e.alert_low_profit?"text-red-400":"text-green-400"),children:[e.np_percentage.toFixed(1),"%"]})]}),ua[e.order_id]&&e.material_layers_breakdown&&(0,mi.jsx)("tr",{className:"bg-gray-750",children:(0,mi.jsx)("td",{colSpan:"9",className:"px-6 py-4",children:(0,mi.jsxs)("div",{className:"bg-gray-900 rounded-lg p-4",children:[(0,mi.jsx)("h4",{className:"text-yellow-400 font-medium mb-3",children:"\ud83d\udccb Material Consumption Breakdown"}),(0,mi.jsx)("div",{className:"overflow-x-auto",children:(0,mi.jsxs)("table",{className:"w-full",children:[(0,mi.jsx)("thead",{className:"bg-gray-800",children:(0,mi.jsxs)("tr",{children:[(0,mi.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-400",children:"Layer"}),(0,mi.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-400",children:"Material"}),(0,mi.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-400",children:"Supplier"}),(0,mi.jsx)("th",{className:"px-3 py-2 text-right text-xs font-medium text-gray-400",children:"Width (mm)"}),(0,mi.jsx)("th",{className:"px-3 py-2 text-right text-xs font-medium text-gray-400",children:"GSM"}),(0,mi.jsx)("th",{className:"px-3 py-2 text-right text-xs font-medium text-gray-400",children:"Linear Meters"}),(0,mi.jsx)("th",{className:"px-3 py-2 text-right text-xs font-medium text-gray-400",children:"Good Material"}),(0,mi.jsx)("th",{className:"px-3 py-2 text-right text-xs font-medium text-gray-400",children:"Makeready"}),(0,mi.jsx)("th",{className:"px-3 py-2 text-right text-xs font-medium text-gray-400",children:"Waste"}),(0,mi.jsx)("th",{className:"px-3 py-2 text-right text-xs font-medium text-gray-400",children:"Weight (kg)"}),(0,mi.jsx)("th",{className:"px-3 py-2 text-right text-xs font-medium text-gray-400",children:"Cost (AUD)"})]})}),(0,mi.jsxs)("tbody",{className:"divide-y divide-gray-700",children:[e.material_layers_breakdown.map((e,t)=>(0,mi.jsxs)("tr",{children:[(0,mi.jsx)("td",{className:"px-3 py-2 text-sm text-white",children:e.layer_type}),(0,mi.jsx)("td",{className:"px-3 py-2 text-sm text-gray-300",children:e.material_name}),(0,mi.jsx)("td",{className:"px-3 py-2 text-sm text-gray-400",children:e.supplier}),(0,mi.jsx)("td",{className:"px-3 py-2 text-sm text-right text-gray-300",children:e.width_mm}),(0,mi.jsx)("td",{className:"px-3 py-2 text-sm text-right text-gray-300",children:e.gsm}),(0,mi.jsxs)("td",{className:"px-3 py-2 text-sm text-right text-yellow-400 font-medium",children:[e.linear_meters_consumed," m"]}),(0,mi.jsxs)("td",{className:"px-3 py-2 text-sm text-right text-green-400",children:[e.good_material_meters," m"]}),(0,mi.jsxs)("td",{className:"px-3 py-2 text-sm text-right text-blue-400",children:[e.makeready_meters," m"]}),(0,mi.jsxs)("td",{className:"px-3 py-2 text-sm text-right text-red-400",children:[e.waste_meters," m"]}),(0,mi.jsxs)("td",{className:"px-3 py-2 text-sm text-right text-gray-300",children:[e.weight_kg," kg"]}),(0,mi.jsxs)("td",{className:"px-3 py-2 text-sm text-right text-white font-medium",children:["$",e.layer_cost_aud.toFixed(2)]})]},t)),(0,mi.jsxs)("tr",{className:"bg-gray-800 font-bold",children:[(0,mi.jsx)("td",{colSpan:"10",className:"px-3 py-2 text-sm text-right text-yellow-400",children:"Total Material Cost:"}),(0,mi.jsxs)("td",{className:"px-3 py-2 text-sm text-right text-yellow-400",children:["$",e.material_cost.toFixed(2)]})]})]})]})})]})})})]},t))})]})})]})]})})]})})},Lx=()=>{const[e,t]=(0,n.useState)([]),[a,s]=(0,n.useState)([]),[r,i]=(0,n.useState)(!0),[l,o]=(0,n.useState)(""),[c,d]=(0,n.useState)(!1),[u,p]=(0,n.useState)(null),[h,x]=(0,n.useState)(!1),[f,g]=(0,n.useState)(null),[y,b]=(0,n.useState)({supplier_id:"",supplier_name:"",product_code:"",order_to_delivery_time:"",material_description:"",price:"",currency:"AUD",unit:"m2",raw_substrate:!1,gsm:"",thickness_mm:"",burst_strength_kpa:"",ply_bonding_jm2:"",moisture_percent:"",supplied_roll_weight:"",master_deckle_width_mm:""}),[v,j]=(0,n.useState)({});(0,n.useEffect)(()=>{_(),w()},[]);const w=async()=>{try{const e=await Ln();s(e.data)}catch(e){console.error("Failed to load suppliers:",e),Bt.error("Failed to load suppliers")}},_=async()=>{try{i(!0);const e=await En();t(e.data)}catch(e){console.error("Failed to load materials:",e),Bt.error("Failed to load materials")}finally{i(!1)}},N=()=>{p(null),b({supplier_id:"",supplier_name:"",product_code:"",order_to_delivery_time:"",material_description:"",price:"",currency:"AUD",unit:"m2",raw_substrate:!1,gsm:"",thickness_mm:"",burst_strength_kpa:"",ply_bonding_jm2:"",moisture_percent:"",supplied_roll_weight:"",master_deckle_width_mm:""}),j({}),d(!0)},k=e=>{p(e),b({supplier_id:e.supplier_id||"",supplier_name:e.supplier||e.supplier_name||"",product_code:e.product_code,order_to_delivery_time:e.order_to_delivery_time,material_description:e.material_description||"",price:e.price.toString(),currency:e.currency||"AUD",unit:e.unit,raw_substrate:e.raw_substrate||!1,gsm:e.gsm||"",thickness_mm:e.thickness_mm?e.thickness_mm.toString():"",burst_strength_kpa:e.burst_strength_kpa?e.burst_strength_kpa.toString():"",ply_bonding_jm2:e.ply_bonding_jm2?e.ply_bonding_jm2.toString():"",moisture_percent:e.moisture_percent?e.moisture_percent.toString():"",supplied_roll_weight:e.supplied_roll_weight?e.supplied_roll_weight.toString():"",master_deckle_width_mm:e.master_deckle_width_mm?e.master_deckle_width_mm.toString():""}),j({}),d(!0)},S=e=>{g(e),x(!0)},C=e=>{const{name:t,value:a,type:s,checked:n}=e.target;b(e=>m(m({},e),{},{[t]:"checkbox"===s?n:a})),v[t]&&j(e=>m(m({},e),{},{[t]:""}))},E=e.filter(e=>e.supplier.toLowerCase().includes(l.toLowerCase())||e.product_code.toLowerCase().includes(l.toLowerCase())),D=()=>{if(!y.raw_substrate||!y.gsm||!y.supplied_roll_weight||!y.master_deckle_width_mm)return"";const e=parseFloat(y.gsm),t=parseFloat(y.supplied_roll_weight),a=parseFloat(y.master_deckle_width_mm);if(e>0&&t>0&&a>0){return(1e6*t/(e*a)).toFixed(2)}return""};return r?(0,mi.jsx)(hl,{children:(0,mi.jsx)("div",{className:"p-8",children:(0,mi.jsxs)("div",{className:"animate-pulse",children:[(0,mi.jsx)("div",{className:"h-8 bg-gray-700 rounded w-1/4 mb-8"}),(0,mi.jsx)("div",{className:"space-y-4",children:[...Array(5)].map((e,t)=>(0,mi.jsx)("div",{className:"h-16 bg-gray-700 rounded"},t))})]})})}):(0,mi.jsx)(hl,{children:(0,mi.jsxs)("div",{className:"p-8",children:[(0,mi.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"Products & Materials"}),(0,mi.jsx)("p",{className:"text-gray-400",children:"Manage your materials database and specifications \u2022 Double-click any material to edit"})]}),(0,mi.jsxs)("button",{onClick:N,className:"misty-button misty-button-primary flex items-center",children:[(0,mi.jsx)(Cl,{className:"h-5 w-5 mr-2"}),"Add Material"]})]}),(0,mi.jsx)("div",{className:"mb-6",children:(0,mi.jsxs)("div",{className:"relative max-w-md",children:[(0,mi.jsx)(io,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,mi.jsx)("input",{type:"text",placeholder:"",value:l,onChange:e=>o(e.target.value),className:"misty-input pl-16 w-full"})]})}),E.length>0?(0,mi.jsx)("div",{className:"misty-table",children:(0,mi.jsxs)("table",{className:"w-full",children:[(0,mi.jsx)("thead",{children:(0,mi.jsxs)("tr",{children:[(0,mi.jsx)("th",{className:"py-2 text-sm",children:"Supplier"}),(0,mi.jsx)("th",{className:"py-2 text-sm",children:"Product Code"}),(0,mi.jsx)("th",{className:"py-2 text-sm",children:"Description"}),(0,mi.jsx)("th",{className:"py-2 text-sm",children:"Price"}),(0,mi.jsx)("th",{className:"py-2 text-sm",children:"Unit"}),(0,mi.jsx)("th",{className:"py-2 text-sm",children:"Delivery Time"}),(0,mi.jsx)("th",{className:"py-2 text-sm",children:"Raw Substrate"}),(0,mi.jsx)("th",{className:"py-2 text-sm",children:"Actions"})]})}),(0,mi.jsx)("tbody",{children:E.map(e=>(0,mi.jsxs)("tr",{onDoubleClick:()=>k(e),className:"cursor-pointer hover:bg-gray-700/50 transition-colors border-b border-gray-700/50",title:"Double-click to edit",children:[(0,mi.jsx)("td",{className:"font-medium text-sm py-2 px-3",children:e.supplier}),(0,mi.jsx)("td",{className:"text-sm py-2 px-3",children:e.product_code}),(0,mi.jsx)("td",{className:"text-gray-300 max-w-xs truncate text-sm py-2 px-3",title:e.material_description||"No description",children:e.material_description||"\u2014"}),(0,mi.jsxs)("td",{className:"text-yellow-400 font-medium text-sm py-2 px-3",children:[e.currency||"AUD"," $",e.price.toFixed(2)]}),(0,mi.jsx)("td",{className:"text-sm py-2 px-3",children:e.unit}),(0,mi.jsx)("td",{className:"text-sm py-2 px-3",children:e.order_to_delivery_time}),(0,mi.jsx)("td",{className:"text-center py-2 px-3",children:e.raw_substrate?(0,mi.jsx)(ql,{className:"h-4 w-4 text-green-400 mx-auto"}):(0,mi.jsx)("span",{className:"text-gray-400",children:"\u2014"})}),(0,mi.jsx)("td",{className:"py-2 px-3",children:(0,mi.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,mi.jsx)("button",{onClick:t=>{t.stopPropagation(),k(e)},className:"text-blue-400 hover:text-blue-300 transition-colors",title:"Edit material",children:(0,mi.jsx)(ho,{className:"h-4 w-4"})}),(0,mi.jsx)("button",{onClick:t=>{t.stopPropagation(),S(e)},className:"text-red-400 hover:text-red-300 transition-colors",title:"Delete material",children:(0,mi.jsx)(Ol,{className:"h-4 w-4"})})]})})]},e.id))})]})}):(0,mi.jsxs)("div",{className:"text-center py-12",children:[(0,mi.jsx)("div",{className:"mx-auto h-12 w-12 text-gray-400 mb-4",children:"\ud83d\udce6"}),(0,mi.jsx)("h3",{className:"text-sm font-medium text-gray-300",children:l?"No materials found":"No materials"}),(0,mi.jsx)("p",{className:"mt-1 text-sm text-gray-400",children:l?"Try adjusting your search criteria.":"Get started by adding your first material."}),!l&&(0,mi.jsx)("div",{className:"mt-6",children:(0,mi.jsxs)("button",{onClick:N,className:"misty-button misty-button-primary",children:[(0,mi.jsx)(Cl,{className:"h-5 w-5 mr-2"}),"Add Material"]})})]}),c&&(0,mi.jsx)("div",{className:"modal-overlay",onClick:e=>e.target===e.currentTarget&&d(!1),children:(0,mi.jsx)("div",{className:"modal-content max-w-2xl max-h-[90vh] overflow-y-auto",children:(0,mi.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};return y.supplier_id||(e.supplier_id="Supplier is required"),y.product_code.trim()||(e.product_code="Product code is required"),y.order_to_delivery_time.trim()||(e.order_to_delivery_time="Order to delivery time is required"),y.material_description.trim()||(e.material_description="Material description is required"),(!y.price||parseFloat(y.price)<=0)&&(e.price="Price must be greater than 0"),y.unit||(e.unit="Unit is required"),y.raw_substrate&&(y.gsm.trim()||(e.gsm="GSM is required for raw substrate")),j(e),0===Object.keys(e).length})())try{const e={supplier:y.supplier_name,product_code:y.product_code,order_to_delivery_time:y.order_to_delivery_time,material_description:y.material_description,price:parseFloat(y.price),currency:y.currency,unit:y.unit,raw_substrate:y.raw_substrate,gsm:y.raw_substrate&&y.gsm?y.gsm:null,thickness_mm:y.raw_substrate&&y.thickness_mm?parseFloat(y.thickness_mm):null,burst_strength_kpa:y.raw_substrate&&y.burst_strength_kpa?parseFloat(y.burst_strength_kpa):null,ply_bonding_jm2:y.raw_substrate&&y.ply_bonding_jm2?parseFloat(y.ply_bonding_jm2):null,moisture_percent:y.raw_substrate&&y.moisture_percent?parseFloat(y.moisture_percent):null,supplied_roll_weight:y.raw_substrate&&y.supplied_roll_weight?parseFloat(y.supplied_roll_weight):null,master_deckle_width_mm:y.raw_substrate&&y.master_deckle_width_mm?parseFloat(y.master_deckle_width_mm):null};u?(await Pn(u.id,e),Bt.success("Material updated successfully")):(await Dn(e),Bt.success("Material created successfully")),d(!1),_()}catch(s){var t,a;console.error("Failed to save material:",s);const e=(null===(t=s.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.detail)||"Failed to save material";Bt.error(e)}else Bt.error("Please fix the errors below")},className:"p-6",children:[(0,mi.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,mi.jsx)("h2",{className:"text-2xl font-bold text-white",children:u?"Edit Material":"Add New Material"}),(0,mi.jsx)("button",{type:"button",onClick:()=>d(!1),className:"text-gray-400 hover:text-white transition-colors",children:(0,mi.jsx)(nl,{className:"h-6 w-6"})})]}),(0,mi.jsxs)("div",{className:"mb-8",children:[(0,mi.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Basic Information"}),(0,mi.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Supplier *"}),(0,mi.jsxs)("select",{name:"supplier_id",value:y.supplier_id,onChange:e=>{const t=a.find(t=>t.id===e.target.value);b(a=>m(m({},a),{},{supplier_id:e.target.value,supplier_name:t?t.supplier_name:""})),v.supplier_id&&j(e=>m(m({},e),{},{supplier_id:""}))},className:"misty-select w-full ".concat(v.supplier_id?"border-red-500":""),required:!0,children:[(0,mi.jsx)("option",{value:"",children:"Select a supplier"}),a.map(e=>(0,mi.jsx)("option",{value:e.id,children:e.supplier_name},e.id))]}),v.supplier_id&&(0,mi.jsx)("p",{className:"text-red-400 text-sm mt-1",children:v.supplier_id})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Product Code *"}),(0,mi.jsx)("input",{type:"text",name:"product_code",value:y.product_code,onChange:C,className:"misty-input w-full ".concat(v.product_code?"border-red-500":""),placeholder:"Enter product code",required:!0}),v.product_code&&(0,mi.jsx)("p",{className:"text-red-400 text-sm mt-1",children:v.product_code})]}),(0,mi.jsxs)("div",{className:"md:col-span-2 grid grid-cols-2 gap-4",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Price *"}),(0,mi.jsx)("input",{type:"number",step:"0.01",min:"0",name:"price",value:y.price,onChange:C,className:"misty-input w-full ".concat(v.price?"border-red-500":""),placeholder:"0.00",required:!0}),v.price&&(0,mi.jsx)("p",{className:"text-red-400 text-sm mt-1",children:v.price})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Currency *"}),(0,mi.jsx)("select",{name:"currency",value:y.currency,onChange:C,className:"misty-select w-full",required:!0,children:[{code:"AUD",symbol:"A$",name:"Australian Dollar"},{code:"USD",symbol:"$",name:"US Dollar"},{code:"EUR",symbol:"\u20ac",name:"Euro"},{code:"GBP",symbol:"\xa3",name:"British Pound"},{code:"JPY",symbol:"\xa5",name:"Japanese Yen"},{code:"CAD",symbol:"C$",name:"Canadian Dollar"},{code:"NZD",symbol:"NZ$",name:"New Zealand Dollar"},{code:"SGD",symbol:"S$",name:"Singapore Dollar"}].map(e=>(0,mi.jsxs)("option",{value:e.code,children:[e.code," (",e.symbol,") - ",e.name]},e.code))})]})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Unit *"}),(0,mi.jsx)("select",{name:"unit",value:y.unit,onChange:C,className:"misty-select w-full ".concat(v.unit?"border-red-500":""),required:!0,children:["m2","By the Box","Single Unit","Tons"].map(e=>(0,mi.jsx)("option",{value:e,children:e},e))}),v.unit&&(0,mi.jsx)("p",{className:"text-red-400 text-sm mt-1",children:v.unit})]}),(0,mi.jsxs)("div",{className:"md:col-span-2",children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Order to Delivery Time *"}),(0,mi.jsx)("input",{type:"text",name:"order_to_delivery_time",value:y.order_to_delivery_time,onChange:C,className:"misty-input w-full ".concat(v.order_to_delivery_time?"border-red-500":""),placeholder:"e.g., 5-7 business days",required:!0}),v.order_to_delivery_time&&(0,mi.jsx)("p",{className:"text-red-400 text-sm mt-1",children:v.order_to_delivery_time})]}),(0,mi.jsxs)("div",{className:"md:col-span-2",children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Material Description *"}),(0,mi.jsx)("textarea",{name:"material_description",value:y.material_description,onChange:C,className:"misty-input w-full ".concat(v.material_description?"border-red-500":""),placeholder:"Enter detailed material description",rows:"3",required:!0}),v.material_description&&(0,mi.jsx)("p",{className:"text-red-400 text-sm mt-1",children:v.material_description})]})]})]}),(0,mi.jsxs)("div",{className:"mb-6",children:[(0,mi.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,mi.jsx)("input",{type:"checkbox",name:"raw_substrate",checked:y.raw_substrate,onChange:C,className:"form-checkbox h-4 w-4 text-yellow-400 bg-gray-700 border-gray-600 rounded focus:ring-yellow-400"}),(0,mi.jsx)("span",{className:"text-white font-medium",children:"Raw Substrate"})]}),(0,mi.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"Check this if the material is a raw substrate with additional specifications"})]}),y.raw_substrate&&(0,mi.jsxs)("div",{className:"mb-8",children:[(0,mi.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Raw Substrate Specifications"}),(0,mi.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"GSM *"}),(0,mi.jsx)("input",{type:"text",name:"gsm",value:y.gsm,onChange:C,className:"misty-input w-full ".concat(v.gsm?"border-red-500":""),placeholder:"Enter GSM value"}),v.gsm&&(0,mi.jsx)("p",{className:"text-red-400 text-sm mt-1",children:v.gsm})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Thickness (mm)"}),(0,mi.jsx)("input",{type:"number",step:"0.01",min:"0",name:"thickness_mm",value:y.thickness_mm,onChange:C,className:"misty-input w-full",placeholder:"0.00"})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Burst Strength (kPa)"}),(0,mi.jsx)("input",{type:"number",step:"0.01",min:"0",name:"burst_strength_kpa",value:y.burst_strength_kpa,onChange:C,className:"misty-input w-full",placeholder:"0.00"})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"PlyBonding (j/m\xb2)"}),(0,mi.jsx)("input",{type:"number",step:"0.01",min:"0",name:"ply_bonding_jm2",value:y.ply_bonding_jm2,onChange:C,className:"misty-input w-full",placeholder:"0.00"})]}),(0,mi.jsxs)("div",{className:"md:col-span-2",children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Moisture (%)"}),(0,mi.jsx)("input",{type:"number",step:"0.01",min:"0",max:"100",name:"moisture_percent",value:y.moisture_percent,onChange:C,className:"misty-input w-full",placeholder:"0.00"})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Supplied Roll Weight (kg)"}),(0,mi.jsx)("input",{type:"number",step:"0.01",min:"0",name:"supplied_roll_weight",value:y.supplied_roll_weight,onChange:C,className:"misty-input w-full",placeholder:"0.00"})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Master Deckle Width (mm)"}),(0,mi.jsx)("input",{type:"number",step:"0.01",min:"0",name:"master_deckle_width_mm",value:y.master_deckle_width_mm,onChange:C,className:"misty-input w-full",placeholder:"0.00"})]}),D()&&(0,mi.jsxs)("div",{className:"md:col-span-2 mt-4 p-4 bg-gray-800 rounded-lg border border-gray-600",children:[(0,mi.jsx)("h4",{className:"text-md font-semibold text-white mb-2",children:"Calculated Linear Meters"}),(0,mi.jsxs)("div",{className:"flex items-center justify-between",children:[(0,mi.jsxs)("span",{className:"text-gray-300",children:["Based on GSM (",y.gsm,"), Weight (",y.supplied_roll_weight," kg), Width (",y.master_deckle_width_mm," mm)"]}),(0,mi.jsxs)("span",{className:"text-yellow-400 font-bold text-lg",children:[D()," meters"]})]})]})]})]}),(0,mi.jsx)("div",{className:"pt-6 border-t border-gray-700",children:(0,mi.jsxs)("div",{className:"flex items-center justify-end space-x-4",children:[u&&(0,mi.jsxs)("button",{type:"button",onClick:()=>S(u),className:"misty-button misty-button-danger mr-auto",children:[(0,mi.jsx)(Ol,{className:"h-4 w-4 mr-2"}),"Delete Material"]}),(0,mi.jsx)("button",{type:"button",onClick:()=>d(!1),className:"misty-button misty-button-secondary",children:"Cancel"}),(0,mi.jsx)("button",{type:"submit",className:"misty-button misty-button-primary",children:u?"Update Material":"Create Material"})]})})]})})}),h&&(0,mi.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,mi.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4",children:[(0,mi.jsxs)("div",{className:"flex items-center mb-4",children:[(0,mi.jsx)(Ol,{className:"h-6 w-6 text-red-400 mr-2"}),(0,mi.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Confirm Delete"})]}),(0,mi.jsxs)("p",{className:"text-gray-300 mb-6",children:['Are you sure you want to delete the material "',null===f||void 0===f?void 0:f.product_code,'" from ',null===f||void 0===f?void 0:f.supplier,"? This action cannot be undone."]}),(0,mi.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,mi.jsx)("button",{onClick:()=>{x(!1),g(null)},className:"misty-button misty-button-secondary",children:"Cancel"}),(0,mi.jsxs)("button",{onClick:async()=>{if(f)try{await Tn(f.id),Bt.success("Material deleted successfully"),d(!1),x(!1),g(null),_()}catch(e){console.error("Failed to delete material:",e),Bt.error("Failed to delete material"),x(!1),g(null)}},className:"misty-button misty-button-danger",children:[(0,mi.jsx)(Ol,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})})]})})},Rx=()=>{const[e,t]=(0,n.useState)([]),[a,s]=(0,n.useState)(!0),[r,i]=(0,n.useState)(""),[l,o]=(0,n.useState)(!1),[c,d]=(0,n.useState)(null),[u,p]=(0,n.useState)({supplier_name:"",contact_person:"",phone_number:"",email:"",physical_address:"",post_code:"",currency_accepted:"AUD",bank_name:"",bank_address:"",account_name:"",bank_account_number:"",swift_code:""}),[h,x]=(0,n.useState)({});(0,n.useEffect)(()=>{f()},[]);const f=async()=>{try{s(!0);const e=await Ln();t(e.data)}catch(e){console.error("Failed to load suppliers:",e),Bt.error("Failed to load suppliers")}finally{s(!1)}},g=()=>{d(null),p({supplier_name:"",contact_person:"",phone_number:"",email:"",physical_address:"",post_code:"",currency_accepted:"AUD",bank_name:"",bank_address:"",account_name:"",bank_account_number:"",swift_code:""}),x({}),o(!0)},y=e=>{d(e),p({supplier_name:e.supplier_name,contact_person:e.contact_person||"",phone_number:e.phone_number,email:e.email,physical_address:e.physical_address,post_code:e.post_code,currency_accepted:e.currency_accepted||"AUD",bank_name:e.bank_name,bank_address:e.bank_address,account_name:e.account_name||"",bank_account_number:e.bank_account_number,swift_code:e.swift_code||""}),x({}),o(!0)},b=async e=>{if(window.confirm('Are you sure you want to delete the supplier "'.concat(e.supplier_name,'"?')))try{await On(e.id),Bt.success("Supplier deleted successfully"),o(!1),f()}catch(t){console.error("Failed to delete supplier:",t),Bt.error("Failed to delete supplier")}},v=e=>{const{name:t,value:a}=e.target;p(e=>m(m({},e),{},{[t]:a})),h[t]&&x(e=>m(m({},e),{},{[t]:""}))},j=e.filter(e=>e.supplier_name.toLowerCase().includes(r.toLowerCase())||e.email.toLowerCase().includes(r.toLowerCase()));return a?(0,mi.jsx)(hl,{children:(0,mi.jsx)("div",{className:"p-8",children:(0,mi.jsxs)("div",{className:"animate-pulse",children:[(0,mi.jsx)("div",{className:"h-8 bg-gray-700 rounded w-1/4 mb-8"}),(0,mi.jsx)("div",{className:"space-y-4",children:[...Array(5)].map((e,t)=>(0,mi.jsx)("div",{className:"h-16 bg-gray-700 rounded"},t))})]})})}):(0,mi.jsx)(hl,{children:(0,mi.jsxs)("div",{className:"p-8",children:[(0,mi.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"Suppliers List"}),(0,mi.jsx)("p",{className:"text-gray-400",children:"Manage supplier information and contact details \u2022 Double-click any supplier to edit"})]}),(0,mi.jsxs)("button",{onClick:g,className:"misty-button misty-button-primary",children:[(0,mi.jsx)(Cl,{className:"h-5 w-5 mr-2"}),"Add Supplier"]})]}),(0,mi.jsx)("div",{className:"mb-6",children:(0,mi.jsxs)("div",{className:"relative max-w-md",children:[(0,mi.jsx)(io,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,mi.jsx)("input",{type:"text",placeholder:"",value:r,onChange:e=>i(e.target.value),className:"misty-input pl-16 w-full"})]})}),j.length>0?(0,mi.jsx)("div",{className:"misty-table",children:(0,mi.jsxs)("table",{className:"w-full",children:[(0,mi.jsx)("thead",{children:(0,mi.jsxs)("tr",{children:[(0,mi.jsx)("th",{className:"py-2 text-sm",children:"Supplier Name"}),(0,mi.jsx)("th",{className:"py-2 text-sm",children:"Contact Person"}),(0,mi.jsx)("th",{className:"py-2 text-sm",children:"Email"}),(0,mi.jsx)("th",{className:"py-2 text-sm",children:"Phone"}),(0,mi.jsx)("th",{className:"py-2 text-sm",children:"Currency"}),(0,mi.jsx)("th",{className:"py-2 text-sm",children:"Bank"}),(0,mi.jsx)("th",{className:"py-2 text-sm",children:"Actions"})]})}),(0,mi.jsx)("tbody",{children:j.map(e=>(0,mi.jsxs)("tr",{onDoubleClick:()=>y(e),className:"cursor-pointer hover:bg-gray-700/50 transition-colors border-b border-gray-700/50",title:"Double-click to edit",children:[(0,mi.jsx)("td",{className:"font-medium text-sm py-2 px-3",children:e.supplier_name}),(0,mi.jsx)("td",{className:"text-sm py-2 px-3",children:e.contact_person||"\u2014"}),(0,mi.jsx)("td",{className:"text-sm py-2 px-3",children:e.email}),(0,mi.jsx)("td",{className:"text-sm py-2 px-3",children:e.phone_number}),(0,mi.jsx)("td",{className:"text-yellow-400 font-medium text-sm py-2 px-3",children:e.currency_accepted}),(0,mi.jsx)("td",{className:"text-sm py-2 px-3",children:e.bank_name}),(0,mi.jsx)("td",{className:"py-2 px-3",children:(0,mi.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,mi.jsx)("button",{onClick:t=>{t.stopPropagation(),y(e)},className:"text-blue-400 hover:text-blue-300 transition-colors",title:"Edit supplier",children:(0,mi.jsx)(ho,{className:"h-4 w-4"})}),(0,mi.jsx)("button",{onClick:t=>{t.stopPropagation(),b(e)},className:"text-red-400 hover:text-red-300 transition-colors",title:"Delete supplier",children:(0,mi.jsx)(Ol,{className:"h-4 w-4"})})]})})]},e.id))})]})}):(0,mi.jsxs)("div",{className:"text-center py-12",children:[(0,mi.jsx)("div",{className:"mx-auto h-12 w-12 text-gray-400 mb-4",children:"\ud83c\udfe2"}),(0,mi.jsx)("h3",{className:"text-sm font-medium text-gray-300",children:r?"No suppliers found":"No suppliers"}),(0,mi.jsx)("p",{className:"mt-1 text-sm text-gray-400",children:r?"Try adjusting your search criteria.":"Get started by adding your first supplier."}),!r&&(0,mi.jsx)("div",{className:"mt-6",children:(0,mi.jsxs)("button",{onClick:g,className:"misty-button misty-button-primary",children:[(0,mi.jsx)(Cl,{className:"h-5 w-5 mr-2"}),"Add Supplier"]})})]}),l&&(0,mi.jsx)("div",{className:"modal-overlay",onClick:e=>e.target===e.currentTarget&&o(!1),children:(0,mi.jsx)("div",{className:"modal-content max-w-4xl max-h-[90vh] overflow-y-auto",children:(0,mi.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};return u.supplier_name.trim()||(e.supplier_name="Supplier name is required"),u.phone_number.trim()||(e.phone_number="Phone number is required"),u.email.trim()?/\S+@\S+\.\S+/.test(u.email)||(e.email="Email is not valid"):e.email="Email is required",u.physical_address.trim()||(e.physical_address="Physical address is required"),u.post_code.trim()||(e.post_code="Post code is required"),u.bank_name.trim()||(e.bank_name="Bank name is required"),u.account_name.trim()||(e.account_name="Account name is required"),u.bank_account_number.trim()||(e.bank_account_number="Bank account number is required"),x(e),0===Object.keys(e).length})())try{c?(await Fn(c.id,u),Bt.success("Supplier updated successfully")):(await Rn(u),Bt.success("Supplier created successfully")),o(!1),f()}catch(s){var t,a;console.error("Failed to save supplier:",s);const e=(null===(t=s.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.detail)||"Failed to save supplier";Bt.error(e)}else Bt.error("Please fix the errors below")},className:"p-6",children:[(0,mi.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,mi.jsx)("h2",{className:"text-2xl font-bold text-white",children:c?"Edit Supplier":"Add New Supplier"}),(0,mi.jsx)("button",{type:"button",onClick:()=>o(!1),className:"text-gray-400 hover:text-white transition-colors",children:(0,mi.jsx)(nl,{className:"h-6 w-6"})})]}),(0,mi.jsxs)("div",{className:"mb-8",children:[(0,mi.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Basic Information"}),(0,mi.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,mi.jsxs)("div",{className:"md:col-span-2",children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Supplier Name *"}),(0,mi.jsx)("input",{type:"text",name:"supplier_name",value:u.supplier_name,onChange:v,className:"misty-input w-full ".concat(h.supplier_name?"border-red-500":""),placeholder:"Enter supplier name",required:!0}),h.supplier_name&&(0,mi.jsx)("p",{className:"text-red-400 text-sm mt-1",children:h.supplier_name})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Contact Person"}),(0,mi.jsx)("input",{type:"text",name:"contact_person",value:u.contact_person,onChange:v,className:"misty-input w-full",placeholder:"Enter contact person name"})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Phone Number *"}),(0,mi.jsx)("input",{type:"text",name:"phone_number",value:u.phone_number,onChange:v,className:"misty-input w-full ".concat(h.phone_number?"border-red-500":""),placeholder:"Enter phone number",required:!0}),h.phone_number&&(0,mi.jsx)("p",{className:"text-red-400 text-sm mt-1",children:h.phone_number})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Email *"}),(0,mi.jsx)("input",{type:"email",name:"email",value:u.email,onChange:v,className:"misty-input w-full ".concat(h.email?"border-red-500":""),placeholder:"Enter email address",required:!0}),h.email&&(0,mi.jsx)("p",{className:"text-red-400 text-sm mt-1",children:h.email})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Currency Accepted *"}),(0,mi.jsx)("select",{name:"currency_accepted",value:u.currency_accepted,onChange:v,className:"misty-select w-full",required:!0,children:["AUD","USD","EUR","GBP","JPY","CAD","NZD","SGD"].map(e=>(0,mi.jsx)("option",{value:e,children:e},e))})]}),(0,mi.jsxs)("div",{className:"md:col-span-2",children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Physical Address *"}),(0,mi.jsx)("textarea",{name:"physical_address",value:u.physical_address,onChange:v,className:"misty-input w-full ".concat(h.physical_address?"border-red-500":""),placeholder:"Enter physical business address",rows:"2",required:!0}),h.physical_address&&(0,mi.jsx)("p",{className:"text-red-400 text-sm mt-1",children:h.physical_address})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Post Code *"}),(0,mi.jsx)("input",{type:"text",name:"post_code",value:u.post_code,onChange:v,className:"misty-input w-full ".concat(h.post_code?"border-red-500":""),placeholder:"Enter post code",required:!0}),h.post_code&&(0,mi.jsx)("p",{className:"text-red-400 text-sm mt-1",children:h.post_code})]})]})]}),(0,mi.jsxs)("div",{className:"mb-8",children:[(0,mi.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Bank Details"}),(0,mi.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Bank Name *"}),(0,mi.jsx)("input",{type:"text",name:"bank_name",value:u.bank_name,onChange:v,className:"misty-input w-full ".concat(h.bank_name?"border-red-500":""),placeholder:"Enter bank name",required:!0}),h.bank_name&&(0,mi.jsx)("p",{className:"text-red-400 text-sm mt-1",children:h.bank_name})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Account Name *"}),(0,mi.jsx)("input",{type:"text",name:"account_name",value:u.account_name,onChange:v,className:"misty-input w-full ".concat(h.account_name?"border-red-500":""),placeholder:"Enter account holder name",required:!0}),h.account_name&&(0,mi.jsx)("p",{className:"text-red-400 text-sm mt-1",children:h.account_name})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Bank Account Number *"}),(0,mi.jsx)("input",{type:"text",name:"bank_account_number",value:u.bank_account_number,onChange:v,className:"misty-input w-full ".concat(h.bank_account_number?"border-red-500":""),placeholder:"Enter bank account number",required:!0}),h.bank_account_number&&(0,mi.jsx)("p",{className:"text-red-400 text-sm mt-1",children:h.bank_account_number})]}),(0,mi.jsxs)("div",{className:"md:col-span-2",children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Bank Address"}),(0,mi.jsx)("textarea",{name:"bank_address",value:u.bank_address,onChange:v,className:"misty-input w-full",placeholder:"Enter bank address",rows:"2"})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"SWIFT Code"}),(0,mi.jsx)("input",{type:"text",name:"swift_code",value:u.swift_code,onChange:v,className:"misty-input w-full",placeholder:"Enter SWIFT code (optional)"})]})]})]}),(0,mi.jsxs)("div",{className:"flex justify-between pt-6 border-t border-gray-700",children:[(0,mi.jsx)("div",{children:c&&(0,mi.jsxs)("button",{type:"button",onClick:()=>b(c),className:"misty-button misty-button-danger",children:[(0,mi.jsx)(Ol,{className:"h-4 w-4 mr-2"}),"Delete Supplier"]})}),(0,mi.jsxs)("div",{className:"flex space-x-3",children:[(0,mi.jsx)("button",{type:"button",onClick:()=>o(!1),className:"misty-button misty-button-secondary",children:"Cancel"}),(0,mi.jsx)("button",{type:"submit",className:"misty-button misty-button-primary",children:c?"Update Supplier":"Create Supplier"})]})]})]})})})]})})},Fx=["title","titleId"];function Ox(e,t){let{title:a,titleId:s}=e,r=l(e,Fx);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},r),a?n.createElement("title",{id:s},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 12h14"}))}const Mx=n.forwardRef(Ox),Ix=()=>{const[e,t]=(0,n.useState)([]),[a,s]=(0,n.useState)([]),[r,i]=(0,n.useState)([]),[l,o]=(0,n.useState)([]),[c,d]=(0,n.useState)([]),u=[{id:"cw_15_20",coreRange:"15\u201320 mm",paperWidth:"29\u201331 mm",beltSize:"30 mm",recommendedAngle:"72\xb0",workableRange:"70\u201374\xb0",lengthFactor:"3.236",displayName:"15-20mm Core (72\xb0 angle, 29-31mm paper)"},{id:"cw_21_30",coreRange:"21\u201330 mm",paperWidth:"37\u201341 mm",beltSize:"40 mm",recommendedAngle:"70\xb0",workableRange:"68\u201373\xb0",lengthFactor:"2.924",displayName:"21-30mm Core (70\xb0 angle, 37-41mm paper)"},{id:"cw_31_50",coreRange:"31\u201350 mm",paperWidth:"57\u201361 mm",beltSize:"60 mm",recommendedAngle:"68\xb0",workableRange:"66\u201372\xb0",lengthFactor:"2.670",displayName:"31-50mm Core (68\xb0 angle, 57-61mm paper)"},{id:"cw_51_70",coreRange:"51\u201370 mm",paperWidth:"76\u201381 mm",beltSize:"80 mm",recommendedAngle:"66\xb0",workableRange:"64\u201370\xb0",lengthFactor:"2.459",displayName:"51-70mm Core (66\xb0 angle, 76-81mm paper)"},{id:"cw_71_120",coreRange:"71\u2013120 mm",paperWidth:"103\u2013106 mm",beltSize:"105 mm",recommendedAngle:"65\xb0",workableRange:"62\u201368\xb0",lengthFactor:"2.366",displayName:"71-120mm Core (65\xb0 angle, 103-106mm paper)"},{id:"cw_121_200",coreRange:"121\u2013200 mm",paperWidth:"118\u2013122 mm",beltSize:"120 mm",recommendedAngle:"64\xb0",workableRange:"60\u201366\xb0",lengthFactor:"2.281",displayName:"121-200mm Core (64\xb0 angle, 118-122mm paper)"},{id:"cw_201_plus",coreRange:"> 201 mm",paperWidth:"148\u2013152 mm",beltSize:"150 mm",recommendedAngle:"62\xb0",workableRange:"58\u201365\xb0",lengthFactor:"2.130",displayName:"> 201mm Core (62\xb0 angle, 148-152mm paper)"}],[p,h]=(0,n.useState)(!0),[x,f]=(0,n.useState)(""),[g,y]=(0,n.useState)(!1),[b,v]=(0,n.useState)(null),[j,w]=(0,n.useState)(!1),[_,N]=(0,n.useState)(null),[k,S]=(0,n.useState)({product_name:"",product_type:"",specifications:{},materials_composition:[],material_layers:[],machinery:[],manufacturing_notes:"",selected_thickness:null,internal_diameter:"",wall_thickness_required:"",selected_material_id:"",layers_required:0,layer_specifications:[],core_winding_spec_id:"",grams_of_glue_per_layer_meter:"",pallet_dimensions:{length:"",width:"",height:""},pallet_price:"",pallet_currency:"AUD",pallet_supplier:"",box_dimensions:{length:"",width:"",height:""},box_wall_thickness:"",box_flute_type:"",box_supplier:"",box_price:"",box_currency:"AUD",plastic_thickness:"",plastic_composite:"",plastic_dimensions:{width:"",length:"",height:""},plastic_supplier:"",plastic_price:"",plastic_currency:"AUD",tape_thickness:"",tape_size:{width:"",length:""},tape_adhesive_type:"",tape_substrate_type:"",tape_supplier:"",tape_price:"",tape_currency:"AUD"}),[C,E]=(0,n.useState)({}),[D,P]=(0,n.useState)(0),[A,T]=(0,n.useState)([]);(0,n.useEffect)(()=>{I(),L(),R(),F(),O()},[]);const L=async()=>{try{const e=await En();s(e.data)}catch(e){console.error("Failed to load materials:",e),Bt.error("Failed to load materials")}},R=async()=>{try{const e=await Cn();i(e.data)}catch(e){console.error("Failed to load products:",e),Bt.error("Failed to load products")}},F=async()=>{try{const e=await Ln();o(e.data)}catch(e){console.error("Failed to load suppliers:",e),Bt.error("Failed to load suppliers")}},O=async()=>{try{const e=await Br();d(e.data)}catch(e){console.error("Failed to load machinery rates:",e)}},M=e=>{if(!e)return null;try{const[t,a]=e.split(":").map(Number);return t+a/60}catch(t){return null}},I=async()=>{try{h(!0);const e=await Mn();t(e.data)}catch(e){console.error("Failed to load product specifications:",e),Bt.error("Failed to load product specifications")}finally{h(!1)}},q=()=>{v(null),S({product_name:"",product_type:"Spiral Paper Core",specifications:{},materials_composition:[],material_layers:[],machinery:[],manufacturing_notes:"",selected_thickness:null,internal_diameter:"",wall_thickness_required:"",selected_material_id:"",layers_required:0,layer_specifications:[],core_winding_spec_id:"",grams_of_glue_per_layer_meter:"",pallet_dimensions:{length:"",width:"",height:""},pallet_price:"",pallet_currency:"AUD",pallet_supplier:"",box_dimensions:{length:"",width:"",height:""},box_wall_thickness:"",box_flute_type:"",box_supplier:"",box_price:"",box_currency:"AUD",plastic_thickness:"",plastic_composite:"",plastic_dimensions:{width:"",length:"",height:""},plastic_supplier:"",plastic_price:"",plastic_currency:"AUD",tape_thickness:"",tape_size:{width:"",length:""},tape_adhesive_type:"",tape_substrate_type:"",tape_supplier:"",tape_price:"",tape_currency:"AUD"}),P(0),T([]),E({}),y(!0)},B=e=>{var t,a,s,n,r,i,l,o,c,d,u,p,h,x,f,g,b,j,w,_,N,k,C,D,A,L,R,F,O,I,q,B,z,U,W,H,G,V,$,Q,Y,J,Z,X,K,ee,te;v(e),S({product_name:e.product_name,product_type:e.product_type,specifications:e.specifications||{},materials_composition:e.materials_composition||[],material_layers:e.material_layers||[],machinery:(e.machinery||[]).map(e=>m(m({},e),{},{setup_hours:e.setup_hours||(e.setup_time?M(e.setup_time):null),pack_up_hours:e.pack_up_hours||(e.pack_up_time?M(e.pack_up_time):null)})),manufacturing_notes:e.manufacturing_notes||"",selected_thickness:e.selected_thickness||null,internal_diameter:(null===(t=e.specifications)||void 0===t?void 0:t.internal_diameter)||"",wall_thickness_required:(null===(a=e.specifications)||void 0===a?void 0:a.wall_thickness_required)||"",selected_material_id:(null===(s=e.specifications)||void 0===s?void 0:s.selected_material_id)||"",layers_required:(null===(n=e.specifications)||void 0===n?void 0:n.layers_required)||0,layer_specifications:(null===(r=e.specifications)||void 0===r?void 0:r.layer_specifications)||[],core_winding_spec_id:e.core_winding_spec_id||"",grams_of_glue_per_layer_meter:(null===(i=e.specifications)||void 0===i?void 0:i.grams_of_glue_per_layer_meter)||"",pallet_dimensions:{length:(null===(l=e.specifications)||void 0===l||null===(o=l.dimensions)||void 0===o?void 0:o.length)||"",width:(null===(c=e.specifications)||void 0===c||null===(d=c.dimensions)||void 0===d?void 0:d.width)||"",height:(null===(u=e.specifications)||void 0===u||null===(p=u.dimensions)||void 0===p?void 0:p.height)||""},pallet_price:(null===(h=e.specifications)||void 0===h?void 0:h.price)||"",pallet_currency:(null===(x=e.specifications)||void 0===x?void 0:x.currency)||"AUD",pallet_supplier:(null===(f=e.specifications)||void 0===f?void 0:f.supplier)||"",box_dimensions:{length:(null===(g=e.specifications)||void 0===g||null===(b=g.dimensions)||void 0===b?void 0:b.length)||"",width:(null===(j=e.specifications)||void 0===j||null===(w=j.dimensions)||void 0===w?void 0:w.width)||"",height:(null===(_=e.specifications)||void 0===_||null===(N=_.dimensions)||void 0===N?void 0:N.height)||""},box_wall_thickness:(null===(k=e.specifications)||void 0===k?void 0:k.wall_thickness)||"",box_flute_type:(null===(C=e.specifications)||void 0===C?void 0:C.flute_type)||"",box_supplier:(null===(D=e.specifications)||void 0===D?void 0:D.supplier)||"",box_price:(null===(A=e.specifications)||void 0===A?void 0:A.price)||"",box_currency:(null===(L=e.specifications)||void 0===L?void 0:L.currency)||"AUD",plastic_thickness:(null===(R=e.specifications)||void 0===R?void 0:R.thickness)||"",plastic_composite:(null===(F=e.specifications)||void 0===F?void 0:F.composite)||"",plastic_dimensions:{width:(null===(O=e.specifications)||void 0===O||null===(I=O.dimensions)||void 0===I?void 0:I.width)||"",length:(null===(q=e.specifications)||void 0===q||null===(B=q.dimensions)||void 0===B?void 0:B.length)||"",height:(null===(z=e.specifications)||void 0===z||null===(U=z.dimensions)||void 0===U?void 0:U.height)||""},plastic_supplier:(null===(W=e.specifications)||void 0===W?void 0:W.supplier)||"",plastic_price:(null===(H=e.specifications)||void 0===H?void 0:H.price)||"",plastic_currency:(null===(G=e.specifications)||void 0===G?void 0:G.currency)||"AUD",tape_thickness:(null===(V=e.specifications)||void 0===V?void 0:V.thickness)||"",tape_size:{width:(null===($=e.specifications)||void 0===$||null===(Q=$.size)||void 0===Q?void 0:Q.width)||"",length:(null===(Y=e.specifications)||void 0===Y||null===(J=Y.size)||void 0===J?void 0:J.length)||""},tape_adhesive_type:(null===(Z=e.specifications)||void 0===Z?void 0:Z.adhesive_type)||"",tape_substrate_type:(null===(X=e.specifications)||void 0===X?void 0:X.substrate_type)||"",tape_supplier:(null===(K=e.specifications)||void 0===K?void 0:K.supplier)||"",tape_price:(null===(ee=e.specifications)||void 0===ee?void 0:ee.price)||"",tape_currency:(null===(te=e.specifications)||void 0===te?void 0:te.currency)||"AUD"}),P(e.calculated_total_thickness||0),T(e.thickness_options||[]),E({}),y(!0)},z=e=>{N(e),w(!0)},U=e=>{const{name:t,value:a}=e.target;S(e=>m(m({},e),{},{[t]:a})),C[t]&&E(e=>m(m({},e),{},{[t]:""}))},W=(e,t)=>{S(a=>m(m({},a),{},{specifications:m(m({},a.specifications),{},{[e]:t})}))},H=(e,t)=>{const a=parseInt(e);if(!a||a<1||a>5)return{allocation:null,overlap:null};const s={1:{base:45,overlap:1.2},2:{base:25,overlap:1.1},3:{base:20,overlap:1},4:{base:7,overlap:.9},5:{base:3,overlap:.8}}[a];let n=s.base;if(1===t)n=100;else if(2===t)n=1===a?70:30;else if(3===t){n={1:50,2:30,3:20}[a]||s.base}return{allocation:n,overlap:s.overlap}},G=(e,t,s)=>{S(n=>{const i=[...n.material_layers],l=m({},i[e]);if(l[t]=s,"spiral_sequence"===t&&s){const e=i.filter(e=>e.spiral_sequence).length,t=H(s,e);if(null!==t.allocation){if(l.spiral_allocation_percent=t.allocation,l.overlap_factor=t.overlap,l.winding_direction||(l.winding_direction=parseInt(s)%2===1?"clockwise":"counterclockwise"),!l.tension_level){const e={1:"high",2:"medium",3:"medium",4:"low",5:"low"};l.tension_level=e[s]||"medium"}if(!l.feed_rate_mpm){const e={1:15,2:12,3:10,4:8,5:6};l.feed_rate_mpm=e[s]||10}}console.log("Auto-calculated for sequence ".concat(s,":"),{allocation:t.allocation,overlap:t.overlap,winding:l.winding_direction,tension:l.tension_level,feedRate:l.feed_rate_mpm})}if("material_id"===t&&s){const e=[...a,...r].find(e=>e.id===s);if(e){l.material_name=e.material_description||e.product_name||e.material_name||"Unknown Material",l.thickness=e.thickness_mm||e.thickness||0;const t=e.gsm;l.gsm=null!==t&&void 0!==t&&""!==t?"string"===typeof t?parseFloat(t):Number(t):null,l.product_name=e.material_description||e.product_name||e.material_name||"Unknown Product",console.log("Material selection update:",{materialId:s,itemFound:!!e,gsmRaw:t,gsmProcessed:l.gsm,layerUpdated:l})}else l.material_name="Unknown Material",l.thickness=0,l.gsm=null,l.product_name="Unknown Product"}return i[e]=l,m(m({},n),{},{material_layers:i})}),setTimeout(()=>{V()},0)},V=()=>{const e=k.material_layers.reduce((e,t)=>e+(parseFloat(t.thickness)||0)*(parseFloat(t.quantity)||1),0);P(e),S(t=>m(m({},t),{},{selected_thickness:Math.round(1e3*e)/1e3}))},$=(e,t,a)=>{S(s=>m(m({},s),{},{machinery:s.machinery.map((s,n)=>n===e?m(m({},s),{},{[t]:a}):s)}))},Q=(e,t,a,s)=>{S(n=>m(m({},n),{},{machinery:n.machinery.map((n,r)=>r===e?m(m({},n),{},{functions:n.functions.map((e,n)=>{if(n===t){const t=m(m({},e),{},{[a]:s});if("function"===a){const e=c.find(e=>e.function===s);e&&(t.rate_per_hour=e.rate_per_hour)}return t}return e})}):n)}))},Y=e.filter(e=>e.product_name.toLowerCase().includes(x.toLowerCase())||e.product_type.toLowerCase().includes(x.toLowerCase()));return p?(0,mi.jsx)(hl,{children:(0,mi.jsx)("div",{className:"p-8",children:(0,mi.jsxs)("div",{className:"animate-pulse",children:[(0,mi.jsx)("div",{className:"h-8 bg-gray-700 rounded w-1/4 mb-8"}),(0,mi.jsx)("div",{className:"space-y-4",children:[...Array(5)].map((e,t)=>(0,mi.jsx)("div",{className:"h-16 bg-gray-700 rounded"},t))})]})})}):(0,mi.jsx)(hl,{children:(0,mi.jsxs)("div",{className:"p-8",children:[(0,mi.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"Product Specifications"}),(0,mi.jsx)("p",{className:"text-gray-400",children:"Manage manufacturing specifications for products \u2022 Double-click any specification to edit"})]}),(0,mi.jsxs)("button",{onClick:q,className:"misty-button misty-button-primary",children:[(0,mi.jsx)(Cl,{className:"h-5 w-5 mr-2"}),"Add Specification"]})]}),(0,mi.jsx)("div",{className:"mb-6",children:(0,mi.jsxs)("div",{className:"relative max-w-md",children:[(0,mi.jsx)(io,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,mi.jsx)("input",{type:"text",placeholder:"",value:x,onChange:e=>f(e.target.value),className:"misty-input pl-16 w-full"})]})}),Y.length>0?(0,mi.jsx)("div",{className:"misty-table",children:(0,mi.jsxs)("table",{className:"w-full",children:[(0,mi.jsx)("thead",{children:(0,mi.jsxs)("tr",{children:[(0,mi.jsx)("th",{className:"py-2 text-sm",children:"Product Name"}),(0,mi.jsx)("th",{className:"py-2 text-sm",children:"Type"}),(0,mi.jsx)("th",{className:"py-2 text-sm",children:"Materials"}),(0,mi.jsx)("th",{className:"py-2 text-sm",children:"Specifications"}),(0,mi.jsx)("th",{className:"py-2 text-sm",children:"Notes"}),(0,mi.jsx)("th",{className:"py-2 text-sm",children:"Actions"})]})}),(0,mi.jsx)("tbody",{children:Y.map(e=>{var t;return(0,mi.jsxs)("tr",{onDoubleClick:()=>B(e),className:"cursor-pointer hover:bg-gray-700/50 transition-colors border-b border-gray-700/50",title:"Double-click to edit",children:[(0,mi.jsx)("td",{className:"font-medium text-sm py-2 px-3",children:e.product_name}),(0,mi.jsx)("td",{className:"text-sm py-2 px-3",children:e.product_type}),(0,mi.jsx)("td",{className:"text-sm py-2 px-3",children:(null===(t=e.materials_composition)||void 0===t?void 0:t.length)>0?"".concat(e.materials_composition.length," materials"):"\u2014"}),(0,mi.jsx)("td",{className:"text-sm py-2 px-3",children:Object.keys(e.specifications||{}).length>0?"".concat(Object.keys(e.specifications).length," specs"):"\u2014"}),(0,mi.jsx)("td",{className:"text-gray-300 text-sm py-2 px-3 max-w-xs truncate",children:e.manufacturing_notes||"\u2014"}),(0,mi.jsx)("td",{className:"py-2 px-3",children:(0,mi.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,mi.jsx)("button",{onClick:t=>{t.stopPropagation(),B(e)},className:"text-blue-400 hover:text-blue-300 transition-colors",title:"Edit specification",children:(0,mi.jsx)(ho,{className:"h-4 w-4"})}),(0,mi.jsx)("button",{onClick:t=>{t.stopPropagation(),z(e)},className:"text-red-400 hover:text-red-300 transition-colors",title:"Delete specification",children:(0,mi.jsx)(Ol,{className:"h-4 w-4"})})]})})]},e.id)})})]})}):(0,mi.jsxs)("div",{className:"text-center py-12",children:[(0,mi.jsx)("div",{className:"mx-auto h-12 w-12 text-gray-400 mb-4",children:"\ud83d\udccb"}),(0,mi.jsx)("h3",{className:"text-sm font-medium text-gray-300",children:x?"No specifications found":"No product specifications"}),(0,mi.jsx)("p",{className:"mt-1 text-sm text-gray-400",children:x?"Try adjusting your search criteria.":"Get started by adding your first product specification."}),!x&&(0,mi.jsx)("div",{className:"mt-6",children:(0,mi.jsxs)("button",{onClick:q,className:"misty-button misty-button-primary",children:[(0,mi.jsx)(Cl,{className:"h-5 w-5 mr-2"}),"Add Specification"]})})]}),g&&(0,mi.jsx)("div",{className:"modal-overlay",onClick:e=>e.target===e.currentTarget&&y(!1),children:(0,mi.jsxs)("div",{className:"modal-content max-w-6xl max-h-[90vh] overflow-y-auto",children:[(0,mi.jsx)("div",{className:"sticky top-0 bg-gray-900 z-10 p-6 pb-0 border-b border-gray-700",children:(0,mi.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,mi.jsx)("h2",{className:"text-2xl font-bold text-white",children:b?"Edit Product Specification":"Add New Product Specification"}),(0,mi.jsx)("button",{type:"button",onClick:()=>y(!1),className:"text-gray-400 hover:text-white transition-colors",children:(0,mi.jsx)(nl,{className:"h-6 w-6"})})]})}),(0,mi.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!(()=>{const e={};return k.product_name.trim()||(e.product_name="Product name is required"),k.product_type.trim()||(e.product_type="Product type is required"),"Pallet"===k.product_type&&((!k.pallet_dimensions.length||k.pallet_dimensions.length<=0)&&(e.pallet_length="Pallet length is required"),(!k.pallet_dimensions.width||k.pallet_dimensions.width<=0)&&(e.pallet_width="Pallet width is required"),(!k.pallet_dimensions.height||k.pallet_dimensions.height<=0)&&(e.pallet_height="Pallet height is required"),(!k.pallet_price||k.pallet_price<=0)&&(e.pallet_price="Pallet price is required"),k.pallet_supplier.trim()||(e.pallet_supplier="Pallet supplier is required")),"Cardboard Boxes"===k.product_type&&((!k.box_dimensions.length||k.box_dimensions.length<=0)&&(e.box_length="Box length is required"),(!k.box_dimensions.width||k.box_dimensions.width<=0)&&(e.box_width="Box width is required"),(!k.box_dimensions.height||k.box_dimensions.height<=0)&&(e.box_height="Box height is required"),(!k.box_wall_thickness||k.box_wall_thickness<=0)&&(e.box_wall_thickness="Wall thickness is required"),k.box_flute_type.trim()||(e.box_flute_type="Flute type is required"),k.box_supplier.trim()||(e.box_supplier="Supplier is required"),(!k.box_price||k.box_price<=0)&&(e.box_price="Price per unit is required")),"Plastic Bags"===k.product_type&&((!k.plastic_thickness||k.plastic_thickness<=0)&&(e.plastic_thickness="Thickness is required"),k.plastic_composite.trim()||(e.plastic_composite="Composite is required"),(!k.plastic_dimensions.width||k.plastic_dimensions.width<=0)&&(e.plastic_width="Width is required"),(!k.plastic_dimensions.length||k.plastic_dimensions.length<=0)&&(e.plastic_length="Length is required"),(!k.plastic_dimensions.height||k.plastic_dimensions.height<=0)&&(e.plastic_height="Height is required"),k.plastic_supplier.trim()||(e.plastic_supplier="Supplier is required"),(!k.plastic_price||k.plastic_price<=0)&&(e.plastic_price="Price per unit is required")),"Tapes"===k.product_type&&((!k.tape_thickness||k.tape_thickness<=0)&&(e.tape_thickness="Thickness is required"),(!k.tape_size.width||k.tape_size.width<=0)&&(e.tape_width="Width is required"),(!k.tape_size.length||k.tape_size.length<=0)&&(e.tape_length="Length is required"),k.tape_adhesive_type.trim()||(e.tape_adhesive_type="Adhesive type is required"),k.tape_substrate_type.trim()||(e.tape_substrate_type="Substrate type is required"),k.tape_supplier.trim()||(e.tape_supplier="Supplier is required"),(!k.tape_price||k.tape_price<=0)&&(e.tape_price="Price per unit is required")),k.material_layers.forEach((t,a)=>{const s=[];t.material_id&&t.material_id.trim()||s.push("Material selection"),t.layer_type&&t.layer_type.trim()||s.push("Layer type"),(!t.thickness||t.thickness<=0)&&s.push("Thickness"),s.length>0&&(e["material_layer_".concat(a)]="Layer ".concat(a+1,": ").concat(s.join(", ")," required"))}),k.machinery.forEach((t,a)=>{t.machine_name&&t.machine_name.trim()||(e["machinery_".concat(a)]="Machine ".concat(a+1,": Machine type is required"))}),E(e),0===Object.keys(e).length})()){const e=Object.keys(C).length;return void Bt.error("Please fix the ".concat(e," validation error").concat(e>1?"s":""," below"))}try{const e=k.material_layers.map(e=>({material_id:e.material_id||"unknown",material_name:e.material_name||"Unknown Material",product_name:e.product_name||e.material_name||"Unknown Product",layer_type:e.layer_type||"Outer Most Layer",thickness:parseFloat(e.thickness)||0,gsm:e.gsm?"string"===typeof e.gsm?parseFloat(e.gsm):e.gsm:null,quantity:parseFloat(e.quantity)||1,width:e.width?parseFloat(e.width):null,notes:e.notes||"",spiral_allocation_percent:e.spiral_allocation_percent?parseFloat(e.spiral_allocation_percent):null,spiral_sequence:e.spiral_sequence?parseInt(e.spiral_sequence):null,winding_direction:e.winding_direction||null,overlap_factor:e.overlap_factor?parseFloat(e.overlap_factor):null}));let l={product_name:k.product_name,product_type:k.product_type,specifications:k.specifications||{},materials_composition:[],material_layers:e,machinery:k.machinery||[],manufacturing_notes:k.manufacturing_notes||"",selected_thickness:k.selected_thickness||D,core_winding_spec_id:k.core_winding_spec_id};if("Spiral Paper Core"!==k.product_type&&"Composite Core"!==k.product_type||(l.specifications=m(m({},l.specifications),{},{internal_diameter:k.internal_diameter?parseFloat(k.internal_diameter):null,wall_thickness_required:k.wall_thickness_required?parseFloat(k.wall_thickness_required):null,selected_material_id:k.selected_material_id||null,layers_required:k.layers_required||null,layer_specifications:k.layer_specifications||null,grams_of_glue_per_layer_meter:k.grams_of_glue_per_layer_meter?parseFloat(k.grams_of_glue_per_layer_meter):null})),"Pallet"===k.product_type&&(l.specifications=m(m({},l.specifications),{},{dimensions:{length:k.pallet_dimensions.length?parseFloat(k.pallet_dimensions.length):null,width:k.pallet_dimensions.width?parseFloat(k.pallet_dimensions.width):null,height:k.pallet_dimensions.height?parseFloat(k.pallet_dimensions.height):null},price:k.pallet_price?parseFloat(k.pallet_price):null,currency:k.pallet_currency||"AUD",supplier:k.pallet_supplier||null})),"Cardboard Boxes"===k.product_type&&(l.specifications=m(m({},l.specifications),{},{dimensions:{length:k.box_dimensions.length?parseFloat(k.box_dimensions.length):null,width:k.box_dimensions.width?parseFloat(k.box_dimensions.width):null,height:k.box_dimensions.height?parseFloat(k.box_dimensions.height):null},wall_thickness:k.box_wall_thickness?parseFloat(k.box_wall_thickness):null,flute_type:k.box_flute_type||null,supplier:k.box_supplier||null,price:k.box_price?parseFloat(k.box_price):null,currency:k.box_currency||"AUD"})),"Plastic Bags"===k.product_type&&(l.specifications=m(m({},l.specifications),{},{thickness:k.plastic_thickness?parseFloat(k.plastic_thickness):null,composite:k.plastic_composite||null,dimensions:{width:k.plastic_dimensions.width?parseFloat(k.plastic_dimensions.width):null,length:k.plastic_dimensions.length?parseFloat(k.plastic_dimensions.length):null,height:k.plastic_dimensions.height?parseFloat(k.plastic_dimensions.height):null},supplier:k.plastic_supplier||null,price:k.plastic_price?parseFloat(k.plastic_price):null,currency:k.plastic_currency||"AUD"})),"Tapes"===k.product_type&&(l.specifications=m(m({},l.specifications),{},{thickness:k.tape_thickness?parseFloat(k.tape_thickness):null,size:{width:k.tape_size.width?parseFloat(k.tape_size.width):null,length:k.tape_size.length?parseFloat(k.tape_size.length):null},adhesive_type:k.tape_adhesive_type||null,substrate_type:k.tape_substrate_type||null,supplier:k.tape_supplier||null,price:k.tape_price?parseFloat(k.tape_price):null,currency:k.tape_currency||"AUD"})),b){await qn(b.id,l),Bt.success("Product specification updated successfully");try{var t,a;const e=await Un(b.id);(null===(t=e.data)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.synced_count)>0&&Bt.success("Synced material layers to ".concat(e.data.data.synced_count," client product(s)"))}catch(c){console.error("Sync warning:",c),Bt.warning("Product saved but sync to client products failed")}}else{var s,n;const e=await In(l);if(Bt.success("Product specification created successfully"),null!==(s=e.data)&&void 0!==s&&null!==(n=s.data)&&void 0!==n&&n.spec_id)try{var r,i;const t=await Un(e.data.data.spec_id);(null===(r=t.data)||void 0===r||null===(i=r.data)||void 0===i?void 0:i.synced_count)>0&&Bt.success("Synced material layers to ".concat(t.data.data.synced_count," client product(s)"))}catch(c){console.error("Sync warning:",c),Bt.warning("Product created but sync to client products failed")}}y(!1),I()}catch(d){var l,o;console.error("Failed to save specification:",d);let e="Failed to save specification";null!==(l=d.response)&&void 0!==l&&null!==(o=l.data)&&void 0!==o&&o.detail&&(Array.isArray(d.response.data.detail)?e=d.response.data.detail.map(e=>e.msg||e.message||"Validation error").join(", "):"string"===typeof d.response.data.detail&&(e=d.response.data.detail)),Bt.error(e)}},className:"px-6 pb-6",children:[(0,mi.jsxs)("div",{className:"mb-8",children:[(0,mi.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Basic Information"}),(0,mi.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Product Name *"}),(0,mi.jsx)("input",{type:"text",name:"product_name",value:k.product_name,onChange:U,className:"misty-input w-full ".concat(C.product_name?"border-red-500":""),placeholder:"Enter product name",required:!0}),C.product_name&&(0,mi.jsx)("p",{className:"text-red-400 text-sm mt-1",children:C.product_name})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Product Type *"}),(0,mi.jsx)("select",{name:"product_type",value:k.product_type,onChange:U,className:"misty-select w-full ".concat(C.product_type?"border-red-500":""),required:!0,children:["Spiral Paper Core","Composite Core","Pallet","Cardboard Boxes","Plastic Bags","Tapes","Other"].map(e=>(0,mi.jsx)("option",{value:e,children:e},e))}),C.product_type&&(0,mi.jsx)("p",{className:"text-red-400 text-sm mt-1",children:C.product_type})]}),(0,mi.jsxs)("div",{className:"md:col-span-2",children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Manufacturing Notes"}),(0,mi.jsx)("textarea",{name:"manufacturing_notes",value:k.manufacturing_notes,onChange:U,className:"misty-input w-full",placeholder:"Enter manufacturing notes and instructions",rows:"3"})]})]})]}),"Spiral Paper Core"!==k.product_type&&"Composite Core"!==k.product_type&&"Cardboard Boxes"!==k.product_type&&"Pallet"!==k.product_type&&"Plastic Bags"!==k.product_type&&"Tapes"!==k.product_type&&(0,mi.jsxs)("div",{className:"mb-8",children:[(0,mi.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Product Specifications"}),(0,mi.jsxs)("div",{className:"space-y-4",children:[Object.entries(k.specifications).map(e=>{let[t,a]=e;return(0,mi.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,mi.jsx)("input",{type:"text",value:t,onChange:e=>{const s=e.target.value,n=m({},k.specifications);delete n[t],n[s]=a,S(e=>m(m({},e),{},{specifications:n}))},className:"misty-input flex-1",placeholder:"Specification name (e.g., Core ID, Width)"}),(0,mi.jsx)("input",{type:"text",value:a,onChange:e=>W(t,e.target.value),className:"misty-input flex-1",placeholder:"Specification value"}),(0,mi.jsx)("button",{type:"button",onClick:()=>(e=>{S(t=>{const a=m({},t.specifications);return delete a[e],m(m({},t),{},{specifications:a})})})(t),className:"text-red-400 hover:text-red-300 p-2",children:(0,mi.jsx)(Mx,{className:"h-4 w-4"})})]},t)}),(0,mi.jsxs)("button",{type:"button",onClick:()=>W("spec_".concat(Date.now()),""),className:"text-yellow-400 hover:text-yellow-300 text-sm flex items-center",children:[(0,mi.jsx)(Cl,{className:"h-4 w-4 mr-1"}),"Add Specification"]})]})]}),("Spiral Paper Core"===k.product_type||"Composite Core"===k.product_type)&&(0,mi.jsxs)("div",{className:"mb-8",children:[(0,mi.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Core Specifications"}),(0,mi.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Product Internal Diameter (mm) *"}),(0,mi.jsx)("input",{type:"number",step:"0.1",min:"0",value:k.internal_diameter,onChange:e=>S(t=>m(m({},t),{},{internal_diameter:e.target.value})),className:"misty-input w-full",placeholder:"Enter internal diameter"})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Wall Thickness Required (mm) *"}),(0,mi.jsx)("input",{type:"number",step:"0.1",min:"0",value:k.wall_thickness_required,onChange:e=>S(t=>m(m({},t),{},{wall_thickness_required:e.target.value})),className:"misty-input w-full",placeholder:"Enter wall thickness"})]})]}),(0,mi.jsxs)("div",{className:"mb-6",children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Core Winding Specification"}),(0,mi.jsxs)("select",{value:k.core_winding_spec_id,onChange:e=>S(t=>m(m({},t),{},{core_winding_spec_id:e.target.value})),className:"misty-select w-full",children:[(0,mi.jsx)("option",{value:"",children:"Select Core Winding Specification (Optional)"}),u.map(e=>(0,mi.jsx)("option",{value:e.id,children:e.displayName},e.id))]}),(0,mi.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"Select the appropriate core winding parameters based on the core diameter range"}),k.core_winding_spec_id&&(0,mi.jsx)("div",{className:"mt-3 p-3 bg-gray-700 rounded border border-gray-600",children:(()=>{const e=(t=k.core_winding_spec_id,u.find(e=>e.id===t)||null);var t;return e?(0,mi.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 text-sm",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("span",{className:"text-gray-300",children:"Paper Width:"}),(0,mi.jsx)("span",{className:"text-white ml-2 font-medium",children:e.paperWidth})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("span",{className:"text-gray-300",children:"Belt Size:"}),(0,mi.jsx)("span",{className:"text-white ml-2 font-medium",children:e.beltSize})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("span",{className:"text-gray-300",children:"Recommended Angle:"}),(0,mi.jsx)("span",{className:"text-blue-400 ml-2 font-medium",children:e.recommendedAngle})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("span",{className:"text-gray-300",children:"Workable Range:"}),(0,mi.jsx)("span",{className:"text-white ml-2 font-medium",children:e.workableRange})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("span",{className:"text-gray-300",children:"Length Factor:"}),(0,mi.jsx)("span",{className:"text-white ml-2 font-mono",children:e.lengthFactor})]})]}):null})()})]}),(0,mi.jsxs)("div",{className:"mb-6",children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Grams of Glue per Layer Meter (g/m) *"}),(0,mi.jsx)("input",{type:"number",step:"0.01",min:"0",value:k.grams_of_glue_per_layer_meter,onChange:e=>S(t=>m(m({},t),{},{grams_of_glue_per_layer_meter:e.target.value})),className:"misty-input w-full max-w-md",placeholder:"Enter grams of glue per layer meter"}),(0,mi.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"Specify the amount of glue used per meter of each layer (used for material cost calculations)"})]})]}),"Cardboard Boxes"!==k.product_type&&"Pallet"!==k.product_type&&"Plastic Bags"!==k.product_type&&"Tapes"!==k.product_type&&(0,mi.jsxs)("div",{className:"mb-8",children:[(0,mi.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,mi.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Material Layers"}),(0,mi.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,mi.jsxs)("button",{type:"button",onClick:()=>{S(e=>{const t=[...e.material_layers],a=t.filter(e=>e.spiral_sequence);if(0===a.length)return e;t.forEach((e,s)=>{if(e.spiral_sequence){const n=H(e.spiral_sequence,a.length);null!==n.allocation&&(t[s]=m(m({},e),{},{spiral_allocation_percent:n.allocation,overlap_factor:n.overlap}))}});const s=t.reduce((e,t)=>e+(parseFloat(t.spiral_allocation_percent)||0),0);if(s>0&&100!==s){const e=100/s;t.forEach((a,s)=>{a.spiral_allocation_percent&&(t[s]=m(m({},a),{},{spiral_allocation_percent:parseFloat((a.spiral_allocation_percent*e).toFixed(1))}))})}return m(m({},e),{},{material_layers:t})}),Bt.success("Spiral allocations auto-balanced to 100%")},className:"misty-button misty-button-primary flex items-center text-sm",title:"Auto-calculate spiral allocations based on layer sequences",children:[(0,mi.jsx)("span",{className:"mr-2",children:"\u2696\ufe0f"}),"Auto-Balance Spiral"]}),(0,mi.jsxs)("button",{type:"button",onClick:()=>{S(e=>m(m({},e),{},{material_layers:[...e.material_layers,{material_id:"",material_name:"",product_name:"",layer_type:"Outer Most Layer",width:null,thickness:null,gsm:null,quantity:1,notes:"",spiral_allocation_percent:null,spiral_sequence:"",winding_direction:"",overlap_factor:1,tension_level:"",feed_rate_mpm:null,qc_checkpoints:""}]}))},className:"misty-button misty-button-secondary flex items-center text-sm",children:[(0,mi.jsx)(Cl,{className:"h-4 w-4 mr-2"}),"Add Material Layer"]})]})]}),(0,mi.jsxs)("div",{className:"space-y-4",children:[k.material_layers.map((e,t)=>(0,mi.jsxs)("div",{className:"p-4 bg-gray-800 rounded-lg",children:[(0,mi.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,mi.jsxs)("h4",{className:"text-md font-medium text-white",children:["Layer ",t+1]}),k.material_layers.length>1&&(0,mi.jsx)("button",{type:"button",onClick:()=>(e=>{S(t=>m(m({},t),{},{material_layers:t.material_layers.filter((t,a)=>a!==e)})),V()})(t),className:"text-red-400 hover:text-red-300",children:(0,mi.jsx)(Ol,{className:"h-4 w-4"})})]}),(0,mi.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[(0,mi.jsxs)("div",{className:"md:col-span-2",children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Material/Product *"}),(0,mi.jsxs)("select",{value:e.material_id,onChange:e=>G(t,"material_id",e.target.value),className:"misty-select w-full",children:[(0,mi.jsx)("option",{value:"",children:"Select Material/Product"}),a.length>0&&(0,mi.jsx)("optgroup",{label:"Materials",children:a.map(e=>(0,mi.jsxs)("option",{value:e.id,children:[e.material_description||e.material_name," (",e.thickness_mm||0,"mm thick, GSM: ",e.gsm||"N/A",")"]},e.id))}),r.length>0&&(0,mi.jsx)("optgroup",{label:"Products",children:r.map(e=>(0,mi.jsxs)("option",{value:e.id,children:[e.product_name," (",e.thickness_mm||0,"mm thick)"]},e.id))})]})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Layer Position *"}),(0,mi.jsxs)("select",{value:e.layer_type,onChange:e=>G(t,"layer_type",e.target.value),className:"misty-select w-full",children:[(0,mi.jsx)("option",{value:"Outer Most Layer",children:"Outer Most Layer"}),(0,mi.jsx)("option",{value:"Central Layer",children:"Central Layer"}),(0,mi.jsx)("option",{value:"Inner Most Layer",children:"Inner Most Layer"})]})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Quantity/Usage *"}),(0,mi.jsx)("input",{type:"number",step:"0.01",min:"0.01",value:e.quantity||1,onChange:e=>G(t,"quantity",e.target.value),className:"misty-input w-full",placeholder:"1"})]})]}),(0,mi.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Product Name"}),(0,mi.jsx)("input",{type:"text",value:e.product_name||e.material_name||"Not selected",className:"misty-input w-full bg-gray-600",placeholder:"Auto-populated",readOnly:!0})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Thickness (mm)"}),(0,mi.jsx)("input",{type:"number",step:"0.001",value:e.thickness||0,className:"misty-input w-full bg-gray-600",placeholder:"Auto-populated",readOnly:!0})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"GSM"}),(0,mi.jsx)("input",{type:"text",value:null!==e.gsm&&void 0!==e.gsm?e.gsm:"Not available",className:"misty-input w-full bg-gray-600",placeholder:"Auto-populated from selected material",readOnly:!0})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Width (mm)"}),(0,mi.jsx)("input",{type:"number",step:"0.1",min:"0",value:e.width||"",onChange:e=>G(t,"width",e.target.value),className:"misty-input w-full",placeholder:"Width in mm"})]})]}),(0,mi.jsxs)("div",{className:"mt-4 p-3 bg-blue-900/10 border border-blue-600 rounded-lg",children:[(0,mi.jsxs)("h5",{className:"text-sm font-medium text-blue-300 mb-3 flex items-center",children:[(0,mi.jsx)("span",{className:"mr-2",children:"\ud83c\udf00"}),"Spiral Core Allocation - Layer ",t+1," (",e.layer_type,")"]}),(0,mi.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsxs)("label",{className:"block text-xs font-medium text-blue-200 mb-1 flex items-center",children:["Allocation % *",e.spiral_sequence&&(0,mi.jsx)("span",{className:"ml-1 text-green-300",title:"Auto-calculated based on layer sequence",children:"\u26a1"})]}),(0,mi.jsx)("input",{type:"number",step:"0.1",min:"0",max:"100",value:e.spiral_allocation_percent||"",onChange:e=>G(t,"spiral_allocation_percent",e.target.value),className:"misty-input w-full text-sm ".concat(e.spiral_sequence?"bg-green-900/20 border-green-600":""),placeholder:"% of total"}),(0,mi.jsx)("div",{className:"text-xs text-blue-300 mt-1",children:e.spiral_sequence?"Auto-calculated from layer sequence":"Percentage of this layer in spiral formation"})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-xs font-medium text-blue-200 mb-1",children:"Layer Sequence"}),(0,mi.jsxs)("select",{value:e.spiral_sequence||"",onChange:e=>G(t,"spiral_sequence",e.target.value),className:"misty-select w-full text-sm",children:[(0,mi.jsx)("option",{value:"",children:"Select sequence"}),Array.from({length:k.material_layers.length},(e,t)=>{const a=t+1,s=["th","st","nd","rd"][a%10>3?0:(a%100-a%10!==10)*a%10],n=1===a?"1st Layer (Core contact)":a===k.material_layers.length?"".concat(a).concat(s," Layer (Outer)"):"".concat(a).concat(s," Layer");return(0,mi.jsx)("option",{value:a,children:n},a)})]}),(0,mi.jsxs)("div",{className:"text-xs text-blue-300 mt-1",children:["Order of application in spiral winding (",k.material_layers.length," layer",1!==k.material_layers.length?"s":""," total)"]})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-xs font-medium text-blue-200 mb-1",children:"Winding Direction"}),(0,mi.jsxs)("select",{value:e.winding_direction||"",onChange:e=>G(t,"winding_direction",e.target.value),className:"misty-select w-full text-sm",children:[(0,mi.jsx)("option",{value:"",children:"Select direction"}),(0,mi.jsx)("option",{value:"clockwise",children:"Clockwise"}),(0,mi.jsx)("option",{value:"counterclockwise",children:"Counter-clockwise"}),(0,mi.jsx)("option",{value:"alternating",children:"Alternating"})]}),(0,mi.jsx)("div",{className:"text-xs text-blue-300 mt-1",children:"Direction of material application"})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsxs)("label",{className:"block text-xs font-medium text-blue-200 mb-1 flex items-center",children:["Overlap Factor",e.spiral_sequence&&(0,mi.jsx)("span",{className:"ml-1 text-green-300",title:"Auto-calculated based on layer sequence",children:"\u26a1"})]}),(0,mi.jsx)("input",{type:"number",step:"0.1",min:"0",max:"10",value:e.overlap_factor||"",onChange:e=>G(t,"overlap_factor",e.target.value),className:"misty-input w-full text-sm ".concat(e.spiral_sequence?"bg-green-900/20 border-green-600":""),placeholder:"0.0 - 10.0"}),(0,mi.jsx)("div",{className:"text-xs text-blue-300 mt-1",children:e.spiral_sequence?"Auto-calculated from layer sequence":"Material overlap multiplier (1.0 = no overlap)"})]})]}),(0,mi.jsxs)("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-xs font-medium text-blue-200 mb-1",children:"Tension Level"}),(0,mi.jsxs)("select",{value:e.tension_level||"",onChange:e=>G(t,"tension_level",e.target.value),className:"misty-select w-full text-sm",children:[(0,mi.jsx)("option",{value:"",children:"Select tension"}),(0,mi.jsx)("option",{value:"low",children:"Low (1-3)"}),(0,mi.jsx)("option",{value:"medium",children:"Medium (4-6)"}),(0,mi.jsx)("option",{value:"high",children:"High (7-10)"})]})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-xs font-medium text-blue-200 mb-1",children:"Feed Rate (m/min)"}),(0,mi.jsx)("input",{type:"number",step:"0.1",min:"0",value:e.feed_rate_mpm||"",onChange:e=>G(t,"feed_rate_mpm",e.target.value),className:"misty-input w-full text-sm",placeholder:"Meters per minute"})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-xs font-medium text-blue-200 mb-1",children:"QC Check Points"}),(0,mi.jsx)("input",{type:"text",value:e.qc_checkpoints||"",onChange:e=>G(t,"qc_checkpoints",e.target.value),className:"misty-input w-full text-sm",placeholder:"e.g., Every 10m, Visual, Thickness"})]})]})]}),(0,mi.jsx)("div",{className:"grid grid-cols-1 gap-4 mt-4",children:(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Notes"}),(0,mi.jsx)("input",{type:"text",value:e.notes||"",onChange:e=>G(t,"notes",e.target.value),className:"misty-input w-full",placeholder:"Optional notes"})]})}),C["material_layer_".concat(t)]&&(0,mi.jsx)("div",{className:"mt-2 text-red-400 text-sm",children:C["material_layer_".concat(t)]})]},t)),0===k.material_layers.length&&(0,mi.jsxs)("div",{className:"text-center py-8 text-gray-400",children:[(0,mi.jsx)("p",{children:"No material layers added yet."}),(0,mi.jsx)("p",{className:"text-sm",children:'Click "Add Material Layer" to get started.'})]})]}),k.material_layers.length>0&&(0,mi.jsxs)("div",{className:"mt-6 p-4 bg-gray-800/50 border border-gray-600 rounded-lg",children:[(0,mi.jsxs)("h4",{className:"text-md font-medium text-white mb-3 flex items-center",children:[(0,mi.jsx)("span",{className:"mr-2",children:"\ud83d\udcca"}),"Spiral Core Allocation Summary"]}),(0,mi.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("h5",{className:"text-sm font-medium text-gray-300 mb-2",children:"Layer Allocation Breakdown"}),(0,mi.jsxs)("div",{className:"space-y-2",children:[k.material_layers.map((e,t)=>{const a=parseFloat(e.spiral_allocation_percent)||0;return(0,mi.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,mi.jsxs)("div",{className:"flex items-center",children:[(0,mi.jsx)("div",{className:"w-3 h-3 bg-blue-500 rounded-full mr-2"}),(0,mi.jsxs)("span",{className:"text-gray-300",children:["Layer ",t+1," (",e.layer_type,"):"]})]}),(0,mi.jsxs)("div",{className:"text-right",children:[(0,mi.jsxs)("span",{className:"font-medium ".concat(a>0?"text-blue-300":"text-gray-500"),children:[a.toFixed(1),"%"]}),e.spiral_sequence&&(0,mi.jsxs)("div",{className:"text-xs text-gray-400",children:["Seq: ",e.spiral_sequence]})]})]},t)}),(0,mi.jsx)("div",{className:"border-t border-gray-600 pt-2",children:(()=>{const e=k.material_layers.reduce((e,t)=>e+(parseFloat(t.spiral_allocation_percent)||0),0);return(0,mi.jsxs)("div",{className:"flex items-center justify-between text-sm font-medium",children:[(0,mi.jsx)("span",{className:"text-gray-300",children:"Total Allocation:"}),(0,mi.jsxs)("span",{className:"".concat(Math.abs(e-100)<.1?"text-green-400":e>100?"text-red-400":"text-yellow-400"),children:[e.toFixed(1),"%",Math.abs(e-100)<.1&&" \u2713",e>100&&" \u26a0\ufe0f",e<100&&e>0&&" \u26a0\ufe0f"]})]})})()})]})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("h5",{className:"text-sm font-medium text-gray-300 mb-2",children:"Formation Process"}),(0,mi.jsxs)("div",{className:"space-y-2",children:[k.material_layers.filter(e=>e.spiral_sequence).sort((e,t)=>parseInt(e.spiral_sequence)-parseInt(t.spiral_sequence)).map((e,t)=>(0,mi.jsxs)("div",{className:"flex items-center text-xs",children:[(0,mi.jsx)("div",{className:"w-6 h-6 bg-blue-600 text-white rounded-full flex items-center justify-center mr-3 text-xs",children:e.spiral_sequence}),(0,mi.jsxs)("div",{className:"flex-1",children:[(0,mi.jsx)("div",{className:"text-gray-300",children:e.material_name||"Material not selected"}),(0,mi.jsxs)("div",{className:"text-gray-500 flex items-center space-x-2",children:[e.winding_direction&&(0,mi.jsxs)("span",{children:["\u21bb ",e.winding_direction]}),e.tension_level&&(0,mi.jsxs)("span",{children:["\u26a1 ",e.tension_level]}),e.overlap_factor&&"1"!==e.overlap_factor&&(0,mi.jsxs)("span",{children:["\u2934\ufe0f ",e.overlap_factor,"x overlap"]})]})]})]},t)),0===k.material_layers.filter(e=>e.spiral_sequence).length&&(0,mi.jsx)("div",{className:"text-gray-500 text-xs italic",children:"No layer sequences defined yet"})]})]})]}),(()=>{const e=k.material_layers.reduce((e,t)=>e+(parseFloat(t.spiral_allocation_percent)||0),0);return e>100?(0,mi.jsxs)("div",{className:"mt-4 p-3 bg-red-900/20 border border-red-600 rounded text-sm text-red-300",children:["\u26a0\ufe0f Warning: Total allocation exceeds 100% (",e.toFixed(1),"%). Please adjust layer percentages."]}):e<100&&e>0?(0,mi.jsxs)("div",{className:"mt-4 p-3 bg-yellow-900/20 border border-yellow-600 rounded text-sm text-yellow-300",children:["\u26a0\ufe0f Notice: Total allocation is ",e.toFixed(1),"%. Consider adding more layers or adjusting percentages to reach 100%."]}):Math.abs(e-100)<.1&&e>0?(0,mi.jsxs)("div",{className:"mt-4 p-3 bg-green-900/20 border border-green-600 rounded text-sm text-green-300",children:["\u2705 Perfect! Total allocation is ",e.toFixed(1),"%. Spiral core formation is properly defined."]}):null})()]})]}),"Cardboard Boxes"!==k.product_type&&"Pallet"!==k.product_type&&"Plastic Bags"!==k.product_type&&"Tapes"!==k.product_type&&(0,mi.jsxs)("div",{className:"mb-8",children:[(0,mi.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,mi.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Machinery"}),(0,mi.jsxs)("button",{type:"button",onClick:()=>{S(e=>m(m({},e),{},{machinery:[...e.machinery,{machine_name:"",running_speed:null,setup_hours:null,pack_up_hours:null,functions:[]}]}))},className:"misty-button misty-button-secondary flex items-center text-sm",children:[(0,mi.jsx)(Cl,{className:"h-4 w-4 mr-2"}),"Enter Machine"]})]}),(0,mi.jsxs)("div",{className:"space-y-6",children:[k.machinery.map((e,t)=>(0,mi.jsxs)("div",{className:"p-6 bg-gray-800 rounded-lg",children:[(0,mi.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,mi.jsxs)("h4",{className:"text-md font-medium text-white",children:["Machine ",t+1]}),(0,mi.jsx)("button",{type:"button",onClick:()=>{return e=t,void S(t=>m(m({},t),{},{machinery:t.machinery.filter((t,a)=>a!==e)}));var e},className:"text-red-400 hover:text-red-300",children:(0,mi.jsx)(Ol,{className:"h-4 w-4"})})]}),(0,mi.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Machine Type *"}),(0,mi.jsxs)("select",{value:e.machine_name||"",onChange:e=>$(t,"machine_name",e.target.value),className:"misty-select w-full",required:!0,children:[(0,mi.jsx)("option",{value:"",children:"Select Machine Type"}),c.map((e,t)=>{var a;return(0,mi.jsxs)("option",{value:e.function,children:[e.function," - $",null===(a=e.rate_per_hour)||void 0===a?void 0:a.toFixed(2),"/hr"]},t)})]})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Running Speed (Meters Per Minute)"}),(0,mi.jsx)("input",{type:"number",step:"0.1",min:"0",value:e.running_speed||"",onChange:e=>$(t,"running_speed",e.target.value?parseFloat(e.target.value):null),className:"misty-input w-full",placeholder:"0.0"})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Set up Time (Hours)"}),(0,mi.jsx)("input",{type:"number",step:"0.25",min:"0",max:"24",value:e.setup_hours||"",onChange:e=>$(t,"setup_hours",e.target.value?parseFloat(e.target.value):null),className:"misty-input w-full",placeholder:"1.5"})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Pack up Time (Hours)"}),(0,mi.jsx)("input",{type:"number",step:"0.25",min:"0",max:"24",value:e.pack_up_hours||"",onChange:e=>$(t,"pack_up_hours",e.target.value?parseFloat(e.target.value):null),className:"misty-input w-full",placeholder:"1.0"})]})]}),(0,mi.jsxs)("div",{className:"border-t border-gray-700 pt-4",children:[(0,mi.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,mi.jsx)("h5",{className:"text-sm font-medium text-white",children:"Functions & Rates"}),(0,mi.jsxs)("button",{type:"button",onClick:()=>(e=>{const t=c.find(e=>"Slitting"===e.function),a=t?t.rate_per_hour:null;S(t=>m(m({},t),{},{machinery:t.machinery.map((t,s)=>s===e?m(m({},t),{},{functions:[...t.functions,{function:"Slitting",rate_per_hour:a}]}):t)}))})(t),className:"misty-button misty-button-secondary text-xs flex items-center",children:[(0,mi.jsx)(Cl,{className:"h-3 w-3 mr-1"}),"Add Function"]})]}),(0,mi.jsxs)("div",{className:"space-y-3",children:[e.functions.map((e,a)=>{var s,n,r,i;return(0,mi.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 p-3 bg-gray-700 rounded",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-xs font-medium text-gray-300 mb-1",children:"Function"}),(0,mi.jsxs)("select",{value:e.function,onChange:e=>Q(t,a,"function",e.target.value),className:"misty-select w-full text-sm",children:[(0,mi.jsx)("option",{value:"Slitting",children:"Slitting"}),(0,mi.jsx)("option",{value:"winding",children:"Core Winder"}),(0,mi.jsx)("option",{value:"Cutting/Indexing",children:"Cutting/Indexing"}),(0,mi.jsx)("option",{value:"splitting",children:"Splitting"}),(0,mi.jsx)("option",{value:"Packing",children:"Packing"}),(0,mi.jsx)("option",{value:"Delivery Time",children:"Delivery Time"})]})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsxs)("label",{className:"block text-xs font-medium text-gray-300 mb-1",children:["Rate per Hour ($)",c.find(t=>t.function===e.function)&&(0,mi.jsxs)("button",{type:"button",onClick:()=>{const s=c.find(t=>t.function===e.function);s&&Q(t,a,"rate_per_hour",s.rate_per_hour)},className:"ml-2 text-xs text-blue-400 hover:text-blue-300",title:"Apply default rate: $".concat(null===(s=c.find(t=>t.function===e.function))||void 0===s||null===(n=s.rate_per_hour)||void 0===n?void 0:n.toFixed(2)),children:["(Use Default: $",null===(r=c.find(t=>t.function===e.function))||void 0===r||null===(i=r.rate_per_hour)||void 0===i?void 0:i.toFixed(2),")"]})]}),(0,mi.jsx)("input",{type:"number",step:"0.01",min:"0",value:e.rate_per_hour||"",onChange:e=>Q(t,a,"rate_per_hour",e.target.value?parseFloat(e.target.value):null),className:"misty-input w-full text-sm",placeholder:"0.00"})]}),(0,mi.jsx)("div",{className:"flex items-end",children:(0,mi.jsx)("button",{type:"button",onClick:()=>((e,t)=>{S(a=>m(m({},a),{},{machinery:a.machinery.map((a,s)=>s===e?m(m({},a),{},{functions:a.functions.filter((e,a)=>a!==t)}):a)}))})(t,a),className:"text-red-400 hover:text-red-300 p-2",children:(0,mi.jsx)(Mx,{className:"h-4 w-4"})})})]},a)}),0===e.functions.length&&(0,mi.jsxs)("div",{className:"text-center py-4 text-gray-400 text-sm",children:[(0,mi.jsx)("p",{children:"No functions added yet."}),(0,mi.jsx)("p",{className:"text-xs",children:'Click "Add Function" to add machine functions and rates.'})]})]})]})]},t)),0===k.machinery.length&&(0,mi.jsxs)("div",{className:"text-center py-8 text-gray-400",children:[(0,mi.jsx)("p",{children:"No machinery added yet."}),(0,mi.jsx)("p",{className:"text-sm",children:'Click "Enter Machine" to add machinery specifications for the job card/run sheet.'})]})]})]}),D>0&&(0,mi.jsxs)("div",{className:"mb-8",children:[(0,mi.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Total Thickness"}),(0,mi.jsx)("div",{className:"misty-card p-4 bg-gray-700",children:(0,mi.jsxs)("div",{className:"text-center",children:[(0,mi.jsx)("h4",{className:"text-md font-medium text-white mb-2",children:"Calculated Thickness"}),(0,mi.jsxs)("div",{className:"text-3xl font-bold text-yellow-400",children:[D.toFixed(3)," mm"]}),(0,mi.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"Sum of all material layer thicknesses"})]})})]}),"Pallet"===k.product_type&&(0,mi.jsxs)("div",{className:"mb-8",children:[(0,mi.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Pallet Specifications"}),(0,mi.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,mi.jsxs)("div",{className:"misty-card p-6",children:[(0,mi.jsx)("h4",{className:"text-md font-medium text-white mb-4",children:"Dimensions"}),(0,mi.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Length (mm) *"}),(0,mi.jsx)("input",{type:"number",step:"0.1",min:"0",value:k.pallet_dimensions.length,onChange:e=>S(t=>m(m({},t),{},{pallet_dimensions:m(m({},t.pallet_dimensions),{},{length:e.target.value})})),className:"misty-input w-full",placeholder:"1200",required:!0})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Width (mm) *"}),(0,mi.jsx)("input",{type:"number",step:"0.1",min:"0",value:k.pallet_dimensions.width,onChange:e=>S(t=>m(m({},t),{},{pallet_dimensions:m(m({},t.pallet_dimensions),{},{width:e.target.value})})),className:"misty-input w-full",placeholder:"800",required:!0})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Height (mm) *"}),(0,mi.jsx)("input",{type:"number",step:"0.1",min:"0",value:k.pallet_dimensions.height,onChange:e=>S(t=>m(m({},t),{},{pallet_dimensions:m(m({},t.pallet_dimensions),{},{height:e.target.value})})),className:"misty-input w-full",placeholder:"150",required:!0})]})]})]}),(0,mi.jsxs)("div",{className:"misty-card p-6",children:[(0,mi.jsx)("h4",{className:"text-md font-medium text-white mb-4",children:"Commercial Details"}),(0,mi.jsxs)("div",{className:"space-y-4",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Price Per Unit *"}),(0,mi.jsxs)("div",{className:"flex gap-2",children:[(0,mi.jsxs)("select",{value:k.pallet_currency,onChange:e=>S(t=>m(m({},t),{},{pallet_currency:e.target.value})),className:"misty-select w-24",children:[(0,mi.jsx)("option",{value:"AUD",children:"AUD"}),(0,mi.jsx)("option",{value:"USD",children:"USD"}),(0,mi.jsx)("option",{value:"EUR",children:"EUR"}),(0,mi.jsx)("option",{value:"GBP",children:"GBP"}),(0,mi.jsx)("option",{value:"NZD",children:"NZD"}),(0,mi.jsx)("option",{value:"CAD",children:"CAD"})]}),(0,mi.jsx)("input",{type:"number",step:"0.01",min:"0",value:k.pallet_price,onChange:e=>S(t=>m(m({},t),{},{pallet_price:e.target.value})),className:"misty-input flex-1",placeholder:"25.00",required:!0})]})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Supplier *"}),(0,mi.jsxs)("select",{value:k.pallet_supplier,onChange:e=>S(t=>m(m({},t),{},{pallet_supplier:e.target.value})),className:"misty-select w-full",required:!0,children:[(0,mi.jsx)("option",{value:"",children:"Select Supplier"}),l.map(e=>(0,mi.jsx)("option",{value:e.supplier_name,children:e.supplier_name},e.id))]})]})]})]})]})]}),"Cardboard Boxes"===k.product_type&&(0,mi.jsxs)("div",{className:"mb-8",children:[(0,mi.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Cardboard Boxes Specifications"}),(0,mi.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,mi.jsxs)("div",{className:"misty-card p-6",children:[(0,mi.jsx)("h4",{className:"text-md font-medium text-white mb-4",children:"Dimensions"}),(0,mi.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Width (mm) *"}),(0,mi.jsx)("input",{type:"number",step:"0.1",min:"0",value:k.box_dimensions.width,onChange:e=>S(t=>m(m({},t),{},{box_dimensions:m(m({},t.box_dimensions),{},{width:e.target.value})})),className:"misty-input w-full",placeholder:"300",required:!0}),(0,mi.jsx)("div",{className:"text-xs text-gray-400 mt-1",children:"mmW"})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Length (mm) *"}),(0,mi.jsx)("input",{type:"number",step:"0.1",min:"0",value:k.box_dimensions.length,onChange:e=>S(t=>m(m({},t),{},{box_dimensions:m(m({},t.box_dimensions),{},{length:e.target.value})})),className:"misty-input w-full",placeholder:"200",required:!0}),(0,mi.jsx)("div",{className:"text-xs text-gray-400 mt-1",children:"mmL"})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Height (mm) *"}),(0,mi.jsx)("input",{type:"number",step:"0.1",min:"0",value:k.box_dimensions.height,onChange:e=>S(t=>m(m({},t),{},{box_dimensions:m(m({},t.box_dimensions),{},{height:e.target.value})})),className:"misty-input w-full",placeholder:"100",required:!0}),(0,mi.jsx)("div",{className:"text-xs text-gray-400 mt-1",children:"mmH"})]})]}),(k.box_dimensions.width||k.box_dimensions.length||k.box_dimensions.height)&&(0,mi.jsx)("div",{className:"mt-4 p-3 bg-gray-700 rounded-md",children:(0,mi.jsxs)("div",{className:"text-sm text-gray-300",children:["Preview: ",k.box_dimensions.width||"0","mmW x ",k.box_dimensions.length||"0","mmL x ",k.box_dimensions.height||"0","mmH"]})})]}),(0,mi.jsxs)("div",{className:"misty-card p-6",children:[(0,mi.jsx)("h4",{className:"text-md font-medium text-white mb-4",children:"Specifications"}),(0,mi.jsxs)("div",{className:"space-y-4",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Wall Thickness (mm) *"}),(0,mi.jsx)("input",{type:"number",step:"0.1",min:"0",value:k.box_wall_thickness,onChange:e=>S(t=>m(m({},t),{},{box_wall_thickness:e.target.value})),className:"misty-input w-full",placeholder:"3.5",required:!0})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Flute Type *"}),(0,mi.jsxs)("select",{value:k.box_flute_type,onChange:e=>S(t=>m(m({},t),{},{box_flute_type:e.target.value})),className:"misty-select w-full",required:!0,children:[(0,mi.jsx)("option",{value:"",children:"Select Flute Type"}),(0,mi.jsx)("option",{value:"A",children:"A Flute (4.5-4.8mm)"}),(0,mi.jsx)("option",{value:"B",children:"B Flute (2.5-3.2mm)"}),(0,mi.jsx)("option",{value:"C",children:"C Flute (3.5-4.0mm)"}),(0,mi.jsx)("option",{value:"E",children:"E Flute (1.1-1.9mm)"}),(0,mi.jsx)("option",{value:"F",children:"F Flute (0.5-0.9mm)"}),(0,mi.jsx)("option",{value:"BC",children:"BC Double Wall"}),(0,mi.jsx)("option",{value:"AB",children:"AB Double Wall"}),(0,mi.jsx)("option",{value:"EB",children:"EB Double Wall"})]})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Supplier *"}),(0,mi.jsxs)("select",{value:k.box_supplier,onChange:e=>S(t=>m(m({},t),{},{box_supplier:e.target.value})),className:"misty-select w-full",required:!0,children:[(0,mi.jsx)("option",{value:"",children:"Select Supplier"}),l.map(e=>(0,mi.jsx)("option",{value:e.supplier_name,children:e.supplier_name},e.id))]})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Price Per Unit *"}),(0,mi.jsxs)("div",{className:"flex gap-2",children:[(0,mi.jsxs)("select",{value:k.box_currency,onChange:e=>S(t=>m(m({},t),{},{box_currency:e.target.value})),className:"misty-select w-24",children:[(0,mi.jsx)("option",{value:"AUD",children:"AUD"}),(0,mi.jsx)("option",{value:"USD",children:"USD"}),(0,mi.jsx)("option",{value:"EUR",children:"EUR"}),(0,mi.jsx)("option",{value:"GBP",children:"GBP"}),(0,mi.jsx)("option",{value:"NZD",children:"NZD"}),(0,mi.jsx)("option",{value:"CAD",children:"CAD"})]}),(0,mi.jsx)("input",{type:"number",step:"0.01",min:"0",value:k.box_price,onChange:e=>S(t=>m(m({},t),{},{box_price:e.target.value})),className:"misty-input flex-1",placeholder:"15.00",required:!0})]})]})]})]})]})]}),"Plastic Bags"===k.product_type&&(0,mi.jsxs)("div",{className:"mb-8",children:[(0,mi.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Plastic Bags Specifications"}),(0,mi.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,mi.jsxs)("div",{className:"misty-card p-6",children:[(0,mi.jsx)("h4",{className:"text-md font-medium text-white mb-4",children:"Material Properties"}),(0,mi.jsxs)("div",{className:"space-y-4",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Thickness (\u03bcm) *"}),(0,mi.jsx)("input",{type:"number",step:"0.1",min:"0",value:k.plastic_thickness,onChange:e=>S(t=>m(m({},t),{},{plastic_thickness:e.target.value})),className:"misty-input w-full",placeholder:"25.0",required:!0})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Composite *"}),(0,mi.jsx)("input",{type:"text",value:k.plastic_composite,onChange:e=>S(t=>m(m({},t),{},{plastic_composite:e.target.value})),className:"misty-input w-full",placeholder:"PE/PA/PE",required:!0})]})]})]}),(0,mi.jsxs)("div",{className:"misty-card p-6",children:[(0,mi.jsx)("h4",{className:"text-md font-medium text-white mb-4",children:"Dimensions"}),(0,mi.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Width (mm) *"}),(0,mi.jsx)("input",{type:"number",step:"0.1",min:"0",value:k.plastic_dimensions.width,onChange:e=>S(t=>m(m({},t),{},{plastic_dimensions:m(m({},t.plastic_dimensions),{},{width:e.target.value})})),className:"misty-input w-full",placeholder:"300",required:!0}),(0,mi.jsx)("div",{className:"text-xs text-gray-400 mt-1",children:"mmW"})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Length (mm) *"}),(0,mi.jsx)("input",{type:"number",step:"0.1",min:"0",value:k.plastic_dimensions.length,onChange:e=>S(t=>m(m({},t),{},{plastic_dimensions:m(m({},t.plastic_dimensions),{},{length:e.target.value})})),className:"misty-input w-full",placeholder:"400",required:!0}),(0,mi.jsx)("div",{className:"text-xs text-gray-400 mt-1",children:"mmL"})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Height (mm) *"}),(0,mi.jsx)("input",{type:"number",step:"0.1",min:"0",value:k.plastic_dimensions.height,onChange:e=>S(t=>m(m({},t),{},{plastic_dimensions:m(m({},t.plastic_dimensions),{},{height:e.target.value})})),className:"misty-input w-full",placeholder:"50",required:!0}),(0,mi.jsx)("div",{className:"text-xs text-gray-400 mt-1",children:"mmH"})]})]}),(k.plastic_dimensions.width||k.plastic_dimensions.length||k.plastic_dimensions.height)&&(0,mi.jsx)("div",{className:"mt-4 p-3 bg-gray-700 rounded-md",children:(0,mi.jsxs)("div",{className:"text-sm text-gray-300",children:["Preview: ",k.plastic_dimensions.width||"0","mmW x ",k.plastic_dimensions.length||"0","mmL x ",k.plastic_dimensions.height||"0","mmH"]})})]}),(0,mi.jsxs)("div",{className:"misty-card p-6 md:col-span-2",children:[(0,mi.jsx)("h4",{className:"text-md font-medium text-white mb-4",children:"Commercial Details"}),(0,mi.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Supplier *"}),(0,mi.jsxs)("select",{value:k.plastic_supplier,onChange:e=>S(t=>m(m({},t),{},{plastic_supplier:e.target.value})),className:"misty-select w-full",required:!0,children:[(0,mi.jsx)("option",{value:"",children:"Select Supplier"}),l.map(e=>(0,mi.jsx)("option",{value:e.supplier_name,children:e.supplier_name},e.id))]})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Price Per Unit *"}),(0,mi.jsxs)("div",{className:"flex gap-2",children:[(0,mi.jsxs)("select",{value:k.plastic_currency,onChange:e=>S(t=>m(m({},t),{},{plastic_currency:e.target.value})),className:"misty-select w-24",children:[(0,mi.jsx)("option",{value:"AUD",children:"AUD"}),(0,mi.jsx)("option",{value:"USD",children:"USD"}),(0,mi.jsx)("option",{value:"EUR",children:"EUR"}),(0,mi.jsx)("option",{value:"GBP",children:"GBP"}),(0,mi.jsx)("option",{value:"NZD",children:"NZD"}),(0,mi.jsx)("option",{value:"CAD",children:"CAD"})]}),(0,mi.jsx)("input",{type:"number",step:"0.01",min:"0",value:k.plastic_price,onChange:e=>S(t=>m(m({},t),{},{plastic_price:e.target.value})),className:"misty-input flex-1",placeholder:"5.50",required:!0})]})]})]})]})]})]}),"Tapes"===k.product_type&&(0,mi.jsxs)("div",{className:"mb-8",children:[(0,mi.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Tapes Specifications"}),(0,mi.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,mi.jsxs)("div",{className:"misty-card p-6",children:[(0,mi.jsx)("h4",{className:"text-md font-medium text-white mb-4",children:"Material Properties"}),(0,mi.jsxs)("div",{className:"space-y-4",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Thickness (\u03bcm) *"}),(0,mi.jsx)("input",{type:"number",step:"0.1",min:"0",value:k.tape_thickness,onChange:e=>S(t=>m(m({},t),{},{tape_thickness:e.target.value})),className:"misty-input w-full",placeholder:"50.0",required:!0})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Adhesive Type *"}),(0,mi.jsxs)("select",{value:k.tape_adhesive_type,onChange:e=>S(t=>m(m({},t),{},{tape_adhesive_type:e.target.value})),className:"misty-select w-full",required:!0,children:[(0,mi.jsx)("option",{value:"",children:"Select Adhesive Type"}),(0,mi.jsx)("option",{value:"Acrylic",children:"Acrylic"}),(0,mi.jsx)("option",{value:"Hot Melt",children:"Hot Melt"}),(0,mi.jsx)("option",{value:"Rubber",children:"Rubber"}),(0,mi.jsx)("option",{value:"Silicone",children:"Silicone"}),(0,mi.jsx)("option",{value:"Water-based",children:"Water-based"}),(0,mi.jsx)("option",{value:"Solvent-based",children:"Solvent-based"})]})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Substrate Type *"}),(0,mi.jsxs)("select",{value:k.tape_substrate_type,onChange:e=>S(t=>m(m({},t),{},{tape_substrate_type:e.target.value})),className:"misty-select w-full",required:!0,children:[(0,mi.jsx)("option",{value:"",children:"Select Substrate Type"}),(0,mi.jsx)("option",{value:"Paper",children:"Paper"}),(0,mi.jsx)("option",{value:"Film",children:"Film"}),(0,mi.jsx)("option",{value:"Fabric",children:"Fabric"}),(0,mi.jsx)("option",{value:"Foam",children:"Foam"}),(0,mi.jsx)("option",{value:"Metal",children:"Metal"}),(0,mi.jsx)("option",{value:"Glass",children:"Glass"}),(0,mi.jsx)("option",{value:"Plastic",children:"Plastic"})]})]})]})]}),(0,mi.jsxs)("div",{className:"misty-card p-6",children:[(0,mi.jsx)("h4",{className:"text-md font-medium text-white mb-4",children:"Size"}),(0,mi.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Width (mm) *"}),(0,mi.jsx)("input",{type:"number",step:"0.1",min:"0",value:k.tape_size.width,onChange:e=>S(t=>m(m({},t),{},{tape_size:m(m({},t.tape_size),{},{width:e.target.value})})),className:"misty-input w-full",placeholder:"25",required:!0}),(0,mi.jsx)("div",{className:"text-xs text-gray-400 mt-1",children:"mmW"})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Length (mm) *"}),(0,mi.jsx)("input",{type:"number",step:"0.1",min:"0",value:k.tape_size.length,onChange:e=>S(t=>m(m({},t),{},{tape_size:m(m({},t.tape_size),{},{length:e.target.value})})),className:"misty-input w-full",placeholder:"50000",required:!0}),(0,mi.jsx)("div",{className:"text-xs text-gray-400 mt-1",children:"mmL"})]})]}),(k.tape_size.width||k.tape_size.length)&&(0,mi.jsx)("div",{className:"mt-4 p-3 bg-gray-700 rounded-md",children:(0,mi.jsxs)("div",{className:"text-sm text-gray-300",children:["Preview: ",k.tape_size.width||"0","mmW x ",k.tape_size.length||"0","mmL"]})})]}),(0,mi.jsxs)("div",{className:"misty-card p-6 md:col-span-2",children:[(0,mi.jsx)("h4",{className:"text-md font-medium text-white mb-4",children:"Commercial Details"}),(0,mi.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Supplier *"}),(0,mi.jsxs)("select",{value:k.tape_supplier,onChange:e=>S(t=>m(m({},t),{},{tape_supplier:e.target.value})),className:"misty-select w-full",required:!0,children:[(0,mi.jsx)("option",{value:"",children:"Select Supplier"}),l.map(e=>(0,mi.jsx)("option",{value:e.supplier_name,children:e.supplier_name},e.id))]})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Price Per Unit *"}),(0,mi.jsxs)("div",{className:"flex gap-2",children:[(0,mi.jsxs)("select",{value:k.tape_currency,onChange:e=>S(t=>m(m({},t),{},{tape_currency:e.target.value})),className:"misty-select w-24",children:[(0,mi.jsx)("option",{value:"AUD",children:"AUD"}),(0,mi.jsx)("option",{value:"USD",children:"USD"}),(0,mi.jsx)("option",{value:"EUR",children:"EUR"}),(0,mi.jsx)("option",{value:"GBP",children:"GBP"}),(0,mi.jsx)("option",{value:"NZD",children:"NZD"}),(0,mi.jsx)("option",{value:"CAD",children:"CAD"})]}),(0,mi.jsx)("input",{type:"number",step:"0.01",min:"0",value:k.tape_price,onChange:e=>S(t=>m(m({},t),{},{tape_price:e.target.value})),className:"misty-input flex-1",placeholder:"12.50",required:!0})]})]})]})]})]})]}),k.materials_composition.length>0&&(0,mi.jsxs)("div",{className:"mb-8",children:[(0,mi.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Legacy Materials Composition"}),(0,mi.jsxs)("div",{className:"misty-card p-4 bg-gray-700",children:[(0,mi.jsx)("p",{className:"text-gray-300 text-sm mb-2",children:"This product specification contains legacy material composition data. Please use the Material Layers section above for new specifications."}),(0,mi.jsxs)("p",{className:"text-xs text-gray-400",children:["Legacy materials: ",k.materials_composition.map(e=>e.material_name).join(", ")]})]})]}),(0,mi.jsx)("div",{className:"pt-6 border-t border-gray-700",children:(0,mi.jsxs)("div",{className:"flex items-center justify-end space-x-4",children:[b&&(0,mi.jsxs)("button",{type:"button",onClick:()=>z(b),className:"misty-button misty-button-danger mr-auto",children:[(0,mi.jsx)(Ol,{className:"h-4 w-4 mr-2"}),"Delete Specification"]}),(0,mi.jsx)("button",{type:"button",onClick:()=>y(!1),className:"misty-button misty-button-secondary",children:"Cancel"}),(0,mi.jsx)("button",{type:"submit",className:"misty-button misty-button-primary",children:b?"Update Specification":"Create Specification"})]})})]})]})}),j&&(0,mi.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,mi.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4",children:[(0,mi.jsxs)("div",{className:"flex items-center mb-4",children:[(0,mi.jsx)(Ol,{className:"h-6 w-6 text-red-400 mr-2"}),(0,mi.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Confirm Delete"})]}),(0,mi.jsxs)("p",{className:"text-gray-300 mb-6",children:['Are you sure you want to delete the specification for "',null===_||void 0===_?void 0:_.product_name,'"? This action cannot be undone.']}),(0,mi.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,mi.jsx)("button",{onClick:()=>{w(!1),N(null)},className:"misty-button misty-button-secondary",children:"Cancel"}),(0,mi.jsxs)("button",{onClick:async()=>{if(_)try{await zn(_.id),Bt.success("Product specification deleted successfully"),y(!1),w(!1),N(null),I()}catch(e){console.error("Failed to delete specification:",e),Bt.error("Failed to delete specification"),w(!1),N(null)}},className:"misty-button misty-button-danger",children:[(0,mi.jsx)(Ol,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})})]})})},qx=()=>{const[e,t]=(0,n.useState)([]),[a,s]=(0,n.useState)(!0),[r,i]=(0,n.useState)(""),[l,o]=(0,n.useState)(!1),[c,d]=(0,n.useState)(null),[u,p]=(0,n.useState)(!1),[h,x]=(0,n.useState)(null),[f,g]=(0,n.useState)({function:"",rate_per_hour:"",description:""}),[y,b]=(0,n.useState)({}),v=[{coreRange:"15\u201320 mm",paperWidth:"29\u201331 mm",beltSize:"30 mm",recommendedAngle:"72\xb0",workableRange:"70\u201374\xb0",lengthFactor:"3.236"},{coreRange:"21\u201330 mm",paperWidth:"37\u201341 mm",beltSize:"40 mm",recommendedAngle:"70\xb0",workableRange:"68\u201373\xb0",lengthFactor:"2.924"},{coreRange:"31\u201350 mm",paperWidth:"57\u201361 mm",beltSize:"60 mm",recommendedAngle:"68\xb0",workableRange:"66\u201372\xb0",lengthFactor:"2.670"},{coreRange:"51\u201370 mm",paperWidth:"76\u201381 mm",beltSize:"80 mm",recommendedAngle:"66\xb0",workableRange:"64\u201370\xb0",lengthFactor:"2.459"},{coreRange:"71\u2013120 mm",paperWidth:"103\u2013106 mm",beltSize:"105 mm",recommendedAngle:"65\xb0",workableRange:"62\u201368\xb0",lengthFactor:"2.366"},{coreRange:"121\u2013200 mm",paperWidth:"118\u2013122 mm",beltSize:"120 mm",recommendedAngle:"64\xb0",workableRange:"60\u201366\xb0",lengthFactor:"2.281"},{coreRange:"> 201 mm",paperWidth:"148\u2013152 mm",beltSize:"150 mm",recommendedAngle:"62\xb0",workableRange:"58\u201365\xb0",lengthFactor:"2.130"}];(0,n.useEffect)(()=>{j()},[]);const j=async()=>{try{s(!0);const e=await Br();t(e.data)}catch(e){console.error("Failed to load machinery rates:",e),Bt.error("Failed to load machinery rates")}finally{s(!1)}},w=()=>{d(null),g({function:"",rate_per_hour:"",description:""}),b({}),o(!0)},_=e=>{x(e),p(!0)},N=e.filter(e=>e.function.toLowerCase().includes(r.toLowerCase())||e.description&&e.description.toLowerCase().includes(r.toLowerCase()));return a?(0,mi.jsx)(hl,{children:(0,mi.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,mi.jsx)("div",{className:"text-white",children:"Loading machinery rates..."})})}):(0,mi.jsx)(hl,{children:(0,mi.jsxs)("div",{className:"space-y-6",children:[(0,mi.jsxs)("div",{className:"flex justify-between items-center",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("h1",{className:"text-3xl font-bold text-white",children:"Machinery Specifications"}),(0,mi.jsx)("p",{className:"text-gray-400 mt-1",children:"Manage machinery specifications and core winding parameters"})]}),(0,mi.jsxs)("button",{onClick:w,className:"misty-button misty-button-primary flex items-center",children:[(0,mi.jsx)(Cl,{className:"h-5 w-5 mr-2"}),"Add Specification"]})]}),(0,mi.jsxs)("div",{className:"relative",children:[(0,mi.jsx)(io,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,mi.jsx)("input",{type:"text",placeholder:"",value:r,onChange:e=>i(e.target.value),className:"w-full pl-14 pr-4 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:border-blue-500 focus:outline-none"})]}),(0,mi.jsxs)("div",{className:"bg-gray-800 rounded-lg overflow-hidden",children:[(0,mi.jsx)("div",{className:"px-6 py-4 border-b border-gray-700",children:(0,mi.jsxs)("h2",{className:"text-xl font-semibold text-white",children:["Machinery Specifications (",N.length,")"]})}),(0,mi.jsx)("div",{className:"overflow-x-auto",children:(0,mi.jsxs)("table",{className:"w-full",children:[(0,mi.jsx)("thead",{className:"bg-gray-700",children:(0,mi.jsxs)("tr",{children:[(0,mi.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Function"}),(0,mi.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Rate per Hour"}),(0,mi.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Description"}),(0,mi.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Created"}),(0,mi.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),(0,mi.jsx)("tbody",{className:"divide-y divide-gray-700",children:N.length>0?N.map(e=>(0,mi.jsxs)("tr",{className:"hover:bg-gray-700",children:[(0,mi.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,mi.jsx)("div",{className:"text-sm font-medium text-white",children:e.function})}),(0,mi.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,mi.jsxs)("div",{className:"text-sm text-white",children:["$",e.rate_per_hour.toFixed(2)]})}),(0,mi.jsx)("td",{className:"px-6 py-4",children:(0,mi.jsx)("div",{className:"text-sm text-gray-300 max-w-xs truncate",children:e.description||"-"})}),(0,mi.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,mi.jsx)("div",{className:"text-sm text-gray-300",children:new Date(e.created_at).toLocaleDateString()})}),(0,mi.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,mi.jsxs)("div",{className:"flex space-x-2",children:[(0,mi.jsx)("button",{onClick:()=>(e=>{d(e),g({function:e.function,rate_per_hour:e.rate_per_hour.toString(),description:e.description||""}),b({}),o(!0)})(e),className:"text-blue-400 hover:text-blue-300",children:(0,mi.jsx)(ho,{className:"h-4 w-4"})}),(0,mi.jsx)("button",{onClick:()=>_(e),className:"text-red-400 hover:text-red-300",children:(0,mi.jsx)(Ol,{className:"h-4 w-4"})})]})})]},e.id)):(0,mi.jsx)("tr",{children:(0,mi.jsxs)("td",{colSpan:"5",className:"px-6 py-8 text-center",children:[(0,mi.jsx)("div",{className:"text-gray-400",children:r?"No rates found matching your search.":"No machinery rates configured yet."}),!r&&(0,mi.jsx)("button",{onClick:w,className:"mt-2 text-blue-400 hover:text-blue-300 text-sm",children:"Add your first machinery rate"})]})})})]})})]}),(0,mi.jsxs)("div",{className:"bg-gray-800 rounded-lg overflow-hidden",children:[(0,mi.jsxs)("div",{className:"px-6 py-4 border-b border-gray-700",children:[(0,mi.jsx)("h2",{className:"text-xl font-semibold text-white",children:"Core Winding Specifications"}),(0,mi.jsx)("p",{className:"text-gray-400 text-sm mt-1",children:"Manufacturing parameters for different core diameters"})]}),(0,mi.jsx)("div",{className:"overflow-x-auto",children:(0,mi.jsxs)("table",{className:"w-full",children:[(0,mi.jsx)("thead",{className:"bg-gray-700",children:(0,mi.jsxs)("tr",{children:[(0,mi.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Core \xd8"}),(0,mi.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Paper Width"}),(0,mi.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Belt Size"}),(0,mi.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Recommended Angle"}),(0,mi.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Workable Range"}),(0,mi.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Length Factor"})]})}),(0,mi.jsx)("tbody",{className:"divide-y divide-gray-700",children:v.map((e,t)=>(0,mi.jsxs)("tr",{className:"hover:bg-gray-700 transition-colors",children:[(0,mi.jsx)("td",{className:"px-4 py-3 text-sm font-medium text-white",children:e.coreRange}),(0,mi.jsx)("td",{className:"px-4 py-3 text-sm text-gray-300",children:e.paperWidth}),(0,mi.jsx)("td",{className:"px-4 py-3 text-sm text-gray-300",children:e.beltSize}),(0,mi.jsx)("td",{className:"px-4 py-3 text-sm text-gray-300",children:(0,mi.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:e.recommendedAngle})}),(0,mi.jsx)("td",{className:"px-4 py-3 text-sm text-gray-300",children:e.workableRange}),(0,mi.jsx)("td",{className:"px-4 py-3 text-sm text-gray-300",children:(0,mi.jsx)("span",{className:"font-mono",children:e.lengthFactor})})]},t))})]})})]}),l&&(0,mi.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,mi.jsxs)("div",{className:"bg-gray-800 rounded-lg max-w-md w-full mx-4",children:[(0,mi.jsxs)("div",{className:"flex justify-between items-center p-6 border-b border-gray-700",children:[(0,mi.jsx)("h3",{className:"text-lg font-medium text-white",children:c?"Edit Machinery Specification":"Add Machinery Specification"}),(0,mi.jsx)("button",{onClick:()=>o(!1),className:"text-gray-400 hover:text-white",children:(0,mi.jsx)(nl,{className:"h-6 w-6"})})]}),(0,mi.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),b({});const t={};if(f.function.trim()||(t.function="Function is required"),f.rate_per_hour.trim()?(isNaN(parseFloat(f.rate_per_hour))||parseFloat(f.rate_per_hour)<=0)&&(t.rate_per_hour="Rate per hour must be a positive number"):t.rate_per_hour="Rate per hour is required",Object.keys(t).length>0)b(t);else try{const e={function:f.function.trim(),rate_per_hour:parseFloat(f.rate_per_hour),description:f.description.trim()||null};c?(await Ur(c.id,e),Bt.success("Machinery rate updated successfully")):(await zr(e),Bt.success("Machinery rate created successfully")),o(!1),j()}catch(a){if(console.error("Error saving machinery rate:",a),a.response&&422===a.response.status&&a.response.data.detail)if(Array.isArray(a.response.data.detail)){const e=a.response.data.detail.map(e=>e.msg||e.message||"Validation error").join(", ");Bt.error(e)}else Bt.error("Please fix the validation errors");else a.response&&400===a.response.status?Bt.error(a.response.data.detail||"Rate for this function already exists"):Bt.error("Failed to save machinery rate")}},className:"p-6",children:[(0,mi.jsxs)("div",{className:"space-y-4",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsxs)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Function ",(0,mi.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,mi.jsxs)("select",{value:f.function,onChange:e=>g(t=>m(m({},t),{},{function:e.target.value})),className:"w-full px-3 py-2 bg-gray-700 border rounded-lg text-white focus:outline-none focus:border-blue-500 ".concat(y.function?"border-red-500":"border-gray-600"),children:[(0,mi.jsx)("option",{value:"",children:"Select a function"}),["Slitting","core_winder","Cutting/Indexing","splitting","Packing","Delivery Time"].map(e=>(0,mi.jsx)("option",{value:e,children:e},e))]}),y.function&&(0,mi.jsx)("p",{className:"text-red-400 text-sm mt-1",children:y.function})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsxs)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Rate per Hour ($) ",(0,mi.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,mi.jsx)("input",{type:"number",step:"0.01",min:"0",value:f.rate_per_hour,onChange:e=>g(t=>m(m({},t),{},{rate_per_hour:e.target.value})),className:"w-full px-3 py-2 bg-gray-700 border rounded-lg text-white focus:outline-none focus:border-blue-500 ".concat(y.rate_per_hour?"border-red-500":"border-gray-600"),placeholder:"0.00"}),y.rate_per_hour&&(0,mi.jsx)("p",{className:"text-red-400 text-sm mt-1",children:y.rate_per_hour})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Description (Optional)"}),(0,mi.jsx)("textarea",{value:f.description,onChange:e=>g(t=>m(m({},t),{},{description:e.target.value})),rows:3,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-blue-500",placeholder:"Optional description for this rate..."})]})]}),(0,mi.jsxs)("div",{className:"flex justify-between items-center mt-6 pt-4 border-t border-gray-700",children:[c&&(0,mi.jsx)("button",{type:"button",onClick:()=>_(c),className:"misty-button misty-button-danger mr-auto",children:"Delete Rate"}),(0,mi.jsxs)("div",{className:"flex space-x-3 ml-auto",children:[(0,mi.jsx)("button",{type:"button",onClick:()=>o(!1),className:"misty-button misty-button-secondary",children:"Cancel"}),(0,mi.jsx)("button",{type:"submit",className:"misty-button misty-button-primary",children:c?"Update Rate":"Create Rate"})]})]})]})]})}),u&&(0,mi.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,mi.jsx)("div",{className:"bg-gray-800 rounded-lg max-w-md w-full mx-4",children:(0,mi.jsxs)("div",{className:"p-6",children:[(0,mi.jsx)("h3",{className:"text-lg font-medium text-white mb-4",children:"Confirm Delete"}),(0,mi.jsxs)("p",{className:"text-gray-300 mb-6",children:['Are you sure you want to delete the rate for "',null===h||void 0===h?void 0:h.function,'"? This action cannot be undone.']}),(0,mi.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,mi.jsx)("button",{onClick:()=>{p(!1),x(null)},className:"misty-button misty-button-secondary",children:"Cancel"}),(0,mi.jsx)("button",{onClick:async()=>{if(h)try{await Wr(h.id),Bt.success("Machinery rate deleted successfully"),p(!1),x(null),o(!1),j()}catch(e){console.error("Error deleting machinery rate:",e),Bt.error("Failed to delete machinery rate")}},className:"misty-button misty-button-danger",children:"Delete"})]})]})})})]})})},Bx=["title","titleId"];function zx(e,t){let{title:a,titleId:s}=e,r=l(e,Bx);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},r),a?n.createElement("title",{id:s},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"}))}const Ux=n.forwardRef(zx),Wx=["title","titleId"];function Hx(e,t){let{title:a,titleId:s}=e,r=l(e,Wx);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},r),a?n.createElement("title",{id:s},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"}))}const Gx=n.forwardRef(Hx),Vx=e=>{let{clients:t,materials:a,loading:s,setLoading:r}=e;const[i,l]=(0,n.useState)({client_id:"",material_id:"",start_date:"",end_date:""}),[o,c]=(0,n.useState)(null);return(0,mi.jsxs)("div",{children:[(0,mi.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),r(!0);try{const e=await Hn(i);c(e.data.data),Bt.success("Calculation completed successfully")}catch(t){console.error("Calculation failed:",t),Bt.error("Calculation failed")}finally{r(!1)}},className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Client"}),(0,mi.jsxs)("select",{value:i.client_id,onChange:e=>l(m(m({},i),{},{client_id:e.target.value})),className:"misty-select w-full",required:!0,children:[(0,mi.jsx)("option",{value:"",children:"Select client"}),t.map(e=>(0,mi.jsx)("option",{value:e.id,children:e.company_name},e.id))]})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Material"}),(0,mi.jsxs)("select",{value:i.material_id,onChange:e=>l(m(m({},i),{},{material_id:e.target.value})),className:"misty-select w-full",required:!0,children:[(0,mi.jsx)("option",{value:"",children:"Select material"}),a.map(e=>(0,mi.jsxs)("option",{value:e.id,children:[e.supplier," - ",e.product_code]},e.id))]})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Start Date"}),(0,mi.jsx)("input",{type:"date",value:i.start_date,onChange:e=>l(m(m({},i),{},{start_date:e.target.value})),className:"misty-input w-full",required:!0})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"End Date"}),(0,mi.jsx)("input",{type:"date",value:i.end_date,onChange:e=>l(m(m({},i),{},{end_date:e.target.value})),className:"misty-input w-full",required:!0})]}),(0,mi.jsx)("div",{className:"md:col-span-2",children:(0,mi.jsx)("button",{type:"submit",disabled:s,className:"misty-button misty-button-primary",children:s?(0,mi.jsxs)(mi.Fragment,{children:[(0,mi.jsx)(Gx,{className:"animate-spin h-4 w-4 mr-2"}),"Calculating..."]}):"Calculate Consumption"})})]}),o&&(0,mi.jsxs)("div",{className:"bg-gray-700 rounded-lg p-4",children:[(0,mi.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Calculation Results"}),(0,mi.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,mi.jsxs)("div",{className:"text-center",children:[(0,mi.jsx)("div",{className:"text-2xl font-bold text-yellow-400",children:o.results.total_consumption}),(0,mi.jsxs)("div",{className:"text-sm text-gray-300",children:[o.results.unit," Total Consumption"]})]}),(0,mi.jsxs)("div",{className:"text-center",children:[(0,mi.jsx)("div",{className:"text-2xl font-bold text-blue-400",children:o.results.order_count}),(0,mi.jsx)("div",{className:"text-sm text-gray-300",children:"Orders Analyzed"})]}),(0,mi.jsxs)("div",{className:"text-center",children:[(0,mi.jsx)("div",{className:"text-lg font-semibold text-green-400",children:o.results.material_name}),(0,mi.jsx)("div",{className:"text-sm text-gray-300",children:"Material"})]})]})]})]})},$x=e=>{let{loading:t,setLoading:a}=e;const[s,r]=(0,n.useState)([]),[i,l]=(0,n.useState)({material_id:"",waste_allowance_mm:5,desired_slit_widths:[""],quantity_master_rolls:1}),[o,c]=(0,n.useState)(null),[d,u]=(0,n.useState)("yield"),[p,h]=(0,n.useState)(null);(0,n.useEffect)(()=>{x()},[]);const x=async()=>{try{let e=await fetch("/api/materials",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(e.ok){const t=await e.json();return void r(t)}if(e=await fetch("/api/stock/raw-materials",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}),e.ok){const t=await e.json();r(t.data||[])}}catch(e){console.error("Failed to load raw materials:",e),Bt.error("Failed to load raw materials")}};return(0,mi.jsxs)("div",{children:[(0,mi.jsxs)("div",{className:"bg-blue-900 bg-opacity-20 border border-blue-500 border-opacity-30 rounded-lg p-4 mb-6",children:[(0,mi.jsx)("h3",{className:"text-blue-200 font-medium mb-2",children:"\ud83d\udcd0 Raw Material Permutation & Yield Calculator"}),(0,mi.jsx)("p",{className:"text-sm text-blue-300",children:"Calculate all possible slit-cut patterns for converting master rolls into smaller widths. Find the most efficient patterns to minimize waste, maximize yield, and optimize costs."})]}),(0,mi.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),a(!0);try{const e=i.desired_slit_widths.filter(e=>""!==e&&!isNaN(parseFloat(e))).map(e=>parseFloat(e));if(0===e.length)return Bt.error("Please enter at least one slit width"),void a(!1);const t={material_id:i.material_id,waste_allowance_mm:parseFloat(i.waste_allowance_mm),desired_slit_widths:e,quantity_master_rolls:parseInt(i.quantity_master_rolls)},s=await fetch("/api/calculators/material-permutation",{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"},body:JSON.stringify(t)});if(s.ok){const e=await s.json();c(e.data),Bt.success(e.message)}else{const e=await s.json();Bt.error(e.detail||"Calculation failed")}}catch(t){console.error("Calculation failed:",t),Bt.error("Permutation calculation failed")}finally{a(!1)}},className:"space-y-6 mb-6",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsxs)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["1. Select Raw Material ",(0,mi.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,mi.jsxs)("select",{value:i.material_id,onChange:e=>(e=>{const t=s.find(t=>t.id===e||t.material_id===e);h(t),l(m(m({},i),{},{material_id:e}))})(e.target.value),className:"misty-select w-full",required:!0,children:[(0,mi.jsx)("option",{value:"",children:"Select a material..."}),s.map(e=>{const t=e.id||e.material_id,a=e.width_mm||e.master_deckle_width_mm||0,s=e.supplier||e.material_description||"Unknown",n=e.product_code||"N/A",r=e.gsm||0;return(0,mi.jsxs)("option",{value:t,children:[s," - ",n," (",a,"mm, ",r," GSM)"]},t)})]}),p&&(0,mi.jsxs)("div",{className:"mt-3 bg-gray-700 rounded-lg p-4",children:[(0,mi.jsx)("h4",{className:"text-sm font-medium text-yellow-400 mb-2",children:"Material Details"}),(0,mi.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("span",{className:"text-gray-400",children:"Master Width:"}),(0,mi.jsxs)("p",{className:"text-white font-medium",children:[p.width_mm||p.master_deckle_width_mm||0," mm"]})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("span",{className:"text-gray-400",children:"GSM:"}),(0,mi.jsx)("p",{className:"text-white font-medium",children:p.gsm||0})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("span",{className:"text-gray-400",children:"Cost/Tonne:"}),(0,mi.jsxs)("p",{className:"text-white font-medium",children:["$",(p.cost_per_tonne||p.price||0).toFixed(2)]})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("span",{className:"text-gray-400",children:"Tonnage:"}),(0,mi.jsxs)("p",{className:"text-white font-medium",children:[p.tonnage||"0"," tonnes"]})]})]})]})]}),(0,mi.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsxs)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["2. Waste Allowance (mm) ",(0,mi.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,mi.jsx)("input",{type:"number",step:"0.1",min:"0",value:i.waste_allowance_mm,onChange:e=>l(m(m({},i),{},{waste_allowance_mm:e.target.value})),className:"misty-input w-full",placeholder:"e.g., 5",required:!0}),(0,mi.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Maximum acceptable leftover width"})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Quantity of Master Rolls"}),(0,mi.jsx)("input",{type:"number",min:"1",value:i.quantity_master_rolls,onChange:e=>l(m(m({},i),{},{quantity_master_rolls:e.target.value})),className:"misty-input w-full",required:!0}),(0,mi.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Number of rolls available for conversion"})]})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsxs)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["3. Desired Slit Widths (mm) ",(0,mi.jsx)("span",{className:"text-red-400",children:"*"})]}),i.desired_slit_widths.map((e,t)=>(0,mi.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,mi.jsx)("input",{type:"number",step:"0.1",min:"1",placeholder:"Width (mm), e.g., 50, 75, 100",value:e,onChange:e=>((e,t)=>{const a=i.desired_slit_widths.map((a,s)=>s===e?t:a);l(m(m({},i),{},{desired_slit_widths:a}))})(t,e.target.value),className:"misty-input flex-1",required:!0}),i.desired_slit_widths.length>1&&(0,mi.jsx)("button",{type:"button",onClick:()=>(e=>{const t=i.desired_slit_widths.filter((t,a)=>a!==e);l(m(m({},i),{},{desired_slit_widths:t}))})(t),className:"text-red-400 hover:text-red-300 px-3 py-2",children:"Remove"})]},t)),(0,mi.jsx)("button",{type:"button",onClick:()=>{l(m(m({},i),{},{desired_slit_widths:[...i.desired_slit_widths,""]}))},className:"text-yellow-400 hover:text-yellow-300 text-sm font-medium",children:"+ Add Slit Width"})]}),(0,mi.jsx)("button",{type:"submit",disabled:t,className:"misty-button misty-button-primary w-full md:w-auto",children:t?(0,mi.jsxs)(mi.Fragment,{children:[(0,mi.jsx)(Gx,{className:"animate-spin h-5 w-5 mr-2"}),"Calculating All Permutations..."]}):"\ud83d\udd0d Calculate All Permutations"})]}),o&&(0,mi.jsxs)("div",{className:"space-y-6",children:[(0,mi.jsxs)("div",{className:"bg-gradient-to-r from-green-900/30 to-blue-900/30 border border-green-500 border-opacity-30 rounded-lg p-6",children:[(0,mi.jsx)("h3",{className:"text-xl font-bold text-white mb-4",children:"\ud83d\udcca Calculation Summary"}),(0,mi.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("span",{className:"text-sm text-gray-300",children:"Total Patterns Found"}),(0,mi.jsx)("p",{className:"text-2xl font-bold text-green-400",children:o.total_permutations_found})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("span",{className:"text-sm text-gray-300",children:"Best Yield"}),(0,mi.jsxs)("p",{className:"text-2xl font-bold text-green-400",children:[o.best_yield_percentage,"%"]})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("span",{className:"text-sm text-gray-300",children:"Lowest Waste"}),(0,mi.jsxs)("p",{className:"text-2xl font-bold text-green-400",children:[o.lowest_waste_mm," mm"]})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("span",{className:"text-sm text-gray-300",children:"Linear Meters/Roll"}),(0,mi.jsxs)("p",{className:"text-2xl font-bold text-blue-400",children:[o.material_info.total_linear_meters," m"]})]})]})]}),(0,mi.jsxs)("div",{className:"flex items-center justify-between",children:[(0,mi.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,mi.jsx)("label",{className:"text-sm text-gray-300",children:"Sort by:"}),(0,mi.jsxs)("select",{value:d,onChange:e=>u(e.target.value),className:"misty-select",children:[(0,mi.jsx)("option",{value:"yield",children:"Highest Yield"}),(0,mi.jsx)("option",{value:"waste",children:"Lowest Waste"}),(0,mi.jsx)("option",{value:"cost",children:"Lowest Cost"})]})]}),(0,mi.jsxs)("div",{className:"flex space-x-2",children:[(0,mi.jsx)("button",{onClick:()=>{if(!o)return;const e=o.permutations.map(e=>[e.pattern_description,e.used_width_mm,e.waste_mm,e.yield_percentage,e.slits_per_master_roll,e.total_finished_rolls,e.linear_meters_per_slit,e.total_pattern_weight_kg,e.total_pattern_cost_aud,e.total_cost_all_rolls_aud]),t=[["Raw Material Permutation and Yield Calculator"],["Material: "+o.material_info.material_name],["Master Width: "+o.material_info.master_width_mm+"mm"],[],["Pattern","Used Width (mm)","Waste (mm)","Yield (%)","Slits/Roll","Total Rolls","Linear Meters","Weight (kg)","Cost/Pattern (AUD)","Total Cost (AUD)"],...e].map(e=>e.join(",")).join("\n"),a=new Blob([t],{type:"text/csv"}),s=window.URL.createObjectURL(a),n=document.createElement("a");n.href=s,n.download="material-permutation-".concat(Date.now(),".csv"),n.click(),window.URL.revokeObjectURL(s),Bt.success("CSV exported successfully")},className:"misty-button misty-button-secondary",children:"\ud83d\udce5 Export CSV"}),(0,mi.jsx)("button",{onClick:()=>{window.print()},className:"misty-button misty-button-secondary",children:"\ud83d\udda8\ufe0f Print"})]})]}),(0,mi.jsx)("div",{className:"overflow-x-auto",children:(0,mi.jsxs)("table",{className:"w-full",children:[(0,mi.jsx)("thead",{className:"bg-gray-700",children:(0,mi.jsxs)("tr",{children:[(0,mi.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Pattern"}),(0,mi.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Used (mm)"}),(0,mi.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Waste (mm)"}),(0,mi.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Yield (%)"}),(0,mi.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Rolls Out"}),(0,mi.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Linear m"}),(0,mi.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Weight (kg)"}),(0,mi.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Cost (AUD)"})]})}),(0,mi.jsx)("tbody",{className:"bg-gray-800 divide-y divide-gray-700",children:(()=>{if(!o)return[];const e=[...o.permutations];switch(d){case"waste":return e.sort((e,t)=>e.waste_mm-t.waste_mm);case"cost":return e.sort((e,t)=>e.total_cost_all_rolls_aud-t.total_cost_all_rolls_aud);default:return e.sort((e,t)=>t.yield_percentage-e.yield_percentage)}})().map((e,t)=>(0,mi.jsxs)("tr",{className:t<3?"bg-green-900 bg-opacity-20":"",children:[(0,mi.jsx)("td",{className:"px-4 py-3 whitespace-nowrap",children:(0,mi.jsxs)("div",{className:"flex items-center",children:[t<3&&(0,mi.jsx)("span",{className:"text-yellow-400 mr-2",children:"\u2b50"}),(0,mi.jsx)("span",{className:"text-white font-medium",children:e.pattern_description})]})}),(0,mi.jsx)("td",{className:"px-4 py-3 text-gray-300",children:e.used_width_mm}),(0,mi.jsx)("td",{className:"px-4 py-3 text-gray-300",children:e.waste_mm}),(0,mi.jsx)("td",{className:"px-4 py-3",children:(0,mi.jsxs)("span",{className:"font-medium ".concat(e.yield_percentage>=95?"text-green-400":"text-yellow-400"),children:[e.yield_percentage,"%"]})}),(0,mi.jsx)("td",{className:"px-4 py-3 text-gray-300",children:e.total_finished_rolls}),(0,mi.jsx)("td",{className:"px-4 py-3 text-gray-300",children:e.linear_meters_per_slit}),(0,mi.jsx)("td",{className:"px-4 py-3 text-gray-300",children:e.total_pattern_weight_kg}),(0,mi.jsxs)("td",{className:"px-4 py-3 text-gray-300",children:["$",e.total_cost_all_rolls_aud.toFixed(2)]})]},t))})]})})]})]})},Qx=e=>{let{productSpecs:t,loading:a,setLoading:s}=e;const[r,i]=(0,n.useState)({product_specification_id:"",core_internal_diameter:"",wall_thickness_required:"",core_length:"",quantity:"",master_tube_length:""}),[l,o]=(0,n.useState)(null),c=e=>{const{core_internal_diameter:t,wall_thickness_required:a,core_length:s,quantity:n,master_tube_length:r}=e,i=t+2*a,l=t/2,o=i/2,c=Math.PI*(Math.pow(o,2)-Math.pow(l,2))*s,d=c*n,u=s/1e3,m=u*n;let p=null;return r&&(p=Math.ceil(m/(r/1e3))),{calculations:{outer_diameter:i.toFixed(2),volume_per_core:(c/1e6).toFixed(6),total_volume:(d/1e6).toFixed(6),linear_meters_per_core:u.toFixed(3),total_linear_meters:m.toFixed(3),master_tubes_required:p},input_parameters:e}};return(0,mi.jsxs)("div",{children:[(0,mi.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),s(!0);try{const e=m(m({},r),{},{core_internal_diameter:parseFloat(r.core_internal_diameter),wall_thickness_required:parseFloat(r.wall_thickness_required),core_length:parseFloat(r.core_length),quantity:parseInt(r.quantity),master_tube_length:r.master_tube_length?parseFloat(r.master_tube_length):null}),t=c(e);o(t),Bt.success("Consumption calculated successfully")}catch(t){console.error("Calculation failed:",t),Bt.error("Calculation failed")}finally{s(!1)}},className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[(0,mi.jsxs)("div",{className:"md:col-span-2",children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Product Specification"}),(0,mi.jsxs)("select",{value:r.product_specification_id,onChange:e=>(e=>{const a=t.find(t=>t.id===e);a&&a.specifications?i(t=>m(m({},t),{},{product_specification_id:e,core_internal_diameter:a.specifications.internal_diameter||"",wall_thickness_required:a.specifications.wall_thickness_required||""})):i(t=>m(m({},t),{},{product_specification_id:e,core_internal_diameter:"",wall_thickness_required:""}))})(e.target.value),className:"misty-select w-full",required:!0,children:[(0,mi.jsx)("option",{value:"",children:"Select spiral paper core specification"}),t.map(e=>(0,mi.jsx)("option",{value:e.id,children:e.product_name},e.id))]})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Internal Diameter (mm) *"}),(0,mi.jsx)("input",{type:"number",step:"0.1",value:r.core_internal_diameter,onChange:e=>i(m(m({},r),{},{core_internal_diameter:e.target.value})),className:"misty-input w-full bg-gray-700",placeholder:"Auto-populated from product spec",readOnly:!0}),(0,mi.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Automatically filled from selected product specification"})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Wall Thickness (mm) *"}),(0,mi.jsx)("input",{type:"number",step:"0.1",value:r.wall_thickness_required,onChange:e=>i(m(m({},r),{},{wall_thickness_required:e.target.value})),className:"misty-input w-full bg-gray-700",placeholder:"Auto-populated from product spec",readOnly:!0}),(0,mi.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Automatically filled from selected product specification"})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Core Length (mm) *"}),(0,mi.jsx)("input",{type:"number",step:"0.1",value:r.core_length,onChange:e=>i(m(m({},r),{},{core_length:e.target.value})),className:"misty-input w-full",placeholder:"Enter core length",required:!0}),(0,mi.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Required input for calculation"})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Quantity *"}),(0,mi.jsx)("input",{type:"number",min:"1",value:r.quantity,onChange:e=>i(m(m({},r),{},{quantity:e.target.value})),className:"misty-input w-full",placeholder:"Enter quantity needed",required:!0}),(0,mi.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Required input for calculation"})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Master Tube Length (mm)"}),(0,mi.jsx)("input",{type:"number",step:"0.1",value:r.master_tube_length,onChange:e=>i(m(m({},r),{},{master_tube_length:e.target.value})),className:"misty-input w-full",placeholder:"Optional: Calculate master tubes required"}),(0,mi.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Optional: If provided, calculates quantity of master tubes needed"})]}),(0,mi.jsx)("div",{children:(0,mi.jsx)("button",{type:"submit",disabled:a,className:"misty-button misty-button-primary w-full",children:a?(0,mi.jsxs)(mi.Fragment,{children:[(0,mi.jsx)(Gx,{className:"animate-spin h-4 w-4 mr-2"}),"Calculating..."]}):"Calculate Consumption"})})]}),l&&(0,mi.jsxs)("div",{className:"bg-gray-700 rounded-lg p-6",children:[(0,mi.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"\ud83e\uddee Spiral Core Consumption Results"}),(0,mi.jsxs)("div",{className:"mb-6 p-4 bg-gray-800 rounded-lg",children:[(0,mi.jsx)("h4",{className:"text-md font-semibold text-white mb-3",children:"Input Parameters"}),(0,mi.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("span",{className:"text-gray-400",children:"Internal Diameter:"}),(0,mi.jsxs)("div",{className:"text-white font-medium",children:[l.input_parameters.core_internal_diameter," mm"]})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("span",{className:"text-gray-400",children:"Wall Thickness:"}),(0,mi.jsxs)("div",{className:"text-white font-medium",children:[l.input_parameters.wall_thickness_required," mm"]})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("span",{className:"text-gray-400",children:"Core Length:"}),(0,mi.jsxs)("div",{className:"text-white font-medium",children:[l.input_parameters.core_length," mm"]})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("span",{className:"text-gray-400",children:"Quantity:"}),(0,mi.jsx)("div",{className:"text-white font-medium",children:l.input_parameters.quantity})]})]})]}),(0,mi.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,mi.jsxs)("div",{className:"space-y-4",children:[(0,mi.jsx)("h4",{className:"text-md font-semibold text-white",children:"\ud83d\udccf Dimensions & Volume"}),(0,mi.jsxs)("div",{className:"space-y-2",children:[(0,mi.jsxs)("div",{className:"flex justify-between",children:[(0,mi.jsx)("span",{className:"text-gray-300",children:"Outer Diameter:"}),(0,mi.jsxs)("span",{className:"text-white font-medium",children:[l.calculations.outer_diameter," mm"]})]}),(0,mi.jsxs)("div",{className:"flex justify-between",children:[(0,mi.jsx)("span",{className:"text-gray-300",children:"Volume per Core:"}),(0,mi.jsxs)("span",{className:"text-white font-medium",children:[l.calculations.volume_per_core," cm\xb3"]})]}),(0,mi.jsxs)("div",{className:"flex justify-between",children:[(0,mi.jsx)("span",{className:"text-gray-300",children:"Total Volume:"}),(0,mi.jsxs)("span",{className:"text-white font-medium",children:[l.calculations.total_volume," cm\xb3"]})]})]})]}),(0,mi.jsxs)("div",{className:"space-y-4",children:[(0,mi.jsx)("h4",{className:"text-md font-semibold text-white",children:"\ud83d\udcd0 Linear Measurements"}),(0,mi.jsxs)("div",{className:"space-y-2",children:[(0,mi.jsxs)("div",{className:"flex justify-between",children:[(0,mi.jsx)("span",{className:"text-gray-300",children:"Length per Core:"}),(0,mi.jsxs)("span",{className:"text-white font-medium",children:[l.calculations.linear_meters_per_core," m"]})]}),(0,mi.jsxs)("div",{className:"flex justify-between font-bold",children:[(0,mi.jsx)("span",{className:"text-yellow-400",children:"Total Linear Meters:"}),(0,mi.jsxs)("span",{className:"text-yellow-400 font-bold",children:[l.calculations.total_linear_meters," m"]})]}),l.calculations.master_tubes_required&&(0,mi.jsxs)("div",{className:"flex justify-between font-bold",children:[(0,mi.jsx)("span",{className:"text-green-400",children:"Master Tubes Required:"}),(0,mi.jsx)("span",{className:"text-green-400 font-bold",children:l.calculations.master_tubes_required})]})]})]})]}),(0,mi.jsxs)("div",{className:"mt-6 p-4 bg-gradient-to-r from-yellow-900/20 to-orange-900/20 rounded-lg border border-yellow-700/30",children:[(0,mi.jsx)("h4",{className:"text-md font-semibold text-yellow-400 mb-2",children:"\ud83d\udccb Material Usage Summary"}),(0,mi.jsxs)("div",{className:"text-white",children:[(0,mi.jsxs)("p",{children:["\u2022 ",(0,mi.jsx)("strong",{children:l.input_parameters.quantity})," spiral cores will require ",(0,mi.jsxs)("strong",{children:[l.calculations.total_volume," cm\xb3"]})," of material"]}),(0,mi.jsxs)("p",{children:["\u2022 Total finished tube length: ",(0,mi.jsxs)("strong",{children:[l.calculations.total_linear_meters," meters"]})]}),l.calculations.master_tubes_required&&(0,mi.jsxs)("p",{children:["\u2022 Master tubes needed (based on ",(l.input_parameters.master_tube_length/1e3).toFixed(1),"m length): ",(0,mi.jsxs)("strong",{children:[l.calculations.master_tubes_required," tubes"]})]})]})]})]})]})},Yx=()=>{var e;const[t,a]=(0,n.useState)(null),[s,r]=(0,n.useState)(!1),[i,l]=(0,n.useState)([]),[o,c]=(0,n.useState)([]),[d,u]=(0,n.useState)([]);(0,n.useEffect)(()=>{m()},[]);const m=async()=>{try{const[e,t,a]=await Promise.all([jn(),En(),Mn()]);l(e.data),c(t.data),u(a.data)}catch(e){console.error("Failed to load data:",e),Bt.error("Failed to load calculator data")}},p=[{id:"material-consumption-client",name:"Material Consumption by Client",description:"Calculate material consumption for client orders within date range",icon:Ux},{id:"material-permutation",name:"Material Permutation",description:"Calculate all slit-cut patterns for master rolls with cost, waste, and yield optimization",icon:Bi},{id:"spiral-core-consumption",name:"Spiral Paper Core Consumption",description:"Calculate material usage for Spiral Paper Core manufacturing",icon:Yi}];return(0,mi.jsx)(hl,{children:(0,mi.jsxs)("div",{className:"p-8",children:[(0,mi.jsxs)("div",{className:"mb-6",children:[(0,mi.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"Manufacturing Calculators"}),(0,mi.jsx)("p",{className:"text-gray-400",children:"Advanced calculation tools for manufacturing processes"})]}),t?(0,mi.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6",children:[(0,mi.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,mi.jsx)("h2",{className:"text-xl font-bold text-white",children:null===(e=p.find(e=>e.id===t))||void 0===e?void 0:e.name}),(0,mi.jsx)("button",{onClick:()=>a(null),className:"misty-button misty-button-secondary",children:"\u2190 Back to Calculators"})]}),"material-consumption-client"===t&&(0,mi.jsx)(Vx,{clients:i,materials:o,loading:s,setLoading:r}),"material-permutation"===t&&(0,mi.jsx)($x,{loading:s,setLoading:r}),"spiral-core-consumption"===t&&(0,mi.jsx)(Qx,{productSpecs:d.filter(e=>"Spiral Paper Core"===e.product_type),loading:s,setLoading:r})]}):(0,mi.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:p.map(e=>(0,mi.jsxs)("div",{onClick:()=>a(e.id),className:"bg-gray-800 rounded-lg p-6 cursor-pointer hover:bg-gray-700 transition-colors border border-gray-700 hover:border-yellow-400",children:[(0,mi.jsxs)("div",{className:"flex items-center mb-4",children:[(0,mi.jsx)(e.icon,{className:"h-8 w-8 text-yellow-400 mr-3"}),(0,mi.jsx)("h3",{className:"text-lg font-semibold text-white",children:e.name})]}),(0,mi.jsx)("p",{className:"text-gray-300 text-sm",children:e.description}),(0,mi.jsx)("div",{className:"mt-4",children:(0,mi.jsx)("span",{className:"text-yellow-400 text-sm font-medium",children:"Click to open \u2192"})})]},e.id))})]})})},Jx=["title","titleId"];function Zx(e,t){let{title:a,titleId:s}=e,r=l(e,Jx);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},r),a?n.createElement("title",{id:s},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"}))}const Xx=n.forwardRef(Zx),Kx=["title","titleId"];function ef(e,t){let{title:a,titleId:s}=e,r=l(e,Kx);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},r),a?n.createElement("title",{id:s},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const tf=n.forwardRef(ef),af=["title","titleId"];function sf(e,t){let{title:a,titleId:s}=e,r=l(e,af);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},r),a?n.createElement("title",{id:s},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 10.5 12 3m0 0 7.5 7.5M12 3v18"}))}const nf=n.forwardRef(sf),rf=["title","titleId"];function lf(e,t){let{title:a,titleId:s}=e,r=l(e,rf);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},r),a?n.createElement("title",{id:s},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 13.5 12 21m0 0-7.5-7.5M12 21V3"}))}const of=n.forwardRef(lf),cf=()=>{var e,t;const[a,s]=(0,n.useState)(null),[r,i]=(0,n.useState)(!1),[l,o]=(0,n.useState)([]),[c,d]=(0,n.useState)({}),[u,p]=(0,n.useState)(!0),[h,x]=(0,n.useState)(!1),[f,g]=(0,n.useState)("monthly"),[y,b]=(0,n.useState)([]),[v,j]=(0,n.useState)([]),[w,_]=(0,n.useState)("all"),[N,k]=(0,n.useState)([]),[S,C]=(0,n.useState)([]),[E,D]=(0,n.useState)(!1),[P,A]=(0,n.useState)([]),[T,L]=(0,n.useState)([]),[R,F]=(0,n.useState)([]),[O,M]=(0,n.useState)(!1),[I,q]=(0,n.useState)(null),[B,z]=(0,n.useState)([]),[U,W]=(0,n.useState)([]),[H,G]=(0,n.useState)(!1),[V,$]=(0,n.useState)(null),[Q,Y]=(0,n.useState)(!1),[J,Z]=(0,n.useState)(""),[X,K]=(0,n.useState)([]),[ee,te]=(0,n.useState)(!1),[ae,se]=(0,n.useState)({}),[ne,re]=(0,n.useState)(!1),[ie,le]=(0,n.useState)([]),[oe,ce]=(0,n.useState)(!1),[de,ue]=(0,n.useState)(null),[me,pe]=(0,n.useState)(!1),[he,xe]=(0,n.useState)(null),[fe,ge]=(0,n.useState)([]),[ye,be]=(0,n.useState)(!1),[ve,je]=(0,n.useState)(null),[we,_e]=(0,n.useState)({slit_width_mm:"",quantity_meters:"",source_job_id:"manual-entry",source_order_id:"manual-entry"}),[Ne,ke]=(0,n.useState)(!1),[Se,Ce]=(0,n.useState)(!1),[Ee,De]=(0,n.useState)(!1),[Pe,Ae]=(0,n.useState)(!1),[Te,Le]=(0,n.useState)(!1),[Re,Fe]=(0,n.useState)(null),[Oe,Me]=(0,n.useState)(null),[Ie,qe]=(0,n.useState)(null),[Be,ze]=(0,n.useState)(null),[Ue,We]=(0,n.useState)({client_id:"",client_name:"",product_id:"",product_code:"",product_description:"",quantity_on_hand:0,unit_of_measure:"units",source_order_id:"",is_shared_product:!1,shared_with_clients:[],minimum_stock_level:0}),[He,Ge]=(0,n.useState)({material_id:"",material_name:"",quantity_on_hand:0,unit_of_measure:"kg",minimum_stock_level:0,alert_threshold_days:7,supplier_id:"",usage_rate_per_month:0});(0,n.useEffect)(()=>{Ve(),$e(),Qe(),Ze()},[]),(0,n.useEffect)(()=>{"raw_substrates"===f?Ye():"raw_materials"===f&&Je()},[f,w]),(0,n.useEffect)(()=>{(async()=>{if(y&&y.length>0){const e="all"===w?y:y.filter(e=>e.client_id===w),t=await tt(e);F(t)}else F([])})()},[y,w]);const Ve=async()=>{try{p(!0);const e=(await Gn()).data;if(s(e.stocktake),i(e.stocktake_required),e.stocktake&&"in_progress"===e.stocktake.status){const e=await En();o(e.data)}}catch(e){console.error("Failed to load stocktake status:",e),Bt.error("Failed to load stocktake status")}finally{p(!1)}},$e=async()=>{try{const e=await jn();k(e.data||[])}catch(e){console.error("Failed to load clients:",e)}},Qe=async()=>{try{var e;const t=await si("/stock/alerts"),a=(null===(e=t.data)||void 0===e?void 0:e.data)||t.data||[],s=Array.isArray(a)?a:[];C(s),D(s.length>0)}catch(t){console.error("Failed to load stock alerts:",t),C([]),D(!1)}},Ye=async()=>{try{var e;const t=await si("/stock/raw-substrates".concat("all"!==w?"?client_id=".concat(w):"")),a=(null===(e=t.data)||void 0===e?void 0:e.data)||t.data||[];b(Array.isArray(a)?a:[])}catch(t){console.error("Failed to load raw substrates:",t),Bt.error("Failed to load raw substrates"),b([])}},Je=async()=>{try{var e;const t=await si("/stock/raw-materials"),a=(null===(e=t.data)||void 0===e?void 0:e.data)||t.data||[];j(Array.isArray(a)?a:[])}catch(t){console.error("Failed to load raw materials stock:",t),Bt.error("Failed to load raw materials stock"),j([])}},Ze=async()=>{try{const e=(await En()).data||[];A(Array.isArray(e)?e:[])}catch(e){console.error("Failed to load available materials:",e),A([])}},Xe=async(e,t)=>{try{var a;const s=await Vr(e),n=(null===(a=s.data)||void 0===a?void 0:a.data)||s.data||{};xe({id:e,name:t}),ge(n.slit_widths||[]),pe(!0)}catch(s){console.error("Failed to load slit widths:",s),Bt.error("Failed to load slit widths for this material"),ge([])}},Ke=async(e,t)=>{if(t<0)Bt.error("Quantity cannot be negative");else try{const a={quantity_meters:parseFloat(t),remaining_quantity:parseFloat(t)},s=await Qr(e,a);s.data.success?(Bt.success("Slit width updated successfully"),je(null),await Xe(he.id,he.name)):Bt.error(s.data.message||"Failed to update slit width")}catch(a){console.error("Failed to update slit width:",a),Bt.error("Failed to update slit width")}},et=async(e,t,a)=>{const s=t+a;s<0?Bt.error("Adjustment would result in negative quantity"):await Ke(e,s)},tt=async e=>{const t={};e.forEach(e=>{const a="".concat(e.product_id,"-").concat(e.client_id);t[a]||(t[a]=m(m({},e),{},{total_quantity:0,entries:[],allocated_quantity:0,available_quantity:0})),t[a].total_quantity+=e.quantity_on_hand,t[a].entries.push(e)});const a=Object.keys(t);for(const i of a)try{var s,n;const[e,a]=i.split("-"),r=(null===(s=(await si("/stock/allocations?product_id=".concat(e,"&client_id=").concat(a))).data)||void 0===s||null===(n=s.data)||void 0===n?void 0:n.allocations)||[];t[i].allocated_quantity=r.reduce((e,t)=>e+Math.abs(t.quantity),0)}catch(r){console.log("Failed to load allocations for",i,r),t[i].allocated_quantity=0}return Object.keys(t).forEach(e=>{t[e].available_quantity=t[e].total_quantity-t[e].allocated_quantity}),Object.values(t)},at=(e,t)=>{Fe(e),Me(t)},st=async(e,t,a,s)=>{try{const n="substrate"===s?"/stock/raw-substrates/".concat(e):"/stock/raw-materials/".concat(e);await ri(n,{[t]:parseFloat(a)}),Fe(null),Me(null),"substrate"===s?Ye():Je(),Bt.success("".concat(t," updated successfully"))}catch(n){console.error("Failed to update ".concat(t,":"),n),Bt.error("Failed to update ".concat(t))}},nt=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{await ni("/stock/alerts/".concat(e,"/acknowledge"),{snooze_hours:t}),Qe(),Bt.success(t?"Alert snoozed for ".concat(t," hours"):"Alert acknowledged")}catch(a){console.error("Failed to acknowledge alert:",a),Bt.error("Failed to acknowledge alert")}},rt=async()=>{try{const e=await ni("/stock/check-low-stock");Qe(),Bt.success(e.message||"Stock check completed")}catch(e){console.error("Failed to check low stock:",e),Bt.error("Failed to check low stock")}},it=async e=>{const t=X.find(t=>t.id===e);t&&(Bt.success("Quantity confirmed for ".concat(t.name)),se(t=>m(m({},t),{},{[e]:{confirmed:!0,modified:!1}})))},lt=async e=>{var t;const a=X.find(t=>t.id===e),s=null===(t=ae[e])||void 0===t?void 0:t.newQuantity;if(a&&void 0!==s&&""!==s)try{const t="product"===a.type?"/stock/raw-substrates/".concat(a.id):"/stock/raw-materials/".concat(a.id),n=m(m({},a.original_data),{},{quantity_on_hand:parseFloat(s)});await ri(t,n),K(t=>t.map(t=>t.id===e?m(m({},t),{},{quantity_on_hand:parseFloat(s)}):t)),se(t=>m(m({},t),{},{[e]:{confirmed:!0,modified:!0,newQuantity:void 0}})),Bt.success("Stock updated for ".concat(a.name))}catch(n){console.error("Failed to update stock:",n),Bt.error("Failed to update stock quantity")}else Bt.error("Please enter a valid quantity")},ot=async()=>{try{ce(!0);const e=await fetch("/api/stock/manual-stocktakes",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(e.ok){const t=await e.json();le(t.data||[])}}catch(e){console.error("Failed to load archived stocktakes:",e),Bt.error("Failed to load archived stocktakes")}finally{ce(!1)}},ct=()=>{const e=X.filter(e=>"product"===e.type&&("Spiral Paper Core"===e.product_type||"Composite Core"===e.product_type||e.name.toLowerCase().includes("core")));if(0===e.length)return[];const t={},a={};e.forEach(e=>{const s=e.width_mm||0;s>0&&(t[s]||(t[s]={width_mm:s,quantity:0,items:[],material_layers:[]}),t[s].quantity+=e.quantity_on_hand,t[s].items.push(e),e.material_layers&&e.material_layers.length>0&&e.material_layers.forEach(t=>{const s="".concat(t.material_name,"_").concat(t.width);a[s]||(a[s]={material_name:t.material_name||"Unknown",supplier:t.supplier||"Unknown",width_mm:t.width||0,gsm:t.gsm||0,total_linear_meters:0,layer_type:t.layer_type||"Unknown"}),a[s].total_linear_meters+=1*e.quantity_on_hand}))});const s=Object.values(t).map(e=>{const t=1*e.quantity,a=e.width_mm/1e3*t,s=e.width_mm/1500*100;return m(m({},e),{},{total_m2:a,percent_of_master:s})}),n=Object.values(a).sort((e,t)=>t.total_linear_meters-e.total_linear_meters);return{cores_by_width:s.sort((e,t)=>e.width_mm-t.width_mm),material_usage:n,total_cores:e.reduce((e,t)=>e+t.quantity_on_hand,0)}};if(u)return(0,mi.jsx)(hl,{children:(0,mi.jsx)("div",{className:"p-8",children:(0,mi.jsxs)("div",{className:"animate-pulse",children:[(0,mi.jsx)("div",{className:"h-8 bg-gray-700 rounded w-1/4 mb-8"}),(0,mi.jsx)("div",{className:"space-y-4",children:[...Array(5)].map((e,t)=>(0,mi.jsx)("div",{className:"h-16 bg-gray-700 rounded"},t))})]})})});const dt=1===(new Date).getDate();return(0,mi.jsx)(hl,{children:(0,mi.jsxs)("div",{className:"p-8",children:[(0,mi.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"Stock Management System"}),(0,mi.jsx)("p",{className:"text-gray-400",children:"Manage inventory, stocktakes, and stock alerts"})]}),(0,mi.jsxs)("div",{className:"flex items-center space-x-4",children:[S.length>0&&(0,mi.jsxs)("div",{className:"bg-red-900/20 border border-red-500 rounded-lg p-3 flex items-center",children:[(0,mi.jsx)(Xx,{className:"h-5 w-5 text-red-400 mr-2"}),(0,mi.jsxs)("span",{className:"text-red-300 text-sm",children:[(S||[]).length," stock alert",(S||[]).length>1?"s":""]})]}),dt&&r&&(0,mi.jsxs)("div",{className:"bg-yellow-900/20 border border-yellow-500 rounded-lg p-3 flex items-center",children:[(0,mi.jsx)(gl,{className:"h-5 w-5 text-yellow-400 mr-2"}),(0,mi.jsx)("span",{className:"text-yellow-300 text-sm",children:"Stocktake required today!"})]})]})]}),(0,mi.jsx)("div",{className:"mb-6",children:(0,mi.jsx)("nav",{className:"flex space-x-1 bg-gray-800 p-1 rounded-lg",children:[{id:"monthly",label:"Monthly Stocktake",icon:Ux},{id:"raw_substrates",label:"Products On Hand",icon:ki},{id:"raw_materials",label:"Raw Materials On Hand",icon:tf}].map(e=>{let{id:t,label:a,icon:s}=e;return(0,mi.jsxs)("button",{onClick:()=>g(t),className:"flex items-center px-4 py-2 rounded-md text-sm font-medium transition-colors ".concat(f===t?"bg-yellow-500 text-black":"text-gray-300 hover:text-white hover:bg-gray-700"),children:[(0,mi.jsx)(s,{className:"h-4 w-4 mr-2"}),a]},t)})})}),"monthly"===f&&(0,mi.jsxs)("div",{className:"space-y-6",children:[(0,mi.jsx)("div",{className:"bg-gray-800 rounded-lg p-4",children:(0,mi.jsxs)("div",{className:"flex items-center justify-between",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("h3",{className:"text-lg font-semibold text-white mb-1",children:"Manual Stock Take"}),(0,mi.jsx)("p",{className:"text-sm text-gray-400",children:"Conduct a manual inventory count for any month"})]}),(0,mi.jsxs)("div",{className:"flex space-x-3",children:[(0,mi.jsxs)("button",{onClick:()=>{Y(!0),(async()=>{try{var e,t;te(!0);const a=await si("/stock/raw-substrates"),s=(null===(e=a.data)||void 0===e?void 0:e.data)||a.data||[],n=await si("/stock/raw-materials"),r=(null===(t=n.data)||void 0===t?void 0:t.data)||n.data||[],i=[...s.map(e=>({id:e.id,type:"product",name:"".concat(e.product_code||""," - ").concat(e.product_description||"Unknown Product"),client_name:e.client_name,quantity_on_hand:e.quantity_on_hand||0,purchase_cost:e.purchase_cost||0,unit_of_measure:e.unit_of_measure||"units",width_mm:e.width_mm||0,product_type:e.product_type,material_layers:e.material_layers||[],original_data:e})),...r.map(e=>({id:e.material_id||e.id,type:"material",name:"".concat(e.product_code||e.supplier||""," - ").concat(e.material_description||e.product_description||"Unknown Material").trim(),supplier:e.supplier||"Unknown Supplier",quantity_on_hand:e.quantity_on_hand||0,purchase_cost:e.cost_per_tonne||e.price||e.purchase_cost||0,unit_of_measure:e.unit_of_measure||"kg",width_mm:e.width_mm||e.master_deckle_width_mm||0,gsm:e.gsm||0,original_data:e}))];K(i),se({})}catch(a){console.error("Failed to load stock take items:",a),Bt.error("Failed to load stock items")}finally{te(!1)}})();const e=new Date;Z("".concat(e.getFullYear(),"-").concat(String(e.getMonth()+1).padStart(2,"0")))},className:"misty-button misty-button-secondary",children:[(0,mi.jsx)(ki,{className:"h-5 w-5 mr-2"}),"Manual Stock Take"]}),(0,mi.jsxs)("button",{onClick:()=>{re(!0),ot()},className:"misty-button misty-button-secondary",children:[(0,mi.jsx)(Bi,{className:"h-5 w-5 mr-2"}),"Archived Stocktakes"]})]})]})}),!a&&r?(0,mi.jsxs)("div",{className:"bg-gray-800 rounded-lg p-8 text-center",children:[(0,mi.jsx)(ki,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),(0,mi.jsx)("h2",{className:"text-xl font-semibold text-white mb-2",children:"Monthly Stocktake Required"}),(0,mi.jsx)("p",{className:"text-gray-300 mb-6",children:"It's time to conduct the monthly inventory count. This will generate a list of all materials in your inventory for manual counting."}),(0,mi.jsx)("div",{className:"bg-yellow-900/20 border border-yellow-500 rounded p-4 mb-6",children:(0,mi.jsxs)("p",{className:"text-yellow-300 text-sm",children:[(0,mi.jsx)("strong",{children:"Note:"})," Once started, you'll need to count all ",l.length," materials in your inventory. This process can be completed over multiple sessions."]})}),(0,mi.jsxs)("button",{onClick:async()=>{try{const e=new Date,t=await Vn({stocktake_date:e.toISOString().split("T")[0]});o(t.data.materials),s({id:t.data.stocktake_id,status:"in_progress",stocktake_date:e.toISOString().split("T")[0],month:e.toISOString().substring(0,7)}),i(!1),Bt.success("Stocktake started successfully")}catch(e){console.error("Failed to start stocktake:",e),Bt.error("Failed to start stocktake")}},className:"misty-button misty-button-primary",children:[(0,mi.jsx)(Ux,{className:"h-5 w-5 mr-2"}),"Start Monthly Stocktake"]})]}):a&&"completed"===a.status?(0,mi.jsxs)("div",{className:"bg-gray-800 rounded-lg p-8 text-center",children:[(0,mi.jsx)(tf,{className:"h-16 w-16 text-green-400 mx-auto mb-4"}),(0,mi.jsx)("h2",{className:"text-xl font-semibold text-white mb-2",children:"Stocktake Completed"}),(0,mi.jsxs)("p",{className:"text-gray-300 mb-4",children:["Monthly stocktake for ",new Date(a.stocktake_date).toLocaleDateString()," has been completed."]}),(0,mi.jsxs)("div",{className:"text-sm text-gray-400",children:["Completed on: ",new Date(a.completed_at||a.stocktake_date).toLocaleDateString()]})]}):a?(0,mi.jsxs)("div",{className:"space-y-6",children:[(0,mi.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4",children:[(0,mi.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,mi.jsx)("h2",{className:"text-lg font-semibold text-white",children:"Stocktake in Progress"}),(0,mi.jsxs)("span",{className:"text-sm text-gray-400",children:["Started: ",new Date(a.stocktake_date).toLocaleDateString()]})]}),(0,mi.jsxs)("div",{className:"flex items-center justify-between",children:[(0,mi.jsxs)("div",{className:"text-sm text-gray-300",children:["Progress: ",Object.keys(c).length," / ",l.length," materials counted"]}),(0,mi.jsx)("button",{onClick:async()=>{if(!a)return;const e=l.filter(e=>!c[e.id]&&"0"!==c[e.id]);if(e.length>0)Bt.error("Please count all materials. ".concat(e.length," materials remaining."));else try{x(!0),await Qn(a.id),s(e=>m(m({},e),{},{status:"completed"})),Bt.success("Stocktake completed successfully")}catch(t){console.error("Failed to complete stocktake:",t),Bt.error("Failed to complete stocktake")}finally{x(!1)}},disabled:h||Object.keys(c).length<l.length,className:"misty-button misty-button-primary disabled:opacity-50",children:h?"Completing...":"Complete Stocktake"})]}),(0,mi.jsx)("div",{className:"w-full bg-gray-700 rounded-full h-2 mt-3",children:(0,mi.jsx)("div",{className:"bg-yellow-400 h-2 rounded-full transition-all duration-300",style:{width:"".concat(Object.keys(c).length/l.length*100,"%")}})})]}),(0,mi.jsxs)("div",{className:"bg-gray-800 rounded-lg",children:[(0,mi.jsxs)("div",{className:"p-4 border-b border-gray-700",children:[(0,mi.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Material Count"}),(0,mi.jsx)("p",{className:"text-sm text-gray-400",children:"Enter the current quantity on hand for each material (up to 2 decimal places)"})]}),(0,mi.jsx)("div",{className:"divide-y divide-gray-700",children:l.map(e=>(0,mi.jsxs)("div",{className:"p-4 flex items-center justify-between",children:[(0,mi.jsxs)("div",{className:"flex-1",children:[(0,mi.jsx)("div",{className:"font-medium text-white",children:e.name||"".concat(e.supplier," - ").concat(e.product_code)}),(0,mi.jsxs)("div",{className:"text-sm text-gray-400",children:["Unit: ",e.unit]})]}),(0,mi.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,mi.jsx)("div",{className:"w-32",children:(0,mi.jsx)("input",{type:"number",step:"0.01",min:"0",placeholder:"0.00",value:c[e.id]||"",onChange:t=>{const a=t.target.value;d(t=>m(m({},t),{},{[e.id]:a}))},onBlur:t=>{const s=t.target.value;""!==s&&(async(e,t)=>{if(a)try{await $n(a.id,{material_id:e,current_quantity:parseFloat(t)}),d(a=>m(m({},a),{},{[e]:t}))}catch(s){console.error("Failed to update entry:",s),Bt.error("Failed to save entry")}})(e.id,s)},className:"misty-input w-full text-right"})}),(0,mi.jsx)("div",{className:"w-6 flex justify-center",children:void 0!==c[e.id]&&""!==c[e.id]?(0,mi.jsx)(tf,{className:"h-5 w-5 text-green-400"}):(0,mi.jsx)("div",{className:"h-2 w-2 bg-gray-500 rounded-full"})})]})]},e.id))})]}),(0,mi.jsxs)("div",{className:"bg-blue-900/20 border border-blue-500 rounded-lg p-4",children:[(0,mi.jsx)("h4",{className:"font-medium text-blue-300 mb-2",children:"Instructions:"}),(0,mi.jsxs)("ul",{className:"text-sm text-blue-200 space-y-1",children:[(0,mi.jsx)("li",{children:"\u2022 Count each material carefully and enter the exact quantity on hand"}),(0,mi.jsx)("li",{children:"\u2022 You can enter up to 2 decimal places (e.g., 15.75)"}),(0,mi.jsx)("li",{children:"\u2022 Entries are automatically saved when you move to the next field"}),(0,mi.jsx)("li",{children:"\u2022 All materials must be counted before completing the stocktake"}),(0,mi.jsx)("li",{children:"\u2022 The stocktake can be completed over multiple sessions"})]})]})]}):(0,mi.jsxs)("div",{className:"bg-gray-800 rounded-lg p-8 text-center",children:[(0,mi.jsx)(ki,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),(0,mi.jsx)("h2",{className:"text-xl font-semibold text-white mb-2",children:"No Stocktake Required"}),(0,mi.jsxs)("p",{className:"text-gray-300 mb-4",children:["The monthly stocktake for ",(new Date).toLocaleDateString("en-US",{month:"long",year:"numeric"}),"has already been completed or is not yet required."]}),(0,mi.jsx)("p",{className:"text-sm text-gray-400",children:"Stocktakes are automatically prompted on the first business day of each month."})]})]}),"raw_substrates"===f&&(0,mi.jsxs)("div",{className:"space-y-6",children:[(0,mi.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4",children:[(0,mi.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,mi.jsx)("h2",{className:"text-xl font-semibold text-white",children:"Products On Hand"}),(0,mi.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,mi.jsxs)("button",{onClick:rt,className:"misty-button misty-button-secondary",children:[(0,mi.jsx)(Xx,{className:"h-4 w-4 mr-2"}),"Check Low Stock"]}),(0,mi.jsxs)("button",{onClick:()=>ke(!0),className:"misty-button misty-button-primary",children:[(0,mi.jsx)(Cl,{className:"h-4 w-4 mr-2"}),"Add Product Entry"]})]})]}),(0,mi.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,mi.jsx)("label",{className:"text-sm text-gray-300",children:"Filter by Client:"}),(0,mi.jsxs)("select",{value:w,onChange:e=>_(e.target.value),className:"misty-select w-48",children:[(0,mi.jsx)("option",{value:"all",children:"All Clients"}),N.map(e=>(0,mi.jsx)("option",{value:e.id,children:e.company_name},e.id))]})]})]}),(0,mi.jsxs)("div",{className:"bg-gray-800 rounded-lg overflow-hidden",children:[(0,mi.jsx)("div",{className:"p-4 border-b border-gray-700",children:(0,mi.jsxs)("h3",{className:"text-lg font-semibold text-white",children:["Grouped Products (",R.length,")"]})}),(0,mi.jsxs)("div",{className:"overflow-x-auto",children:[(0,mi.jsxs)("table",{className:"w-full",children:[(0,mi.jsx)("thead",{className:"bg-gray-700",children:(0,mi.jsxs)("tr",{children:[(0,mi.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Client"}),(0,mi.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Product"}),(0,mi.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Code"}),(0,mi.jsx)("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-300",children:"Available"}),(0,mi.jsx)("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-300",children:"Allocated"}),(0,mi.jsx)("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-300",children:"Total"}),(0,mi.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Unit"}),(0,mi.jsx)("th",{className:"px-4 py-3 text-center text-sm font-medium text-gray-300",children:"Actions"})]})}),(0,mi.jsx)("tbody",{className:"divide-y divide-gray-700",children:R.map(e=>(0,mi.jsxs)("tr",{className:"hover:bg-gray-700",children:[(0,mi.jsx)("td",{className:"px-4 py-3 text-sm text-white",children:e.client_name}),(0,mi.jsxs)("td",{className:"px-4 py-3",children:[(0,mi.jsx)("div",{className:"text-sm text-white",children:e.product_description}),e.is_shared_product&&(0,mi.jsx)("div",{className:"text-xs text-blue-400",children:"Shared Product"}),(0,mi.jsxs)("div",{className:"text-xs text-gray-400",children:[e.entries.length," stock entries"]})]}),(0,mi.jsx)("td",{className:"px-4 py-3 text-sm text-gray-300",children:e.product_code}),(0,mi.jsx)("td",{className:"px-4 py-3 text-right",children:(0,mi.jsx)("span",{className:"text-sm font-medium ".concat(e.available_quantity<=e.minimum_stock_level?"text-red-400":"text-green-400"),children:e.available_quantity})}),(0,mi.jsx)("td",{className:"px-4 py-3 text-right",children:(0,mi.jsx)("span",{className:"text-sm text-yellow-400 font-medium",children:e.allocated_quantity})}),(0,mi.jsx)("td",{className:"px-4 py-3 text-right",children:(0,mi.jsx)("span",{className:"text-sm text-white font-medium",children:e.total_quantity})}),(0,mi.jsx)("td",{className:"px-4 py-3 text-sm text-gray-300",children:e.unit_of_measure}),(0,mi.jsx)("td",{className:"px-4 py-3 text-center",children:(0,mi.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,mi.jsxs)("button",{className:"text-blue-400 hover:text-blue-300 flex items-center text-xs",onClick:()=>(async(e,t)=>{try{const a=await si("/stock/history?product_id=".concat(e,"&client_id=").concat(t));q(a.data),M(!0)}catch(a){console.error("Failed to load stock history:",a),Bt.error("Failed to load stock history")}})(e.product_id,e.client_id),title:"View Stock History",children:[(0,mi.jsx)(_l,{className:"h-4 w-4 mr-1"}),"History"]}),(0,mi.jsxs)("button",{className:"text-purple-400 hover:text-purple-300 flex items-center text-xs",onClick:()=>(async(e,t)=>{try{var a,s;const n=(null===(a=(await si("/stock/allocations?product_id=".concat(e,"&client_id=").concat(t))).data)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.allocations)||[];z(n),$({productId:e,clientId:t}),console.log("Loaded allocations:",n)}catch(n){console.error("Failed to load stock allocations:",n),Bt.error("Failed to load stock allocations")}})(e.product_id,e.client_id),title:"View Allocations",children:[(0,mi.jsx)(Bi,{className:"h-4 w-4 mr-1"}),"Allocations"]}),(0,mi.jsx)("button",{className:"text-yellow-400 hover:text-yellow-300",onClick:()=>{qe(e),ze("substrate"),Ae(!0)},title:"Edit",children:(0,mi.jsx)(ho,{className:"h-4 w-4"})})]})})]},"".concat(e.product_id,"-").concat(e.client_id)))})]}),(!R||0===R.length)&&(0,mi.jsxs)("div",{className:"p-8 text-center text-gray-400",children:[(0,mi.jsx)(ki,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),(0,mi.jsx)("p",{children:"No grouped products found"}),(0,mi.jsx)("p",{className:"text-sm",children:"Add stock entries from Job Card excess production or manually"})]})]})]})]}),"raw_materials"===f&&(0,mi.jsxs)("div",{className:"space-y-6",children:[(0,mi.jsx)("div",{className:"bg-gray-800 rounded-lg p-4",children:(0,mi.jsxs)("div",{className:"flex items-center justify-between",children:[(0,mi.jsx)("h2",{className:"text-xl font-semibold text-white",children:"Raw Materials On Hand"}),(0,mi.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,mi.jsxs)("button",{onClick:rt,className:"misty-button misty-button-secondary",children:[(0,mi.jsx)(Xx,{className:"h-4 w-4 mr-2"}),"Check Low Stock"]}),(0,mi.jsxs)("button",{onClick:()=>Ce(!0),className:"misty-button misty-button-primary",children:[(0,mi.jsx)(Cl,{className:"h-4 w-4 mr-2"}),"Add Material Stock"]})]})]})}),(0,mi.jsxs)("div",{className:"bg-gray-800 rounded-lg overflow-hidden",children:[(0,mi.jsx)("div",{className:"p-4 border-b border-gray-700",children:(0,mi.jsxs)("h3",{className:"text-lg font-semibold text-white",children:["Materials (",(v||[]).length,")"]})}),(0,mi.jsxs)("div",{className:"overflow-x-auto",children:[(0,mi.jsxs)("table",{className:"w-full",children:[(0,mi.jsx)("thead",{className:"bg-gray-700",children:(0,mi.jsxs)("tr",{children:[(0,mi.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Material"}),(0,mi.jsx)("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-300",children:"Quantity"}),(0,mi.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-300",children:"Unit"}),(0,mi.jsx)("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-300",children:"Min Level"}),(0,mi.jsx)("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-300",children:"Usage/Month"}),(0,mi.jsx)("th",{className:"px-4 py-3 text-center text-sm font-medium text-gray-300",children:"Alert Days"}),(0,mi.jsx)("th",{className:"px-4 py-3 text-center text-sm font-medium text-gray-300",children:"Actions"})]})}),(0,mi.jsx)("tbody",{className:"divide-y divide-gray-700",children:(v||[]).map(e=>(0,mi.jsxs)("tr",{className:"hover:bg-gray-700",children:[(0,mi.jsx)("td",{className:"px-4 py-3 text-sm",children:(0,mi.jsx)("span",{className:"text-white cursor-pointer hover:bg-gray-600 px-2 py-1 rounded transition-colors duration-200",onDoubleClick:()=>Xe(e.material_id,e.material_name),title:"Double-click to view slit widths",children:e.material_name})}),(0,mi.jsx)("td",{className:"px-4 py-3 text-right",children:Re===e.id&&"quantity_on_hand"===Oe?(0,mi.jsx)("input",{type:"number",defaultValue:e.quantity_on_hand,onBlur:t=>st(e.id,"quantity_on_hand",t.target.value,"material"),onKeyDown:t=>{"Enter"===t.key&&st(e.id,"quantity_on_hand",t.target.value,"material")},className:"misty-input w-20 text-right text-sm",autoFocus:!0}):(0,mi.jsx)("span",{className:"text-sm cursor-pointer hover:bg-gray-600 px-2 py-1 rounded ".concat(e.quantity_on_hand<=e.minimum_stock_level?"text-red-400":"text-white"),onDoubleClick:()=>at(e.id,"quantity_on_hand"),children:e.quantity_on_hand})}),(0,mi.jsx)("td",{className:"px-4 py-3 text-sm text-gray-300",children:e.unit_of_measure}),(0,mi.jsx)("td",{className:"px-4 py-3 text-right",children:Re===e.id&&"minimum_stock_level"===Oe?(0,mi.jsx)("input",{type:"number",defaultValue:e.minimum_stock_level,onBlur:t=>st(e.id,"minimum_stock_level",t.target.value,"material"),onKeyDown:t=>{"Enter"===t.key&&st(e.id,"minimum_stock_level",t.target.value,"material")},className:"misty-input w-20 text-right text-sm",autoFocus:!0}):(0,mi.jsx)("span",{className:"text-sm text-gray-300 cursor-pointer hover:bg-gray-600 px-2 py-1 rounded",onDoubleClick:()=>at(e.id,"minimum_stock_level"),children:e.minimum_stock_level||0})}),(0,mi.jsx)("td",{className:"px-4 py-3 text-right text-sm text-gray-300",children:e.usage_rate_per_month||0}),(0,mi.jsx)("td",{className:"px-4 py-3 text-center text-sm text-gray-300",children:e.alert_threshold_days||7}),(0,mi.jsx)("td",{className:"px-4 py-3 text-center",children:(0,mi.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,mi.jsx)("button",{className:"text-blue-400 hover:text-blue-300",onClick:()=>{return t="material",qe(e),ze(t),void De(!0);var t},title:"View Details",children:(0,mi.jsx)(bo,{className:"h-4 w-4"})}),(0,mi.jsx)("button",{className:"text-yellow-400 hover:text-yellow-300",onClick:()=>{return t="material",qe(e),ze(t),void Ae(!0);var t},title:"Edit",children:(0,mi.jsx)(ho,{className:"h-4 w-4"})}),(0,mi.jsx)("button",{className:"text-red-400 hover:text-red-300",onClick:()=>{return t="material",qe(e),ze(t),void Le(!0);var t},title:"Delete",children:(0,mi.jsx)(Ol,{className:"h-4 w-4"})})]})})]},e.id))})]}),(!v||0===v.length)&&(0,mi.jsxs)("div",{className:"p-8 text-center text-gray-400",children:[(0,mi.jsx)(tf,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),(0,mi.jsx)("p",{children:"No raw materials found"}),(0,mi.jsx)("p",{className:"text-sm",children:"Select from your materials database to track stock levels"})]})]})]})]}),(S||[]).length>0&&E&&(0,mi.jsxs)("div",{className:"fixed bottom-4 right-4 bg-red-900 border border-red-500 rounded-lg p-4 max-w-sm shadow-lg z-50",children:[(0,mi.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,mi.jsxs)("div",{className:"flex items-center",children:[(0,mi.jsx)(Xx,{className:"h-5 w-5 text-red-400 mr-2"}),(0,mi.jsx)("h4",{className:"font-medium text-white",children:"Stock Alerts"})]}),(0,mi.jsx)("button",{onClick:()=>D(!1),className:"text-gray-400 hover:text-white",children:"\xd7"})]}),(0,mi.jsxs)("div",{className:"space-y-2 mb-3",children:[(S||[]).slice(0,3).map(e=>(0,mi.jsx)("div",{className:"text-sm text-red-200",children:e.message},e.id)),(S||[]).length>3&&(0,mi.jsxs)("div",{className:"text-xs text-gray-400",children:["+",(S||[]).length-3," more alerts"]})]}),(0,mi.jsxs)("div",{className:"flex space-x-2",children:[(0,mi.jsx)("button",{onClick:()=>{var e;return nt(null===(e=S[0])||void 0===e?void 0:e.id)},className:"text-xs bg-red-700 hover:bg-red-600 text-white px-2 py-1 rounded",children:"Acknowledge"}),(0,mi.jsx)("button",{onClick:()=>{var e;return nt(null===(e=S[0])||void 0===e?void 0:e.id,24)},className:"text-xs bg-gray-700 hover:bg-gray-600 text-white px-2 py-1 rounded",children:"Snooze 24h"})]})]}),Ee&&Ie&&(0,mi.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,mi.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-2xl max-h-[80vh] overflow-y-auto",children:[(0,mi.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,mi.jsx)("h3",{className:"text-xl font-semibold text-white",children:"substrate"===Be?"Raw Substrate Details":"Raw Material Details"}),(0,mi.jsx)("button",{onClick:()=>De(!1),className:"text-gray-400 hover:text-white",children:"\xd7"})]}),(0,mi.jsx)("div",{className:"space-y-4",children:"substrate"===Be?(0,mi.jsx)(mi.Fragment,{children:(0,mi.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm text-gray-300 mb-1",children:"Client"}),(0,mi.jsx)("div",{className:"text-white bg-gray-700 p-2 rounded",children:Ie.client_name})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm text-gray-300 mb-1",children:"Product Code"}),(0,mi.jsx)("div",{className:"text-white bg-gray-700 p-2 rounded",children:Ie.product_code})]}),(0,mi.jsxs)("div",{className:"col-span-2",children:[(0,mi.jsx)("label",{className:"block text-sm text-gray-300 mb-1",children:"Product Description"}),(0,mi.jsx)("div",{className:"text-white bg-gray-700 p-2 rounded",children:Ie.product_description})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm text-gray-300 mb-1",children:"Quantity on Hand"}),(0,mi.jsxs)("div",{className:"text-white bg-gray-700 p-2 rounded",children:[Ie.quantity_on_hand," ",Ie.unit_of_measure]})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm text-gray-300 mb-1",children:"Minimum Stock Level"}),(0,mi.jsxs)("div",{className:"text-white bg-gray-700 p-2 rounded",children:[Ie.minimum_stock_level," ",Ie.unit_of_measure]})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm text-gray-300 mb-1",children:"Source Order"}),(0,mi.jsx)("div",{className:"text-white bg-gray-700 p-2 rounded",children:Ie.source_order_id})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm text-gray-300 mb-1",children:"Shared Product"}),(0,mi.jsxs)("div",{className:"text-white bg-gray-700 p-2 rounded",children:[Ie.is_shared_product?"Yes":"No",Ie.is_shared_product&&Ie.shared_with_clients&&Ie.shared_with_clients.length>0&&(0,mi.jsxs)("div",{className:"text-xs text-gray-300 mt-1",children:["Shared with: ",Ie.shared_with_clients.map(e=>{const t=N.find(t=>t.id===e);return t?t.company_name:e}).join(", ")]})]})]}),(0,mi.jsxs)("div",{className:"col-span-2",children:[(0,mi.jsx)("label",{className:"block text-sm text-gray-300 mb-1",children:"Created"}),(0,mi.jsx)("div",{className:"text-white bg-gray-700 p-2 rounded",children:Ie.created_at?new Date(Ie.created_at).toLocaleDateString():"N/A"})]})]})}):(0,mi.jsx)(mi.Fragment,{children:(0,mi.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,mi.jsxs)("div",{className:"col-span-2",children:[(0,mi.jsx)("label",{className:"block text-sm text-gray-300 mb-1",children:"Material Name"}),(0,mi.jsx)("div",{className:"text-white bg-gray-700 p-2 rounded",children:Ie.material_name})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm text-gray-300 mb-1",children:"Quantity on Hand"}),(0,mi.jsxs)("div",{className:"text-white bg-gray-700 p-2 rounded",children:[Ie.quantity_on_hand," ",Ie.unit_of_measure]})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm text-gray-300 mb-1",children:"Minimum Stock Level"}),(0,mi.jsxs)("div",{className:"text-white bg-gray-700 p-2 rounded",children:[Ie.minimum_stock_level," ",Ie.unit_of_measure]})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm text-gray-300 mb-1",children:"Usage per Month"}),(0,mi.jsxs)("div",{className:"text-white bg-gray-700 p-2 rounded",children:[Ie.usage_rate_per_month," ",Ie.unit_of_measure]})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm text-gray-300 mb-1",children:"Alert Threshold (Days)"}),(0,mi.jsx)("div",{className:"text-white bg-gray-700 p-2 rounded",children:Ie.alert_threshold_days})]}),(0,mi.jsxs)("div",{className:"col-span-2",children:[(0,mi.jsx)("label",{className:"block text-sm text-gray-300 mb-1",children:"Created"}),(0,mi.jsx)("div",{className:"text-white bg-gray-700 p-2 rounded",children:Ie.created_at?new Date(Ie.created_at).toLocaleDateString():"N/A"})]})]})})}),(0,mi.jsx)("div",{className:"flex justify-end mt-6",children:(0,mi.jsx)("button",{onClick:()=>De(!1),className:"misty-button misty-button-secondary",children:"Close"})})]})}),Pe&&Ie&&(0,mi.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,mi.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-2xl max-h-[80vh] overflow-y-auto",children:[(0,mi.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,mi.jsxs)("h3",{className:"text-xl font-semibold text-white",children:["Edit ","substrate"===Be?"Raw Substrate":"Raw Material"]}),(0,mi.jsx)("button",{onClick:()=>Ae(!1),className:"text-gray-400 hover:text-white",children:"\xd7"})]}),(0,mi.jsxs)("form",{onSubmit:e=>{e.preventDefault();const t=new FormData(e.target),a={},s=[];for(let[n,r]of t.entries())n.includes("quantity")||n.includes("minimum")||n.includes("usage")||n.includes("alert")?a[n]=parseFloat(r)||0:"is_shared_product"===n?a[n]="on"===t.get("is_shared_product"):"shared_with_clients"===n?s.push(r):a[n]=r;"substrate"===Be&&(a.shared_with_clients=a.is_shared_product?s:[]),(async e=>{try{const t="substrate"===Be?"/stock/raw-substrates/".concat(Ie.id):"/stock/raw-materials/".concat(Ie.id);await ri(t,e),"substrate"===Be?Ye():Je(),Ae(!1),qe(null),Bt.success("".concat("substrate"===Be?"Substrate":"Material"," updated successfully"))}catch(t){console.error("Failed to update item:",t),Bt.error("Failed to update item")}})(a)},children:[(0,mi.jsx)("div",{className:"space-y-4",children:"substrate"===Be?(0,mi.jsxs)(mi.Fragment,{children:[(0,mi.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm text-gray-300 mb-1",children:"Quantity on Hand"}),(0,mi.jsx)("input",{type:"number",step:"0.01",name:"quantity_on_hand",defaultValue:Ie.quantity_on_hand,className:"misty-input w-full",required:!0})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm text-gray-300 mb-1",children:"Minimum Stock Level"}),(0,mi.jsx)("input",{type:"number",step:"0.01",name:"minimum_stock_level",defaultValue:Ie.minimum_stock_level,className:"misty-input w-full"})]})]}),(0,mi.jsxs)("div",{className:"col-span-2 space-y-4",children:[(0,mi.jsxs)("div",{className:"flex items-center",children:[(0,mi.jsx)("input",{type:"checkbox",id:"is_shared_product",name:"is_shared_product",defaultChecked:Ie.is_shared_product,className:"w-4 h-4 text-yellow-500 bg-gray-700 border-gray-600 rounded focus:ring-yellow-500 focus:ring-2",onChange:e=>{const t=document.getElementById("shared-clients-section");if(e.target.checked)t.style.display="block";else{t.style.display="none";t.querySelectorAll('input[type="checkbox"]').forEach(e=>e.checked=!1)}}}),(0,mi.jsx)("label",{htmlFor:"is_shared_product",className:"ml-2 text-sm text-gray-300",children:"This is a shared product (available to multiple clients)"})]}),(0,mi.jsxs)("div",{id:"shared-clients-section",style:{display:Ie.is_shared_product?"block":"none"},className:"bg-gray-700 p-4 rounded-lg",children:[(0,mi.jsx)("label",{className:"block text-sm text-gray-300 mb-3",children:"Select clients to share this product with:"}),(0,mi.jsxs)("div",{className:"max-h-40 overflow-y-auto space-y-2",children:[(N||[]).filter(e=>e.id!==Ie.client_id).map(e=>(0,mi.jsxs)("div",{className:"flex items-center",children:[(0,mi.jsx)("input",{type:"checkbox",id:"client_".concat(e.id),name:"shared_with_clients",value:e.id,defaultChecked:(Ie.shared_with_clients||[]).includes(e.id),className:"w-4 h-4 text-yellow-500 bg-gray-600 border-gray-500 rounded focus:ring-yellow-500 focus:ring-2"}),(0,mi.jsx)("label",{htmlFor:"client_".concat(e.id),className:"ml-2 text-sm text-white",children:e.company_name})]},e.id)),(!N||N.length<=1)&&(0,mi.jsx)("p",{className:"text-gray-400 text-sm italic",children:"No other clients available to share with"})]}),(0,mi.jsxs)("div",{className:"mt-3 p-2 bg-blue-900/20 border border-blue-500 rounded text-xs text-blue-200",children:[(0,mi.jsx)("strong",{children:"Note:"})," Shared products will appear in the selected clients' inventories and can be used for their orders."]})]})]})]}):(0,mi.jsxs)(mi.Fragment,{children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm text-gray-300 mb-1",children:"Selected Material"}),(0,mi.jsxs)("div",{className:"bg-gray-700 p-3 rounded",children:[(0,mi.jsx)("div",{className:"text-white text-sm",children:Ie.material_name}),(0,mi.jsxs)("div",{className:"text-xs text-gray-400 mt-1",children:["Material ID: ",Ie.material_id||"N/A"]})]})]}),(0,mi.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm text-gray-300 mb-1",children:"Quantity on Hand *"}),(0,mi.jsx)("input",{type:"number",step:"0.01",name:"quantity_on_hand",defaultValue:Ie.quantity_on_hand,className:"misty-input w-full",required:!0})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm text-gray-300 mb-1",children:"Unit of Measure *"}),(0,mi.jsxs)("select",{name:"unit_of_measure",defaultValue:Ie.unit_of_measure,className:"misty-select w-full",children:[(0,mi.jsx)("option",{value:"kg",children:"Kilograms"}),(0,mi.jsx)("option",{value:"tons",children:"Tons"}),(0,mi.jsx)("option",{value:"meters",children:"Meters"}),(0,mi.jsx)("option",{value:"liters",children:"Liters"}),(0,mi.jsx)("option",{value:"units",children:"Units"}),(0,mi.jsx)("option",{value:"rolls",children:"Rolls"})]})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm text-gray-300 mb-1",children:"Minimum Stock Level"}),(0,mi.jsx)("input",{type:"number",step:"0.01",name:"minimum_stock_level",defaultValue:Ie.minimum_stock_level,className:"misty-input w-full"})]})]}),(0,mi.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm text-gray-300 mb-1",children:"Usage Rate (per month)"}),(0,mi.jsx)("input",{type:"number",step:"0.01",name:"usage_rate_per_month",defaultValue:Ie.usage_rate_per_month,className:"misty-input w-full"})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm text-gray-300 mb-1",children:"Alert Threshold (Days)"}),(0,mi.jsx)("input",{type:"number",name:"alert_threshold_days",defaultValue:Ie.alert_threshold_days,className:"misty-input w-full"})]})]})]})}),(0,mi.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,mi.jsx)("button",{type:"button",onClick:()=>Ae(!1),className:"misty-button misty-button-secondary",children:"Cancel"}),(0,mi.jsx)("button",{type:"submit",className:"misty-button misty-button-primary",children:"Save Changes"})]})]})]})}),Te&&Ie&&(0,mi.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,mi.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-md",children:[(0,mi.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,mi.jsx)("h3",{className:"text-xl font-semibold text-white",children:"Confirm Delete"}),(0,mi.jsx)("button",{onClick:()=>Le(!1),className:"text-gray-400 hover:text-white",children:"\xd7"})]}),(0,mi.jsxs)("div",{className:"mb-6",children:[(0,mi.jsxs)("p",{className:"text-gray-300",children:["Are you sure you want to delete this ","substrate"===Be?"raw substrate":"raw material","?"]}),(0,mi.jsxs)("div",{className:"mt-2 p-3 bg-gray-700 rounded",children:[(0,mi.jsx)("p",{className:"text-white font-medium",children:"substrate"===Be?Ie.product_description:Ie.material_name}),(0,mi.jsxs)("p",{className:"text-sm text-gray-400",children:[Ie.quantity_on_hand," ",Ie.unit_of_measure," on hand"]})]}),(0,mi.jsx)("p",{className:"text-red-400 text-sm mt-2",children:"This action cannot be undone. All stock movements and alerts for this item will also be deleted."})]}),(0,mi.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,mi.jsx)("button",{onClick:()=>Le(!1),className:"misty-button misty-button-secondary",children:"Cancel"}),(0,mi.jsx)("button",{onClick:async()=>{try{if(console.log("Deleting item:",Ie),console.log("Item type:",Be),!Ie||!Ie.id)return void Bt.error("No item selected for deletion");const e="substrate"===Be?"/stock/raw-substrates/".concat(Ie.id):"/stock/raw-materials/".concat(Ie.id);console.log("Delete endpoint:",e);const t=await ii(e);console.log("Delete response:",t),"substrate"===Be?await Ye():await Je(),Le(!1),qe(null),Bt.success("".concat("substrate"===Be?"Substrate":"Material"," deleted successfully"))}catch(s){var e,t,a;console.error("Failed to delete item:",s),console.error("Error details:",null===(e=s.response)||void 0===e?void 0:e.data);const n=(null===(t=s.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.detail)||s.message||"Failed to delete item";Bt.error("Delete failed: ".concat(n))}},className:"misty-button misty-button-primary bg-red-600 hover:bg-red-700",children:"Delete"})]})]})}),Ne&&(0,mi.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,mi.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-2xl max-h-[80vh] overflow-y-auto",children:[(0,mi.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,mi.jsx)("h3",{className:"text-xl font-semibold text-white",children:"Add Product Entry"}),(0,mi.jsx)("button",{onClick:()=>{ke(!1),L([])},className:"text-gray-400 hover:text-white",children:"\xd7"})]}),(0,mi.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{await ni("/stock/raw-substrates",Ue),ke(!1),Ye(),Bt.success("Product entry added successfully"),We({client_id:"",client_name:"",product_id:"",product_code:"",product_description:"",quantity_on_hand:0,unit_of_measure:"units",source_order_id:"",is_shared_product:!1,shared_with_clients:[],minimum_stock_level:0}),L([])}catch(t){console.error("Failed to add product entry:",t),Bt.error("Failed to add product entry")}},children:[(0,mi.jsxs)("div",{className:"space-y-4",children:[(0,mi.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm text-gray-300 mb-1",children:"Client *"}),(0,mi.jsxs)("select",{value:Ue.client_id,onChange:e=>{const t=N.find(t=>t.id===e.target.value);console.log("Client selected:",e.target.value,t),We(a=>{const s=m(m({},a),{},{client_id:e.target.value,client_name:(null===t||void 0===t?void 0:t.company_name)||"",product_id:"",product_code:"",product_description:""});return console.log("Updated substrate form:",s),s}),e.target.value?(async e=>{try{const t=(await si("/clients/".concat(e,"/catalog"))).data||[];console.log("Loaded client products:",t),L(Array.isArray(t)?t:[])}catch(t){console.error("Failed to load client products:",t),L([])}})(e.target.value):L([])},className:"misty-select w-full",required:!0,children:[(0,mi.jsx)("option",{value:"",children:"Select Client"}),N.map(e=>(0,mi.jsx)("option",{value:e.id,children:e.company_name},e.id))]})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm text-gray-300 mb-1",children:"Product Code *"}),(0,mi.jsx)("input",{type:"text",value:Ue.product_code,onChange:e=>We(t=>m(m({},t),{},{product_code:e.target.value})),className:"misty-input w-full ".concat(Ue.product_id?"bg-gray-700 text-gray-300":""),readOnly:!!Ue.product_id,placeholder:Ue.product_id?"Auto-populated from selected product":"Enter product code",required:!0})]})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm text-gray-300 mb-1",children:"Product Description *"}),Ue.client_id&&T.length>0?(0,mi.jsxs)("select",{value:Ue.product_id,onChange:e=>{const t=T.find(t=>t.id===e.target.value);We(t?a=>m(m({},a),{},{product_id:e.target.value,product_code:t.product_code||"",product_description:t.product_description||""}):e=>m(m({},e),{},{product_id:"",product_code:"",product_description:""}))},className:"misty-select w-full",required:!0,children:[(0,mi.jsx)("option",{value:"",children:"Select Product from Client Catalogue"}),T.map(e=>(0,mi.jsx)("option",{value:e.id,children:e.product_description},e.id))]}):Ue.client_id&&0===T.length?(0,mi.jsx)("div",{className:"misty-input w-full bg-gray-600 text-gray-300 flex items-center",children:"Loading products..."}):(0,mi.jsx)("div",{className:"misty-input w-full bg-gray-700 text-gray-400 flex items-center",children:"Please select a client first to see their product catalogue"})]}),(0,mi.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm text-gray-300 mb-1",children:"Quantity on Hand *"}),(0,mi.jsx)("input",{type:"number",step:"0.01",value:Ue.quantity_on_hand,onChange:e=>We(t=>m(m({},t),{},{quantity_on_hand:parseFloat(e.target.value)||0})),className:"misty-input w-full",required:!0})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm text-gray-300 mb-1",children:"Unit of Measure *"}),(0,mi.jsxs)("select",{value:Ue.unit_of_measure,onChange:e=>We(t=>m(m({},t),{},{unit_of_measure:e.target.value})),className:"misty-select w-full",children:[(0,mi.jsx)("option",{value:"units",children:"Units"}),(0,mi.jsx)("option",{value:"pieces",children:"Pieces"}),(0,mi.jsx)("option",{value:"cores",children:"Cores"}),(0,mi.jsx)("option",{value:"tubes",children:"Tubes"}),(0,mi.jsx)("option",{value:"meters",children:"Meters"}),(0,mi.jsx)("option",{value:"kg",children:"Kilograms"})]})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm text-gray-300 mb-1",children:"Minimum Stock Level"}),(0,mi.jsx)("input",{type:"number",step:"0.01",value:Ue.minimum_stock_level,onChange:e=>We(t=>m(m({},t),{},{minimum_stock_level:parseFloat(e.target.value)||0})),className:"misty-input w-full"})]})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm text-gray-300 mb-1",children:"Source Order ID"}),(0,mi.jsx)("input",{type:"text",value:Ue.source_order_id,onChange:e=>We(t=>m(m({},t),{},{source_order_id:e.target.value})),className:"misty-input w-full",placeholder:"Order that created this stock (optional)"})]})]}),(0,mi.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,mi.jsx)("button",{type:"button",onClick:()=>{ke(!1),L([])},className:"misty-button misty-button-secondary",children:"Cancel"}),(0,mi.jsx)("button",{type:"submit",className:"misty-button misty-button-primary",children:"Add Entry"})]})]})]})}),Se&&(0,mi.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,mi.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-2xl max-h-[80vh] overflow-y-auto",children:[(0,mi.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,mi.jsx)("h3",{className:"text-xl font-semibold text-white",children:"Add Raw Material Stock"}),(0,mi.jsx)("button",{onClick:()=>Ce(!1),className:"text-gray-400 hover:text-white",children:"\xd7"})]}),(0,mi.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{await ni("/stock/raw-materials",He),Ce(!1),Je(),Bt.success("Raw material stock added successfully"),Ge({material_id:"",material_name:"",quantity_on_hand:0,unit_of_measure:"kg",minimum_stock_level:0,alert_threshold_days:7,supplier_id:"",usage_rate_per_month:0})}catch(t){console.error("Failed to add raw material stock:",t),Bt.error("Failed to add raw material stock")}},children:[(0,mi.jsxs)("div",{className:"space-y-4",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm text-gray-300 mb-1",children:"Select Material *"}),(0,mi.jsxs)("select",{value:He.material_id,onChange:e=>{const t=P.find(t=>t.id===e.target.value);t&&Ge(a=>m(m({},a),{},{material_id:e.target.value,material_name:"".concat(t.supplier," - ").concat(t.product_code),unit_of_measure:t.unit||"kg"}))},className:"misty-select w-full",required:!0,children:[(0,mi.jsx)("option",{value:"",children:"Select Material from Database"}),P.map(e=>(0,mi.jsxs)("option",{value:e.id,children:[e.supplier," - ",e.product_code," (",e.gsm,"GSM ",e.thickness,"mm)"]},e.id))]})]}),He.material_name&&(0,mi.jsxs)("div",{className:"bg-gray-700 p-3 rounded",children:[(0,mi.jsx)("label",{className:"block text-sm text-gray-300 mb-1",children:"Selected Material"}),(0,mi.jsx)("div",{className:"text-white text-sm",children:He.material_name})]}),(0,mi.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm text-gray-300 mb-1",children:"Quantity on Hand *"}),(0,mi.jsx)("input",{type:"number",step:"0.01",value:He.quantity_on_hand,onChange:e=>Ge(t=>m(m({},t),{},{quantity_on_hand:parseFloat(e.target.value)||0})),className:"misty-input w-full",required:!0})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm text-gray-300 mb-1",children:"Unit of Measure *"}),(0,mi.jsxs)("select",{value:He.unit_of_measure,onChange:e=>Ge(t=>m(m({},t),{},{unit_of_measure:e.target.value})),className:"misty-select w-full",children:[(0,mi.jsx)("option",{value:"kg",children:"Kilograms"}),(0,mi.jsx)("option",{value:"tons",children:"Tons"}),(0,mi.jsx)("option",{value:"meters",children:"Meters"}),(0,mi.jsx)("option",{value:"liters",children:"Liters"}),(0,mi.jsx)("option",{value:"units",children:"Units"}),(0,mi.jsx)("option",{value:"rolls",children:"Rolls"})]})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm text-gray-300 mb-1",children:"Minimum Stock Level"}),(0,mi.jsx)("input",{type:"number",step:"0.01",value:He.minimum_stock_level,onChange:e=>Ge(t=>m(m({},t),{},{minimum_stock_level:parseFloat(e.target.value)||0})),className:"misty-input w-full"})]})]}),(0,mi.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm text-gray-300 mb-1",children:"Usage Rate (per month)"}),(0,mi.jsx)("input",{type:"number",step:"0.01",value:He.usage_rate_per_month,onChange:e=>Ge(t=>m(m({},t),{},{usage_rate_per_month:parseFloat(e.target.value)||0})),className:"misty-input w-full"})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm text-gray-300 mb-1",children:"Alert Threshold (Days)"}),(0,mi.jsx)("input",{type:"number",value:He.alert_threshold_days,onChange:e=>Ge(t=>m(m({},t),{},{alert_threshold_days:parseInt(e.target.value)||7})),className:"misty-input w-full"})]})]})]}),(0,mi.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,mi.jsx)("button",{type:"button",onClick:()=>Ce(!1),className:"misty-button misty-button-secondary",children:"Cancel"}),(0,mi.jsx)("button",{type:"submit",className:"misty-button misty-button-primary",children:"Add Material"})]})]})]})}),O&&I&&(0,mi.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,mi.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-4xl max-h-[80vh] overflow-y-auto",children:[(0,mi.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,mi.jsx)("h3",{className:"text-xl font-semibold text-white",children:"Stock History"}),(0,mi.jsx)("button",{onClick:()=>M(!1),className:"text-gray-400 hover:text-white",children:"\u2715"})]}),(0,mi.jsxs)("div",{className:"mb-4 p-4 bg-gray-700 rounded-lg",children:[(0,mi.jsx)("h4",{className:"text-lg font-medium text-white mb-2",children:"Summary"}),(0,mi.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("span",{className:"text-gray-300",children:"Total Stock Entries:"}),(0,mi.jsx)("div",{className:"font-medium text-white",children:I.total_entries})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("span",{className:"text-gray-300",children:"Total Quantity:"}),(0,mi.jsx)("div",{className:"font-medium text-white",children:I.total_quantity})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("span",{className:"text-gray-300",children:"Total Movements:"}),(0,mi.jsx)("div",{className:"font-medium text-white",children:(null===(e=I.movements)||void 0===e?void 0:e.length)||0})]})]})]}),(0,mi.jsxs)("div",{className:"space-y-6",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("h4",{className:"text-lg font-medium text-white mb-3",children:"Stock Entries"}),(0,mi.jsx)("div",{className:"bg-gray-700 rounded-lg overflow-hidden",children:(0,mi.jsxs)("table",{className:"w-full",children:[(0,mi.jsx)("thead",{className:"bg-gray-600",children:(0,mi.jsxs)("tr",{children:[(0,mi.jsx)("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-300",children:"Source Order"}),(0,mi.jsx)("th",{className:"px-4 py-2 text-right text-sm font-medium text-gray-300",children:"Quantity"}),(0,mi.jsx)("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-300",children:"Unit"}),(0,mi.jsx)("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-300",children:"Added Date"})]})}),(0,mi.jsx)("tbody",{className:"divide-y divide-gray-600",children:null===(t=I.stock_entries)||void 0===t?void 0:t.map((e,t)=>(0,mi.jsxs)("tr",{className:"hover:bg-gray-600",children:[(0,mi.jsx)("td",{className:"px-4 py-2 text-sm text-white",children:e.source_order_id||"Manual Entry"}),(0,mi.jsx)("td",{className:"px-4 py-2 text-right text-sm text-white",children:e.quantity_on_hand}),(0,mi.jsx)("td",{className:"px-4 py-2 text-sm text-gray-300",children:e.unit_of_measure}),(0,mi.jsx)("td",{className:"px-4 py-2 text-sm text-gray-300",children:e.created_at?new Date(e.created_at).toLocaleDateString():"N/A"})]},t))})]})})]}),I.movements&&I.movements.length>0&&(0,mi.jsxs)("div",{children:[(0,mi.jsx)("h4",{className:"text-lg font-medium text-white mb-3",children:"Recent Movements"}),(0,mi.jsx)("div",{className:"bg-gray-700 rounded-lg overflow-hidden",children:(0,mi.jsxs)("table",{className:"w-full",children:[(0,mi.jsx)("thead",{className:"bg-gray-600",children:(0,mi.jsxs)("tr",{children:[(0,mi.jsx)("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-300",children:"Type"}),(0,mi.jsx)("th",{className:"px-4 py-2 text-right text-sm font-medium text-gray-300",children:"Quantity"}),(0,mi.jsx)("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-300",children:"Reference"}),(0,mi.jsx)("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-300",children:"Date"})]})}),(0,mi.jsx)("tbody",{className:"divide-y divide-gray-600",children:I.movements.slice(0,10).map((e,t)=>(0,mi.jsxs)("tr",{className:"hover:bg-gray-600",children:[(0,mi.jsx)("td",{className:"px-4 py-2 text-sm",children:(0,mi.jsx)("span",{className:"px-2 py-1 rounded text-xs ".concat("allocation"===e.movement_type?"bg-red-600 text-white":"adjustment"===e.movement_type?"bg-blue-600 text-white":"bg-green-600 text-white"),children:e.movement_type})}),(0,mi.jsxs)("td",{className:"px-4 py-2 text-right text-sm font-medium ".concat(e.quantity<0?"text-red-400":"text-green-400"),children:[e.quantity>0?"+":"",e.quantity]}),(0,mi.jsx)("td",{className:"px-4 py-2 text-sm text-gray-300",children:e.reference}),(0,mi.jsx)("td",{className:"px-4 py-2 text-sm text-gray-300",children:e.created_at?new Date(e.created_at).toLocaleDateString():"N/A"})]},t))})]})})]})]}),(0,mi.jsx)("div",{className:"flex justify-end mt-6",children:(0,mi.jsx)("button",{onClick:()=>M(!1),className:"misty-button misty-button-secondary",children:"Close"})})]})}),B&&B.length>0&&(0,mi.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,mi.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-3xl max-h-[80vh] overflow-y-auto",children:[(0,mi.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,mi.jsx)("h3",{className:"text-xl font-semibold text-white",children:"Stock Allocations"}),(0,mi.jsx)("button",{onClick:()=>z([]),className:"text-gray-400 hover:text-white",children:"\u2715"})]}),(0,mi.jsxs)("div",{className:"mb-4 p-4 bg-gray-700 rounded-lg",children:[(0,mi.jsx)("h4",{className:"text-lg font-medium text-white mb-2",children:"Allocation Summary"}),(0,mi.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("span",{className:"text-gray-300",children:"Active Orders:"}),(0,mi.jsx)("div",{className:"font-medium text-white",children:B.length})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("span",{className:"text-gray-300",children:"Total Allocated:"}),(0,mi.jsxs)("div",{className:"font-medium text-yellow-400",children:[B.reduce((e,t)=>e+Math.abs(t.quantity),0)," units"]})]})]})]}),(0,mi.jsx)("div",{className:"bg-gray-700 rounded-lg overflow-hidden",children:(0,mi.jsxs)("table",{className:"w-full",children:[(0,mi.jsx)("thead",{className:"bg-gray-600",children:(0,mi.jsxs)("tr",{children:[(0,mi.jsx)("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-300",children:"Order Reference"}),(0,mi.jsx)("th",{className:"px-4 py-2 text-right text-sm font-medium text-gray-300",children:"Allocated Qty"}),(0,mi.jsx)("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-300",children:"Allocated Date"}),(0,mi.jsx)("th",{className:"px-4 py-2 text-center text-sm font-medium text-gray-300",children:"Status"})]})}),(0,mi.jsx)("tbody",{className:"divide-y divide-gray-600",children:B.map((e,t)=>(0,mi.jsxs)("tr",{className:"hover:bg-gray-600",children:[(0,mi.jsx)("td",{className:"px-4 py-2 text-sm text-white",children:e.reference}),(0,mi.jsx)("td",{className:"px-4 py-2 text-right text-sm text-yellow-400 font-medium",children:Math.abs(e.quantity)}),(0,mi.jsx)("td",{className:"px-4 py-2 text-sm text-gray-300",children:e.created_at?new Date(e.created_at).toLocaleDateString():"N/A"}),(0,mi.jsx)("td",{className:"px-4 py-2 text-center",children:(0,mi.jsx)("span",{className:"px-2 py-1 bg-yellow-600 text-white text-xs rounded",children:"Active"})})]},t))})]})}),(0,mi.jsxs)("div",{className:"flex justify-between mt-6",children:[(0,mi.jsx)("button",{onClick:async()=>{if(V)try{var e,t;const a=(null===(e=(await si("/stock/allocations/archived?product_id=".concat(V.productId,"&client_id=").concat(V.clientId))).data)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.allocations)||[];W(a),G(!0),0===a.length&&Bt.info("No archived allocations found for this product"),console.log("Loaded archived allocations:",a)}catch(a){console.error("Failed to load archived allocations:",a),Bt.error("Failed to load archived allocations")}},className:"misty-button misty-button-primary",children:"View Archived Allocations"}),(0,mi.jsx)("button",{onClick:()=>{z([]),$(null)},className:"misty-button misty-button-secondary",children:"Close"})]})]})}),H&&(0,mi.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,mi.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-3xl max-h-[80vh] overflow-y-auto",children:[(0,mi.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,mi.jsx)("h3",{className:"text-xl font-semibold text-white",children:"Archived Stock Allocations"}),(0,mi.jsx)("button",{onClick:()=>{G(!1),W([])},className:"text-gray-400 hover:text-white",children:"\u2715"})]}),(0,mi.jsxs)("div",{className:"mb-4 p-4 bg-gray-700 rounded-lg",children:[(0,mi.jsx)("h4",{className:"text-lg font-medium text-white mb-2",children:"Archive Summary"}),(0,mi.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("span",{className:"text-gray-300",children:"Completed Orders:"}),(0,mi.jsx)("div",{className:"font-medium text-white",children:U.length})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("span",{className:"text-gray-300",children:"Total Historical Allocations:"}),(0,mi.jsxs)("div",{className:"font-medium text-blue-400",children:[U.reduce((e,t)=>e+Math.abs(t.quantity),0)," units"]})]})]})]}),U&&U.length>0?(0,mi.jsx)("div",{className:"bg-gray-700 rounded-lg overflow-hidden",children:(0,mi.jsxs)("table",{className:"w-full",children:[(0,mi.jsx)("thead",{className:"bg-gray-600",children:(0,mi.jsxs)("tr",{children:[(0,mi.jsx)("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-300",children:"Order Reference"}),(0,mi.jsx)("th",{className:"px-4 py-2 text-right text-sm font-medium text-gray-300",children:"Allocated Qty"}),(0,mi.jsx)("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-300",children:"Allocated Date"}),(0,mi.jsx)("th",{className:"px-4 py-2 text-center text-sm font-medium text-gray-300",children:"Status"})]})}),(0,mi.jsx)("tbody",{className:"divide-y divide-gray-600",children:U.map((e,t)=>(0,mi.jsxs)("tr",{className:"hover:bg-gray-600",children:[(0,mi.jsx)("td",{className:"px-4 py-2 text-sm text-white",children:e.reference}),(0,mi.jsx)("td",{className:"px-4 py-2 text-right text-sm text-blue-400 font-medium",children:Math.abs(e.quantity)}),(0,mi.jsx)("td",{className:"px-4 py-2 text-sm text-gray-300",children:e.created_at?new Date(e.created_at).toLocaleDateString():"N/A"}),(0,mi.jsx)("td",{className:"px-4 py-2 text-center",children:(0,mi.jsx)("span",{className:"px-2 py-1 bg-blue-600 text-white text-xs rounded",children:"Completed"})})]},t))})]})}):(0,mi.jsxs)("div",{className:"bg-gray-700 rounded-lg p-8 text-center",children:[(0,mi.jsx)("p",{className:"text-gray-300 text-lg",children:"No archived allocations found"}),(0,mi.jsx)("p",{className:"text-gray-400 text-sm mt-2",children:"Archived allocations will appear here once orders are completed and invoiced"})]}),(0,mi.jsx)("div",{className:"flex justify-end mt-6",children:(0,mi.jsx)("button",{onClick:()=>{G(!1),W([])},className:"misty-button misty-button-secondary",children:"Close"})})]})}),me&&he&&(0,mi.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,mi.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-4xl max-h-[80vh] overflow-y-auto",children:[(0,mi.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,mi.jsxs)("h3",{className:"text-xl font-semibold text-white",children:["Slit Widths - ",he.name]}),(0,mi.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,mi.jsxs)("button",{onClick:()=>be(!0),className:"misty-button misty-button-primary",children:[(0,mi.jsx)(Cl,{className:"h-4 w-4 mr-2"}),"Add Width"]}),(0,mi.jsx)("button",{onClick:()=>pe(!1),className:"text-gray-400 hover:text-white",children:"\u2715"})]})]}),(0,mi.jsxs)("div",{className:"mb-4 p-4 bg-gray-700 rounded-lg",children:[(0,mi.jsx)("h4",{className:"text-lg font-medium text-white mb-2",children:"Summary"}),(0,mi.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("span",{className:"text-gray-300",children:"Total Widths Available:"}),(0,mi.jsx)("div",{className:"font-medium text-white",children:fe.length})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("span",{className:"text-gray-300",children:"Total Available Meters:"}),(0,mi.jsx)("div",{className:"font-medium text-white",children:fe.reduce((e,t)=>e+t.available_quantity_meters,0).toFixed(2)})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("span",{className:"text-gray-300",children:"Width Range:"}),(0,mi.jsx)("div",{className:"font-medium text-white",children:fe.length>0?"".concat(Math.min(...fe.map(e=>e.slit_width_mm)),"mm - ").concat(Math.max(...fe.map(e=>e.slit_width_mm)),"mm"):"No widths available"})]})]})]}),ye&&(0,mi.jsxs)("div",{className:"mb-4 p-4 bg-blue-900/20 border border-blue-700 rounded-lg",children:[(0,mi.jsx)("h4",{className:"text-lg font-medium text-white mb-3",children:"Add New Slit Width"}),(0,mi.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Slit Width (mm)"}),(0,mi.jsx)("input",{type:"number",step:"0.1",value:we.slit_width_mm,onChange:e=>_e(t=>m(m({},t),{},{slit_width_mm:e.target.value})),className:"misty-input",placeholder:"e.g. 50.5"})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Quantity (meters)"}),(0,mi.jsx)("input",{type:"number",step:"0.1",value:we.quantity_meters,onChange:e=>_e(t=>m(m({},t),{},{quantity_meters:e.target.value})),className:"misty-input",placeholder:"e.g. 100.0"})]})]}),(0,mi.jsxs)("div",{className:"flex justify-end space-x-3 mt-4",children:[(0,mi.jsx)("button",{onClick:()=>{be(!1),_e({slit_width_mm:"",quantity_meters:"",source_job_id:"manual-entry",source_order_id:"manual-entry"})},className:"misty-button misty-button-secondary",children:"Cancel"}),(0,mi.jsx)("button",{onClick:async()=>{if(we.slit_width_mm&&we.quantity_meters)try{const e={raw_material_id:he.id,raw_material_name:he.name,slit_width_mm:parseFloat(we.slit_width_mm),quantity_meters:parseFloat(we.quantity_meters),source_job_id:"manual-entry",source_order_id:"manual-entry",created_from_additional_widths:!1,material_specifications:{}},t=await $r(e);t.data.success?(Bt.success("Slit width added successfully"),_e({slit_width_mm:"",quantity_meters:"",source_job_id:"manual-entry",source_order_id:"manual-entry"}),be(!1),await Xe(he.id,he.name)):Bt.error(t.data.message||"Failed to add slit width")}catch(e){console.error("Failed to add slit width:",e),Bt.error("Failed to add slit width")}else Bt.error("Please enter both width and quantity")},className:"misty-button misty-button-primary",children:"Add Width"})]})]}),(0,mi.jsx)("div",{className:"bg-gray-700 rounded-lg overflow-hidden",children:(0,mi.jsxs)("table",{className:"w-full",children:[(0,mi.jsx)("thead",{className:"bg-gray-600",children:(0,mi.jsxs)("tr",{children:[(0,mi.jsx)("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-300",children:"Width (mm)"}),(0,mi.jsx)("th",{className:"px-4 py-2 text-right text-sm font-medium text-gray-300",children:"Total Meters"}),(0,mi.jsx)("th",{className:"px-4 py-2 text-right text-sm font-medium text-gray-300",children:"Available Meters"}),(0,mi.jsx)("th",{className:"px-4 py-2 text-center text-sm font-medium text-gray-300",children:"Source"}),(0,mi.jsx)("th",{className:"px-4 py-2 text-center text-sm font-medium text-gray-300",children:"Actions"})]})}),(0,mi.jsx)("tbody",{className:"divide-y divide-gray-600",children:fe.length>0?fe.flatMap(e=>e.entries.map((t,a)=>(0,mi.jsxs)("tr",{className:"hover:bg-gray-600",children:[(0,mi.jsxs)("td",{className:"px-4 py-2 text-sm font-medium text-white",children:[t.slit_width_mm,"mm"]}),(0,mi.jsx)("td",{className:"px-4 py-2 text-right text-sm text-white",children:ve===t.id?(0,mi.jsx)("input",{type:"number",step:"0.1",defaultValue:t.quantity_meters,onBlur:e=>{Ke(t.id,e.target.value)},onKeyDown:e=>{"Enter"===e.key&&Ke(t.id,e.target.value),"Escape"===e.key&&je(null)},className:"misty-input w-20 text-right text-sm",autoFocus:!0}):(0,mi.jsx)("span",{className:"cursor-pointer hover:bg-gray-500 px-2 py-1 rounded",onDoubleClick:()=>je(t.id),title:"Double-click to edit quantity",children:t.quantity_meters.toFixed(2)})}),(0,mi.jsx)("td",{className:"px-4 py-2 text-right text-sm",children:(0,mi.jsx)("span",{className:"".concat(t.remaining_quantity>0?"text-green-400":"text-red-400"),children:t.remaining_quantity.toFixed(2)})}),(0,mi.jsx)("td",{className:"px-4 py-2 text-center text-sm text-gray-300",children:t.created_from_additional_widths?(0,mi.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-blue-900 text-blue-300",children:"Job Card"}):(0,mi.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-green-900 text-green-300",children:"Manual"})}),(0,mi.jsx)("td",{className:"px-4 py-2 text-center",children:(0,mi.jsxs)("div",{className:"flex items-center justify-center space-x-1",children:[(0,mi.jsx)("button",{onClick:()=>et(t.id,t.remaining_quantity,10),className:"text-green-400 hover:text-green-300 text-xs p-1",title:"Add 10 meters",children:(0,mi.jsx)(nf,{className:"h-3 w-3"})}),(0,mi.jsx)("button",{onClick:()=>et(t.id,t.remaining_quantity,-10),className:"text-yellow-400 hover:text-yellow-300 text-xs p-1",title:"Subtract 10 meters",children:(0,mi.jsx)(of,{className:"h-3 w-3"})}),(0,mi.jsx)("button",{onClick:()=>je(t.id),className:"text-blue-400 hover:text-blue-300 text-xs p-1",title:"Edit quantity",children:(0,mi.jsx)(ho,{className:"h-3 w-3"})}),(0,mi.jsx)("button",{onClick:async e=>{if(e.preventDefault(),e.stopPropagation(),alert("Delete button clicked! ID: "+t.id),!t.id)return void alert("Error: Entry ID is missing!");if(window.confirm("Are you sure you want to delete this slit width entry?\n\nWidth: ".concat(t.slit_width_mm,"mm\nMeters: ").concat(t.quantity_meters,"m")))try{var a;alert("Calling delete API for ID: "+t.id);const e=await Yr(t.id);var s;if(alert("Delete API response: "+JSON.stringify(e)),null!==(a=e.data)&&void 0!==a&&a.success||e.success)Bt.success("Slit width deleted successfully"),await Xe(he.id,he.name);else alert("Delete failed: "+((null===(s=e.data)||void 0===s?void 0:s.message)||e.message)),Bt.error("Failed to delete slit width")}catch(o){var n,r,i,l;alert("Error occurred: "+o.message);const e=(null===(n=o.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.detail)||(null===(i=o.response)||void 0===i||null===(l=i.data)||void 0===l?void 0:l.message)||o.message;e.includes("allocated")?Bt.error("Cannot delete: This slit width is allocated to an order"):Bt.error("Delete failed: "+e)}},className:"text-red-400 hover:text-red-300 text-xs p-1 cursor-pointer",title:"Delete entry",type:"button",children:(0,mi.jsx)(Ol,{className:"h-3 w-3"})})]})})]},"".concat(e.slit_width_mm,"-").concat(a)))):(0,mi.jsx)("tr",{children:(0,mi.jsxs)("td",{colSpan:5,className:"px-4 py-8 text-center text-gray-400",children:[(0,mi.jsx)(ki,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),(0,mi.jsx)("p",{children:"No slit widths available for this material"}),(0,mi.jsx)("p",{className:"text-sm",children:"Slit widths are created from slitting jobs"})]})})})]})}),(0,mi.jsx)("div",{className:"flex justify-end mt-6",children:(0,mi.jsx)("button",{onClick:()=>pe(!1),className:"misty-button misty-button-secondary",children:"Close"})})]})}),Q&&(0,mi.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4 overflow-y-auto",children:(0,mi.jsxs)("div",{className:"bg-gray-800 rounded-lg w-full max-w-6xl max-h-[90vh] overflow-hidden flex flex-col",children:[(0,mi.jsxs)("div",{className:"p-6 border-b border-gray-700",children:[(0,mi.jsx)("h2",{className:"text-2xl font-bold text-white mb-2",children:"Manual Stock Take"}),(0,mi.jsx)("p",{className:"text-gray-400",children:"Review and confirm stock quantities for all items"}),(0,mi.jsxs)("div",{className:"mt-4",children:[(0,mi.jsxs)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Select Month for Stock Take ",(0,mi.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,mi.jsx)("input",{type:"month",value:J,onChange:e=>Z(e.target.value),className:"misty-input w-full md:w-64"})]})]}),(0,mi.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:ee?(0,mi.jsxs)("div",{className:"text-center py-12",children:[(0,mi.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-yellow-400 mx-auto"}),(0,mi.jsx)("p",{className:"text-gray-400 mt-4",children:"Loading stock items..."})]}):(0,mi.jsxs)("div",{className:"space-y-6",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsxs)("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[(0,mi.jsx)(Bi,{className:"h-5 w-5 mr-2 text-yellow-400"}),"Products On Hand (",X.filter(e=>"product"===e.type).length,")"]}),(0,mi.jsx)("div",{className:"bg-gray-900 rounded-lg overflow-hidden",children:(0,mi.jsxs)("table",{className:"w-full",children:[(0,mi.jsx)("thead",{className:"bg-gray-800",children:(0,mi.jsxs)("tr",{children:[(0,mi.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Product"}),(0,mi.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Client"}),(0,mi.jsx)("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-300 uppercase",children:"Current QOH"}),(0,mi.jsx)("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-300 uppercase",children:"Purchase Cost"}),(0,mi.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-300 uppercase",children:"Unit"}),(0,mi.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-300 uppercase",children:"Actions"})]})}),(0,mi.jsx)("tbody",{className:"divide-y divide-gray-700",children:X.filter(e=>"product"===e.type).map(e=>{var t,a,s;return(0,mi.jsxs)("tr",{className:null!==(t=ae[e.id])&&void 0!==t&&t.confirmed?"bg-green-900 bg-opacity-20":"",children:[(0,mi.jsx)("td",{className:"px-4 py-3 text-sm text-white",children:e.name}),(0,mi.jsx)("td",{className:"px-4 py-3 text-sm text-gray-300",children:e.client_name}),(0,mi.jsx)("td",{className:"px-4 py-3 text-sm text-right text-white font-medium",children:e.quantity_on_hand}),(0,mi.jsxs)("td",{className:"px-4 py-3 text-sm text-right text-green-400",children:["$",(e.purchase_cost||0).toFixed(2)]}),(0,mi.jsx)("td",{className:"px-4 py-3 text-sm text-center text-gray-400",children:e.unit_of_measure}),(0,mi.jsx)("td",{className:"px-4 py-3",children:(0,mi.jsx)("div",{className:"flex items-center justify-center space-x-2",children:null!==(a=ae[e.id])&&void 0!==a&&a.confirmed?(0,mi.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,mi.jsx)(tf,{className:"h-5 w-5 text-green-400"}),(0,mi.jsx)("span",{className:"text-sm text-green-400",children:"Confirmed"})]}):(0,mi.jsxs)(mi.Fragment,{children:[(0,mi.jsx)("button",{onClick:()=>it(e.id),className:"px-3 py-1 bg-green-600 hover:bg-green-700 text-white text-xs rounded",children:"\u2713 Confirmed"}),(0,mi.jsx)("input",{type:"number",step:"0.01",placeholder:"New qty",value:(null===(s=ae[e.id])||void 0===s?void 0:s.newQuantity)||"",onChange:t=>se(a=>m(m({},a),{},{[e.id]:m(m({},a[e.id]),{},{newQuantity:t.target.value})})),className:"misty-input w-24 text-sm"}),(0,mi.jsx)("button",{onClick:()=>lt(e.id),className:"px-3 py-1 bg-yellow-600 hover:bg-yellow-700 text-white text-xs rounded",children:"Modify SOH"})]})})})]},e.id)})})]})})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsxs)("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[(0,mi.jsx)(Bi,{className:"h-5 w-5 mr-2 text-blue-400"}),"Raw Materials On Hand (",X.filter(e=>"material"===e.type).length,")"]}),(0,mi.jsx)("div",{className:"bg-gray-900 rounded-lg overflow-hidden",children:(0,mi.jsxs)("table",{className:"w-full",children:[(0,mi.jsx)("thead",{className:"bg-gray-800",children:(0,mi.jsxs)("tr",{children:[(0,mi.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Material"}),(0,mi.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Supplier"}),(0,mi.jsx)("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-300 uppercase",children:"Current QOH"}),(0,mi.jsx)("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-300 uppercase",children:"Purchase Cost"}),(0,mi.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-300 uppercase",children:"Unit"}),(0,mi.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-300 uppercase",children:"Actions"})]})}),(0,mi.jsx)("tbody",{className:"divide-y divide-gray-700",children:X.filter(e=>"material"===e.type).map(e=>{var t,a,s;return(0,mi.jsxs)("tr",{className:null!==(t=ae[e.id])&&void 0!==t&&t.confirmed?"bg-green-900 bg-opacity-20":"",children:[(0,mi.jsx)("td",{className:"px-4 py-3 text-sm text-white",children:e.name}),(0,mi.jsx)("td",{className:"px-4 py-3 text-sm text-gray-300",children:e.supplier}),(0,mi.jsx)("td",{className:"px-4 py-3 text-sm text-right text-white font-medium",children:e.quantity_on_hand}),(0,mi.jsxs)("td",{className:"px-4 py-3 text-sm text-right text-green-400",children:["$",(e.purchase_cost||0).toFixed(2)]}),(0,mi.jsx)("td",{className:"px-4 py-3 text-sm text-center text-gray-400",children:e.unit_of_measure}),(0,mi.jsx)("td",{className:"px-4 py-3",children:(0,mi.jsx)("div",{className:"flex items-center justify-center space-x-2",children:null!==(a=ae[e.id])&&void 0!==a&&a.confirmed?(0,mi.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,mi.jsx)(tf,{className:"h-5 w-5 text-green-400"}),(0,mi.jsx)("span",{className:"text-sm text-green-400",children:"Confirmed"})]}):(0,mi.jsxs)(mi.Fragment,{children:[(0,mi.jsx)("button",{onClick:()=>it(e.id),className:"px-3 py-1 bg-green-600 hover:bg-green-700 text-white text-xs rounded",children:"\u2713 Confirmed"}),(0,mi.jsx)("input",{type:"number",step:"0.01",placeholder:"New qty",value:(null===(s=ae[e.id])||void 0===s?void 0:s.newQuantity)||"",onChange:t=>se(a=>m(m({},a),{},{[e.id]:m(m({},a[e.id]),{},{newQuantity:t.target.value})})),className:"misty-input w-24 text-sm"}),(0,mi.jsx)("button",{onClick:()=>lt(e.id),className:"px-3 py-1 bg-yellow-600 hover:bg-yellow-700 text-white text-xs rounded",children:"Modify SOH"})]})})})]},e.id)})})]})})]}),(()=>{const e=ct();return e&&0!==e.cores_by_width.length?(0,mi.jsxs)("div",{className:"space-y-4",children:[(0,mi.jsxs)("div",{className:"bg-purple-900/20 border border-purple-500/30 rounded-lg p-4",children:[(0,mi.jsxs)("h4",{className:"text-purple-300 font-medium mb-3 flex items-center",children:[(0,mi.jsx)(Bi,{className:"h-5 w-5 mr-2"}),"Spiral Paper Cores Summary - Cores by Width"]}),(0,mi.jsx)("div",{className:"overflow-x-auto",children:(0,mi.jsxs)("table",{className:"w-full",children:[(0,mi.jsx)("thead",{className:"bg-gray-800",children:(0,mi.jsxs)("tr",{children:[(0,mi.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-300",children:"Width (mm)"}),(0,mi.jsx)("th",{className:"px-3 py-2 text-right text-xs font-medium text-gray-300",children:"Quantity"}),(0,mi.jsx)("th",{className:"px-3 py-2 text-right text-xs font-medium text-gray-300",children:"Total m\xb2"}),(0,mi.jsx)("th",{className:"px-3 py-2 text-right text-xs font-medium text-gray-300",children:"% of Master Deckle"})]})}),(0,mi.jsxs)("tbody",{className:"divide-y divide-gray-700",children:[e.cores_by_width.map((e,t)=>(0,mi.jsxs)("tr",{children:[(0,mi.jsxs)("td",{className:"px-3 py-2 text-sm text-white",children:[e.width_mm," mm"]}),(0,mi.jsx)("td",{className:"px-3 py-2 text-sm text-right text-gray-300",children:e.quantity}),(0,mi.jsxs)("td",{className:"px-3 py-2 text-sm text-right text-yellow-400",children:[e.total_m2.toFixed(2)," m\xb2"]}),(0,mi.jsxs)("td",{className:"px-3 py-2 text-sm text-right text-blue-400",children:[e.percent_of_master.toFixed(2),"%"]})]},t)),(0,mi.jsxs)("tr",{className:"bg-gray-800 font-bold",children:[(0,mi.jsx)("td",{className:"px-3 py-2 text-sm text-white",children:"TOTAL"}),(0,mi.jsx)("td",{className:"px-3 py-2 text-sm text-right text-white",children:e.total_cores}),(0,mi.jsxs)("td",{className:"px-3 py-2 text-sm text-right text-yellow-400",children:[e.cores_by_width.reduce((e,t)=>e+t.total_m2,0).toFixed(2)," m\xb2"]}),(0,mi.jsx)("td",{className:"px-3 py-2 text-sm text-right text-gray-400",children:"-"})]})]})]})}),(0,mi.jsx)("p",{className:"text-xs text-gray-400 mt-2",children:"* Based on 1500mm master deckle width"})]}),e.material_usage.length>0&&(0,mi.jsxs)("div",{className:"bg-blue-900/20 border border-blue-500/30 rounded-lg p-4",children:[(0,mi.jsxs)("h4",{className:"text-blue-300 font-medium mb-3 flex items-center",children:[(0,mi.jsx)(Bi,{className:"h-5 w-5 mr-2"}),"Material Consumption to Manufacture Cores"]}),(0,mi.jsx)("div",{className:"overflow-x-auto",children:(0,mi.jsxs)("table",{className:"w-full",children:[(0,mi.jsx)("thead",{className:"bg-gray-800",children:(0,mi.jsxs)("tr",{children:[(0,mi.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-300",children:"Layer Type"}),(0,mi.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-300",children:"Material"}),(0,mi.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-300",children:"Supplier"}),(0,mi.jsx)("th",{className:"px-3 py-2 text-right text-xs font-medium text-gray-300",children:"Width (mm)"}),(0,mi.jsx)("th",{className:"px-3 py-2 text-right text-xs font-medium text-gray-300",children:"GSM"}),(0,mi.jsx)("th",{className:"px-3 py-2 text-right text-xs font-medium text-gray-300",children:"Total Linear Meters"})]})}),(0,mi.jsxs)("tbody",{className:"divide-y divide-gray-700",children:[e.material_usage.map((e,t)=>(0,mi.jsxs)("tr",{children:[(0,mi.jsx)("td",{className:"px-3 py-2 text-sm text-white",children:e.layer_type}),(0,mi.jsx)("td",{className:"px-3 py-2 text-sm text-gray-300",children:e.material_name}),(0,mi.jsx)("td",{className:"px-3 py-2 text-sm text-gray-400",children:e.supplier}),(0,mi.jsxs)("td",{className:"px-3 py-2 text-sm text-right text-gray-300",children:[e.width_mm," mm"]}),(0,mi.jsx)("td",{className:"px-3 py-2 text-sm text-right text-gray-300",children:e.gsm}),(0,mi.jsxs)("td",{className:"px-3 py-2 text-sm text-right text-yellow-400 font-medium",children:[e.total_linear_meters.toFixed(2)," m"]})]},t)),(0,mi.jsxs)("tr",{className:"bg-gray-800 font-bold",children:[(0,mi.jsx)("td",{colSpan:"5",className:"px-3 py-2 text-sm text-white text-right",children:"TOTAL LINEAR METERS"}),(0,mi.jsxs)("td",{className:"px-3 py-2 text-sm text-right text-yellow-400",children:[e.material_usage.reduce((e,t)=>e+t.total_linear_meters,0).toFixed(2)," m"]})]})]})]})}),(0,mi.jsx)("p",{className:"text-xs text-gray-400 mt-2",children:"* Calculated based on quantity of cores on hand \xd7 material requirements per core"})]})]}):null})(),(0,mi.jsxs)("div",{className:"bg-blue-900/20 border border-blue-500/30 rounded-lg p-4",children:[(0,mi.jsx)("h4",{className:"text-blue-300 font-medium mb-2",children:"Stock Take Progress"}),(0,mi.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("span",{className:"text-gray-400",children:"Total Items:"}),(0,mi.jsx)("span",{className:"text-white ml-2 font-medium",children:X.length})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("span",{className:"text-gray-400",children:"Confirmed:"}),(0,mi.jsx)("span",{className:"text-green-400 ml-2 font-medium",children:Object.values(ae).filter(e=>e.confirmed).length})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("span",{className:"text-gray-400",children:"Remaining:"}),(0,mi.jsx)("span",{className:"text-yellow-400 ml-2 font-medium",children:X.length-Object.values(ae).filter(e=>e.confirmed).length})]})]})]})]})}),(0,mi.jsxs)("div",{className:"p-6 border-t border-gray-700 flex justify-between items-center",children:[(0,mi.jsxs)("div",{className:"flex space-x-3",children:[(0,mi.jsxs)("button",{onClick:()=>{const e=window.open("","_blank"),t=ct(),a="\n      <!DOCTYPE html>\n      <html>\n      <head>\n        <title>Manual Stock Take - ".concat(J,"</title>\n        <style>\n          body { font-family: Arial, sans-serif; padding: 20px; }\n          h1 { color: #333; }\n          h2 { color: #666; margin-top: 30px; }\n          table { width: 100%; border-collapse: collapse; margin-top: 20px; }\n          th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }\n          th { background-color: #4CAF50; color: white; }\n          tr:nth-child(even) { background-color: #f2f2f2; }\n          .confirmed { background-color: #d4edda; }\n          .summary { background-color: #fff3cd; }\n          .total-row { font-weight: bold; background-color: #e9ecef; }\n        </style>\n      </head>\n      <body>\n        <h1>Manual Stock Take</h1>\n        <p><strong>Month:</strong> ").concat(J,"</p>\n        <p><strong>Generated:</strong> ").concat((new Date).toLocaleString(),"</p>\n        <p><strong>Progress:</strong> ").concat(Object.values(ae).filter(e=>e.confirmed).length," / ").concat(X.length," items confirmed</p>\n        \n        <h2>Products On Hand</h2>\n        <table>\n          <thead>\n            <tr>\n              <th>Product</th>\n              <th>Client</th>\n              <th>Quantity</th>\n              <th>Purchase Cost</th>\n              <th>Unit</th>\n              <th>Status</th>\n            </tr>\n          </thead>\n          <tbody>\n            ").concat(X.filter(e=>"product"===e.type).map(e=>{var t,a;return'\n              <tr class="'.concat(null!==(t=ae[e.id])&&void 0!==t&&t.confirmed?"confirmed":"",'">\n                <td>').concat(e.name,"</td>\n                <td>").concat(e.client_name||"","</td>\n                <td>").concat(e.quantity_on_hand,"</td>\n                <td>$").concat((e.purchase_cost||0).toFixed(2),"</td>\n                <td>").concat(e.unit_of_measure,"</td>\n                <td>").concat(null!==(a=ae[e.id])&&void 0!==a&&a.confirmed?"\u2713 Confirmed":"Pending","</td>\n              </tr>\n            ")}).join(""),"\n          </tbody>\n        </table>\n        \n        <h2>Raw Materials On Hand</h2>\n        <table>\n          <thead>\n            <tr>\n              <th>Material</th>\n              <th>Supplier</th>\n              <th>Quantity</th>\n              <th>Purchase Cost</th>\n              <th>Unit</th>\n              <th>Status</th>\n            </tr>\n          </thead>\n          <tbody>\n            ").concat(X.filter(e=>"material"===e.type).map(e=>{var t,a;return'\n              <tr class="'.concat(null!==(t=ae[e.id])&&void 0!==t&&t.confirmed?"confirmed":"",'">\n                <td>').concat(e.name,"</td>\n                <td>").concat(e.supplier||"","</td>\n                <td>").concat(e.quantity_on_hand,"</td>\n                <td>$").concat((e.purchase_cost||0).toFixed(2),"</td>\n                <td>").concat(e.unit_of_measure,"</td>\n                <td>").concat(null!==(a=ae[e.id])&&void 0!==a&&a.confirmed?"\u2713 Confirmed":"Pending","</td>\n              </tr>\n            ")}).join(""),"\n          </tbody>\n        </table>\n        \n        ").concat(t&&t.cores_by_width&&t.cores_by_width.length>0?"\n          <h2>Spiral Paper Cores Summary - Cores By Width</h2>\n          <table>\n            <thead>\n              <tr>\n                <th>Width (mm)</th>\n                <th>Quantity</th>\n                <th>Total m\xb2</th>\n                <th>% of Master Deckle (1500mm)</th>\n              </tr>\n            </thead>\n            <tbody>\n              ".concat(t.cores_by_width.map(e=>'\n                <tr class="summary">\n                  <td>'.concat(e.width_mm," mm</td>\n                  <td>").concat(e.quantity,"</td>\n                  <td>").concat(e.total_m2.toFixed(2)," m\xb2</td>\n                  <td>").concat(e.percent_of_master.toFixed(2),"%</td>\n                </tr>\n              ")).join(""),'\n              <tr class="total-row">\n                <td>TOTAL</td>\n                <td>').concat(t.cores_by_width.reduce((e,t)=>e+t.quantity,0),"</td>\n                <td>").concat(t.cores_by_width.reduce((e,t)=>e+t.total_m2,0).toFixed(2)," m\xb2</td>\n                <td>-</td>\n              </tr>\n            </tbody>\n          </table>\n          \n          ").concat(t.material_usage&&t.material_usage.length>0?"\n            <h2>Material Consumption to Manufacture Cores</h2>\n            <table>\n              <thead>\n                <tr>\n                  <th>Layer Type</th>\n                  <th>Material</th>\n                  <th>Supplier</th>\n                  <th>Width (mm)</th>\n                  <th>GSM</th>\n                  <th>Total Linear Meters</th>\n                </tr>\n              </thead>\n              <tbody>\n                ".concat(t.material_usage.map(e=>'\n                  <tr class="summary">\n                    <td>'.concat(e.layer_type,"</td>\n                    <td>").concat(e.material_name,"</td>\n                    <td>").concat(e.supplier,"</td>\n                    <td>").concat(e.width_mm," mm</td>\n                    <td>").concat(e.gsm,"</td>\n                    <td>").concat(e.total_linear_meters.toFixed(2)," m</td>\n                  </tr>\n                ")).join(""),"\n              </tbody>\n            </table>\n          "):"","\n        "):"","\n      </body>\n      </html>\n    ");e.document.write(a),e.document.close(),e.focus(),setTimeout(()=>{e.print()},250),Bt.success("PDF generation initiated")},className:"misty-button misty-button-secondary flex items-center",children:[(0,mi.jsx)(Gl,{className:"h-5 w-5 mr-2"}),"Print PDF"]}),(0,mi.jsxs)("button",{onClick:()=>{const e=X.map(e=>{var t;return["product"===e.type?"Product":"Material",e.name,e.client_name||e.supplier||"",e.quantity_on_hand,e.purchase_cost||0,e.unit_of_measure,null!==(t=ae[e.id])&&void 0!==t&&t.confirmed?"Confirmed":"Pending"]}),t=ct();t&&t.cores_by_width.length>0&&(e.push([]),e.push(["SPIRAL PAPER CORES SUMMARY - CORES BY WIDTH"]),e.push(["Width (mm)","Quantity","Total m\xb2","% of Master Deckle"]),t.cores_by_width.forEach(t=>{e.push([t.width_mm,t.quantity,t.total_m2.toFixed(2),t.percent_of_master.toFixed(2)+"%"])}),t.material_usage.length>0&&(e.push([]),e.push(["MATERIAL CONSUMPTION TO MANUFACTURE CORES"]),e.push(["Layer Type","Material","Supplier","Width (mm)","GSM","Total Linear Meters"]),t.material_usage.forEach(t=>{e.push([t.layer_type,t.material_name,t.supplier,t.width_mm,t.gsm,t.total_linear_meters.toFixed(2)+" m"])})));const a=[["Manual Stock Take - "+J],["Generated: "+(new Date).toLocaleString()],[],["Type","Item Name","Client/Supplier","Quantity On Hand","Purchase Cost","Unit","Status"],...e].map(e=>e.join(",")).join("\n"),s=new Blob([a],{type:"text/csv"}),n=window.URL.createObjectURL(s),r=document.createElement("a");r.href=n,r.download="stock-take-".concat(J,".csv"),r.click(),window.URL.revokeObjectURL(n),Bt.success("CSV exported successfully")},className:"misty-button misty-button-secondary flex items-center",children:[(0,mi.jsx)(eo,{className:"h-5 w-5 mr-2"}),"Generate CSV"]})]}),(0,mi.jsxs)("div",{className:"flex space-x-3",children:[(0,mi.jsx)("button",{onClick:()=>Y(!1),className:"misty-button misty-button-secondary",children:"Cancel"}),(0,mi.jsx)("button",{onClick:async()=>{if(!J)return void Bt.error("Please select a month for this stock take");const e=Object.values(ae).filter(e=>e.confirmed).length,t=X.length;if(e<t){if(!window.confirm("Only ".concat(e," out of ").concat(t," items have been confirmed. Do you want to save anyway?")))return}try{const a=ct(),s={month:J,items:X.map(e=>{var t,a;return m(m({},e),{},{confirmed:(null===(t=ae[e.id])||void 0===t?void 0:t.confirmed)||!1,modified:(null===(a=ae[e.id])||void 0===a?void 0:a.modified)||!1})}),summary:{total_items:t,confirmed_count:e,modified_count:Object.values(ae).filter(e=>e.modified).length},spiral_cores_summary:a},n=await fetch("/api/stock/manual-stocktakes",{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"},body:JSON.stringify(s)});if(n.ok)Bt.success("Manual stock take for ".concat(J," saved successfully")),Y(!1),K([]),se({});else{const e=await n.json();Bt.error(e.detail||"Failed to save stocktake")}}catch(a){console.error("Failed to save stocktake:",a),Bt.error("Failed to save stocktake")}},disabled:!J,className:"misty-button misty-button-primary disabled:opacity-50",children:"Save Stock Take"})]})]})]})}),ne&&(0,mi.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:(0,mi.jsxs)("div",{className:"bg-gray-800 rounded-lg w-full max-w-6xl max-h-[90vh] overflow-hidden flex flex-col",children:[(0,mi.jsxs)("div",{className:"p-6 border-b border-gray-700",children:[(0,mi.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Archived Stocktakes"}),(0,mi.jsx)("p",{className:"text-gray-400",children:"View, edit, or export historical stocktakes"})]}),(0,mi.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:oe?(0,mi.jsxs)("div",{className:"text-center py-12",children:[(0,mi.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-yellow-400 mx-auto"}),(0,mi.jsx)("p",{className:"text-gray-400 mt-4",children:"Loading archived stocktakes..."})]}):0===ie.length?(0,mi.jsxs)("div",{className:"text-center py-12",children:[(0,mi.jsx)(Bi,{className:"h-16 w-16 text-gray-600 mx-auto mb-4"}),(0,mi.jsx)("p",{className:"text-gray-400",children:"No archived stocktakes found"})]}):(0,mi.jsx)("div",{className:"space-y-4",children:ie.map(e=>(0,mi.jsx)("div",{className:"bg-gray-900 rounded-lg p-4 border border-gray-700",children:(0,mi.jsxs)("div",{className:"flex items-center justify-between",children:[(0,mi.jsxs)("div",{className:"flex-1",children:[(0,mi.jsxs)("h3",{className:"text-lg font-semibold text-white mb-1",children:["Stocktake for ",e.month]}),(0,mi.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm mt-2",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("span",{className:"text-gray-400",children:"Created:"}),(0,mi.jsx)("span",{className:"text-white ml-2",children:new Date(e.created_at).toLocaleDateString()})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("span",{className:"text-gray-400",children:"Total Items:"}),(0,mi.jsx)("span",{className:"text-white ml-2",children:e.summary.total_items})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("span",{className:"text-gray-400",children:"Confirmed:"}),(0,mi.jsx)("span",{className:"text-green-400 ml-2",children:e.summary.confirmed_count})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("span",{className:"text-gray-400",children:"Modified:"}),(0,mi.jsx)("span",{className:"text-yellow-400 ml-2",children:e.summary.modified_count||0})]})]})]}),(0,mi.jsxs)("div",{className:"flex items-center space-x-2 ml-4",children:[(0,mi.jsx)("button",{onClick:()=>(e=>{const t=window.open("","_blank"),a="\n      <!DOCTYPE html>\n      <html>\n      <head>\n        <title>Manual Stock Take - ".concat(e.month,"</title>\n        <style>\n          body { font-family: Arial, sans-serif; padding: 20px; }\n          h1 { color: #333; }\n          h2 { color: #666; margin-top: 30px; }\n          table { width: 100%; border-collapse: collapse; margin-top: 20px; }\n          th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }\n          th { background-color: #4CAF50; color: white; }\n          tr:nth-child(even) { background-color: #f2f2f2; }\n          .confirmed { background-color: #d4edda; }\n          .summary { background-color: #fff3cd; }\n          .total-row { font-weight: bold; background-color: #e9ecef; }\n        </style>\n      </head>\n      <body>\n        <h1>Manual Stock Take</h1>\n        <p><strong>Month:</strong> ").concat(e.month,"</p>\n        <p><strong>Created:</strong> ").concat(new Date(e.created_at).toLocaleString(),"</p>\n        <p><strong>Total Items:</strong> ").concat(e.summary.total_items,"</p>\n        <p><strong>Confirmed:</strong> ").concat(e.summary.confirmed_count,"</p>\n        \n        <h2>Products On Hand</h2>\n        <table>\n          <thead>\n            <tr>\n              <th>Product</th>\n              <th>Client</th>\n              <th>Quantity</th>\n              <th>Purchase Cost</th>\n              <th>Unit</th>\n              <th>Status</th>\n            </tr>\n          </thead>\n          <tbody>\n            ").concat(e.items.filter(e=>"product"===e.type).map(e=>'\n              <tr class="'.concat(e.confirmed?"confirmed":"",'">\n                <td>').concat(e.name,"</td>\n                <td>").concat(e.client_name||"","</td>\n                <td>").concat(e.quantity_on_hand,"</td>\n                <td>$").concat((e.purchase_cost||0).toFixed(2),"</td>\n                <td>").concat(e.unit_of_measure,"</td>\n                <td>").concat(e.confirmed?"\u2713 Confirmed":"Pending","</td>\n              </tr>\n            ")).join(""),"\n          </tbody>\n        </table>\n        \n        <h2>Raw Materials On Hand</h2>\n        <table>\n          <thead>\n            <tr>\n              <th>Material</th>\n              <th>Supplier</th>\n              <th>Quantity</th>\n              <th>Purchase Cost</th>\n              <th>Unit</th>\n              <th>Status</th>\n            </tr>\n          </thead>\n          <tbody>\n            ").concat(e.items.filter(e=>"material"===e.type).map(e=>'\n              <tr class="'.concat(e.confirmed?"confirmed":"",'">\n                <td>').concat(e.name,"</td>\n                <td>").concat(e.supplier||"","</td>\n                <td>").concat(e.quantity_on_hand,"</td>\n                <td>$").concat((e.purchase_cost||0).toFixed(2),"</td>\n                <td>").concat(e.unit_of_measure,"</td>\n                <td>").concat(e.confirmed?"\u2713 Confirmed":"Pending","</td>\n              </tr>\n            ")).join(""),"\n          </tbody>\n        </table>\n        \n        ").concat(e.spiral_cores_summary&&e.spiral_cores_summary.length>0?"\n          <h2>Spiral Paper Cores Summary</h2>\n          <table>\n            <thead>\n              <tr>\n                <th>Width (mm)</th>\n                <th>Quantity</th>\n                <th>Total m\xb2</th>\n                <th>% of Master Deckle (1500mm)</th>\n              </tr>\n            </thead>\n            <tbody>\n              ".concat(e.spiral_cores_summary.map(e=>'\n                <tr class="summary">\n                  <td>'.concat(e.width_mm," mm</td>\n                  <td>").concat(e.quantity,"</td>\n                  <td>").concat(e.total_m2.toFixed(2)," m\xb2</td>\n                  <td>").concat(e.percent_of_master.toFixed(2),"%</td>\n                </tr>\n              ")).join(""),'\n              <tr class="total-row">\n                <td>TOTAL</td>\n                <td>').concat(e.spiral_cores_summary.reduce((e,t)=>e+t.quantity,0),"</td>\n                <td>").concat(e.spiral_cores_summary.reduce((e,t)=>e+t.total_m2,0).toFixed(2)," m\xb2</td>\n                <td>-</td>\n              </tr>\n            </tbody>\n          </table>\n        "):"","\n      </body>\n      </html>\n    ");t.document.write(a),t.document.close(),t.focus(),setTimeout(()=>{t.print()},250),Bt.success("PDF generation initiated")})(e),className:"px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm rounded flex items-center",title:"Print PDF",children:(0,mi.jsx)(Gl,{className:"h-4 w-4"})}),(0,mi.jsx)("button",{onClick:()=>(e=>{const t=e.items.map(e=>["product"===e.type?"Product":"Material",e.name,e.client_name||e.supplier||"",e.quantity_on_hand,e.purchase_cost||0,e.unit_of_measure,e.confirmed?"Confirmed":"Pending"]);e.spiral_cores_summary&&e.spiral_cores_summary.length>0&&(t.push([]),t.push(["SPIRAL PAPER CORES SUMMARY"]),t.push(["Width (mm)","Quantity","Total m\xb2","% of Master Deckle"]),e.spiral_cores_summary.forEach(e=>{t.push([e.width_mm,e.quantity,e.total_m2.toFixed(2),e.percent_of_master.toFixed(2)+"%"])}));const a=[["Manual Stock Take - "+e.month],["Created: "+new Date(e.created_at).toLocaleString()],[],["Type","Item Name","Client/Supplier","Quantity On Hand","Purchase Cost","Unit","Status"],...t].map(e=>e.join(",")).join("\n"),s=new Blob([a],{type:"text/csv"}),n=window.URL.createObjectURL(s),r=document.createElement("a");r.href=n,r.download="stock-take-".concat(e.month,".csv"),r.click(),window.URL.revokeObjectURL(n),Bt.success("CSV exported successfully")})(e),className:"px-3 py-2 bg-green-600 hover:bg-green-700 text-white text-sm rounded flex items-center",title:"Generate CSV",children:(0,mi.jsx)(eo,{className:"h-4 w-4"})}),(0,mi.jsx)("button",{onClick:()=>(async e=>{try{const t=await fetch("/api/stock/manual-stocktakes/".concat(e),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(t.ok){const e=await t.json();ue(e.data)}}catch(t){console.error("Failed to load stocktake:",t),Bt.error("Failed to load stocktake")}})(e.id),className:"px-3 py-2 bg-gray-600 hover:bg-gray-700 text-white text-sm rounded",children:(0,mi.jsx)(bo,{className:"h-4 w-4"})}),(0,mi.jsx)("button",{onClick:()=>(async e=>{try{const t=await fetch("/api/stock/manual-stocktakes/".concat(e),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(t.ok){const e=(await t.json()).data;Z(e.month),K(e.items);const a={};e.items.forEach(e=>{(e.confirmed||e.modified)&&(a[e.id]={confirmed:e.confirmed,modified:e.modified})}),se(a),re(!1),Y(!0)}}catch(t){console.error("Failed to load stocktake for editing:",t),Bt.error("Failed to load stocktake")}})(e.id),className:"px-3 py-2 bg-yellow-600 hover:bg-yellow-700 text-white text-sm rounded",children:(0,mi.jsx)(ho,{className:"h-4 w-4"})}),(0,mi.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this stocktake? This action cannot be undone."))try{const t=await fetch("/api/stock/manual-stocktakes/".concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(t.ok)Bt.success("Stocktake deleted successfully"),ot();else{const e=await t.json();Bt.error(e.detail||"Failed to delete stocktake")}}catch(t){console.error("Failed to delete stocktake:",t),Bt.error("Failed to delete stocktake")}})(e.id),className:"px-3 py-2 bg-red-600 hover:bg-red-700 text-white text-sm rounded",children:(0,mi.jsx)(Ol,{className:"h-4 w-4"})})]})]})},e.id))})}),(0,mi.jsx)("div",{className:"p-6 border-t border-gray-700 flex justify-end",children:(0,mi.jsx)("button",{onClick:()=>re(!1),className:"misty-button misty-button-secondary",children:"Close"})})]})}),de&&(0,mi.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:(0,mi.jsxs)("div",{className:"bg-gray-800 rounded-lg w-full max-w-6xl max-h-[90vh] overflow-hidden flex flex-col",children:[(0,mi.jsxs)("div",{className:"p-6 border-b border-gray-700",children:[(0,mi.jsxs)("h2",{className:"text-2xl font-bold text-white",children:["Stocktake for ",de.month]}),(0,mi.jsxs)("p",{className:"text-gray-400",children:["Created: ",new Date(de.created_at).toLocaleString()]})]}),(0,mi.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:(0,mi.jsxs)("div",{className:"space-y-6",children:[(0,mi.jsxs)("div",{className:"bg-blue-900/20 border border-blue-500/30 rounded-lg p-4",children:[(0,mi.jsx)("h4",{className:"text-blue-300 font-medium mb-2",children:"Summary"}),(0,mi.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("span",{className:"text-gray-400",children:"Total Items:"}),(0,mi.jsx)("span",{className:"text-white ml-2",children:de.summary.total_items})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("span",{className:"text-gray-400",children:"Confirmed:"}),(0,mi.jsx)("span",{className:"text-green-400 ml-2",children:de.summary.confirmed_count})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("span",{className:"text-gray-400",children:"Modified:"}),(0,mi.jsx)("span",{className:"text-yellow-400 ml-2",children:de.summary.modified_count||0})]})]})]}),(0,mi.jsx)("div",{className:"bg-gray-900 rounded-lg overflow-hidden",children:(0,mi.jsxs)("table",{className:"w-full",children:[(0,mi.jsx)("thead",{className:"bg-gray-800",children:(0,mi.jsxs)("tr",{children:[(0,mi.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Item"}),(0,mi.jsx)("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-300 uppercase",children:"QOH"}),(0,mi.jsx)("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-300 uppercase",children:"Cost"}),(0,mi.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-300 uppercase",children:"Status"})]})}),(0,mi.jsx)("tbody",{className:"divide-y divide-gray-700",children:de.items.map((e,t)=>(0,mi.jsxs)("tr",{className:e.confirmed?"bg-green-900 bg-opacity-20":"",children:[(0,mi.jsx)("td",{className:"px-4 py-3 text-sm text-white",children:e.name}),(0,mi.jsx)("td",{className:"px-4 py-3 text-sm text-right text-white",children:e.quantity_on_hand}),(0,mi.jsxs)("td",{className:"px-4 py-3 text-sm text-right text-green-400",children:["$",(e.purchase_cost||0).toFixed(2)]}),(0,mi.jsx)("td",{className:"px-4 py-3 text-sm text-center",children:e.confirmed?(0,mi.jsx)("span",{className:"text-green-400",children:"\u2713 Confirmed"}):(0,mi.jsx)("span",{className:"text-gray-400",children:"Pending"})})]},t))})]})})]})}),(0,mi.jsx)("div",{className:"p-6 border-t border-gray-700 flex justify-end",children:(0,mi.jsx)("button",{onClick:()=>ue(null),className:"misty-button misty-button-secondary",children:"Close"})})]})})]})})},df=["title","titleId"];function uf(e,t){let{title:a,titleId:s}=e,r=l(e,df);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},r),a?n.createElement("title",{id:s},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 0 1 3.75 9.375v-4.5ZM3.75 14.625c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5a1.125 1.125 0 0 1-1.125-1.125v-4.5ZM13.5 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 0 1 13.5 9.375v-4.5Z"}),n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 6.75h.75v.75h-.75v-.75ZM6.75 16.5h.75v.75h-.75v-.75ZM16.5 6.75h.75v.75h-.75v-.75ZM13.5 13.5h.75v.75h-.75v-.75ZM13.5 19.5h.75v.75h-.75v-.75ZM19.5 13.5h.75v.75h-.75v-.75ZM19.5 19.5h.75v.75h-.75v-.75ZM16.5 16.5h.75v.75h-.75v-.75Z"}))}const mf=n.forwardRef(uf),pf=()=>{const e=ge(),[t,a]=(0,n.useState)([]),[s,r]=(0,n.useState)(null),[i,l]=(0,n.useState)(!1),[o,c]=(0,n.useState)(!1),[d,u]=(0,n.useState)(null),[p,h]=(0,n.useState)(!0),[x,f]=(0,n.useState)({template_name:"",width_mm:100,height_mm:150,fields:[],shapes:[],logo:null,include_qr_code:!1,qr_code_x:70,qr_code_y:10,qr_code_size:30}),[g,y]=(0,n.useState)(null),[b,v]=(0,n.useState)({x:0,y:0}),j=[{value:"customer",label:"Customer Name"},{value:"order_number",label:"Order Number"},{value:"due_date",label:"Due Date"},{value:"product_item",label:"Product Item"},{value:"product_details",label:"Product Details"},{value:"product_quantity",label:"Product Quantity"},{value:"carton_qty",label:"Carton Qty"}];(0,n.useEffect)(()=>{w()},[]);const w=async()=>{try{h(!0);const e=await Zr();a(e.data.data||[])}catch(e){console.error("Error loading templates:",e),Bt.error("Failed to load label templates")}finally{h(!1)}},_=e=>{const t={id:"shape-".concat(Date.now()),shape_type:e,x_position:10,y_position:10,width:"line"===e?50:30,height:"line"===e?2:30,border_width:1,border_color:"#000000",fill_color:null};f(e=>m(m({},e),{},{shapes:[...e.shapes,t]}))},N=(e,t,a)=>{f(s=>m(m({},s),{},{shapes:s.shapes.map((s,n)=>n===e?m(m({},s),{},{[t]:a}):s)}))},k=(e,t,a)=>{f(s=>m(m({},s),{},{fields:s.fields.map((s,n)=>n===e?m(m({},s),{},{[t]:a}):s)}))},S=e=>{f("portrait"===e?e=>m(m({},e),{},{width_mm:100,height_mm:150}):e=>m(m({},e),{},{width_mm:150,height_mm:100}))},C=()=>x.height_mm>x.width_mm?"portrait":"landscape",E=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;try{window.print(),Bt.success("Printing ".concat(t," label(s)..."))}catch(a){console.error("Error printing:",a),Bt.error("Failed to print labels")}},D=(e,t,a,s,n)=>{const r=e.target.getBoundingClientRect(),i=e.clientX-r.left,l=e.clientY-r.top;y({type:t,id:a}),v({x:i,y:l})};return(0,mi.jsxs)("div",{className:"p-6",children:[(0,mi.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("h1",{className:"text-2xl font-bold text-white",children:"Label Designer"}),(0,mi.jsx)("p",{className:"text-gray-400 mt-1",children:"Create and manage carton label templates"})]}),(0,mi.jsxs)("div",{className:"flex space-x-2",children:[i&&(0,mi.jsxs)("button",{onClick:()=>l(!1),className:"misty-button misty-button-secondary flex items-center",children:[(0,mi.jsx)(nl,{className:"h-5 w-5 mr-2"}),"Return to Templates"]}),!i&&(0,mi.jsxs)(mi.Fragment,{children:[(0,mi.jsxs)("button",{onClick:()=>e("/"),className:"misty-button misty-button-secondary flex items-center",children:[(0,mi.jsx)(bi,{className:"h-5 w-5 mr-2"}),"Return to Dashboard"]}),(0,mi.jsxs)("button",{onClick:()=>{f({template_name:"New Template",width_mm:100,height_mm:150,fields:[],shapes:[],logo:null,include_qr_code:!1,qr_code_x:70,qr_code_y:10,qr_code_size:30}),r(null),l(!0)},className:"misty-button misty-button-primary flex items-center",children:[(0,mi.jsx)(Cl,{className:"h-5 w-5 mr-2"}),"Create New Template"]})]})]})]}),!i&&(0,mi.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:p?(0,mi.jsx)("div",{className:"col-span-3 text-center py-12",children:(0,mi.jsx)("p",{className:"text-gray-400",children:"Loading templates..."})}):0===t.length?(0,mi.jsx)("div",{className:"col-span-3 text-center py-12",children:(0,mi.jsx)("p",{className:"text-gray-400",children:"No templates found. Create your first template!"})}):t.map(e=>{var t;return(0,mi.jsxs)("div",{className:"bg-gray-800 border border-gray-700 rounded-lg p-4 hover:border-yellow-600 transition-colors",children:[(0,mi.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,mi.jsx)("h3",{className:"text-lg font-semibold text-white",children:e.template_name}),(0,mi.jsxs)("div",{className:"flex space-x-2",children:[(0,mi.jsx)("button",{onClick:()=>(e=>{f({template_name:e.template_name,width_mm:e.width_mm,height_mm:e.height_mm,fields:e.fields||[],shapes:e.shapes||[],logo:e.logo||null,include_qr_code:e.include_qr_code||!1,qr_code_x:e.qr_code_x||70,qr_code_y:e.qr_code_y||10,qr_code_size:e.qr_code_size||30}),r(e),l(!0)})(e),className:"text-blue-400 hover:text-blue-300",title:"Edit",children:(0,mi.jsx)(ho,{className:"h-5 w-5"})}),(0,mi.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this template?"))try{await ei(e),Bt.success("Template deleted successfully"),w()}catch(t){console.error("Error deleting template:",t),Bt.error("Failed to delete template")}})(e.id),className:"text-red-400 hover:text-red-300",title:"Delete",children:(0,mi.jsx)(Ol,{className:"h-5 w-5"})})]})]}),(0,mi.jsxs)("div",{className:"text-sm text-gray-400 space-y-1 mb-4",children:[(0,mi.jsxs)("p",{children:["Size: ",e.width_mm," \xd7 ",e.height_mm," mm"]}),(0,mi.jsxs)("p",{children:["Fields: ",(null===(t=e.fields)||void 0===t?void 0:t.length)||0]}),e.include_qr_code&&(0,mi.jsxs)("p",{className:"text-blue-400 flex items-center",children:[(0,mi.jsx)(mf,{className:"h-4 w-4 mr-1"}),"Includes QR Code"]})]}),(0,mi.jsxs)("div",{className:"flex space-x-2",children:[(0,mi.jsxs)("button",{onClick:()=>(e=>{u({template:e,data:{customer:"Label Makers Pty Ltd",order_number:"ORD-2025-001",due_date:"15/01/2025",product_item:"Paper Core 76mm ID x 3mmT",product_details:"Spiral wound, 1000mm length",product_quantity:"500 units",carton_qty:"10 cartons"}}),c(!0)})(e),className:"flex-1 px-3 py-2 bg-gray-700 text-white rounded hover:bg-gray-600 text-sm flex items-center justify-center",children:[(0,mi.jsx)(bo,{className:"h-4 w-4 mr-1"}),"Preview"]}),(0,mi.jsxs)("button",{onClick:()=>E(e,1),className:"flex-1 px-3 py-2 bg-yellow-600 text-white rounded hover:bg-yellow-700 text-sm flex items-center justify-center",children:[(0,mi.jsx)(Gl,{className:"h-4 w-4 mr-1"}),"Print"]})]})]},e.id)})}),i&&(0,mi.jsxs)("div",{className:"bg-gray-800 border border-gray-700 rounded-lg p-6",children:[(0,mi.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,mi.jsx)("h2",{className:"text-xl font-semibold text-white",children:s?"Edit Template":"Create New Template"}),(0,mi.jsxs)("div",{className:"flex space-x-2",children:[(0,mi.jsx)("button",{onClick:()=>l(!1),className:"misty-button misty-button-secondary",children:"Cancel"}),(0,mi.jsx)("button",{onClick:async()=>{try{if(!x.template_name.trim())return void Bt.error("Please enter a template name");s?(await Kr(s.id,x),Bt.success("Template updated successfully")):(await Xr(x),Bt.success("Template created successfully")),l(!1),w()}catch(e){console.error("Error saving template:",e),Bt.error("Failed to save template")}},className:"misty-button misty-button-primary",children:"Save Template"})]})]}),(0,mi.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,mi.jsxs)("div",{className:"space-y-6",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Template Name"}),(0,mi.jsx)("input",{type:"text",value:x.template_name,onChange:e=>f(t=>m(m({},t),{},{template_name:e.target.value})),className:"misty-input w-full",placeholder:"Enter template name"})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Label Orientation"}),(0,mi.jsxs)("div",{className:"flex space-x-4",children:[(0,mi.jsx)("button",{type:"button",onClick:()=>S("portrait"),className:"flex-1 px-4 py-3 rounded border-2 transition-all ".concat("portrait"===C()?"border-yellow-600 bg-yellow-600/20 text-white":"border-gray-600 bg-gray-700 text-gray-300 hover:border-gray-500"),children:(0,mi.jsxs)("div",{className:"flex flex-col items-center",children:[(0,mi.jsx)("div",{className:"w-12 h-16 border-2 border-current mb-2 rounded"}),(0,mi.jsx)("span",{className:"text-sm font-medium",children:"Portrait"}),(0,mi.jsx)("span",{className:"text-xs text-gray-400",children:"100 \xd7 150 mm"})]})}),(0,mi.jsx)("button",{type:"button",onClick:()=>S("landscape"),className:"flex-1 px-4 py-3 rounded border-2 transition-all ".concat("landscape"===C()?"border-yellow-600 bg-yellow-600/20 text-white":"border-gray-600 bg-gray-700 text-gray-300 hover:border-gray-500"),children:(0,mi.jsxs)("div",{className:"flex flex-col items-center",children:[(0,mi.jsx)("div",{className:"w-16 h-12 border-2 border-current mb-2 rounded"}),(0,mi.jsx)("span",{className:"text-sm font-medium",children:"Landscape"}),(0,mi.jsx)("span",{className:"text-xs text-gray-400",children:"150 \xd7 100 mm"})]})})]})]}),(0,mi.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Width (mm)"}),(0,mi.jsx)("input",{type:"number",value:x.width_mm,onChange:e=>f(t=>m(m({},t),{},{width_mm:parseFloat(e.target.value)})),className:"misty-input w-full",min:"10"})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Height (mm)"}),(0,mi.jsx)("input",{type:"number",value:x.height_mm,onChange:e=>f(t=>m(m({},t),{},{height_mm:parseFloat(e.target.value)})),className:"misty-input w-full",min:"10"})]})]}),(0,mi.jsxs)("div",{className:"border border-gray-700 rounded p-4",children:[(0,mi.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300",children:"Company Logo"}),x.logo&&(0,mi.jsx)("button",{onClick:()=>{f(e=>m(m({},e),{},{logo:null})),Bt.success("Logo removed")},className:"text-xs px-2 py-1 bg-red-600 text-white rounded hover:bg-red-700",children:"Remove Logo"})]}),x.logo?(0,mi.jsxs)("div",{className:"space-y-2",children:[(0,mi.jsxs)("div",{className:"text-xs text-gray-300 bg-gray-700 p-2 rounded",children:[(0,mi.jsx)("p",{children:"\u2713 Logo uploaded"}),(0,mi.jsx)("p",{className:"text-gray-400 italic mt-1",children:"Drag logo on preview to reposition"})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-xs font-medium text-gray-300 mb-1",children:"Logo Size (mm)"}),(0,mi.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-xs text-gray-400 mb-1",children:"Width"}),(0,mi.jsx)("input",{type:"number",value:x.logo.width.toFixed(1),onChange:e=>{const t=parseFloat(e.target.value)||5;f(e=>m(m({},e),{},{logo:{id:e.logo.id,x_position:e.logo.x_position,y_position:e.logo.y_position,width:t,height:e.logo.height,image_data:e.logo.image_data,image_format:e.logo.image_format}}))},className:"misty-input w-full text-xs py-1",step:"0.5",min:"5"})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-xs text-gray-400 mb-1",children:"Height"}),(0,mi.jsx)("input",{type:"number",value:x.logo.height.toFixed(1),onChange:e=>{const t=parseFloat(e.target.value)||5;f(e=>m(m({},e),{},{logo:{id:e.logo.id,x_position:e.logo.x_position,y_position:e.logo.y_position,width:e.logo.width,height:t,image_data:e.logo.image_data,image_format:e.logo.image_format}}))},className:"misty-input w-full text-xs py-1",step:"0.5",min:"5"})]})]}),(0,mi.jsx)("button",{onClick:()=>{const e=new Image;e.onload=()=>{const t=e.width/e.height;let a=.3*x.width_mm,s=a/t;f(e=>m(m({},e),{},{logo:{id:e.logo.id,x_position:e.logo.x_position,y_position:e.logo.y_position,width:a,height:s,image_data:e.logo.image_data,image_format:e.logo.image_format}})),Bt.success("Logo size reset to proportional")},e.src=x.logo.image_data},className:"mt-2 text-xs px-2 py-1 bg-gray-600 text-white rounded hover:bg-gray-500 w-full",children:"Reset Proportions"})]})]}):(0,mi.jsxs)("div",{children:[(0,mi.jsxs)("p",{className:"text-xs text-gray-400 mb-2",children:[(0,mi.jsx)("strong",{children:"Accepted formats:"})," PNG, JPEG, JPG",(0,mi.jsx)("br",{}),(0,mi.jsx)("strong",{children:"Maximum size:"})," 2MB",(0,mi.jsx)("br",{}),(0,mi.jsx)("strong",{children:"Recommended:"})," Transparent PNG for best results"]}),(0,mi.jsxs)("label",{className:"block",children:[(0,mi.jsx)("input",{type:"file",accept:"image/png,image/jpeg,image/jpg",onChange:e=>{const t=e.target.files[0];if(!t)return;if(!["image/png","image/jpeg","image/jpg"].includes(t.type))return void Bt.error("Only PNG and JPEG formats are supported");if(t.size>2097152)return void Bt.error("Image size must be less than 2MB");const a=new FileReader;a.onload=e=>{const a=new Image;a.onload=()=>{const s=.3*x.width_mm,n=.3*x.height_mm;let r=s,i=a.height/a.width*r;i>n&&(i=n,r=a.width/a.height*i);const l={id:"logo-".concat(Date.now()),x_position:5,y_position:5,width:r,height:i,image_data:e.target.result,image_format:t.type.split("/")[1]};f(e=>m(m({},e),{},{logo:l})),Bt.success("Logo uploaded successfully")},a.src=e.target.result},a.readAsDataURL(t)},className:"hidden"}),(0,mi.jsx)("div",{className:"cursor-pointer px-4 py-3 bg-blue-600 text-white rounded hover:bg-blue-700 text-center text-sm",children:"Choose Logo File"})]})]})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300",children:"Shapes"}),(0,mi.jsxs)("div",{className:"flex space-x-1",children:[(0,mi.jsx)("button",{onClick:()=>_("rectangle"),className:"text-xs px-2 py-1 bg-blue-600 text-white rounded hover:bg-blue-700",title:"Add Rectangle",children:"\u25a1"}),(0,mi.jsx)("button",{onClick:()=>_("circle"),className:"text-xs px-2 py-1 bg-blue-600 text-white rounded hover:bg-blue-700",title:"Add Circle",children:"\u25cb"}),(0,mi.jsx)("button",{onClick:()=>_("line"),className:"text-xs px-2 py-1 bg-blue-600 text-white rounded hover:bg-blue-700",title:"Add Line",children:"\u2015"})]})]}),(0,mi.jsxs)("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:[x.shapes.map((e,t)=>(0,mi.jsxs)("div",{className:"border border-gray-700 rounded p-2",children:[(0,mi.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,mi.jsx)("span",{className:"text-xs font-medium text-white capitalize",children:e.shape_type}),(0,mi.jsx)("button",{onClick:()=>(e=>{f(t=>m(m({},t),{},{shapes:t.shapes.filter((t,a)=>a!==e)}))})(t),className:"text-red-400 hover:text-red-300",children:(0,mi.jsx)(Ol,{className:"h-3 w-3"})})]}),(0,mi.jsxs)("div",{className:"grid grid-cols-2 gap-1 text-xs",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-xs text-gray-400",children:"Width (mm)"}),(0,mi.jsx)("input",{type:"number",value:e.width,onChange:e=>N(t,"width",parseFloat(e.target.value)),className:"misty-input w-full text-xs py-1",step:"0.5"})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-xs text-gray-400",children:"Height (mm)"}),(0,mi.jsx)("input",{type:"number",value:e.height,onChange:e=>N(t,"height",parseFloat(e.target.value)),className:"misty-input w-full text-xs py-1",step:"0.5"})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-xs text-gray-400",children:"Border"}),(0,mi.jsx)("input",{type:"number",value:e.border_width,onChange:e=>N(t,"border_width",parseInt(e.target.value)),className:"misty-input w-full text-xs py-1",min:"0"})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-xs text-gray-400",children:"Border Color"}),(0,mi.jsx)("input",{type:"color",value:e.border_color,onChange:e=>N(t,"border_color",e.target.value),className:"w-full h-7 rounded cursor-pointer"})]})]})]},e.id)),0===x.shapes.length&&(0,mi.jsx)("p",{className:"text-center text-gray-500 py-3 text-xs",children:"No shapes added. Click icons above to add shapes."})]})]}),(0,mi.jsxs)("div",{className:"border border-gray-700 rounded p-4",children:[(0,mi.jsxs)("div",{className:"flex items-center mb-3",children:[(0,mi.jsx)("input",{type:"checkbox",id:"include_qr",checked:x.include_qr_code,onChange:e=>f(t=>m(m({},t),{},{include_qr_code:e.target.checked})),className:"w-4 h-4 text-yellow-600 bg-gray-700 border-gray-600 rounded focus:ring-yellow-500"}),(0,mi.jsx)("label",{htmlFor:"include_qr",className:"ml-2 text-sm font-medium text-gray-300",children:"Include QR Code"})]}),x.include_qr_code&&(0,mi.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-xs text-gray-400 mb-1",children:"X Position"}),(0,mi.jsx)("input",{type:"number",value:x.qr_code_x,onChange:e=>f(t=>m(m({},t),{},{qr_code_x:parseFloat(e.target.value)})),className:"misty-input w-full text-sm"})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-xs text-gray-400 mb-1",children:"Y Position"}),(0,mi.jsx)("input",{type:"number",value:x.qr_code_y,onChange:e=>f(t=>m(m({},t),{},{qr_code_y:parseFloat(e.target.value)})),className:"misty-input w-full text-sm"})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-xs text-gray-400 mb-1",children:"Size"}),(0,mi.jsx)("input",{type:"number",value:x.qr_code_size,onChange:e=>f(t=>m(m({},t),{},{qr_code_size:parseFloat(e.target.value)})),className:"misty-input w-full text-sm"})]})]})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300",children:"Label Fields"}),(0,mi.jsxs)("button",{onClick:()=>{const e={id:"field-".concat(Date.now()),field_name:j[0].value,label:j[0].label,x_position:10,y_position:10,font_size:12,font_weight:"normal",text_align:"left",max_width:null};f(t=>m(m({},t),{},{fields:[...t.fields,e]}))},className:"text-sm px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 flex items-center",children:[(0,mi.jsx)(Cl,{className:"h-4 w-4 mr-1"}),"Add Field"]})]}),(0,mi.jsxs)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:[x.fields.map((e,t)=>(0,mi.jsxs)("div",{className:"border border-gray-700 rounded p-3",children:[(0,mi.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,mi.jsxs)("span",{className:"text-sm font-medium text-white",children:["Field ",t+1]}),(0,mi.jsx)("button",{onClick:()=>(e=>{f(t=>m(m({},t),{},{fields:t.fields.filter((t,a)=>a!==e)}))})(t),className:"text-red-400 hover:text-red-300",children:(0,mi.jsx)(Ol,{className:"h-4 w-4"})})]}),(0,mi.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,mi.jsxs)("div",{className:"col-span-2",children:[(0,mi.jsx)("label",{className:"block text-xs text-gray-400 mb-1",children:"Field Type"}),(0,mi.jsx)("select",{value:e.field_name,onChange:e=>{const a=j.find(t=>t.value===e.target.value);k(t,"field_name",e.target.value),k(t,"label",a.label)},className:"misty-select w-full",children:j.map(e=>(0,mi.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-xs text-gray-400 mb-1",children:"X (mm)"}),(0,mi.jsx)("input",{type:"number",value:e.x_position,onChange:e=>k(t,"x_position",parseFloat(e.target.value)),className:"misty-input w-full",step:"0.1"})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-xs text-gray-400 mb-1",children:"Y (mm)"}),(0,mi.jsx)("input",{type:"number",value:e.y_position,onChange:e=>k(t,"y_position",parseFloat(e.target.value)),className:"misty-input w-full",step:"0.1"})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-xs text-gray-400 mb-1",children:"Font Size"}),(0,mi.jsx)("input",{type:"number",value:e.font_size,onChange:e=>k(t,"font_size",parseInt(e.target.value)),className:"misty-input w-full",min:"8",max:"72"})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-xs text-gray-400 mb-1",children:"Weight"}),(0,mi.jsxs)("select",{value:e.font_weight,onChange:e=>k(t,"font_weight",e.target.value),className:"misty-select w-full",children:[(0,mi.jsx)("option",{value:"normal",children:"Normal"}),(0,mi.jsx)("option",{value:"bold",children:"Bold"})]})]})]})]},t)),0===x.fields.length&&(0,mi.jsx)("p",{className:"text-center text-gray-500 py-4 text-sm",children:'No fields added yet. Click "Add Field" to start designing your label.'})]})]})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Live Preview"}),(0,mi.jsxs)("div",{className:"bg-white rounded-lg p-4 border-2 border-gray-600",children:[(0,mi.jsxs)("div",{className:"relative bg-white border-2 border-dashed border-gray-400 mx-auto overflow-hidden",style:{width:"".concat(3.779527559*x.width_mm,"px"),height:"".concat(3.779527559*x.height_mm,"px"),maxWidth:"100%",aspectRatio:"".concat(x.width_mm," / ").concat(x.height_mm)},onDragOver:e=>{e.preventDefault()},onDrop:e=>{if(e.preventDefault(),!g)return;const t=e.currentTarget.getBoundingClientRect(),a=(e.clientX-t.left-b.x)/3.779527559,s=(e.clientY-t.top-b.y)/3.779527559;"field"===g.type?f(e=>m(m({},e),{},{fields:e.fields.map(e=>e.id===g.id?m(m({},e),{},{x_position:Math.max(0,a),y_position:Math.max(0,s)}):e)})):"shape"===g.type?f(e=>m(m({},e),{},{shapes:e.shapes.map(e=>e.id===g.id?m(m({},e),{},{x_position:Math.max(0,a),y_position:Math.max(0,s)}):e)})):"logo"===g.type&&x.logo?f(e=>m(m({},e),{},{logo:m(m({},e.logo),{},{x_position:Math.max(0,a),y_position:Math.max(0,s)})})):"qr_code"===g.type&&f(e=>m(m({},e),{},{qr_code_x:Math.max(0,a),qr_code_y:Math.max(0,s)})),y(null)},children:[x.shapes.map(e=>{const t="line"===e.shape_type;return(0,mi.jsx)("div",{draggable:!0,onDragStart:t=>D(t,"shape",e.id,e.x_position,e.y_position),className:"absolute cursor-move hover:opacity-80",style:{left:"".concat(3.779527559*e.x_position,"px"),top:"".concat(3.779527559*e.y_position,"px"),width:"".concat(3.779527559*e.width,"px"),height:"".concat(3.779527559*e.height,"px"),border:t?"none":"".concat(e.border_width,"px solid ").concat(e.border_color),backgroundColor:t?e.border_color:e.fill_color||"transparent",borderRadius:"circle"===e.shape_type?"50%":"0"},title:"Drag to reposition"},e.id)}),x.logo&&(0,mi.jsx)("img",{draggable:!0,onDragStart:e=>D(e,"logo",x.logo.id,x.logo.x_position,x.logo.y_position),src:x.logo.image_data,alt:"Company Logo",className:"absolute cursor-move hover:opacity-80",style:{left:"".concat(3.779527559*x.logo.x_position,"px"),top:"".concat(3.779527559*x.logo.y_position,"px"),width:"".concat(3.779527559*x.logo.width,"px"),height:"".concat(3.779527559*x.logo.height,"px"),objectFit:"contain"},title:"Drag to reposition"}),x.fields.map(e=>(0,mi.jsxs)("div",{draggable:!0,onDragStart:t=>D(t,"field",e.id,e.x_position,e.y_position),className:"absolute text-black cursor-move hover:bg-blue-50",style:{left:"".concat(3.779527559*e.x_position,"px"),top:"".concat(3.779527559*e.y_position,"px"),fontSize:"".concat(e.font_size,"pt"),fontWeight:e.font_weight,textAlign:e.text_align,maxWidth:e.max_width?"".concat(3.779527559*e.max_width,"px"):"none"},title:"Drag to reposition",children:[(0,mi.jsxs)("div",{className:"text-xs text-gray-400",children:[e.label,":"]}),(0,mi.jsx)("div",{className:"font-medium",children:"Sample Data"})]},e.id)),x.include_qr_code&&(0,mi.jsx)("div",{draggable:!0,onDragStart:e=>D(e,"qr_code","qr",x.qr_code_x,x.qr_code_y),className:"absolute bg-white flex items-center justify-center cursor-move hover:opacity-80 p-1",style:{left:"".concat(3.779527559*x.qr_code_x,"px"),top:"".concat(3.779527559*x.qr_code_y,"px"),width:"".concat(3.779527559*x.qr_code_size,"px"),height:"".concat(3.779527559*x.qr_code_size,"px")},title:"Drag to reposition",children:(0,mi.jsx)(Uo,{value:"SAMPLE-ORDER-123",size:3.779527559*x.qr_code_size-8,level:"M",includeMargin:!1})}),(0,mi.jsxs)("div",{className:"absolute inset-0 pointer-events-none",children:[[...Array(Math.floor(x.height_mm/10))].map((e,t)=>(0,mi.jsx)("div",{className:"absolute w-full border-t border-gray-300",style:{top:"".concat(10*(t+1)*3.779527559,"px")}},"h-".concat(t))),[...Array(Math.floor(x.width_mm/10))].map((e,t)=>(0,mi.jsx)("div",{className:"absolute h-full border-l border-gray-300",style:{left:"".concat(10*(t+1)*3.779527559,"px")}},"v-".concat(t)))]})]}),(0,mi.jsxs)("p",{className:"text-xs text-gray-500 mt-2 text-center",children:[(0,mi.jsx)("strong",{children:"Tip:"})," Drag elements on the canvas to reposition them | Grid lines = 10mm intervals"]})]})]})]})]}),o&&d&&(0,mi.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,mi.jsxs)("div",{className:"bg-gray-800 rounded-lg max-w-2xl w-full p-6",children:[(0,mi.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,mi.jsx)("h3",{className:"text-xl font-semibold text-white",children:"Label Preview"}),(0,mi.jsx)("button",{onClick:()=>c(!1),className:"text-gray-400 hover:text-white",children:(0,mi.jsx)(Ol,{className:"h-6 w-6"})})]}),(0,mi.jsx)("div",{className:"bg-white p-6 rounded",children:(0,mi.jsx)("p",{className:"text-gray-800",children:"Preview with actual data will be shown here"})}),(0,mi.jsxs)("div",{className:"mt-4 flex justify-end space-x-2",children:[(0,mi.jsx)("button",{onClick:()=>c(!1),className:"misty-button misty-button-secondary",children:"Close"}),(0,mi.jsxs)("button",{onClick:()=>{E(d.template,1),c(!1)},className:"misty-button misty-button-primary",children:[(0,mi.jsx)(Gl,{className:"h-5 w-5 mr-2"}),"Print"]})]})]})})]})},hf=e=>vn.get("/payroll/employees/".concat(e)),xf=()=>vn.get("/payroll/employees/me/profile"),ff=e=>vn.get("/payroll/timesheets/current-week/".concat(e)),gf=e=>vn.get("/payroll/timesheets/employee/".concat(e)),yf=(e,t)=>vn.put("/payroll/timesheets/".concat(e),t),bf=e=>vn.post("/payroll/timesheets/".concat(e,"/submit")),vf=e=>vn.post("/payroll/timesheets/".concat(e,"/approve")),jf=()=>vn.get("/payroll/timesheets/pending"),wf={leaveTypeDisplayNames:{annual_leave:"Annual Leave",sick_leave:"Sick Leave",personal_leave:"Personal Leave",maternity_leave:"Maternity Leave",paternity_leave:"Paternity Leave",training_leave:"Training Leave",conference_leave:"Conference Leave",compassionate_leave:"Compassionate Leave",unpaid_leave:"Unpaid Leave"},employmentTypeDisplayNames:{full_time:"Full Time",part_time:"Part Time",casual:"Casual",contract:"Contract"},timesheetStatusDisplayNames:{draft:"Draft",submitted:"Submitted",approved:"Approved",rejected:"Rejected",paid:"Paid"},leaveStatusDisplayNames:{pending:"Pending",approved:"Approved",rejected:"Rejected",cancelled:"Cancelled"},calculateLeaveHours:function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:7.6;const s=new Date(e),n=new Date(t);let r=0;for(let i=new Date(s);i<=n;i.setDate(i.getDate()+1))0!==i.getDay()&&6!==i.getDay()&&(r+=a);return r},formatHours:e=>{const t=Math.floor(e),a=Math.round(60*(e-t));return 0===a?"".concat(t,"h"):"".concat(t,"h ").concat(a,"m")},calculatePay:function(e,t,a){return e*a+t*a*(arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5)},getCurrentWeekDates:()=>{const e=new Date,t=new Date(e);t.setDate(e.getDate()-e.getDay()+1);const a=new Date(t);return a.setDate(t.getDate()+6),{monday:t,sunday:a}},isTimesheetReminderDay:()=>4===(new Date).getDay(),validateTFN:e=>{if(!e)return!0;const t=e.replace(/\s/g,"");if(!/^\d{8,9}$/.test(t))return!1;const a=[1,4,3,7,5,8,6,9,10],s=t.split("").map(Number);let n=0;for(let i=0;i<s.length-1;i++)n+=s[i]*a[i];const r=n%11;return(r<2?r:11-r)===s[s.length-1]},validateBSB:e=>{if(!e)return!1;const t=e.replace(/[\s-]/g,"");return/^\d{6}$/.test(t)},formatBSB:e=>{if(!e)return"";const t=e.replace(/[\s-]/g,"");return 6===t.length?"".concat(t.slice(0,3),"-").concat(t.slice(3)):e},calculateSuperannuation:function(e){return e*(arguments.length>1&&void 0!==arguments[1]?arguments[1]:.11)},calculateLeaveAccrual:function(e,t){return t/52*(e/(arguments.length>2&&void 0!==arguments[2]?arguments[2]:38))}},_f={hours:e=>e<0?"Hours cannot be negative":e>24?"Hours cannot exceed 24 per day":null,weeklyHours:e=>e>80?"Weekly hours seem unusually high (over 80 hours)":null},Nf=e=>{var t,a,s,r;let{employeeId:i,onClose:l,isManager:o=!1}=e;const{user:c}=hi(),[d,u]=(0,n.useState)(!0),[m,p]=(0,n.useState)(null),[h,x]=(0,n.useState)(null),[f,g]=(0,n.useState)(i),[y,b]=(0,n.useState)([]),[v,j]=(0,n.useState)({regular:0,overtime:0,leave:{}}),[w,_]=(0,n.useState)({}),[N,k]=(0,n.useState)(!1),[S,C]=(0,n.useState)(!1),[E,D]=(0,n.useState)(null),[P,A]=(0,n.useState)(""),[T,L]=(0,n.useState)(!1),[R,F]=(0,n.useState)([]),[O,M]=(0,n.useState)(""),[I,q]=(0,n.useState)(null),[B,z]=(0,n.useState)(!1),[U,W]=(0,n.useState)([]),[H,G]=(0,n.useState)(!1);(0,n.useEffect)(()=>{V(),$()},[i]),(0,n.useEffect)(()=>{Y()},[y]);const V=async()=>{try{u(!0);let t=i;if(!t)try{t=(await xf()).data.id,console.log("Got employee ID from profile:",t)}catch(e){return console.error("Failed to load employee profile:",e),Bt.error("Unable to load your employee profile"),void u(!1)}if(console.log("Loading timesheet for employeeId:",t),!t)return Bt.error("Unable to determine employee ID"),void u(!1);g(t);const a=(await ff(t)).data;if(p(a),b(a.entries||Q()),o)try{const e=await hf(t);x(e.data)}catch(e){console.warn("Could not load employee details:",e)}}catch(e){console.error("Failed to load timesheet:",e),Bt.error("Failed to load timesheet"),b(Q())}finally{u(!1)}},$=async()=>{try{const e=await fetch("".concat("https://manufactor-2.preview.emergentagent.com","/api/users"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"}});if(e.ok){const t=await e.json(),a=(t.data||t||[]).filter(e=>e&&("manager"===e.role||"admin"===e.role));F(a),console.log("Loaded managers:",a)}else console.error("Failed to fetch users:",e.status,e.statusText)}catch(e){console.error("Failed to load managers:",e)}},Q=()=>{const{monday:e}=wf.getCurrentWeekDates(),t=[];for(let a=0;a<7;a++){const s=new Date(e);s.setDate(e.getDate()+a),t.push({date:s.toISOString().split("T")[0],regular_hours:0,overtime_hours:0,leave_hours:{},notes:""})}return t},Y=()=>{let e=0,t=0,a={};y.forEach(s=>{e+=parseFloat(s.regular_hours||0),t+=parseFloat(s.overtime_hours||0),Object.entries(s.leave_hours||{}).forEach(e=>{let[t,s]=e;a[t]||(a[t]=0),a[t]+=parseFloat(s||0)})}),j({regular:e,overtime:t,leave:a})},J=(e,t,a)=>{const s=[...y];if(t.startsWith("leave_")){const n=t.replace("leave_","");s[e].leave_hours||(s[e].leave_hours={}),s[e].leave_hours[n]=a}else s[e][t]=a;b(s)},Z=()=>{const e={};let t=!1;y.forEach((a,s)=>{const n=(a.regular_hours||0)+(a.overtime_hours||0),r=_f.hours(a.regular_hours||0);r&&(e["".concat(s,"_regular_hours")]=r,t=!0);const i=_f.hours(a.overtime_hours||0);i&&(e["".concat(s,"_overtime_hours")]=i,t=!0),n>16&&(e["".concat(s,"_daily_total")]="Daily hours exceed 16 hours",t=!0),Object.entries(a.leave_hours||{}).forEach(a=>{let[n,r]=a;const i=_f.hours(r);i&&(e["".concat(s,"_leave_").concat(n)]=i,t=!0)})});const a=_f.weeklyHours(v.regular+v.overtime);return a&&(e.weekly_total=a,t=!0),_(e),!t},X=async()=>{if(Z())try{k(!0);const e={employee_id:f,week_starting:(null===m||void 0===m?void 0:m.week_starting)||wf.getCurrentWeekDates().monday.toISOString().split("T")[0],entries:y};null!==m&&void 0!==m&&m.id?(await yf(m.id,e),Bt.success("Timesheet saved successfully")):Bt.success("Timesheet created successfully"),await V()}catch(e){console.error("Failed to save timesheet:",e),Bt.error("Failed to save timesheet")}finally{k(!1)}else Bt.error("Please fix the errors before saving")},K=e=>new Date(e).toLocaleDateString("en-AU",{weekday:"short"}),ee=e=>new Date(e).toLocaleDateString("en-AU",{day:"2-digit",month:"2-digit"}),te=()=>!!o||("draft"===(null===m||void 0===m?void 0:m.status)||!(null!==m&&void 0!==m&&m.status));return d?(0,mi.jsx)("div",{className:"flex items-center justify-center p-8",children:(0,mi.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-yellow-400"})}):(0,mi.jsxs)("div",{className:"max-w-6xl mx-auto","data-testid":"timesheet-entry",children:[(0,mi.jsx)("div",{className:"mb-6",children:(0,mi.jsxs)("div",{className:"flex items-center justify-between",children:[(0,mi.jsxs)("div",{className:"flex-1",children:[(0,mi.jsx)("h2",{className:"text-2xl font-bold text-white mb-1",children:o&&h?"".concat(h.first_name," ").concat(h.last_name,"'s Timesheet"):"My Timesheet"}),(0,mi.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-400",children:[(0,mi.jsxs)("span",{className:"flex items-center",children:[(0,mi.jsx)(vl,{className:"h-4 w-4 mr-1"}),"Week ",(null===m||void 0===m?void 0:m.week_starting)&&ee(m.week_starting)," - ",(null===m||void 0===m?void 0:m.week_ending)&&ee(m.week_ending)]}),(null===m||void 0===m?void 0:m.status)&&(0,mi.jsxs)("span",{className:"flex items-center font-medium ".concat((e=>{switch(e){case"draft":default:return"text-gray-400";case"submitted":return"text-orange-400";case"approved":return"text-green-400";case"rejected":return"text-red-400";case"paid":return"text-blue-400"}})(m.status)),children:["Status: ",wf.timesheetStatusDisplayNames[m.status]||m.status]})]})]}),(0,mi.jsxs)("div",{className:"ml-6",children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Select Week"}),(0,mi.jsx)("select",{value:I||(null===m||void 0===m?void 0:m.week_starting)||"",onChange:e=>{return t=e.target.value,void q(t);var t},className:"misty-select",style:{minWidth:"250px"},children:(()=>{const e=[],t=new Date;for(let a=0;a<8;a++){const s=new Date(t);s.setDate(t.getDate()-(t.getDay()+6)%7-7*a),s.setHours(0,0,0,0);const n=new Date(s);n.setDate(s.getDate()+6);const r=0===a;e.push({value:s.toISOString().split("T")[0],label:"".concat(ee(s.toISOString())," - ").concat(ee(n.toISOString())," ").concat(r?"(Current Week)":""),startDate:s,endDate:n})}return e})().map(e=>(0,mi.jsx)("option",{value:e.value,children:e.label},e.value))})]})]})}),(0,mi.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,mi.jsxs)("button",{onClick:()=>{(async()=>{try{G(!0);const e=await gf(f);e.data&&e.data.data&&W(e.data.data)}catch(e){console.error("Failed to load previous timesheets:",e),Bt.error("Failed to load previous timesheets")}finally{G(!1)}})(),z(!0)},className:"misty-button misty-button-secondary text-sm",children:[(0,mi.jsx)(_l,{className:"h-4 w-4 mr-1"}),"View Previous Timesheets"]}),(0,mi.jsxs)("div",{className:"flex items-center space-x-3",children:[te()&&(0,mi.jsxs)(mi.Fragment,{children:[(0,mi.jsx)("button",{onClick:X,disabled:N,className:"misty-button misty-button-secondary","data-testid":"save-timesheet",children:"Save Draft"}),"draft"===(null===m||void 0===m?void 0:m.status)&&(0,mi.jsx)("button",{onClick:async()=>{Z()?L(!0):Bt.error("Please fix the errors before submitting")},disabled:N,className:"bg-yellow-500 hover:bg-yellow-600 text-black font-medium px-4 py-2 rounded-lg transition-colors duration-200","data-testid":"submit-timesheet",children:"Submit Timesheet"})]}),o&&"submitted"===(null===m||void 0===m?void 0:m.status)&&(0,mi.jsxs)("button",{onClick:async()=>{if(o&&null!==m&&void 0!==m&&m.id)try{k(!0),await vf(m.id),Bt.success("Timesheet approved and pay calculated"),null===l||void 0===l||l()}catch(e){console.error("Failed to approve timesheet:",e),Bt.error("Failed to approve timesheet")}finally{k(!1)}},disabled:N,className:"misty-button misty-button-primary","data-testid":"approve-timesheet",children:[(0,mi.jsx)(tf,{className:"h-4 w-4 mr-1"}),"Approve & Calculate Pay"]}),(0,mi.jsx)("button",{onClick:l,className:"misty-button misty-button-secondary","data-testid":"close-timesheet",children:"Close"})]})]}),Object.keys(w).length>0&&(0,mi.jsxs)("div",{className:"mb-6 p-4 bg-red-900 border border-red-700 rounded-lg",children:[(0,mi.jsxs)("div",{className:"flex items-center mb-2",children:[(0,mi.jsx)(gl,{className:"h-5 w-5 text-red-400 mr-2"}),(0,mi.jsx)("h3",{className:"font-medium text-red-100",children:"Please fix the following errors:"})]}),(0,mi.jsx)("ul",{className:"text-sm text-red-200 list-disc list-inside",children:Object.values(w).map((e,t)=>(0,mi.jsx)("li",{children:e},t))})]}),(0,mi.jsx)("div",{className:"misty-card overflow-hidden",children:(0,mi.jsx)("div",{className:"overflow-x-auto",children:(0,mi.jsxs)("table",{className:"w-full",children:[(0,mi.jsx)("thead",{className:"bg-gray-700",children:(0,mi.jsxs)("tr",{children:[(0,mi.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Day (Click for Leave)"}),(0,mi.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Regular Hours"}),(0,mi.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Overtime Hours"}),(0,mi.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Leave Hours"}),(0,mi.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Notes"})]})}),(0,mi.jsx)("tbody",{className:"divide-y divide-gray-700",children:y.map((e,t)=>{const a=0===new Date(e.date).getDay()||6===new Date(e.date).getDay();return(0,mi.jsxs)("tr",{className:a?"bg-gray-700/30":"",children:[(0,mi.jsx)("td",{className:"px-4 py-3 ".concat(te()?"cursor-pointer hover:bg-gray-600":""),onClick:()=>{return e=t,void(te()&&(D(e),A(""),C(!0)));var e},children:(0,mi.jsxs)("div",{className:"text-sm",children:[(0,mi.jsx)("div",{className:"font-medium text-white",children:K(e.date)}),(0,mi.jsx)("div",{className:"text-gray-400",children:ee(e.date)}),Object.keys(e.leave_hours||{}).length>0&&(0,mi.jsx)("div",{className:"text-xs text-yellow-400 mt-1",children:Object.entries(e.leave_hours).map(e=>{let[t,a]=e;return a>0&&(0,mi.jsxs)("div",{children:[wf.leaveTypeDisplayNames[t]||t,": ",a,"h"]},t)})})]})}),(0,mi.jsx)("td",{className:"px-4 py-3 text-center",children:(0,mi.jsx)("input",{type:"number",min:"0",max:"24",step:"0.25",value:e.regular_hours||"",onChange:e=>J(t,"regular_hours",e.target.value),disabled:!te(),className:"w-20 text-center misty-input ".concat(w["".concat(t,"_regular_hours")]?"border-red-500":""),"data-testid":"regular-hours-".concat(t)})}),(0,mi.jsx)("td",{className:"px-4 py-3 text-center",children:(0,mi.jsx)("input",{type:"number",min:"0",max:"24",step:"0.25",value:e.overtime_hours||"",onChange:e=>J(t,"overtime_hours",e.target.value),disabled:!te(),className:"w-20 text-center misty-input ".concat(w["".concat(t,"_overtime_hours")]?"border-red-500":""),"data-testid":"overtime-hours-".concat(t)})}),(0,mi.jsx)("td",{className:"px-4 py-3 text-center",children:(0,mi.jsx)("div",{className:"text-sm",children:Object.keys(e.leave_hours||{}).length>0?(0,mi.jsx)("div",{className:"space-y-1",children:Object.entries(e.leave_hours).map(e=>{let[t,a]=e;return a>0&&(0,mi.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,mi.jsxs)("span",{className:"text-yellow-400 font-medium",children:[a,"h"]}),(0,mi.jsx)("span",{className:"text-gray-400 text-xs",children:wf.leaveTypeDisplayNames[t]||t})]},t)})}):(0,mi.jsx)("span",{className:"text-gray-500",children:"\u2014"})})}),(0,mi.jsx)("td",{className:"px-4 py-3",children:(0,mi.jsx)("input",{type:"text",placeholder:"Notes...",value:e.notes||"",onChange:e=>J(t,"notes",e.target.value),disabled:!te(),className:"w-full misty-input","data-testid":"notes-".concat(t)})})]},t)})})]})})}),(0,mi.jsxs)("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,mi.jsx)("div",{className:"misty-card p-4",children:(0,mi.jsxs)("div",{className:"flex items-center justify-between",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("p",{className:"text-sm text-gray-400",children:"Regular Hours"}),(0,mi.jsx)("p",{className:"text-xl font-bold text-white",children:wf.formatHours(v.regular)})]}),(0,mi.jsx)(_l,{className:"h-8 w-8 text-blue-400"})]})}),(0,mi.jsx)("div",{className:"misty-card p-4",children:(0,mi.jsxs)("div",{className:"flex items-center justify-between",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("p",{className:"text-sm text-gray-400",children:"Overtime Hours"}),(0,mi.jsx)("p",{className:"text-xl font-bold text-white",children:wf.formatHours(v.overtime)})]}),(0,mi.jsx)(_l,{className:"h-8 w-8 text-orange-400"})]})}),(0,mi.jsx)("div",{className:"misty-card p-4",children:(0,mi.jsxs)("div",{className:"flex items-center justify-between",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("p",{className:"text-sm text-gray-400",children:"Total Hours"}),(0,mi.jsx)("p",{className:"text-xl font-bold text-white",children:wf.formatHours(v.regular+v.overtime)})]}),(0,mi.jsx)(tf,{className:"h-8 w-8 text-green-400"})]})})]}),(0,mi.jsx)("div",{className:"mt-6",children:(0,mi.jsx)("div",{className:"misty-card p-4",children:(0,mi.jsxs)("div",{className:"flex items-center justify-between",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("p",{className:"text-sm text-gray-400",children:"Annual Leave Accrued"}),(0,mi.jsxs)("p",{className:"text-xl font-bold text-green-400",children:[((e,t)=>{const a={full_time:.0769,part_time:.0769,casual:.0962};return(t*(a[e]||a.full_time)).toFixed(2)})((null===h||void 0===h?void 0:h.employment_type)||(null===c||void 0===c?void 0:c.employment_type)||"full_time",v.regular)," hours"]}),(0,mi.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Based on ",(null===h||void 0===h||null===(t=h.employment_type)||void 0===t?void 0:t.replace("_"," "))||(null===c||void 0===c||null===(a=c.employment_type)||void 0===a?void 0:a.replace("_"," "))||"full time"," employment"]})]}),(0,mi.jsx)(tf,{className:"h-8 w-8 text-green-400"})]})})}),Object.keys(v.leave).length>0&&(0,mi.jsxs)("div",{className:"mt-6",children:[(0,mi.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Leave Taken This Week"}),(0,mi.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:Object.entries(v.leave).map(e=>{let[t,a]=e;return a>0&&(0,mi.jsxs)("div",{className:"misty-card p-4",children:[(0,mi.jsx)("p",{className:"text-sm text-gray-400",children:wf.leaveTypeDisplayNames[t]||t}),(0,mi.jsx)("p",{className:"text-lg font-bold text-yellow-400",children:wf.formatHours(a)})]},t)})})]}),S&&null!==E&&(0,mi.jsx)("div",{className:"modal-overlay",onClick:e=>e.target===e.currentTarget&&C(!1),children:(0,mi.jsx)("div",{className:"modal-content max-w-md",children:(0,mi.jsxs)("div",{className:"p-6",children:[(0,mi.jsxs)("div",{className:"flex items-center mb-4",children:[(0,mi.jsx)(vl,{className:"h-8 w-8 text-yellow-400 mr-3"}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Select Leave Type"}),(0,mi.jsxs)("p",{className:"text-sm text-gray-400",children:[K(null===(s=y[E])||void 0===s?void 0:s.date)," - ",ee(null===(r=y[E])||void 0===r?void 0:r.date)]})]})]}),(0,mi.jsxs)("div",{className:"mb-6",children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:"Leave Type"}),(0,mi.jsx)("div",{className:"space-y-2",children:["annual_leave","sick_leave","compassionate_leave","maternity_leave"].map(e=>(0,mi.jsxs)("label",{className:"flex items-center",children:[(0,mi.jsx)("input",{type:"radio",name:"leaveType",value:e,checked:P===e,onChange:e=>A(e.target.value),className:"mr-3 text-yellow-400 focus:ring-yellow-400"}),(0,mi.jsx)("span",{className:"text-white",children:wf.leaveTypeDisplayNames[e]||e})]},e))})]}),(0,mi.jsxs)("div",{className:"flex justify-between space-x-3",children:[(0,mi.jsx)("button",{type:"button",onClick:()=>{if(null!==E){const e=[...y];e[E].leave_hours={},b(e),C(!1),D(null)}},className:"misty-button misty-button-secondary flex-1",children:"Clear Leave"}),(0,mi.jsx)("button",{type:"button",onClick:()=>C(!1),className:"misty-button misty-button-secondary flex-1",children:"Cancel"}),(0,mi.jsx)("button",{type:"button",onClick:()=>{if(null!==E&&P){const e=[...y];e[E].regular_hours=0,e[E].overtime_hours=0,e[E].leave_hours={[P]:8},b(e),C(!1),D(null),A("")}},disabled:!P,className:"misty-button misty-button-primary flex-1",children:"Apply Leave"})]})]})})}),T&&(0,mi.jsx)("div",{className:"modal-overlay",onClick:e=>e.target===e.currentTarget&&L(!1),children:(0,mi.jsx)("div",{className:"modal-content max-w-md",children:(0,mi.jsxs)("div",{className:"p-6",children:[(0,mi.jsxs)("div",{className:"flex items-center mb-4",children:[(0,mi.jsx)(tf,{className:"h-8 w-8 text-green-400 mr-3"}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Submit Timesheet"}),(0,mi.jsx)("p",{className:"text-sm text-gray-400",children:"Select a manager to approve your timesheet"})]})]}),(0,mi.jsxs)("div",{className:"mb-6",children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:"Select Manager"}),(0,mi.jsxs)("select",{value:O,onChange:e=>M(e.target.value),className:"misty-select w-full",children:[(0,mi.jsx)("option",{value:"",children:"Choose a manager..."}),R.map(e=>(0,mi.jsxs)("option",{value:e.id,children:[e.full_name," - ","admin"===e.role?"Administrator":"Manager"]},e.id))]})]}),(0,mi.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,mi.jsx)("button",{type:"button",onClick:()=>{L(!1),M("")},className:"misty-button misty-button-secondary",children:"Cancel"}),(0,mi.jsx)("button",{type:"button",onClick:async()=>{if(O)try{var e;if(k(!0),await X(),null!==m&&void 0!==m&&m.id)await bf(m.id),Bt.success("Timesheet submitted to ".concat(null===(e=R.find(e=>e.id===O))||void 0===e?void 0:e.full_name," for approval")),L(!1),M(""),null===l||void 0===l||l()}catch(t){console.error("Failed to submit timesheet:",t),Bt.error("Failed to submit timesheet")}finally{k(!1)}else Bt.error("Please select a manager")},disabled:!O||N,className:"misty-button misty-button-primary",children:N?"Submitting...":"Submit for Approval"})]})]})})}),B&&(0,mi.jsx)("div",{className:"modal-overlay",onClick:e=>e.target===e.currentTarget&&z(!1),children:(0,mi.jsx)("div",{className:"modal-content max-w-4xl",children:(0,mi.jsxs)("div",{className:"p-6",children:[(0,mi.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Previous Timesheets"}),(0,mi.jsx)("p",{className:"text-sm text-gray-400",children:"View and edit your previous timesheets"})]}),(0,mi.jsx)("button",{onClick:()=>z(!1),className:"text-gray-400 hover:text-white",children:"\xd7"})]}),H?(0,mi.jsx)("div",{className:"text-center py-8",children:(0,mi.jsx)("p",{className:"text-gray-400",children:"Loading timesheets..."})}):U.length>0?(0,mi.jsx)("div",{className:"misty-table",children:(0,mi.jsxs)("table",{className:"w-full",children:[(0,mi.jsx)("thead",{children:(0,mi.jsxs)("tr",{children:[(0,mi.jsx)("th",{children:"Week"}),(0,mi.jsx)("th",{children:"Status"}),(0,mi.jsx)("th",{children:"Regular Hours"}),(0,mi.jsx)("th",{children:"Overtime Hours"}),(0,mi.jsx)("th",{children:"Total Hours"}),(0,mi.jsx)("th",{children:"Actions"})]})}),(0,mi.jsx)("tbody",{children:U.map(e=>{const t=e.total_regular_hours||0,a=e.total_overtime_hours||0,s=t+a,n="approved"!==e.status;return(0,mi.jsxs)("tr",{children:[(0,mi.jsxs)("td",{className:"text-sm",children:[(0,mi.jsx)("p",{children:e.week_starting||e.week_start}),(0,mi.jsxs)("p",{className:"text-gray-400 text-xs",children:["to ",e.week_ending||e.week_end]})]}),(0,mi.jsx)("td",{children:(0,mi.jsx)("span",{className:"text-sm px-2 py-1 rounded ".concat("approved"===e.status?"bg-green-900 text-green-200":"submitted"===e.status?"bg-yellow-900 text-yellow-200":"bg-gray-700 text-gray-300"),children:e.status||"draft"})}),(0,mi.jsxs)("td",{className:"font-medium text-green-400",children:[t.toFixed(1),"h"]}),(0,mi.jsxs)("td",{className:"font-medium text-yellow-400",children:[a.toFixed(1),"h"]}),(0,mi.jsxs)("td",{className:"font-bold text-white",children:[s.toFixed(1),"h"]}),(0,mi.jsx)("td",{children:(0,mi.jsx)("button",{onClick:()=>(async e=>{try{const t=(await gf(f)).data.data.find(t=>t.id===e);t&&(p(t),b(t.entries||Q()),z(!1),Bt.info("Loaded previous timesheet"))}catch(t){console.error("Failed to load previous timesheet:",t),Bt.error("Failed to load previous timesheet")}})(e.id),disabled:!n,className:"text-sm ".concat(n?"text-blue-400 hover:text-blue-300":"text-gray-600 cursor-not-allowed"),title:n?"Edit this timesheet":"Cannot edit approved timesheet",children:n?"Edit":"View Only"})})]},e.id)})})]})}):(0,mi.jsxs)("div",{className:"text-center py-8 bg-gray-800 rounded-lg",children:[(0,mi.jsx)(_l,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),(0,mi.jsx)("p",{className:"text-gray-300",children:"No previous timesheets found"})]}),(0,mi.jsx)("div",{className:"flex justify-end mt-6",children:(0,mi.jsx)("button",{onClick:()=>z(!1),className:"misty-button misty-button-secondary",children:"Close"})})]})})})]})},kf=["title","titleId"];function Sf(e,t){let{title:a,titleId:s}=e,r=l(e,kf);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},r),a?n.createElement("title",{id:s},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21v-8.25M15.75 21v-8.25M8.25 21v-8.25M3 9l9-6 9 6m-1.5 12V10.332A48.36 48.36 0 0 0 12 9.75c-2.551 0-5.056.2-7.5.582V21M3 21h18M12 6.75h.008v.008H12V6.75Z"}))}const Cf=n.forwardRef(Sf),Ef=["title","titleId"];function Df(e,t){let{title:a,titleId:s}=e,r=l(e,Ef);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},r),a?n.createElement("title",{id:s},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"}))}const Pf=n.forwardRef(Df),Af="https://manufactor-2.preview.emergentagent.com",Tf=()=>{const[e,t]=(0,n.useState)("payslips"),[a,s]=(0,n.useState)([]),[r,i]=(0,n.useState)([]),[l,o]=(0,n.useState)([]),[c,d]=(0,n.useState)(null),[u,p]=(0,n.useState)(""),[h,x]=(0,n.useState)(""),[f,g]=(0,n.useState)(""),[y,b]=(0,n.useState)(!1),[v,j]=(0,n.useState)(!1),[w,_]=(0,n.useState)(null),[N,k]=(0,n.useState)({leave_type:"annual_leave",adjustment_hours:"",reason:""});(0,n.useEffect)(()=>{S(),"payslips"===e&&C()},[e]);const S=async()=>{try{const e=await fetch("".concat(Af,"/api/payroll/employees"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(e.ok){const t=await e.json();s(Array.isArray(t)?t:[])}}catch(e){console.error("Failed to load employees:",e)}},C=async()=>{try{b(!0);const e=await fetch("".concat(Af,"/api/payroll/reports/payslips"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(e.ok){const t=await e.json();i(t.data||[])}}catch(e){Bt.error("Failed to load payslips")}finally{b(!1)}};return(0,mi.jsxs)("div",{children:[(0,mi.jsxs)("div",{className:"flex space-x-4 mb-6 border-b border-gray-600",children:[(0,mi.jsxs)("button",{onClick:()=>t("payslips"),className:"px-4 py-2 font-medium transition-colors ".concat("payslips"===e?"text-yellow-400 border-b-2 border-yellow-400":"text-gray-400 hover:text-white"),children:[(0,mi.jsx)(Ri,{className:"h-5 w-5 inline mr-2"}),"Pay Slips"]}),(0,mi.jsxs)("button",{onClick:()=>t("timesheets"),className:"px-4 py-2 font-medium transition-colors ".concat("timesheets"===e?"text-yellow-400 border-b-2 border-yellow-400":"text-gray-400 hover:text-white"),children:[(0,mi.jsx)(_l,{className:"h-5 w-5 inline mr-2"}),"Timesheets"]}),(0,mi.jsxs)("button",{onClick:()=>t("leave"),className:"px-4 py-2 font-medium transition-colors ".concat("leave"===e?"text-yellow-400 border-b-2 border-yellow-400":"text-gray-400 hover:text-white"),children:[(0,mi.jsx)(vl,{className:"h-5 w-5 inline mr-2"}),"Leave Entitlements"]}),(0,mi.jsxs)("button",{onClick:()=>t("bank-details"),className:"px-4 py-2 font-medium transition-colors ".concat("bank-details"===e?"text-yellow-400 border-b-2 border-yellow-400":"text-gray-400 hover:text-white"),children:[(0,mi.jsx)(Cf,{className:"h-5 w-5 inline mr-2"}),"Bank Details"]})]}),"payslips"===e&&(0,mi.jsxs)("div",{children:[(0,mi.jsx)("h3",{className:"text-xl font-semibold text-white mb-4",children:"Historic Pay Slips"}),(0,mi.jsx)("p",{className:"text-sm text-gray-400 mb-6",children:"View and download all generated payslips from approved timesheets"}),y?(0,mi.jsx)("p",{className:"text-gray-400 text-center py-8",children:"Loading payslips..."}):r.length>0?(0,mi.jsx)("div",{className:"misty-table",children:(0,mi.jsxs)("table",{className:"w-full",children:[(0,mi.jsx)("thead",{children:(0,mi.jsxs)("tr",{children:[(0,mi.jsx)("th",{children:"Employee"}),(0,mi.jsx)("th",{children:"Pay Period"}),(0,mi.jsx)("th",{children:"Hours"}),(0,mi.jsx)("th",{children:"Gross Pay"}),(0,mi.jsx)("th",{children:"Net Pay"}),(0,mi.jsx)("th",{children:"Generated"}),(0,mi.jsx)("th",{children:"Actions"})]})}),(0,mi.jsx)("tbody",{children:r.map(e=>{const t=e.payslip_data;return(0,mi.jsxs)("tr",{children:[(0,mi.jsxs)("td",{children:[(0,mi.jsx)("p",{className:"font-medium",children:t.employee.name}),(0,mi.jsx)("p",{className:"text-sm text-gray-400",children:t.employee.employee_number})]}),(0,mi.jsxs)("td",{className:"text-sm",children:[(0,mi.jsx)("p",{children:t.pay_period.week_start}),(0,mi.jsxs)("p",{className:"text-gray-400",children:["to ",t.pay_period.week_end]})]}),(0,mi.jsxs)("td",{children:[(0,mi.jsxs)("p",{children:[t.hours.regular_hours,"h regular"]}),(0,mi.jsxs)("p",{className:"text-sm text-gray-400",children:[t.hours.overtime_hours,"h overtime"]})]}),(0,mi.jsxs)("td",{className:"font-medium text-green-400",children:["$",t.earnings.gross_pay.toFixed(2)]}),(0,mi.jsxs)("td",{className:"font-medium text-yellow-400",children:["$",t.net_pay.toFixed(2)]}),(0,mi.jsx)("td",{className:"text-sm text-gray-400",children:new Date(t.generated_at).toLocaleDateString()}),(0,mi.jsx)("td",{children:(0,mi.jsxs)("button",{onClick:()=>(e=>{const t=e.payslip_data,a="\nPAYSLIP\n================================================================\n".concat(t.employee.name," - ").concat(t.employee.employee_number,"\n").concat(t.employee.position," - ").concat(t.employee.department,"\n\nPAY PERIOD: ").concat(t.pay_period.week_start," to ").concat(t.pay_period.week_end,"\n================================================================\n\nHOURS WORKED:\n  Regular Hours:    ").concat(t.hours.regular_hours," @ $").concat(t.hours.hourly_rate,"/hr\n  Overtime Hours:   ").concat(t.hours.overtime_hours," @ $").concat((1.5*t.hours.hourly_rate).toFixed(2),"/hr\n\nEARNINGS:\n  Regular Pay:      $").concat(t.earnings.regular_pay.toFixed(2),"\n  Overtime Pay:     $").concat(t.earnings.overtime_pay.toFixed(2),"\n  Gross Pay:        $").concat(t.earnings.gross_pay.toFixed(2),"\n\nDEDUCTIONS:\n  Tax Withheld:     $").concat(t.deductions.tax_withheld.toFixed(2),"\n  Superannuation:   $").concat(t.deductions.superannuation.toFixed(2),"\n\nNET PAY:            $").concat(t.net_pay.toFixed(2),"\n\nYEAR TO DATE:\n  Gross Pay:        $").concat(t.year_to_date.gross_pay.toFixed(2),"\n  Tax Withheld:     $").concat(t.year_to_date.tax_withheld.toFixed(2),"\n  Superannuation:   $").concat(t.year_to_date.superannuation.toFixed(2),"\n  Net Pay:          $").concat(t.year_to_date.net_pay.toFixed(2),"\n\nPAYMENT DETAILS:\n  BSB:              ").concat(t.bank_details.bsb,"\n  Account Number:   ").concat(t.bank_details.account_number,"\n  Super Fund:       ").concat(t.bank_details.superannuation_fund,"\n  TFN:              ").concat(t.employee.tax_file_number,"\n\nGenerated: ").concat(new Date(t.generated_at).toLocaleString(),"\n================================================================\n    "),s=new Blob([a],{type:"text/plain"}),n=URL.createObjectURL(s),r=document.createElement("a");r.href=n,r.download="payslip_".concat(t.employee.employee_number,"_").concat(t.pay_period.week_start,".txt"),r.click(),URL.revokeObjectURL(n)})(e),className:"text-blue-400 hover:text-blue-300 flex items-center text-sm",children:[(0,mi.jsx)(Pf,{className:"h-4 w-4 mr-1"}),"Download"]})})]},e.id)})})]})}):(0,mi.jsxs)("div",{className:"text-center py-12 bg-gray-800 rounded-lg",children:[(0,mi.jsx)(Ri,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,mi.jsx)("p",{className:"mt-2 text-sm text-gray-300",children:"No payslips generated yet"}),(0,mi.jsx)("p",{className:"text-xs text-gray-500",children:"Payslips are automatically generated from approved timesheets"})]})]}),"timesheets"===e&&(0,mi.jsxs)("div",{children:[(0,mi.jsx)("h3",{className:"text-xl font-semibold text-white mb-4",children:"Timesheet Report"}),(0,mi.jsx)("div",{className:"bg-gray-800 rounded-lg p-4 mb-6",children:(0,mi.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Employee"}),(0,mi.jsxs)("select",{value:u,onChange:e=>p(e.target.value),className:"misty-select w-full",children:[(0,mi.jsx)("option",{value:"",children:"All Employees"}),a.map(e=>(0,mi.jsxs)("option",{value:e.id,children:[e.first_name," ",e.last_name]},e.id))]})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"From Date"}),(0,mi.jsx)("input",{type:"date",value:h,onChange:e=>x(e.target.value),className:"misty-input w-full"})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"To Date"}),(0,mi.jsx)("input",{type:"date",value:f,onChange:e=>g(e.target.value),className:"misty-input w-full"})]}),(0,mi.jsx)("div",{className:"flex items-end",children:(0,mi.jsx)("button",{onClick:async()=>{try{b(!0);let e="".concat(Af,"/api/payroll/reports/timesheets?");u&&(e+="employee_id=".concat(u,"&")),h&&(e+="start_date=".concat(h,"&")),f&&(e+="end_date=".concat(f,"&"));const t=await fetch(e,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(t.ok){const e=await t.json();o(e.data||[]),d(e.summary||null)}else Bt.error("Failed to load timesheet report")}catch(e){Bt.error("Failed to load timesheet report")}finally{b(!1)}},className:"misty-button misty-button-primary w-full",children:"Generate Report"})})]})}),c&&(0,mi.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,mi.jsxs)("div",{className:"bg-blue-900 bg-opacity-20 border border-blue-500 border-opacity-30 rounded-lg p-4",children:[(0,mi.jsx)("p",{className:"text-sm text-gray-400",children:"Total Timesheets"}),(0,mi.jsx)("p",{className:"text-2xl font-bold text-white",children:c.total_timesheets})]}),(0,mi.jsxs)("div",{className:"bg-green-900 bg-opacity-20 border border-green-500 border-opacity-30 rounded-lg p-4",children:[(0,mi.jsx)("p",{className:"text-sm text-gray-400",children:"Regular Hours"}),(0,mi.jsxs)("p",{className:"text-2xl font-bold text-white",children:[c.total_regular_hours,"h"]})]}),(0,mi.jsxs)("div",{className:"bg-yellow-900 bg-opacity-20 border border-yellow-500 border-opacity-30 rounded-lg p-4",children:[(0,mi.jsx)("p",{className:"text-sm text-gray-400",children:"Overtime Hours"}),(0,mi.jsxs)("p",{className:"text-2xl font-bold text-white",children:[c.total_overtime_hours,"h"]})]}),(0,mi.jsxs)("div",{className:"bg-purple-900 bg-opacity-20 border border-purple-500 border-opacity-30 rounded-lg p-4",children:[(0,mi.jsx)("p",{className:"text-sm text-gray-400",children:"Total Hours"}),(0,mi.jsxs)("p",{className:"text-2xl font-bold text-white",children:[c.total_hours,"h"]})]})]}),y?(0,mi.jsx)("p",{className:"text-gray-400 text-center py-8",children:"Loading timesheets..."}):l.length>0?(0,mi.jsx)("div",{className:"misty-table",children:(0,mi.jsxs)("table",{className:"w-full",children:[(0,mi.jsx)("thead",{children:(0,mi.jsxs)("tr",{children:[(0,mi.jsx)("th",{children:"Employee"}),(0,mi.jsx)("th",{children:"Week"}),(0,mi.jsx)("th",{children:"Regular Hours"}),(0,mi.jsx)("th",{children:"Overtime Hours"}),(0,mi.jsx)("th",{children:"Status"}),(0,mi.jsx)("th",{children:"Approver"})]})}),(0,mi.jsx)("tbody",{children:l.map(e=>(0,mi.jsxs)("tr",{children:[(0,mi.jsx)("td",{children:(0,mi.jsx)("p",{className:"font-medium",children:e.employee_name})}),(0,mi.jsxs)("td",{className:"text-sm",children:[(0,mi.jsx)("p",{children:e.week_start}),(0,mi.jsxs)("p",{className:"text-gray-400",children:["to ",e.week_end]})]}),(0,mi.jsxs)("td",{className:"font-medium text-green-400",children:[e.total_regular_hours||0,"h"]}),(0,mi.jsxs)("td",{className:"font-medium text-yellow-400",children:[e.total_overtime_hours||0,"h"]}),(0,mi.jsx)("td",{children:(0,mi.jsx)("span",{className:"text-sm px-2 py-1 rounded ".concat("approved"===e.status?"bg-green-900 text-green-200":"submitted"===e.status?"bg-yellow-900 text-yellow-200":"bg-gray-700 text-gray-300"),children:e.status})}),(0,mi.jsx)("td",{className:"text-sm text-gray-400",children:e.approver_name||"N/A"})]},e.id))})]})}):(0,mi.jsxs)("div",{className:"text-center py-12 bg-gray-800 rounded-lg",children:[(0,mi.jsx)(_l,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,mi.jsx)("p",{className:"mt-2 text-sm text-gray-300",children:"No timesheets found"}),(0,mi.jsx)("p",{className:"text-xs text-gray-500",children:"Select filters and click Generate Report"})]})]}),"leave"===e&&(0,mi.jsxs)("div",{children:[(0,mi.jsx)("h3",{className:"text-xl font-semibold text-white mb-4",children:"Leave Entitlements"}),(0,mi.jsx)("p",{className:"text-sm text-gray-400 mb-6",children:"View and manage employee leave balances"}),a.length>0?(0,mi.jsx)("div",{className:"misty-table",children:(0,mi.jsxs)("table",{className:"w-full",children:[(0,mi.jsx)("thead",{children:(0,mi.jsxs)("tr",{children:[(0,mi.jsx)("th",{children:"Employee"}),(0,mi.jsx)("th",{children:"Annual Leave"}),(0,mi.jsx)("th",{children:"Sick Leave"}),(0,mi.jsx)("th",{children:"Personal Leave"}),(0,mi.jsx)("th",{children:"Actions"})]})}),(0,mi.jsx)("tbody",{children:a.map(e=>(0,mi.jsxs)("tr",{children:[(0,mi.jsxs)("td",{children:[(0,mi.jsxs)("p",{className:"font-medium",children:[e.first_name," ",e.last_name]}),(0,mi.jsx)("p",{className:"text-sm text-gray-400",children:e.employee_number})]}),(0,mi.jsxs)("td",{className:"font-medium text-blue-400",children:[e.annual_leave_balance||0,"h / ",e.annual_leave_entitlement,"h"]}),(0,mi.jsxs)("td",{className:"font-medium text-green-400",children:[e.sick_leave_balance||0,"h / ",e.sick_leave_entitlement,"h"]}),(0,mi.jsxs)("td",{className:"font-medium text-yellow-400",children:[e.personal_leave_balance||0,"h / ",e.personal_leave_entitlement,"h"]}),(0,mi.jsx)("td",{children:(0,mi.jsxs)("button",{onClick:()=>{_(e),j(!0)},className:"text-yellow-400 hover:text-yellow-300 flex items-center text-sm",children:[(0,mi.jsx)(ho,{className:"h-4 w-4 mr-1"}),"Adjust"]})})]},e.id))})]})}):(0,mi.jsx)("p",{className:"text-gray-400 text-center py-8",children:"No employees found"})]}),"bank-details"===e&&(0,mi.jsxs)("div",{children:[(0,mi.jsx)("h3",{className:"text-xl font-semibold text-white mb-4",children:"Employee Bank Details"}),(0,mi.jsx)("p",{className:"text-sm text-gray-400 mb-6",children:"Manage employee banking information for payroll processing"}),a.length>0?(0,mi.jsx)("div",{className:"misty-table",children:(0,mi.jsxs)("table",{className:"w-full",children:[(0,mi.jsx)("thead",{children:(0,mi.jsxs)("tr",{children:[(0,mi.jsx)("th",{children:"Employee"}),(0,mi.jsx)("th",{children:"Bank Name"}),(0,mi.jsx)("th",{children:"BSB"}),(0,mi.jsx)("th",{children:"Account Number"}),(0,mi.jsx)("th",{children:"Super Fund"}),(0,mi.jsx)("th",{children:"Actions"})]})}),(0,mi.jsx)("tbody",{children:a.map(e=>(0,mi.jsxs)("tr",{children:[(0,mi.jsxs)("td",{children:[(0,mi.jsxs)("p",{className:"font-medium",children:[e.first_name," ",e.last_name]}),(0,mi.jsx)("p",{className:"text-sm text-gray-400",children:e.employee_number})]}),(0,mi.jsx)("td",{className:"text-sm",children:e.bank_name||(0,mi.jsx)("span",{className:"text-gray-500",children:"Not set"})}),(0,mi.jsx)("td",{className:"font-mono text-sm",children:e.bsb||(0,mi.jsx)("span",{className:"text-gray-500",children:"Not set"})}),(0,mi.jsx)("td",{className:"font-mono text-sm",children:e.account_number?"****".concat(e.account_number.slice(-4)):(0,mi.jsx)("span",{className:"text-gray-500",children:"Not set"})}),(0,mi.jsx)("td",{className:"text-sm",children:e.superannuation_fund||(0,mi.jsx)("span",{className:"text-gray-500",children:"Not set"})}),(0,mi.jsx)("td",{children:(0,mi.jsxs)("button",{onClick:()=>{Bt.info("Bank details management coming soon")},className:"text-yellow-400 hover:text-yellow-300 flex items-center text-sm",children:[(0,mi.jsx)(ho,{className:"h-4 w-4 mr-1"}),"Edit"]})})]},e.id))})]})}):(0,mi.jsxs)("div",{className:"text-center py-12 bg-gray-800 rounded-lg",children:[(0,mi.jsx)(Cf,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,mi.jsx)("p",{className:"mt-2 text-sm text-gray-300",children:"No employees found"}),(0,mi.jsx)("p",{className:"text-xs text-gray-500",children:"Employee bank details will appear here"})]})]}),v&&(0,mi.jsx)("div",{className:"modal-overlay",onClick:e=>e.target===e.currentTarget&&j(!1),children:(0,mi.jsx)("div",{className:"modal-content max-w-md",children:(0,mi.jsxs)("div",{className:"p-6",children:[(0,mi.jsx)("h3",{className:"text-xl font-semibold text-white mb-4",children:"Adjust Leave Balance"}),(0,mi.jsxs)("p",{className:"text-sm text-gray-400 mb-6",children:["Employee: ",null===w||void 0===w?void 0:w.first_name," ",null===w||void 0===w?void 0:w.last_name]}),(0,mi.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e=await fetch("".concat(Af,"/api/payroll/leave-adjustments"),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"},body:JSON.stringify(m({employee_id:w.id},N))});if(e.ok){const t=await e.json();Bt.success(t.message),j(!1),S(),k({leave_type:"annual_leave",adjustment_hours:"",reason:""})}else{const t=await e.json();Bt.error(t.detail||"Failed to adjust leave")}}catch(t){Bt.error("Failed to adjust leave")}},className:"space-y-4",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Leave Type"}),(0,mi.jsxs)("select",{value:N.leave_type,onChange:e=>k(m(m({},N),{},{leave_type:e.target.value})),className:"misty-select w-full",required:!0,children:[(0,mi.jsx)("option",{value:"annual_leave",children:"Annual Leave"}),(0,mi.jsx)("option",{value:"sick_leave",children:"Sick Leave"}),(0,mi.jsx)("option",{value:"personal_leave",children:"Personal Leave"})]})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Adjustment Hours (+ to add, - to deduct)"}),(0,mi.jsx)("input",{type:"number",step:"0.5",value:N.adjustment_hours,onChange:e=>k(m(m({},N),{},{adjustment_hours:e.target.value})),className:"misty-input w-full",placeholder:"e.g., 8 or -4",required:!0}),(0,mi.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Use positive numbers to add leave, negative to deduct"})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsxs)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Reason ",(0,mi.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,mi.jsx)("textarea",{value:N.reason,onChange:e=>k(m(m({},N),{},{reason:e.target.value})),className:"misty-textarea w-full",rows:3,placeholder:"Enter reason for this adjustment...",required:!0}),(0,mi.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Required for audit trail and record keeping"})]}),(0,mi.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-600",children:[(0,mi.jsx)("button",{type:"button",onClick:()=>j(!1),className:"misty-button misty-button-secondary",children:"Cancel"}),(0,mi.jsx)("button",{type:"submit",className:"misty-button misty-button-primary",children:"Apply Adjustment"})]})]})]})})})]})},Lf=["title","titleId"];function Rf(e,t){let{title:a,titleId:s}=e,r=l(e,Lf);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},r),a?n.createElement("title",{id:s},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0ZM3 19.235v-.11a6.375 6.375 0 0 1 12.75 0v.109A12.318 12.318 0 0 1 9.374 21c-2.331 0-4.512-.645-6.374-1.766Z"}))}const Ff=n.forwardRef(Rf),Of="https://manufactor-2.preview.emergentagent.com",Mf=()=>{const{user:e,hasPermission:t}=hi(),[a,s]=(0,n.useState)(!0),[r,i]=(0,n.useState)("overview"),[l,o]=(0,n.useState)([]),[c,d]=(0,n.useState)([]),[u,p]=(0,n.useState)([]),[h,x]=(0,n.useState)([]),[f,g]=(0,n.useState)([]),[y,b]=(0,n.useState)([]),[v,j]=(0,n.useState)([]),[w,_]=(0,n.useState)([]),[N,k]=(0,n.useState)(!1),[S,C]=(0,n.useState)(!1),[E,D]=(0,n.useState)(null),[P,A]=(0,n.useState)(!1),[T,L]=(0,n.useState)(!1),[R,F]=(0,n.useState)(!1),[O,M]=(0,n.useState)(null),[I,q]=(0,n.useState)(!1),[B,z]=(0,n.useState)(null),[U,W]=(0,n.useState)(!1),[H,G]=(0,n.useState)(null),[V,$]=(0,n.useState)(!1),[Q,Y]=(0,n.useState)(null),[J,Z]=(0,n.useState)({bank_account_bsb:"",bank_account_number:"",tax_file_number:"",superannuation_fund:""}),[X,K]=(0,n.useState)({employee_id:"",leave_type:"annual_leave",start_date:"",end_date:"",hours_requested:"",reason:"",approver_id:""}),ee=(e,t)=>{if(!e||!t)return 0;const a=new Date(e),s=new Date(t);if(s<a)return 0;let n=0;const r=new Date(a);for(;r<=s;){const e=r.getDay();0!==e&&6!==e&&n++,r.setDate(r.getDate()+1)}return n},te=(e,t)=>{const a=m(m({},X),{},{[e]:t});if(a.start_date&&a.end_date){const e=8*ee(a.start_date,a.end_date);a.hours_requested=e.toString()}K(a)};(0,n.useEffect)(()=>{ae(),ie()},[]);const ae=async()=>{try{s(!0);const[e,a,n,r]=await Promise.all([t("manage_payroll")?fetch("".concat(Of,"/api/payroll/employees"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}):Promise.resolve({json:()=>[]}),t("manage_payroll")?fetch("".concat(Of,"/api/payroll/timesheets/pending"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}):Promise.resolve({json:()=>({data:[]})}),t("manage_payroll")?fetch("".concat(Of,"/api/payroll/leave-requests/pending"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}):Promise.resolve({json:()=>({data:[]})}),fetch("".concat(Of,"/api/payroll/dashboard/timesheet-reminder"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}})]),i=await e.json(),l=await a.json(),c=await n.json(),d=await r.json();o(Array.isArray(i)?i:[]),p(l.data||[]),x(c.data||[]),D(d.data)}catch(e){console.error("Failed to load payroll data:",e),Bt.error("Failed to load payroll data")}finally{s(!1)}},se=async()=>{try{const e=await fetch("".concat(Of,"/api/payroll/employees/archived/list"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(e.ok){const t=await e.json();d(Array.isArray(t)?t:[])}else Bt.error("Failed to load archived employees")}catch(e){console.error("Failed to load archived employees:",e),Bt.error("Failed to load archived employees")}},ne=async()=>{try{const e=await fetch("".concat(Of,"/api/payroll/leave-requests/pending"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(e.ok){const t=await e.json();g(t.data||[])}}catch(e){console.error("Failed to load leave requests:",e)}},re=async()=>{try{const e=await fetch("".concat(Of,"/api/payroll/leave-requests/calendar"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(e.ok){const t=await e.json();j(t.data||[])}}catch(e){console.error("Failed to load leave calendar:",e),Bt.error("Failed to load leave calendar")}},ie=async()=>{try{const e=await fetch("".concat(Of,"/api/payroll/leave-requests/reminders"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(e.ok){const t=await e.json();_(t.data||[])}}catch(e){console.error("Failed to load leave reminders:",e)}},le=()=>{M(null),A(!0)},oe=e=>{M(e),L(!0)},ce=e=>{let{title:t,value:a,icon:s,color:n,action:r,testId:i}=e;return(0,mi.jsx)("div",{className:"misty-card p-6 ".concat(n," ").concat(r?"cursor-pointer hover:bg-gray-700 transition-colors duration-200":""),onClick:r,"data-testid":i,children:(0,mi.jsxs)("div",{className:"flex items-center",children:[(0,mi.jsxs)("div",{className:"flex-1",children:[(0,mi.jsx)("p",{className:"text-sm font-medium text-gray-300",children:t}),(0,mi.jsx)("p",{className:"text-2xl font-bold text-white",children:a})]}),(0,mi.jsx)(s,{className:"h-8 w-8 text-yellow-400"})]})})},de=e=>{let{id:t,label:a,isActive:s,onClick:n}=e;return(0,mi.jsx)("button",{onClick:()=>n(t),className:"px-4 py-2 font-medium rounded-md transition-colors duration-200 ".concat(s?"bg-yellow-400 text-gray-900":"text-gray-300 hover:text-yellow-400 hover:bg-gray-700"),"data-testid":"tab-".concat(t),children:a})};return a?(0,mi.jsx)(hl,{children:(0,mi.jsx)("div",{className:"p-8",children:(0,mi.jsxs)("div",{className:"animate-pulse",children:[(0,mi.jsx)("div",{className:"h-8 bg-gray-700 rounded w-1/4 mb-8"}),(0,mi.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[...Array(4)].map((e,t)=>(0,mi.jsx)("div",{className:"h-24 bg-gray-700 rounded"},t))})]})})}):(0,mi.jsxs)(hl,{children:[(0,mi.jsxs)("div",{className:"p-8","data-testid":"payroll-management",children:[(0,mi.jsxs)("div",{className:"mb-8",children:[(0,mi.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"Payroll & Leave Management"}),(0,mi.jsx)("p",{className:"text-gray-400",children:"Manage employee timesheets, leave requests, and payroll processing"})]}),(null===E||void 0===E?void 0:E.show_reminder)&&(0,mi.jsxs)("div",{className:"mb-8 p-4 bg-yellow-900 border border-yellow-700 rounded-lg flex items-center",children:[(0,mi.jsx)(gl,{className:"h-6 w-6 text-yellow-400 mr-3"}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("p",{className:"text-yellow-100 font-medium",children:"Timesheet Reminder"}),(0,mi.jsx)("p",{className:"text-yellow-200 text-sm",children:E.message})]})]}),(0,mi.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,mi.jsx)(ce,{title:"Total Employees",value:l.length,icon:Ff,color:"",testId:"total-employees-card"}),(0,mi.jsx)(ce,{title:"Pending Timesheets",value:u.length,icon:_l,color:u.length>0?"border-l-4 border-orange-500":"",action:()=>i("timesheets"),testId:"pending-timesheets-card"}),(0,mi.jsx)(ce,{title:"Leave Requests",value:h.length,icon:vl,color:h.length>0?"border-l-4 border-blue-500":"",action:()=>i("leave"),testId:"leave-requests-card"}),(0,mi.jsx)(ce,{title:"Payroll Reports",value:"View",icon:kx,color:"",action:()=>i("reports"),testId:"payroll-reports-card"})]}),(0,mi.jsx)("div",{className:"mb-8",children:(0,mi.jsxs)("div",{className:"flex space-x-2",children:[(0,mi.jsx)(de,{id:"overview",label:"Overview",isActive:"overview"===r,onClick:i}),t("manage_payroll")&&(0,mi.jsxs)(mi.Fragment,{children:[(0,mi.jsx)(de,{id:"employees",label:"Employees",isActive:"employees"===r,onClick:i}),(0,mi.jsx)(de,{id:"archived",label:"Archived Staff",isActive:"archived"===r,onClick:e=>{i(e),se()}}),(0,mi.jsx)(de,{id:"timesheets",label:"Timesheets",isActive:"timesheets"===r,onClick:i}),(0,mi.jsx)(de,{id:"leave",label:"Leave Requests",isActive:"leave"===r,onClick:i}),(0,mi.jsx)(de,{id:"reports",label:"Reports",isActive:"reports"===r,onClick:i})]}),(0,mi.jsx)(de,{id:"my-timesheet",label:"My Timesheet",isActive:"my-timesheet"===r,onClick:i})]})}),(0,mi.jsxs)("div",{className:"animate-fadeIn",children:["overview"===r&&(0,mi.jsxs)("div",{children:[(0,mi.jsx)("h3",{className:"text-xl font-semibold text-white mb-6",children:"Payroll Dashboard"}),t("manage_payroll")&&w.length>0&&(0,mi.jsxs)("div",{className:"bg-yellow-900 bg-opacity-20 border border-yellow-500 border-opacity-50 rounded-lg p-4 mb-6",children:[(0,mi.jsxs)("div",{className:"flex items-center mb-3",children:[(0,mi.jsx)(gl,{className:"h-6 w-6 text-yellow-400 mr-2"}),(0,mi.jsx)("h4",{className:"text-lg font-semibold text-white",children:"Upcoming Leave Reminders"})]}),(0,mi.jsx)("div",{className:"space-y-2",children:w.map(e=>(0,mi.jsxs)("div",{className:"bg-gray-800 rounded p-3 flex items-center justify-between",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("p",{className:"text-white font-medium",children:e.message}),(0,mi.jsxs)("p",{className:"text-sm text-gray-400",children:[e.employee_number," - ",e.department," |",new Date(e.start_date).toLocaleDateString()," to ",new Date(e.end_date).toLocaleDateString()," |",e.hours_requested,"h"]})]}),(0,mi.jsx)("span",{className:"px-3 py-1 rounded text-sm font-medium ".concat("1_day"===e.reminder_type?"bg-red-900 text-red-200":"bg-yellow-900 text-yellow-200"),children:"1_day"===e.reminder_type?"Tomorrow":"In 7 days"})]},e.id))})]}),(0,mi.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,mi.jsxs)("div",{className:"misty-card p-6",children:[(0,mi.jsxs)("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[(0,mi.jsx)(_l,{className:"h-5 w-5 mr-2 text-yellow-400"}),"Recent Timesheet Activity"]}),u.length>0?(0,mi.jsx)("div",{className:"space-y-3",children:u.slice(0,5).map(e=>(0,mi.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-700 rounded-lg",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("p",{className:"font-medium text-white",children:e.employee_name}),(0,mi.jsxs)("p",{className:"text-sm text-gray-400",children:["Week ",oi(e.week_starting)," - ",oi(e.week_ending)]})]}),(0,mi.jsx)("span",{className:"bg-orange-600 text-white text-xs px-2 py-1 rounded",children:"Pending"})]},e.id))}):(0,mi.jsx)("p",{className:"text-gray-400 text-center py-8",children:"No pending timesheets"})]}),(0,mi.jsxs)("div",{className:"misty-card p-6",children:[(0,mi.jsxs)("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center",children:[(0,mi.jsx)(vl,{className:"h-5 w-5 mr-2 text-yellow-400"}),"Pending Leave Requests"]}),h.length>0?(0,mi.jsx)("div",{className:"space-y-3",children:h.slice(0,5).map(e=>(0,mi.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-700 rounded-lg",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("p",{className:"font-medium text-white",children:e.employee_name}),(0,mi.jsx)("p",{className:"text-sm text-gray-400",children:e.leave_type.replace("_"," ").replace(/\b\w/g,e=>e.toUpperCase())}),(0,mi.jsxs)("p",{className:"text-xs text-gray-500",children:[oi(e.start_date)," - ",oi(e.end_date)]})]}),(0,mi.jsxs)("span",{className:"bg-blue-600 text-white text-xs px-2 py-1 rounded",children:[e.hours_requested,"h"]})]},e.id))}):(0,mi.jsx)("p",{className:"text-gray-400 text-center py-8",children:"No pending leave requests"})]})]})]}),"employees"===r&&t("manage_payroll")&&(0,mi.jsxs)("div",{children:[(0,mi.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("h3",{className:"text-xl font-semibold text-white",children:"Employee Management"}),(0,mi.jsxs)("p",{className:"text-sm text-gray-400 mt-1",children:[l.length," active employees synced from Staff & Security"]})]}),(0,mi.jsxs)("div",{className:"flex space-x-3",children:[(0,mi.jsxs)("button",{onClick:async()=>{try{const e=await fetch("".concat(Of,"/api/payroll/employees/sync"),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(e.ok){const t=await e.json();Bt.success(t.message||"Employees synced successfully"),ae()}else Bt.error("Failed to sync employees")}catch(e){Bt.error("Failed to sync employees")}},className:"misty-button misty-button-secondary flex items-center",children:[(0,mi.jsx)(Gx,{className:"h-5 w-5 mr-2"}),"Sync from Staff & Security"]}),(0,mi.jsxs)("button",{onClick:le,className:"misty-button misty-button-primary flex items-center","data-testid":"add-employee-button",children:[(0,mi.jsx)(Ff,{className:"h-5 w-5 mr-2"}),"Add Employee"]})]})]}),(0,mi.jsx)("div",{className:"bg-blue-900 bg-opacity-20 border border-blue-500 border-opacity-30 rounded-lg p-4 mb-6",children:(0,mi.jsxs)("div",{className:"flex items-start",children:[(0,mi.jsx)("div",{className:"flex-shrink-0",children:(0,mi.jsx)(tf,{className:"h-5 w-5 text-blue-400 mt-0.5"})}),(0,mi.jsxs)("div",{className:"ml-3",children:[(0,mi.jsxs)("p",{className:"text-sm text-blue-200",children:[(0,mi.jsx)("strong",{children:"Auto-Sync Enabled:"})," All active users from Staff & Security automatically appear here."]}),(0,mi.jsx)("p",{className:"text-xs text-blue-300 mt-1",children:'Missing someone? Check that they are marked as "Active" in Staff & Security, or click "Sync from Staff & Security" to manually refresh.'})]})]})}),l.length>0?(0,mi.jsx)("div",{className:"misty-table",children:(0,mi.jsxs)("table",{className:"w-full",children:[(0,mi.jsx)("thead",{children:(0,mi.jsxs)("tr",{children:[(0,mi.jsx)("th",{children:"Employee"}),(0,mi.jsx)("th",{children:"Position"}),(0,mi.jsx)("th",{children:"Department"}),(0,mi.jsx)("th",{children:"Hourly Rate"}),(0,mi.jsx)("th",{children:"Employment Type"}),(0,mi.jsx)("th",{children:"Actions"})]})}),(0,mi.jsx)("tbody",{children:l.map(e=>(0,mi.jsxs)("tr",{"data-testid":"employee-row-".concat(e.id),children:[(0,mi.jsx)("td",{children:(0,mi.jsxs)("div",{children:[(0,mi.jsxs)("p",{className:"font-medium",children:[e.first_name," ",e.last_name]}),(0,mi.jsx)("p",{className:"text-sm text-gray-400",children:e.employee_number})]})}),(0,mi.jsx)("td",{children:e.position}),(0,mi.jsx)("td",{children:e.department||"N/A"}),(0,mi.jsxs)("td",{className:"font-medium text-yellow-400",children:[li(e.hourly_rate),"/hr"]}),(0,mi.jsx)("td",{children:(0,mi.jsx)("span",{className:"text-sm bg-gray-600 px-2 py-1 rounded capitalize",children:e.employment_type.replace("_"," ")})}),(0,mi.jsx)("td",{children:(0,mi.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,mi.jsxs)("button",{onClick:()=>(e=>{z(e),q(!0)})(e),className:"text-gray-400 hover:text-red-400 transition-colors flex items-center","data-testid":"delete-employee-".concat(e.id),children:[(0,mi.jsx)(Ol,{className:"h-4 w-4 mr-1"}),"Delete"]}),(0,mi.jsx)("button",{onClick:()=>oe(e),className:"text-gray-400 hover:text-blue-400 transition-colors","data-testid":"view-timesheet-".concat(e.id),children:"Timesheet"}),(0,mi.jsxs)("button",{onClick:()=>{M(e),Z({bank_account_bsb:e.bank_account_bsb||"",bank_account_number:e.bank_account_number||"",tax_file_number:e.tax_file_number||"",superannuation_fund:e.superannuation_fund||""}),$(!0)},className:"text-gray-400 hover:text-green-400 transition-colors flex items-center","data-testid":"bank-details-".concat(e.id),children:[(0,mi.jsx)(Cf,{className:"h-4 w-4 mr-1"}),"Bank"]})]})})]},e.id))})]})}):(0,mi.jsxs)("div",{className:"text-center py-12",children:[(0,mi.jsx)(Ff,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,mi.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-300",children:"No employees"}),(0,mi.jsx)("p",{className:"mt-1 text-sm text-gray-400",children:"Get started by adding your first employee."}),(0,mi.jsx)("div",{className:"mt-6",children:(0,mi.jsxs)("button",{onClick:le,className:"misty-button misty-button-primary",children:[(0,mi.jsx)(Ff,{className:"h-5 w-5 mr-2"}),"Add Employee"]})})]})]}),"archived"===r&&t("manage_payroll")&&(0,mi.jsxs)("div",{children:[(0,mi.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,mi.jsxs)("div",{children:[(0,mi.jsxs)("h3",{className:"text-xl font-semibold text-white flex items-center",children:[(0,mi.jsx)(Pl,{className:"h-6 w-6 mr-2 text-gray-400"}),"Archived Staff"]}),(0,mi.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"View and restore archived employees. All historic data is preserved."})]})}),c.length>0?(0,mi.jsx)("div",{className:"misty-table",children:(0,mi.jsxs)("table",{className:"w-full",children:[(0,mi.jsx)("thead",{children:(0,mi.jsxs)("tr",{children:[(0,mi.jsx)("th",{children:"Employee"}),(0,mi.jsx)("th",{children:"Position"}),(0,mi.jsx)("th",{children:"Department"}),(0,mi.jsx)("th",{children:"Hourly Rate"}),(0,mi.jsx)("th",{children:"Employment Type"}),(0,mi.jsx)("th",{children:"Actions"})]})}),(0,mi.jsx)("tbody",{children:c.map(e=>(0,mi.jsxs)("tr",{className:"opacity-75",children:[(0,mi.jsx)("td",{children:(0,mi.jsxs)("div",{children:[(0,mi.jsxs)("p",{className:"font-medium",children:[e.first_name," ",e.last_name]}),(0,mi.jsx)("p",{className:"text-sm text-gray-400",children:e.employee_number})]})}),(0,mi.jsx)("td",{children:e.position}),(0,mi.jsx)("td",{children:e.department||"N/A"}),(0,mi.jsxs)("td",{className:"font-medium text-yellow-400",children:[li(e.hourly_rate),"/hr"]}),(0,mi.jsx)("td",{children:(0,mi.jsx)("span",{className:"text-sm bg-gray-600 px-2 py-1 rounded capitalize",children:e.employment_type.replace("_"," ")})}),(0,mi.jsx)("td",{children:(0,mi.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,mi.jsxs)("button",{onClick:()=>(async e=>{try{const t=await fetch("/api/payroll/employees/".concat(e.id,"/restore"),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"}});if(t.ok)Bt.success("Employee restored successfully"),se(),ae();else{const e=await t.json();Bt.error(e.detail||"Failed to restore employee")}}catch(t){console.error("Failed to restore employee:",t),Bt.error("Failed to restore employee")}})(e),className:"text-gray-400 hover:text-green-400 transition-colors flex items-center",children:[(0,mi.jsx)(Gx,{className:"h-4 w-4 mr-1"}),"Restore"]}),(0,mi.jsx)("button",{onClick:()=>oe(e),className:"text-gray-400 hover:text-blue-400 transition-colors",children:"View History"}),(0,mi.jsxs)("button",{onClick:()=>(e=>{G(e),W(!0)})(e),className:"text-gray-400 hover:text-red-500 transition-colors flex items-center",children:[(0,mi.jsx)(Ol,{className:"h-4 w-4 mr-1"}),"Delete Forever"]})]})})]},e.id))})]})}):(0,mi.jsxs)("div",{className:"text-center py-12 bg-gray-800 rounded-lg",children:[(0,mi.jsx)(Pl,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,mi.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-300",children:"No archived employees"}),(0,mi.jsx)("p",{className:"mt-1 text-sm text-gray-400",children:"Archived staff members will appear here with their historic data preserved."})]})]}),"my-timesheet"===r&&(0,mi.jsxs)("div",{className:"misty-card p-6",children:[(0,mi.jsx)("h3",{className:"text-xl font-semibold text-white mb-4",children:"My Timesheet"}),(0,mi.jsx)("p",{className:"text-gray-400 mb-4",children:"Submit your weekly timesheet here"}),(0,mi.jsxs)("div",{className:"text-center py-8",children:[(0,mi.jsx)(_l,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),(0,mi.jsx)("p",{className:"text-white text-lg font-medium mb-2",children:"My Timesheet"}),(0,mi.jsx)("p",{className:"text-gray-400 mb-6",children:"Track your work hours and manage leave requests"}),(0,mi.jsx)("button",{className:"misty-button misty-button-primary",onClick:()=>L(!0),children:"Open Current Week Timesheet"})]})]}),"timesheets"===r&&t("manage_payroll")&&(0,mi.jsxs)("div",{className:"misty-card p-6",children:[(0,mi.jsx)("h3",{className:"text-xl font-semibold text-white mb-4",children:"Pending Timesheets"}),(0,mi.jsx)("p",{className:"text-gray-400 mb-4",children:"Review and approve employee timesheets"}),u.length>0?(0,mi.jsx)("div",{className:"misty-table",children:(0,mi.jsxs)("table",{className:"w-full",children:[(0,mi.jsx)("thead",{children:(0,mi.jsxs)("tr",{children:[(0,mi.jsx)("th",{children:"Employee"}),(0,mi.jsx)("th",{children:"Week"}),(0,mi.jsx)("th",{children:"Regular Hours"}),(0,mi.jsx)("th",{children:"Overtime Hours"}),(0,mi.jsx)("th",{children:"Total Hours"}),(0,mi.jsx)("th",{children:"Status"}),(0,mi.jsx)("th",{children:"Actions"})]})}),(0,mi.jsx)("tbody",{children:u.map(e=>{const t=e.total_regular_hours||0,a=e.total_overtime_hours||0,s=t+a;return(0,mi.jsxs)("tr",{children:[(0,mi.jsxs)("td",{children:[(0,mi.jsx)("p",{className:"font-medium",children:e.employee_name||"Unknown"}),(0,mi.jsx)("p",{className:"text-sm text-gray-400",children:e.employee_number||"N/A"})]}),(0,mi.jsxs)("td",{className:"text-sm",children:[(0,mi.jsx)("p",{children:e.week_starting||e.week_start}),(0,mi.jsxs)("p",{className:"text-gray-400",children:["to ",e.week_ending||e.week_end]})]}),(0,mi.jsxs)("td",{className:"font-medium text-green-400",children:[t.toFixed(1),"h"]}),(0,mi.jsxs)("td",{className:"font-medium text-yellow-400",children:[a.toFixed(1),"h"]}),(0,mi.jsxs)("td",{className:"font-bold text-white",children:[s.toFixed(1),"h"]}),(0,mi.jsx)("td",{children:(0,mi.jsx)("span",{className:"text-sm px-2 py-1 rounded bg-yellow-900 text-yellow-200",children:e.status||"submitted"})}),(0,mi.jsx)("td",{children:(0,mi.jsxs)("div",{className:"flex space-x-2",children:[(0,mi.jsxs)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to approve this timesheet and calculate pay?"))try{Y(e);const s=await fetch("".concat(Of,"/api/payroll/timesheets/").concat(e,"/approve"),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"}});if(s.ok){var t,a;const e=(await s.json()).data||{};Bt.success("Timesheet approved! Gross pay: $".concat((null===(t=e.gross_pay)||void 0===t?void 0:t.toFixed(2))||"0.00",", Net pay: $").concat((null===(a=e.net_pay)||void 0===a?void 0:a.toFixed(2))||"0.00")),ae()}else{const e=await s.json();Bt.error(e.detail||"Failed to approve timesheet")}}catch(s){console.error("Failed to approve timesheet:",s),Bt.error("Failed to approve timesheet")}finally{Y(null)}})(e.id),className:"text-green-400 hover:text-green-300 flex items-center text-sm",disabled:Q===e.id,children:[(0,mi.jsx)(tf,{className:"h-4 w-4 mr-1"}),Q===e.id?"Approving...":"Approve"]}),(0,mi.jsxs)("button",{onClick:()=>(e=>{M({id:e.employee_id}),L(!0)})(e),className:"text-blue-400 hover:text-blue-300 flex items-center text-sm",children:[(0,mi.jsx)(bo,{className:"h-4 w-4 mr-1"}),"View"]})]})})]},e.id)})})]})}):(0,mi.jsxs)("div",{className:"text-center py-12 bg-gray-800 rounded-lg",children:[(0,mi.jsx)(tf,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),(0,mi.jsx)("p",{className:"text-gray-300",children:"No pending timesheets"}),(0,mi.jsx)("p",{className:"text-sm text-gray-500",children:"Submitted timesheets will appear here for approval"})]})]}),"leave"===r&&t("manage_payroll")&&(0,mi.jsxs)("div",{children:[(0,mi.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsxs)("h3",{className:"text-xl font-semibold text-white flex items-center",children:[(0,mi.jsx)(vl,{className:"h-6 w-6 mr-2 text-yellow-400"}),"Leave Requests Management"]}),(0,mi.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"Create and manage employee leave requests"})]}),(0,mi.jsxs)("div",{className:"flex space-x-3",children:[(0,mi.jsxs)("button",{onClick:()=>{re(),C(!0)},className:"misty-button misty-button-secondary flex items-center",children:[(0,mi.jsx)(vl,{className:"h-4 w-4 mr-2"}),"Leave Calendar"]}),(0,mi.jsxs)("button",{onClick:()=>{(async()=>{try{const e=await fetch("".concat(Of,"/api/payroll/leave-requests/archived"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(e.ok){const t=await e.json();b(t.data||[])}}catch(e){console.error("Failed to load archived leave requests:",e)}})(),k(!0)},className:"misty-button misty-button-secondary flex items-center",children:[(0,mi.jsx)(Pl,{className:"h-4 w-4 mr-2"}),"Archived Leave"]}),(0,mi.jsxs)("button",{onClick:()=>{ne(),K({employee_id:"",leave_type:"annual_leave",start_date:"",end_date:"",hours_requested:"",reason:"",approver_id:""}),F(!0)},className:"misty-button misty-button-primary flex items-center",children:[(0,mi.jsx)(Ff,{className:"h-4 w-4 mr-2"}),"Add Leave Request"]})]})]}),f.length>0?(0,mi.jsx)("div",{className:"misty-table",children:(0,mi.jsxs)("table",{className:"w-full",children:[(0,mi.jsx)("thead",{children:(0,mi.jsxs)("tr",{children:[(0,mi.jsx)("th",{children:"Employee"}),(0,mi.jsx)("th",{children:"Leave Type"}),(0,mi.jsx)("th",{children:"Dates"}),(0,mi.jsx)("th",{children:"Hours"}),(0,mi.jsx)("th",{children:"Reason"}),(0,mi.jsx)("th",{children:"Status"}),(0,mi.jsx)("th",{children:"Actions"})]})}),(0,mi.jsx)("tbody",{children:f.map(e=>(0,mi.jsxs)("tr",{children:[(0,mi.jsx)("td",{children:(0,mi.jsx)("p",{className:"font-medium",children:e.employee_name})}),(0,mi.jsx)("td",{children:(0,mi.jsx)("span",{className:"text-sm bg-blue-900 px-2 py-1 rounded capitalize",children:e.leave_type.replace("_"," ")})}),(0,mi.jsxs)("td",{className:"text-sm",children:[(0,mi.jsx)("p",{children:new Date(e.start_date).toLocaleDateString()}),(0,mi.jsxs)("p",{className:"text-gray-400",children:["to ",new Date(e.end_date).toLocaleDateString()]})]}),(0,mi.jsxs)("td",{className:"font-medium text-yellow-400",children:[e.hours_requested,"h"]}),(0,mi.jsx)("td",{className:"text-sm text-gray-400",children:e.reason||"No reason provided"}),(0,mi.jsx)("td",{children:(0,mi.jsx)("span",{className:"text-sm px-2 py-1 rounded ".concat("pending"===e.status?"bg-yellow-900 text-yellow-200":"approved"===e.status?"bg-green-900 text-green-200":"bg-red-900 text-red-200"),children:e.status})}),(0,mi.jsx)("td",{children:"pending"===e.status&&(0,mi.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,mi.jsx)("button",{onClick:()=>(async e=>{try{const t=await fetch("/api/payroll/leave-requests/".concat(e,"/approve"),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"}});if(t.ok)Bt.success("Leave request approved"),ne(),ae();else{const e=await t.json();Bt.error(e.detail||"Failed to approve leave request")}}catch(t){console.error("Failed to approve leave request:",t),Bt.error("Failed to approve leave request")}})(e.id),className:"text-green-400 hover:text-green-300 transition-colors text-sm",children:"Approve"}),(0,mi.jsx)("button",{onClick:()=>{const t=prompt("Reason for rejection:");t&&(async(e,t)=>{try{const a=await fetch("/api/payroll/leave-requests/".concat(e,"/reject?rejection_reason=").concat(encodeURIComponent(t)),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"}});if(a.ok)Bt.success("Leave request rejected"),ne(),ae();else{const e=await a.json();Bt.error(e.detail||"Failed to reject leave request")}}catch(a){console.error("Failed to reject leave request:",a),Bt.error("Failed to reject leave request")}})(e.id,t)},className:"text-red-400 hover:text-red-300 transition-colors text-sm",children:"Reject"})]})})]},e.id))})]})}):(0,mi.jsxs)("div",{className:"text-center py-12 bg-gray-800 rounded-lg",children:[(0,mi.jsx)(vl,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,mi.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-300",children:"No leave requests"}),(0,mi.jsx)("p",{className:"mt-1 text-sm text-gray-400",children:'Click "Add Leave Request" to create a new leave request for an employee.'})]})]}),"reports"===r&&t("manage_payroll")&&(0,mi.jsx)(Tf,{})]})]}),P&&(0,mi.jsx)("div",{className:"modal-overlay",children:(0,mi.jsx)("div",{className:"modal-content max-w-4xl",children:(0,mi.jsxs)("div",{className:"p-6",children:[(0,mi.jsx)("h2",{className:"text-xl font-bold text-white mb-4",children:O?"Edit Employee":"Add New Employee"}),(0,mi.jsx)("p",{className:"text-gray-400 mb-4",children:"Employee form will be implemented here"}),(0,mi.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,mi.jsx)("button",{onClick:()=>A(!1),className:"misty-button misty-button-secondary",children:"Cancel"}),(0,mi.jsx)("button",{className:"misty-button misty-button-primary",children:O?"Update":"Create"})]})]})})}),T&&(0,mi.jsx)("div",{className:"modal-overlay",onClick:e=>e.target===e.currentTarget&&L(!1),children:(0,mi.jsx)("div",{className:"modal-content max-w-6xl max-h-[90vh] overflow-y-auto",children:(0,mi.jsx)(Nf,{employeeId:(null===O||void 0===O?void 0:O.id)||(null===e||void 0===e?void 0:e.id)||(null===e||void 0===e?void 0:e.user_id)||(null===e||void 0===e?void 0:e.sub),onClose:()=>L(!1),isManager:"admin"===(null===e||void 0===e?void 0:e.role)||"manager"===(null===e||void 0===e?void 0:e.role)})})}),I&&(0,mi.jsx)("div",{className:"modal-overlay",onClick:e=>e.target===e.currentTarget&&q(!1),children:(0,mi.jsx)("div",{className:"modal-content max-w-md",children:(0,mi.jsxs)("div",{className:"p-6",children:[(0,mi.jsxs)("div",{className:"flex items-center mb-4",children:[(0,mi.jsx)("div",{className:"flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-900 bg-opacity-30",children:(0,mi.jsx)(Ol,{className:"h-6 w-6 text-red-400"})}),(0,mi.jsxs)("div",{className:"ml-4",children:[(0,mi.jsx)("h3",{className:"text-lg font-medium text-white",children:"Archive Employee"}),(0,mi.jsx)("p",{className:"text-sm text-gray-400",children:"This action can be reversed"})]})]}),(0,mi.jsxs)("div",{className:"mb-6",children:[(0,mi.jsxs)("p",{className:"text-gray-300 mb-2",children:["Are you sure you want to archive ",(0,mi.jsxs)("span",{className:"font-semibold text-white",children:[null===B||void 0===B?void 0:B.first_name," ",null===B||void 0===B?void 0:B.last_name]}),"?"]}),(0,mi.jsxs)("div",{className:"bg-blue-900 bg-opacity-30 border border-blue-500 border-opacity-30 rounded-lg p-3 mt-3",children:[(0,mi.jsxs)("p",{className:"text-sm text-blue-200",children:[(0,mi.jsx)(tf,{className:"h-4 w-4 inline mr-1"}),"All historic data will be preserved including:"]}),(0,mi.jsxs)("ul",{className:"text-xs text-blue-300 mt-2 ml-6 space-y-1",children:[(0,mi.jsx)("li",{children:"\u2022 Timesheets and attendance records"}),(0,mi.jsx)("li",{children:"\u2022 Leave requests and balances"}),(0,mi.jsx)("li",{children:"\u2022 Payroll history"}),(0,mi.jsx)("li",{children:"\u2022 Employment details"})]}),(0,mi.jsx)("p",{className:"text-xs text-blue-300 mt-2",children:'You can restore this employee from the "Archived Staff" tab at any time.'})]})]}),(0,mi.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,mi.jsx)("button",{onClick:()=>{q(!1),z(null)},className:"misty-button misty-button-secondary",children:"Cancel"}),(0,mi.jsxs)("button",{onClick:async()=>{if(B)try{const e=await fetch("/api/payroll/employees/".concat(B.id),{method:"DELETE",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"}});if(e.ok)Bt.success("Employee archived successfully. Data preserved for historic review."),ae(),q(!1),z(null);else{const t=await e.json();Bt.error(t.detail||"Failed to archive employee")}}catch(e){console.error("Failed to archive employee:",e),Bt.error("Failed to archive employee")}},className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors duration-200 flex items-center",children:[(0,mi.jsx)(Ol,{className:"h-4 w-4 mr-2"}),"Archive Employee"]})]})]})})}),R&&(0,mi.jsx)("div",{className:"modal-overlay",onClick:e=>e.target===e.currentTarget&&F(!1),children:(0,mi.jsx)("div",{className:"modal-content max-w-2xl",children:(0,mi.jsxs)("div",{className:"p-6",children:[(0,mi.jsxs)("h3",{className:"text-xl font-semibold text-white mb-6 flex items-center",children:[(0,mi.jsx)(vl,{className:"h-6 w-6 mr-2 text-yellow-400"}),"Add Leave Request"]}),(0,mi.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e={employee_id:X.employee_id,leave_type:X.leave_type,start_date:X.start_date,end_date:X.end_date,hours_requested:parseFloat(X.hours_requested),reason:X.reason||null,approver_id:X.approver_id||null},t=await fetch("".concat(Of,"/api/payroll/leave-requests"),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"},body:JSON.stringify(e)});if(t.ok)Bt.success("Leave request created successfully"),F(!1),ne(),ae();else{const e=await t.json();if(e.detail)if(Array.isArray(e.detail)){const t=e.detail.map(e=>e.msg||JSON.stringify(e)).join(", ");Bt.error(t)}else"string"===typeof e.detail?Bt.error(e.detail):Bt.error("Validation error occurred");else Bt.error("Failed to create leave request")}}catch(t){console.error("Failed to create leave request:",t),Bt.error("Failed to create leave request")}},className:"space-y-4",children:[(0,mi.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsxs)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Employee ",(0,mi.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,mi.jsxs)("select",{value:X.employee_id,onChange:e=>K(m(m({},X),{},{employee_id:e.target.value})),className:"misty-select w-full",required:!0,children:[(0,mi.jsx)("option",{value:"",children:"Select employee..."}),l.map(e=>(0,mi.jsxs)("option",{value:e.id,children:[e.first_name," ",e.last_name," - ",e.employee_number]},e.id))]})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsxs)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Leave Type ",(0,mi.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,mi.jsxs)("select",{value:X.leave_type,onChange:e=>K(m(m({},X),{},{leave_type:e.target.value})),className:"misty-select w-full",required:!0,children:[(0,mi.jsx)("option",{value:"annual_leave",children:"Annual Leave"}),(0,mi.jsx)("option",{value:"sick_leave",children:"Sick Leave"}),(0,mi.jsx)("option",{value:"personal_leave",children:"Personal Leave"}),(0,mi.jsx)("option",{value:"unpaid_leave",children:"Unpaid Leave"})]})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsxs)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Start Date ",(0,mi.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,mi.jsx)("input",{type:"date",value:X.start_date,onChange:e=>te("start_date",e.target.value),className:"misty-input w-full",required:!0})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsxs)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["End Date ",(0,mi.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,mi.jsx)("input",{type:"date",value:X.end_date,onChange:e=>te("end_date",e.target.value),className:"misty-input w-full",min:X.start_date,required:!0})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsxs)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Hours Requested ",(0,mi.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,mi.jsx)("input",{type:"number",step:"0.5",min:"0",value:X.hours_requested,onChange:e=>K(m(m({},X),{},{hours_requested:e.target.value})),className:"misty-input w-full",placeholder:"Auto-calculated from dates",required:!0}),X.start_date&&X.end_date&&(0,mi.jsxs)("p",{className:"text-xs text-blue-400 mt-1",children:["\u2139\ufe0f ",ee(X.start_date,X.end_date)," business days (excludes weekends) \xd7 8 hours = ",X.hours_requested||0," hours"]}),(0,mi.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"You can manually adjust this value if needed"})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsxs)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Assign Approver ",(0,mi.jsx)("span",{className:"text-gray-500 text-xs",children:"(Optional)"})]}),(0,mi.jsxs)("select",{value:X.approver_id,onChange:e=>K(m(m({},X),{},{approver_id:e.target.value})),className:"misty-select w-full",children:[(0,mi.jsx)("option",{value:"",children:"No specific approver"}),l.filter(e=>e.position&&(e.position.toLowerCase().includes("manager")||e.position.toLowerCase().includes("admin")||e.position.toLowerCase().includes("supervisor"))).map(e=>(0,mi.jsxs)("option",{value:e.id,children:[e.first_name," ",e.last_name," - ",e.position]},e.id))]}),(0,mi.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Leave request will appear in this person's approval queue"})]})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsxs)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Reason ",(0,mi.jsx)("span",{className:"text-gray-500 text-xs",children:"(Optional)"})]}),(0,mi.jsx)("textarea",{value:X.reason,onChange:e=>K(m(m({},X),{},{reason:e.target.value})),className:"misty-textarea w-full",rows:3,placeholder:"Enter reason for leave request..."})]}),(0,mi.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-600",children:[(0,mi.jsx)("button",{type:"button",onClick:()=>F(!1),className:"misty-button misty-button-secondary",children:"Cancel"}),(0,mi.jsx)("button",{type:"submit",className:"misty-button misty-button-primary",children:"Create Leave Request"})]})]})]})})}),V&&(0,mi.jsx)("div",{className:"modal-overlay",onClick:e=>e.target===e.currentTarget&&$(!1),children:(0,mi.jsx)("div",{className:"modal-content max-w-lg",children:(0,mi.jsxs)("div",{className:"p-6",children:[(0,mi.jsxs)("h3",{className:"text-xl font-semibold text-white mb-4 flex items-center",children:[(0,mi.jsx)(Cf,{className:"h-6 w-6 mr-2 text-green-400"}),"Update Bank Details"]}),(0,mi.jsxs)("p",{className:"text-sm text-gray-400 mb-6",children:["Employee: ",null===O||void 0===O?void 0:O.first_name," ",null===O||void 0===O?void 0:O.last_name]}),(0,mi.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e=await fetch("/api/payroll/employees/".concat(O.id,"/bank-details?bank_account_bsb=").concat(encodeURIComponent(J.bank_account_bsb),"&bank_account_number=").concat(encodeURIComponent(J.bank_account_number),"&tax_file_number=").concat(encodeURIComponent(J.tax_file_number||""),"&superannuation_fund=").concat(encodeURIComponent(J.superannuation_fund||"")),{method:"PUT",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(e.ok)Bt.success("Bank details updated successfully"),$(!1),ae();else{const t=await e.json();Bt.error(t.detail||"Failed to update bank details")}}catch(t){console.error("Failed to update bank details:",t),Bt.error("Failed to update bank details")}},className:"space-y-4",children:[(0,mi.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsxs)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["BSB ",(0,mi.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,mi.jsx)("input",{type:"text",value:J.bank_account_bsb,onChange:e=>Z(m(m({},J),{},{bank_account_bsb:e.target.value})),className:"misty-input w-full font-mono",placeholder:"123-456",required:!0})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsxs)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Account Number ",(0,mi.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,mi.jsx)("input",{type:"text",value:J.bank_account_number,onChange:e=>Z(m(m({},J),{},{bank_account_number:e.target.value})),className:"misty-input w-full font-mono",placeholder:"12345678",required:!0})]})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Tax File Number (TFN)"}),(0,mi.jsx)("input",{type:"text",value:J.tax_file_number,onChange:e=>Z(m(m({},J),{},{tax_file_number:e.target.value})),className:"misty-input w-full font-mono",placeholder:"123 456 789"})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Superannuation Fund"}),(0,mi.jsx)("input",{type:"text",value:J.superannuation_fund,onChange:e=>Z(m(m({},J),{},{superannuation_fund:e.target.value})),className:"misty-input w-full",placeholder:"e.g., AustralianSuper"})]}),(0,mi.jsx)("div",{className:"bg-blue-900 bg-opacity-20 border border-blue-500 border-opacity-30 rounded-lg p-3",children:(0,mi.jsxs)("p",{className:"text-xs text-blue-200",children:[(0,mi.jsx)(tf,{className:"h-4 w-4 inline mr-1"}),"This information is securely stored and used for payroll processing only."]})}),(0,mi.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-600",children:[(0,mi.jsx)("button",{type:"button",onClick:()=>$(!1),className:"misty-button misty-button-secondary",children:"Cancel"}),(0,mi.jsx)("button",{type:"submit",className:"misty-button misty-button-primary",children:"Update Details"})]})]})]})})}),N&&(0,mi.jsx)("div",{className:"modal-overlay",onClick:e=>e.target===e.currentTarget&&k(!1),children:(0,mi.jsx)("div",{className:"modal-content max-w-6xl max-h-[90vh] overflow-y-auto",children:(0,mi.jsxs)("div",{className:"p-6",children:[(0,mi.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,mi.jsxs)("h3",{className:"text-xl font-semibold text-white flex items-center",children:[(0,mi.jsx)(Pl,{className:"h-6 w-6 mr-2 text-gray-400"}),"Archived Leave Requests"]}),(0,mi.jsx)("button",{onClick:()=>k(!1),className:"text-gray-400 hover:text-white",children:"\u2715"})]}),(0,mi.jsx)("p",{className:"text-sm text-gray-400 mb-6",children:"Viewing all approved and declined leave requests"}),y.length>0?(0,mi.jsx)("div",{className:"misty-table",children:(0,mi.jsxs)("table",{className:"w-full",children:[(0,mi.jsx)("thead",{children:(0,mi.jsxs)("tr",{children:[(0,mi.jsx)("th",{children:"Employee"}),(0,mi.jsx)("th",{children:"Leave Type"}),(0,mi.jsx)("th",{children:"Dates"}),(0,mi.jsx)("th",{children:"Hours"}),(0,mi.jsx)("th",{children:"Status"}),(0,mi.jsx)("th",{children:"Approver"}),(0,mi.jsx)("th",{children:"Reason"})]})}),(0,mi.jsx)("tbody",{children:y.map(e=>(0,mi.jsxs)("tr",{children:[(0,mi.jsx)("td",{children:(0,mi.jsx)("p",{className:"font-medium",children:e.employee_name})}),(0,mi.jsx)("td",{children:(0,mi.jsx)("span",{className:"text-sm bg-blue-900 px-2 py-1 rounded capitalize",children:e.leave_type.replace("_"," ")})}),(0,mi.jsxs)("td",{className:"text-sm",children:[(0,mi.jsx)("p",{children:new Date(e.start_date).toLocaleDateString()}),(0,mi.jsxs)("p",{className:"text-gray-400",children:["to ",new Date(e.end_date).toLocaleDateString()]})]}),(0,mi.jsxs)("td",{className:"font-medium text-yellow-400",children:[e.hours_requested,"h"]}),(0,mi.jsx)("td",{children:(0,mi.jsx)("span",{className:"text-sm px-2 py-1 rounded ".concat("approved"===e.status?"bg-green-900 text-green-200":"bg-red-900 text-red-200"),children:e.status})}),(0,mi.jsx)("td",{className:"text-sm text-gray-400",children:e.approver_name||"N/A"}),(0,mi.jsx)("td",{className:"text-sm text-gray-400 max-w-xs truncate",children:e.reason||"No reason provided"})]},e.id))})]})}):(0,mi.jsxs)("div",{className:"text-center py-12 bg-gray-800 rounded-lg",children:[(0,mi.jsx)(Pl,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,mi.jsx)("p",{className:"mt-2 text-sm text-gray-300",children:"No archived leave requests"})]})]})})}),S&&(0,mi.jsx)("div",{className:"modal-overlay",onClick:e=>e.target===e.currentTarget&&C(!1),children:(0,mi.jsx)("div",{className:"modal-content max-w-6xl max-h-[90vh] overflow-y-auto",children:(0,mi.jsxs)("div",{className:"p-6",children:[(0,mi.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,mi.jsxs)("h3",{className:"text-xl font-semibold text-white flex items-center",children:[(0,mi.jsx)(vl,{className:"h-6 w-6 mr-2 text-blue-400"}),"Upcoming Approved Leave Calendar"]}),(0,mi.jsx)("button",{onClick:()=>C(!1),className:"text-gray-400 hover:text-white",children:"\u2715"})]}),(0,mi.jsx)("p",{className:"text-sm text-gray-400 mb-6",children:"Showing all upcoming approved leave from today onwards"}),v.length>0?(0,mi.jsx)("div",{className:"space-y-4",children:v.map(e=>{const t=new Date(e.start_date),a=new Date(e.end_date),s=Math.ceil((t-new Date)/864e5);return(0,mi.jsx)("div",{className:"bg-gray-800 rounded-lg p-4 border-l-4 border-blue-500",children:(0,mi.jsxs)("div",{className:"flex items-center justify-between",children:[(0,mi.jsxs)("div",{className:"flex-1",children:[(0,mi.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,mi.jsx)("h4",{className:"text-lg font-semibold text-white",children:e.employee_name}),(0,mi.jsx)("span",{className:"text-sm bg-blue-900 px-2 py-1 rounded capitalize",children:e.leave_type.replace("_"," ")}),s<=7&&(0,mi.jsx)("span",{className:"text-xs bg-yellow-900 text-yellow-200 px-2 py-1 rounded",children:0===s?"Today":1===s?"Tomorrow":"In ".concat(s," days")})]}),(0,mi.jsxs)("div",{className:"text-sm text-gray-400",children:[(0,mi.jsxs)("p",{children:[e.employee_number," - ",e.department]}),(0,mi.jsxs)("p",{className:"mt-1",children:[(0,mi.jsx)("span",{className:"font-medium text-white",children:t.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"})}),(0,mi.jsx)("span",{className:"mx-2",children:"\u2192"}),(0,mi.jsx)("span",{className:"font-medium text-white",children:a.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"})})]}),(0,mi.jsxs)("p",{className:"mt-1",children:[e.hours_requested," hours"]}),e.reason&&(0,mi.jsxs)("p",{className:"mt-2 text-xs italic",children:['"',e.reason,'"']})]})]}),(0,mi.jsxs)("div",{className:"text-right flex flex-col items-end",children:[(0,mi.jsx)("div",{className:"text-3xl font-bold text-blue-400 mb-2",children:t.getDate()}),(0,mi.jsx)("div",{className:"text-sm text-gray-400 mb-3",children:t.toLocaleDateString("en-US",{month:"short"})}),(0,mi.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to cancel this approved leave? The hours will be restored to the employee."))try{const t=await fetch("/api/payroll/leave-requests/".concat(e,"/cancel"),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"}});if(t.ok){const e=await t.json();Bt.success(e.message||"Leave cancelled and hours restored"),re(),ae(),ne()}else{const e=await t.json();Bt.error(e.detail||"Failed to cancel leave")}}catch(t){console.error("Failed to cancel leave:",t),Bt.error("Failed to cancel leave")}})(e.id),className:"text-xs text-red-400 hover:text-red-300 transition-colors",children:"Cancel Leave"})]})]})},e.id)})}):(0,mi.jsxs)("div",{className:"text-center py-12 bg-gray-800 rounded-lg",children:[(0,mi.jsx)(vl,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,mi.jsx)("p",{className:"mt-2 text-sm text-gray-300",children:"No upcoming approved leave"})]})]})})}),U&&(0,mi.jsx)("div",{className:"modal-overlay",onClick:e=>e.target===e.currentTarget&&W(!1),children:(0,mi.jsx)("div",{className:"modal-content max-w-md",children:(0,mi.jsxs)("div",{className:"p-6",children:[(0,mi.jsxs)("div",{className:"flex items-center mb-4",children:[(0,mi.jsx)("div",{className:"flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-900",children:(0,mi.jsx)(gl,{className:"h-7 w-7 text-red-300"})}),(0,mi.jsxs)("div",{className:"ml-4",children:[(0,mi.jsx)("h3",{className:"text-lg font-medium text-white",children:"Permanent Delete"}),(0,mi.jsx)("p",{className:"text-sm text-red-400 font-semibold",children:"This action CANNOT be reversed!"})]})]}),(0,mi.jsxs)("div",{className:"mb-6",children:[(0,mi.jsxs)("p",{className:"text-gray-300 mb-3",children:["Are you absolutely sure you want to ",(0,mi.jsx)("span",{className:"text-red-400 font-semibold",children:"permanently delete"})," all data for"," ",(0,mi.jsxs)("span",{className:"font-semibold text-white",children:[null===H||void 0===H?void 0:H.first_name," ",null===H||void 0===H?void 0:H.last_name]}),"?"]}),(0,mi.jsxs)("div",{className:"bg-red-900 bg-opacity-30 border border-red-500 rounded-lg p-4 mb-3",children:[(0,mi.jsxs)("p",{className:"text-sm text-red-200 font-semibold mb-2 flex items-center",children:[(0,mi.jsx)(gl,{className:"h-5 w-5 inline mr-2"}),"WARNING: All data will be permanently deleted:"]}),(0,mi.jsxs)("ul",{className:"text-xs text-red-300 ml-6 space-y-1",children:[(0,mi.jsx)("li",{children:"\u2022 Employee profile and personal information"}),(0,mi.jsx)("li",{children:"\u2022 All timesheets and attendance records"}),(0,mi.jsx)("li",{children:"\u2022 All leave requests and history"}),(0,mi.jsx)("li",{children:"\u2022 Complete payroll history"}),(0,mi.jsx)("li",{children:"\u2022 All employment records"})]})]}),(0,mi.jsx)("div",{className:"bg-gray-800 border border-gray-600 rounded-lg p-3",children:(0,mi.jsxs)("p",{className:"text-xs text-gray-300",children:[(0,mi.jsx)("strong",{className:"text-white",children:"Note:"})," This action should only be used for compliance reasons or when absolutely certain data should not be retained. Consider archiving instead if you may need this information in the future."]})})]}),(0,mi.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,mi.jsx)("button",{onClick:()=>{W(!1),G(null)},className:"misty-button misty-button-secondary",children:"Cancel"}),(0,mi.jsxs)("button",{onClick:async()=>{if(H)try{const e=await fetch("/api/payroll/employees/".concat(H.id,"/permanent"),{method:"DELETE",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"}});if(e.ok)Bt.success("Employee and all associated data permanently deleted"),se(),W(!1),G(null);else{const t=await e.json();Bt.error(t.detail||"Failed to permanently delete employee")}}catch(e){console.error("Failed to permanently delete employee:",e),Bt.error("Failed to permanently delete employee")}},className:"px-4 py-2 bg-red-700 text-white rounded-md hover:bg-red-800 transition-colors duration-200 flex items-center font-semibold",children:[(0,mi.jsx)(Ol,{className:"h-4 w-4 mr-2"}),"Delete Permanently"]})]})]})})})]})},If=()=>{const[e,t]=(0,n.useState)("live-jobs"),[a,s]=(0,n.useState)([]),[r,i]=(0,n.useState)([]),[l,o]=(0,n.useState)([]),[c,d]=(0,n.useState)(!0),[u,p]=(0,n.useState)(""),[h,x]=(0,n.useState)(null),[f,g]=(0,n.useState)(!1),[y,b]=(0,n.useState)(!1),[v,j]=(0,n.useState)("full"),[w,_]=(0,n.useState)([]),[N,k]=(0,n.useState)((new Date).getMonth()+1),[S,C]=(0,n.useState)((new Date).getFullYear()),[E,D]=(0,n.useState)(!1),[P,A]=(0,n.useState)(!1);(0,n.useEffect)(()=>{L(),T()},[e]);const T=async()=>{try{A(!0);const e=await Ar();D(e.data.connected)}catch(e){console.error("Failed to check Xero status:",e),D(!1)}finally{A(!1)}},L=async()=>{d(!0);try{if("live-jobs"===e){const e=await Sr();s(e.data.data||[])}else if("accounting-transactions"===e){const e=await Dr();o(e.data.data||[])}else if("archived"===e){const e=await Cr(N,S);i(e.data.data||[])}}catch(t){console.error("Failed to load data:",t),Bt.error("Failed to load data")}finally{d(!1)}},R=async()=>{if(h)try{let e;if("partial"===v){const t=w.filter(e=>e.invoice_quantity>0);if(0===t.length)return void Bt.error("Please select at least one item to invoice");const a=t.reduce((e,t)=>e+t.unit_price*t.invoice_quantity,0),s=.1*a,n=a+s;e={invoice_type:v,items:t.map(e=>m(m({},e),{},{quantity:e.invoice_quantity})),subtotal:a,gst:s,total_amount:n,due_date:new Date(Date.now()+2592e6).toISOString().split("T")[0]}}else e={invoice_type:v,items:h.items,subtotal:h.subtotal,gst:h.gst,total_amount:h.total_amount,due_date:new Date(Date.now()+2592e6).toISOString().split("T")[0]};const t=await Er(h.id,e);Bt.success((0,mi.jsxs)("div",{children:[(0,mi.jsxs)("p",{children:["\ud83d\udcc4 Invoice ",t.data.invoice_number," generated successfully!"]}),(0,mi.jsx)("p",{className:"text-sm text-gray-300",children:"Job moved to Accounting Transactions tab"}),E&&(0,mi.jsx)("p",{className:"text-sm text-green-300",children:"\u2705 Xero draft created automatically"}),(0,mi.jsxs)("div",{className:"mt-2 space-x-2",children:[(0,mi.jsx)("button",{onClick:()=>O(h.id,h.order_number),className:"bg-yellow-600 hover:bg-yellow-700 px-3 py-1 rounded text-xs text-white",children:"\ud83d\udcc4 Invoice PDF"}),(0,mi.jsx)("button",{onClick:()=>M(h.id,h.order_number),className:"bg-green-600 hover:bg-green-700 px-3 py-1 rounded text-xs text-white",children:"\ud83d\udce6 Packing Slip"})]})]}),{duration:8e3}),g(!1),b(!1),x(null),L()}catch(e){console.error("Failed to generate invoice:",e),Bt.error("Failed to generate invoice")}},F=e=>{const t=[];return t.push(["ContactName","EmailAddress","POAddressLine1","POAddressLine2","POAddressLine3","POAddressLine4","POCity","PORegion","POPostalCode","POCountry","InvoiceNumber","Reference","InvoiceDate","DueDate","InventoryItemCode","Description","Quantity","UnitAmount","Discount","AccountCode","TaxType","TrackingName1","TrackingOption1","TrackingName2","TrackingOption2","Currency","BrandingTheme"].join(",")),e.forEach(e=>{const a=e.client_name||"Unknown Client",s=e.client_email||"",n=e.invoice_number||"INV-".concat(e.order_number),r=e.invoice_date?new Date(e.invoice_date).toLocaleDateString("en-AU"):(new Date).toLocaleDateString("en-AU"),i=(e.invoice_date?new Date(new Date(e.invoice_date).getTime()+2592e6):new Date(Date.now()+2592e6)).toLocaleDateString("en-AU"),l=e.items||[];0===l.length&&l.push({description:"Services for Order ".concat(e.order_number),quantity:1,unit_price:e.total_amount||0}),l.forEach(l=>{const o="".concat(l.product_name||l.description||"Product"," - ").concat(l.specifications||"").replace(" - "," ").trim(),c=['"'.concat(a,'"'),'"'.concat(s,'"'),'""','""','""','""','""','""','""','""','"'.concat(n,'"'),'"'.concat(e.order_number,'"'),'"'.concat(r,'"'),'"'.concat(i,'"'),'"'.concat(l.product_code||"",'"'),'"'.concat(o,'"'),'"'.concat(l.quantity||1,'"'),'"'.concat(l.unit_price||l.price||0,'"'),'"'.concat(l.discount_percent||"",'"'),'"200"','"OUTPUT"','""','""','""','""','"AUD"','""'];t.push(c.join(","))})}),t.join("\n")},O=async(e,t)=>{try{const a=localStorage.getItem("token"),s=await fetch("".concat("https://manufactor-2.preview.emergentagent.com","/api/documents/invoice/").concat(e),{method:"GET",headers:{Authorization:"Bearer ".concat(a)}});if(!s.ok)throw new Error("HTTP error! status: ".concat(s.status));const n=await s.blob();if(console.log("Invoice blob size:",n.size,"type:",n.type),0===n.size)throw new Error("Received empty PDF");const r=window.URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download="invoice_".concat(t,".pdf"),document.body.appendChild(i),i.click(),document.body.removeChild(i),setTimeout(()=>{window.open(r,"_blank"),window.URL.revokeObjectURL(r),Bt.success("\ud83d\udcc4 Invoice ".concat(t," ready for download"))},500)}catch(a){console.error("Failed to download invoice:",a),Bt.error("Failed to download invoice: ".concat(a.message))}},M=async(e,t)=>{try{const a=localStorage.getItem("token"),s=await fetch("".concat("https://manufactor-2.preview.emergentagent.com","/api/documents/packing-list/").concat(e),{method:"GET",headers:{Authorization:"Bearer ".concat(a)}});if(!s.ok)throw new Error("HTTP error! status: ".concat(s.status));const n=await s.blob();if(console.log("Packing slip blob size:",n.size,"type:",n.type),0===n.size)throw new Error("Received empty PDF");const r=window.URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download="packing_slip_".concat(t,".pdf"),document.body.appendChild(i),i.click(),document.body.removeChild(i),setTimeout(()=>{window.open(r,"_blank"),window.URL.revokeObjectURL(r),Bt.success("\ud83d\udce6 Packing Slip ".concat(t," ready for download"))},500)}catch(a){console.error("Failed to download packing slip:",a),Bt.error("Failed to download packing slip: ".concat(a.message))}},I=a.filter(e=>{var t,a;return(null===(t=e.order_number)||void 0===t?void 0:t.toLowerCase().includes(u.toLowerCase()))||(null===(a=e.client_name)||void 0===a?void 0:a.toLowerCase().includes(u.toLowerCase()))}),q=r.filter(e=>{var t,a;return(null===(t=e.order_number)||void 0===t?void 0:t.toLowerCase().includes(u.toLowerCase()))||(null===(a=e.client_name)||void 0===a?void 0:a.toLowerCase().includes(u.toLowerCase()))}),B=e=>new Intl.NumberFormat("en-AU",{style:"currency",currency:"AUD"}).format(e),z=e=>new Intl.DateTimeFormat("en-AU").format(new Date(e));return c?(0,mi.jsx)(hl,{children:(0,mi.jsx)("div",{className:"p-8",children:(0,mi.jsxs)("div",{className:"animate-pulse",children:[(0,mi.jsx)("div",{className:"h-8 bg-gray-700 rounded w-1/4 mb-8"}),(0,mi.jsx)("div",{className:"space-y-4",children:[...Array(5)].map((e,t)=>(0,mi.jsx)("div",{className:"h-16 bg-gray-700 rounded"},t))})]})})}):(0,mi.jsx)(hl,{children:(0,mi.jsxs)("div",{className:"p-8",children:[(0,mi.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"Invoicing & Job Closure"}),(0,mi.jsx)("p",{className:"text-gray-400",children:"Generate invoices and manage completed jobs"})]}),(0,mi.jsx)("div",{className:"flex items-center space-x-4",children:(0,mi.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,mi.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,mi.jsx)("div",{className:"h-3 w-3 rounded-full ".concat(E?"bg-green-400":"bg-red-400")}),(0,mi.jsxs)("span",{className:"text-sm text-gray-300",children:["Xero ",E?"Connected":"Disconnected"]})]}),E?(0,mi.jsx)("button",{onClick:async()=>{try{await Rr(),D(!1),Bt.success("Disconnected from Xero")}catch(e){console.error("Failed to disconnect from Xero:",e),Bt.error("Failed to disconnect from Xero")}},className:"misty-button misty-button-danger text-xs px-3 py-1",children:"Disconnect Xero"}):(0,mi.jsx)("button",{onClick:async()=>{try{const e=await Tr(),{auth_url:t}=e.data,a=window.open(t,"xero-auth","width=600,height=700,scrollbars=yes,resizable=yes"),s=async e=>{if("xero-auth-success"===e.data.type){window.removeEventListener("message",s);try{await Lr({code:e.data.code,state:e.data.state});D(!0),Bt.success("Successfully connected to Xero!"),T()}catch(t){console.error("Failed to complete Xero connection:",t),Bt.error("Failed to complete Xero connection: ".concat(t.message))}}else"xero-auth-error"===e.data.type&&(window.removeEventListener("message",s),Bt.error("Xero connection failed: ".concat(e.data.error)))};window.addEventListener("message",s);const n=setInterval(()=>{a.closed&&(clearInterval(n),window.removeEventListener("message",s),setTimeout(()=>{T()},1e3))},1e3)}catch(e){console.error("Failed to initiate Xero connection:",e),Bt.error("Failed to connect to Xero")}},disabled:P,className:"misty-button misty-button-primary text-xs px-3 py-1",children:P?"Connecting...":"Connect to Xero"}),(0,mi.jsxs)("button",{onClick:async()=>{try{try{const e=await fetch("".concat("https://manufactor-2.preview.emergentagent.com","/api/invoicing/export-drafted-csv"),{method:"GET",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"}});if(e.ok){const t=await e.blob(),a=window.URL.createObjectURL(t),s=document.createElement("a");s.href=a;const n=(new Date).toISOString().split("T")[0];return s.download="drafted_invoices_".concat(n,".csv"),document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(a),void Bt.success("Drafted invoices exported successfully!")}}catch(e){console.log("Server-side export failed, falling back to client-side:",e)}if(0===l.length)return void Bt.info('No drafted invoices to export. Switch to "Accounting Transactions" tab first to load data.');const t=F(l),a=new Blob([t],{type:"text/csv"}),s=window.URL.createObjectURL(a),n=document.createElement("a");n.href=s;const r=(new Date).toISOString().split("T")[0];n.download="drafted_invoices_".concat(r,".csv"),document.body.appendChild(n),n.click(),document.body.removeChild(n),window.URL.revokeObjectURL(s),Bt.success("Drafted invoices exported successfully! (".concat(l.length," transactions)"))}catch(t){console.error("Failed to export CSV:",t),Bt.error("Failed to export drafted invoices: "+t.message)}},className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm transition-colors flex items-center space-x-2",title:0===l.length?"Switch to 'Accounting Transactions' tab first to load data":"Export drafted invoices to CSV",children:[(0,mi.jsx)(eo,{className:"h-4 w-4"}),(0,mi.jsx)("span",{children:"Export Drafts .CSV"}),l.length>0&&(0,mi.jsx)("span",{className:"bg-green-800 text-xs px-2 py-1 rounded-full",children:l.length})]})]})})]}),(0,mi.jsx)("div",{className:"mb-6",children:(0,mi.jsx)("div",{className:"border-b border-gray-700",children:(0,mi.jsx)("nav",{className:"-mb-px flex space-x-8",children:[{key:"live-jobs",label:"Live Jobs",icon:ki},{key:"accounting-transactions",label:"Accounting Transactions",icon:Ri},{key:"archived",label:"Archived Jobs",icon:eo},{key:"reports",label:"Monthly Reports",icon:vl}].map(a=>(0,mi.jsxs)("button",{onClick:()=>t(a.key),className:"\n                    flex items-center py-2 px-1 border-b-2 font-medium text-sm transition-colors\n                    ".concat(e===a.key?"border-yellow-400 text-yellow-400":"border-transparent text-gray-400 hover:text-gray-300 hover:border-gray-300","\n                  "),children:[(0,mi.jsx)(a.icon,{className:"h-5 w-5 mr-2"}),a.label]},a.key))})})}),"reports"!==e&&(0,mi.jsx)("div",{className:"mb-6",children:(0,mi.jsxs)("div",{className:"relative",children:[(0,mi.jsx)(io,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,mi.jsx)("input",{type:"text",placeholder:"",className:"misty-input pl-16 w-full max-w-md",value:u,onChange:e=>p(e.target.value)})]})}),"live-jobs"===e&&(0,mi.jsxs)("div",{children:[(0,mi.jsx)("h2",{className:"text-xl font-semibold text-white mb-4",children:"Jobs Ready for Invoicing"}),I.length>0?(0,mi.jsx)("div",{className:"misty-table",children:(0,mi.jsxs)("table",{className:"w-full",children:[(0,mi.jsx)("thead",{children:(0,mi.jsxs)("tr",{children:[(0,mi.jsx)("th",{children:"Order #"}),(0,mi.jsx)("th",{children:"Client"}),(0,mi.jsx)("th",{children:"Amount"}),(0,mi.jsx)("th",{children:"Due Date"}),(0,mi.jsx)("th",{children:"Payment Terms"}),(0,mi.jsx)("th",{children:"Actions"})]})}),(0,mi.jsx)("tbody",{children:I.map(e=>(0,mi.jsxs)("tr",{children:[(0,mi.jsx)("td",{className:"font-medium",children:e.order_number}),(0,mi.jsx)("td",{children:e.client_name}),(0,mi.jsx)("td",{className:"font-medium text-yellow-400",children:B(e.total_amount)}),(0,mi.jsx)("td",{children:z(e.due_date)}),(0,mi.jsx)("td",{className:"text-sm text-gray-300",children:e.client_payment_terms||"Net 30 days"}),(0,mi.jsx)("td",{children:(0,mi.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,mi.jsxs)("button",{onClick:()=>(e=>{if(x(e),e.invoice_history&&e.invoice_history.length>0?j("partial"):j("full"),e.items&&Array.isArray(e.items)){const t={};e.invoice_history&&Array.isArray(e.invoice_history)&&e.invoice_history.forEach(e=>{e.items.forEach(e=>{const a=e.product_id||e.product_name;a&&(t[a]=(t[a]||0)+e.quantity)})});const a=e.items.map(e=>{const a=e.product_id||e.product_name,s=e.quantity||0,n=t[a]||0,r=Math.max(0,s-n);return m(m({},e),{},{invoice_quantity:0,original_quantity:s,already_invoiced:n,remaining_quantity:r})});_(a)}g(!0)})(e),className:"misty-button misty-button-primary text-xs px-3 py-1",title:"Generate Invoice",children:[(0,mi.jsx)(wx,{className:"h-4 w-4 mr-1"}),"Invoice"]}),(0,mi.jsx)("a",{href:"".concat("https://manufactor-2.preview.emergentagent.com","/api/documents/invoice/").concat(e.id),target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-yellow-400 transition-colors",title:"Download Invoice PDF (right-click to save)",onClick:()=>Bt.success("Invoice PDF opened - right-click to save if needed"),children:(0,mi.jsx)(eo,{className:"h-4 w-4"})}),(0,mi.jsx)("a",{href:"".concat("https://manufactor-2.preview.emergentagent.com","/api/documents/packing-list/").concat(e.id),target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-green-400 transition-colors",title:"Download Packing Slip PDF (right-click to save)",onClick:()=>Bt.success("Packing Slip PDF opened - right-click to save if needed"),children:(0,mi.jsx)(Bi,{className:"h-4 w-4"})})]})})]},e.id))})]})}):(0,mi.jsxs)("div",{className:"text-center py-12",children:[(0,mi.jsx)(ki,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,mi.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-300",children:"No jobs ready for invoicing"}),(0,mi.jsx)("p",{className:"mt-1 text-sm text-gray-400",children:"Jobs will appear here when they reach the delivery stage."})]})]}),"accounting-transactions"===e&&(0,mi.jsxs)("div",{children:[(0,mi.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,mi.jsx)("h2",{className:"text-xl font-semibold text-white",children:"Accounting Transactions"}),(0,mi.jsx)("div",{className:"flex items-center space-x-4",children:(0,mi.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,mi.jsx)(io,{className:"h-5 w-5 text-gray-400"}),(0,mi.jsx)("input",{type:"text",placeholder:"Search transactions...",value:u,onChange:e=>p(e.target.value),className:"misty-input w-64"})]})})]}),l.length>0?(0,mi.jsx)("div",{className:"overflow-x-auto",children:(0,mi.jsxs)("table",{className:"min-w-full divide-y divide-gray-700",children:[(0,mi.jsx)("thead",{className:"bg-gray-800",children:(0,mi.jsxs)("tr",{children:[(0,mi.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Order"}),(0,mi.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Client"}),(0,mi.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Status"}),(0,mi.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Total Amount"}),(0,mi.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Invoice Date"}),(0,mi.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),(0,mi.jsx)("tbody",{className:"bg-gray-900 divide-y divide-gray-700",children:l.filter(e=>{var t,a;return(null===(t=e.client_name)||void 0===t?void 0:t.toLowerCase().includes(u.toLowerCase()))||(null===(a=e.order_number)||void 0===a?void 0:a.toLowerCase().includes(u.toLowerCase()))}).map(e=>{var t;return(0,mi.jsxs)("tr",{className:"hover:bg-gray-800",children:[(0,mi.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,mi.jsx)("div",{className:"text-sm font-medium text-white",children:e.order_number}),(0,mi.jsxs)("div",{className:"text-sm text-gray-400",children:["ID: ",e.id]})]}),(0,mi.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,mi.jsx)("div",{className:"text-sm text-white",children:e.client_name})}),(0,mi.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,mi.jsx)("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800",children:"Status: Draft"})}),(0,mi.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white",children:["$",null===(t=e.total_amount)||void 0===t?void 0:t.toFixed(2)]}),(0,mi.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:e.invoice_date?new Date(e.invoice_date).toLocaleDateString("en-AU"):"Not set"}),(0,mi.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,mi.jsxs)("button",{onClick:()=>(async e=>{try{await Pr(e.id),Bt.success("Job ".concat(e.order_number," completed and archived successfully")),L()}catch(t){console.error("Failed to complete accounting transaction:",t),Bt.error("Failed to complete transaction")}})(e),className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm transition-colors flex items-center space-x-2",children:[(0,mi.jsx)(tf,{className:"h-4 w-4"}),(0,mi.jsx)("span",{children:"Completed"})]})})]},e.id)})})]})}):(0,mi.jsxs)("div",{className:"text-center py-12",children:[(0,mi.jsx)(Ri,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,mi.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-300",children:"No accounting transactions"}),(0,mi.jsx)("p",{className:"mt-1 text-sm text-gray-400",children:"Invoiced jobs will appear here for final processing."})]})]}),"archived"===e&&(0,mi.jsxs)("div",{children:[(0,mi.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,mi.jsx)("h2",{className:"text-xl font-semibold text-white",children:"Archived Jobs"}),(0,mi.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,mi.jsx)("select",{value:N,onChange:e=>k(parseInt(e.target.value)),className:"misty-select",children:[...Array(12)].map((e,t)=>(0,mi.jsx)("option",{value:t+1,children:new Date(2024,t).toLocaleString("en-AU",{month:"long"})},t))}),(0,mi.jsx)("select",{value:S,onChange:e=>C(parseInt(e.target.value)),className:"misty-select",children:[2023,2024,2025].map(e=>(0,mi.jsx)("option",{value:e,children:e},e))}),(0,mi.jsx)("button",{onClick:L,className:"misty-button misty-button-secondary",children:"Filter"})]})]}),q.length>0?(0,mi.jsx)("div",{className:"misty-table",children:(0,mi.jsxs)("table",{className:"w-full",children:[(0,mi.jsx)("thead",{children:(0,mi.jsxs)("tr",{children:[(0,mi.jsx)("th",{children:"Order #"}),(0,mi.jsx)("th",{children:"Invoice #"}),(0,mi.jsx)("th",{children:"Client"}),(0,mi.jsx)("th",{children:"Amount"}),(0,mi.jsx)("th",{children:"Invoice Date"}),(0,mi.jsx)("th",{children:"Actions"})]})}),(0,mi.jsx)("tbody",{children:q.map(e=>(0,mi.jsxs)("tr",{children:[(0,mi.jsx)("td",{className:"font-medium",children:e.order_number}),(0,mi.jsx)("td",{className:"text-yellow-400",children:e.invoice_number}),(0,mi.jsx)("td",{children:e.client_name}),(0,mi.jsx)("td",{className:"font-medium text-green-400",children:B(e.total_amount)}),(0,mi.jsx)("td",{children:e.invoice_date?z(e.invoice_date):"N/A"}),(0,mi.jsx)("td",{children:(0,mi.jsx)("div",{className:"flex items-center space-x-2",children:(0,mi.jsx)("button",{onClick:()=>O(e.id,e.order_number),className:"text-gray-400 hover:text-yellow-400 transition-colors",title:"Download Invoice",children:(0,mi.jsx)(eo,{className:"h-4 w-4"})})})})]},e.id))})]})}):(0,mi.jsxs)("div",{className:"text-center py-12",children:[(0,mi.jsx)(eo,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,mi.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-300",children:"No archived jobs found"}),(0,mi.jsx)("p",{className:"mt-1 text-sm text-gray-400",children:"Select a different month/year or check back after invoicing some jobs."})]})]}),"reports"===e&&(0,mi.jsxs)("div",{children:[(0,mi.jsx)("h2",{className:"text-xl font-semibold text-white mb-4",children:"Monthly Reports"}),(0,mi.jsxs)("div",{className:"text-center py-12 text-gray-400",children:[(0,mi.jsx)(vl,{className:"mx-auto h-12 w-12 mb-4"}),(0,mi.jsx)("p",{children:"Monthly reporting feature coming soon..."}),(0,mi.jsx)("p",{className:"text-sm mt-2",children:"This will show detailed reports of jobs completed and invoiced each month."})]})]}),f&&h&&(0,mi.jsx)("div",{className:"modal-overlay",children:(0,mi.jsx)("div",{className:"modal-content max-w-lg",children:(0,mi.jsxs)("div",{className:"p-6",children:[(0,mi.jsxs)("h3",{className:"text-xl font-bold text-white mb-4",children:["Generate Invoice - ",h.order_number]}),(0,mi.jsxs)("div",{className:"mb-4",children:[(0,mi.jsxs)("p",{className:"text-gray-300 mb-2",children:[(0,mi.jsx)("strong",{children:"Client:"})," ",h.client_name]}),(0,mi.jsxs)("p",{className:"text-gray-300 mb-2",children:[(0,mi.jsx)("strong",{children:"Total Amount:"})," ",B(h.total_amount)]}),(0,mi.jsxs)("p",{className:"text-gray-300 mb-4",children:[(0,mi.jsx)("strong",{children:"Payment Terms:"})," ",h.client_payment_terms||"Net 30 days"]})]}),(0,mi.jsxs)("div",{className:"mb-6",children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Invoice Type"}),h.invoice_history&&h.invoice_history.length>0?(0,mi.jsxs)("div",{className:"bg-blue-900/20 border border-blue-600/30 rounded p-3",children:[(0,mi.jsx)("p",{className:"text-sm text-blue-300 mb-2",children:"\u2139\ufe0f This job has been partially invoiced. Only Part Supply is available."}),(0,mi.jsxs)("label",{className:"flex items-center",children:[(0,mi.jsx)("input",{type:"radio",value:"partial",checked:!0,readOnly:!0,className:"form-radio h-4 w-4 text-yellow-400"}),(0,mi.jsx)("span",{className:"ml-2 text-gray-300",children:"Part Supply"})]})]}):(0,mi.jsxs)("div",{className:"space-y-2",children:[(0,mi.jsxs)("label",{className:"flex items-center",children:[(0,mi.jsx)("input",{type:"radio",value:"full",checked:"full"===v,onChange:e=>j(e.target.value),className:"form-radio h-4 w-4 text-yellow-400"}),(0,mi.jsx)("span",{className:"ml-2 text-gray-300",children:"Full Invoice"})]}),(0,mi.jsxs)("label",{className:"flex items-center",children:[(0,mi.jsx)("input",{type:"radio",value:"partial",checked:"partial"===v,onChange:e=>j(e.target.value),className:"form-radio h-4 w-4 text-yellow-400"}),(0,mi.jsx)("span",{className:"ml-2 text-gray-300",children:"Part Supply"})]})]})]}),(0,mi.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,mi.jsx)("button",{onClick:()=>g(!1),className:"misty-button misty-button-secondary",children:"Cancel"}),(0,mi.jsx)("button",{onClick:()=>{"partial"===v?(g(!1),b(!0)):R()},className:"misty-button misty-button-primary",children:"partial"===v?"Next: Select Items":"Generate Invoice"})]})]})})}),y&&h&&(0,mi.jsx)("div",{className:"modal-overlay",onClick:e=>e.target===e.currentTarget&&b(!1),children:(0,mi.jsx)("div",{className:"modal-content max-w-4xl",children:(0,mi.jsxs)("div",{className:"p-6",children:[(0,mi.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Part Supply - Select Items"}),(0,mi.jsxs)("p",{className:"text-sm text-gray-400",children:["Order: ",h.order_number," - ",h.client_name]})]}),(0,mi.jsx)("button",{onClick:()=>b(!1),className:"text-gray-400 hover:text-white text-2xl",children:"\xd7"})]}),(0,mi.jsxs)("div",{className:"mb-6",children:[(0,mi.jsx)("p",{className:"text-sm text-gray-400 mb-4",children:"Select the quantities of each item you wish to invoice. Enter 0 to exclude an item."}),(0,mi.jsx)("div",{className:"misty-table",children:(0,mi.jsxs)("table",{className:"w-full",children:[(0,mi.jsx)("thead",{children:(0,mi.jsxs)("tr",{children:[(0,mi.jsx)("th",{children:"Product"}),(0,mi.jsx)("th",{children:"Ordered Qty"}),(0,mi.jsx)("th",{children:"Already Invoiced"}),(0,mi.jsx)("th",{children:"Remaining Qty"}),(0,mi.jsx)("th",{children:"Invoice Now"}),(0,mi.jsx)("th",{children:"Unit Price"}),(0,mi.jsx)("th",{children:"Line Total"})]})}),(0,mi.jsx)("tbody",{children:w.map((e,t)=>(0,mi.jsxs)("tr",{children:[(0,mi.jsxs)("td",{children:[(0,mi.jsx)("p",{className:"font-medium",children:e.product_name||e.description}),e.specifications&&(0,mi.jsx)("p",{className:"text-xs text-gray-400",children:e.specifications})]}),(0,mi.jsx)("td",{className:"text-center",children:e.original_quantity}),(0,mi.jsx)("td",{className:"text-center text-yellow-400",children:e.already_invoiced||0}),(0,mi.jsx)("td",{className:"text-center text-blue-400 font-medium",children:e.remaining_quantity||e.original_quantity}),(0,mi.jsx)("td",{children:(0,mi.jsx)("input",{type:"number",min:"0",max:e.remaining_quantity||e.original_quantity,value:e.invoice_quantity,onChange:e=>((e,t)=>{const a=[...w],s=a[e].remaining_quantity||a[e].original_quantity;a[e].invoice_quantity=Math.min(Math.max(0,t),s),_(a)})(t,parseInt(e.target.value)||0),className:"misty-input w-24 text-center",placeholder:"0"})}),(0,mi.jsxs)("td",{className:"text-right",children:["$",(e.unit_price||0).toFixed(2)]}),(0,mi.jsxs)("td",{className:"text-right font-medium text-green-400",children:["$",((e.unit_price||0)*e.invoice_quantity).toFixed(2)]})]},t))}),(0,mi.jsxs)("tfoot",{children:[(0,mi.jsxs)("tr",{className:"border-t-2 border-gray-600",children:[(0,mi.jsx)("td",{colSpan:"4",className:"text-right font-semibold",children:"Subtotal:"}),(0,mi.jsxs)("td",{className:"text-right font-semibold text-white",children:["$",w.reduce((e,t)=>e+t.unit_price*t.invoice_quantity,0).toFixed(2)]})]}),(0,mi.jsxs)("tr",{children:[(0,mi.jsx)("td",{colSpan:"4",className:"text-right",children:"GST (10%):"}),(0,mi.jsxs)("td",{className:"text-right",children:["$",(.1*w.reduce((e,t)=>e+t.unit_price*t.invoice_quantity,0)).toFixed(2)]})]}),(0,mi.jsxs)("tr",{className:"border-t border-gray-600",children:[(0,mi.jsx)("td",{colSpan:"4",className:"text-right font-bold text-lg",children:"Total:"}),(0,mi.jsxs)("td",{className:"text-right font-bold text-lg text-yellow-400",children:["$",(1.1*w.reduce((e,t)=>e+t.unit_price*t.invoice_quantity,0)).toFixed(2)]})]})]})]})})]}),(0,mi.jsxs)("div",{className:"flex justify-between",children:[(0,mi.jsx)("button",{onClick:()=>{b(!1),g(!0)},className:"misty-button misty-button-secondary",children:"\u2190 Back"}),(0,mi.jsxs)("div",{className:"flex space-x-3",children:[(0,mi.jsx)("button",{onClick:()=>{const e=w.map(e=>m(m({},e),{},{invoice_quantity:e.original_quantity}));_(e)},className:"misty-button misty-button-secondary",children:"Select All"}),(0,mi.jsx)("button",{onClick:R,className:"misty-button misty-button-primary",disabled:w.every(e=>0===e.invoice_quantity),children:"Generate Invoice & Packing Slip"})]})]})]})})})]})})},qf=["title","titleId"];function Bf(e,t){let{title:a,titleId:s}=e,r=l(e,qf);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},r),a?n.createElement("title",{id:s},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25a3 3 0 0 1 3 3m3 0a6 6 0 0 1-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1 1 21.75 8.25Z"}))}const zf=n.forwardRef(Bf),Uf=["title","titleId"];function Wf(e,t){let{title:a,titleId:s}=e,r=l(e,Uf);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},r),a?n.createElement("title",{id:s},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"}))}const Hf=n.forwardRef(Wf),Gf=()=>{const{user:e}=hi(),[t,a]=(0,n.useState)([]),[s,r]=(0,n.useState)(!0),[i,l]=(0,n.useState)(""),[o,c]=(0,n.useState)(!1),[d,u]=(0,n.useState)(null),[p,h]=(0,n.useState)(!1),[x,f]=(0,n.useState)(!1),[g,y]=(0,n.useState)(null),[b,v]=(0,n.useState)(!1),[j,w]=(0,n.useState)([]),[_,N]=(0,n.useState)(!1),[k,S]=(0,n.useState)({username:"",email:"",password:"",full_name:"",role:"production_staff",department:"",phone:"",employment_type:"full_time"}),[C,E]=(0,n.useState)({current_password:"",new_password:"",confirm_password:""}),[D,P]=(0,n.useState)({}),[A,T]=(0,n.useState)(!1);(0,n.useEffect)(()=>{L(),R()},[]);const L=async()=>{try{r(!0);const e=(await Fr()).data.map(e=>m(m({},e),{},{username:e.username||"",email:e.email||"",full_name:e.full_name||"",role:e.role||"production_team",department:e.department||"",phone:e.phone||"",employment_type:e.employment_type||"full_time",is_active:void 0===e.is_active||e.is_active}));a(e)}catch(e){console.error("Failed to load users:",e),Bt.error("Failed to load users")}finally{r(!1)}},R=async()=>{try{N(!0);const e=await jf();w(e.data||[])}catch(e){console.error("Failed to load pending timesheets:",e)}finally{N(!1)}},F=async(e,t)=>{try{if("approve"!==t)return void Bt.info("Reject functionality not yet implemented");await vf(e),Bt.success("Timesheet approved successfully"),await R()}catch(a){console.error("Failed to process timesheet:",a),Bt.error("Failed to process timesheet")}},O=()=>{u(null),S({username:"",email:"",password:"",full_name:"",role:"production_staff",department:"",phone:"",employment_type:"full_time"}),P({}),c(!0)},M=()=>{console.log("User cancelled deletion"),f(!1),y(null)},I=e=>{const{name:t,value:a}=e.target;S(e=>m(m({},e),{},{[t]:a})),D[t]&&P(e=>m(m({},e),{},{[t]:""}))},q=t.filter(e=>e.username.toLowerCase().includes(i.toLowerCase())||e.email.toLowerCase().includes(i.toLowerCase())||e.full_name.toLowerCase().includes(i.toLowerCase())),B=[{value:"admin",label:"Admin",description:"Access to everything and anything"},{value:"manager",label:"Manager",description:"Ability to do anything other than change privileges"},{value:"supervisor",label:"Supervisor",description:"Orders, Production, Calculator and Payroll options"},{value:"production_staff",label:"Production Staff",description:"Production Board and Payroll options only"},{value:"sales",label:"Sales",description:"Sales and client management functions"}],z=e=>B.find(t=>t.value===e)||{label:e,description:""};return s?(0,mi.jsx)(hl,{children:(0,mi.jsx)("div",{className:"p-8",children:(0,mi.jsxs)("div",{className:"animate-pulse",children:[(0,mi.jsx)("div",{className:"h-8 bg-gray-700 rounded w-1/4 mb-8"}),(0,mi.jsx)("div",{className:"space-y-4",children:[...Array(5)].map((e,t)=>(0,mi.jsx)("div",{className:"h-16 bg-gray-700 rounded"},t))})]})})}):(0,mi.jsx)(hl,{children:(0,mi.jsxs)("div",{className:"p-8",children:[(0,mi.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"Staff & Security"}),(0,mi.jsx)("p",{className:"text-gray-400",children:"Manage user accounts and access privileges \u2022 Double-click any user to edit"})]}),(0,mi.jsxs)("div",{className:"flex space-x-3",children:[(0,mi.jsxs)("button",{onClick:()=>h(!0),className:"misty-button misty-button-secondary",children:[(0,mi.jsx)(zf,{className:"h-5 w-5 mr-2"}),"Change Password"]}),(0,mi.jsxs)("button",{onClick:O,className:"misty-button misty-button-primary",children:[(0,mi.jsx)(Cl,{className:"h-5 w-5 mr-2"}),"Add User"]})]})]}),(0,mi.jsx)("div",{className:"mb-6",children:(0,mi.jsxs)("div",{className:"relative max-w-md",children:[(0,mi.jsx)(io,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,mi.jsx)("input",{type:"text",placeholder:"",value:i,onChange:e=>l(e.target.value),className:"misty-input pl-16 w-full"})]})}),q.length>0?(0,mi.jsx)("div",{className:"misty-table",children:(0,mi.jsxs)("table",{className:"w-full",children:[(0,mi.jsx)("thead",{children:(0,mi.jsxs)("tr",{children:[(0,mi.jsx)("th",{className:"py-2 text-sm",children:"Username"}),(0,mi.jsx)("th",{className:"py-2 text-sm",children:"Full Name"}),(0,mi.jsx)("th",{className:"py-2 text-sm",children:"Email"}),(0,mi.jsx)("th",{className:"py-2 text-sm",children:"Role"}),(0,mi.jsx)("th",{className:"py-2 text-sm",children:"Department"}),(0,mi.jsx)("th",{className:"py-2 text-sm",children:"Employment Type"}),(0,mi.jsx)("th",{className:"py-2 text-sm",children:"Status"})]})}),(0,mi.jsx)("tbody",{children:q.map(e=>(0,mi.jsxs)("tr",{onDoubleClick:()=>(e=>{u(e),S({username:e.username||"",email:e.email||"",password:"",full_name:e.full_name||"",role:e.role||"production_team",department:e.department||"",phone:e.phone||"",employment_type:e.employment_type||"full_time"}),P({}),c(!0)})(e),className:"cursor-pointer hover:bg-gray-700/50 transition-colors border-b border-gray-700/50",title:"Double-click to edit",children:[(0,mi.jsx)("td",{className:"font-medium text-sm py-2 px-3",children:e.username}),(0,mi.jsx)("td",{className:"text-sm py-2 px-3",children:e.full_name}),(0,mi.jsx)("td",{className:"text-sm py-2 px-3",children:e.email}),(0,mi.jsx)("td",{className:"text-sm py-2 px-3",children:(0,mi.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat("admin"===e.role?"bg-red-900 text-red-200":"manager"===e.role?"bg-blue-900 text-blue-200":"supervisor"===e.role?"bg-green-900 text-green-200":"production_staff"===e.role?"bg-yellow-900 text-yellow-200":"bg-gray-700 text-gray-300"),children:z(e.role).label})}),(0,mi.jsx)("td",{className:"text-sm py-2 px-3",children:e.department||"\u2014"}),(0,mi.jsx)("td",{className:"text-sm py-2 px-3",children:(0,mi.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium bg-blue-900 text-blue-200",children:e.employment_type?e.employment_type.replace("_"," ").replace(/\b\w/g,e=>e.toUpperCase()):"Full Time"})}),(0,mi.jsx)("td",{className:"text-sm py-2 px-3",children:(0,mi.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat(e.is_active?"bg-green-900 text-green-200":"bg-red-900 text-red-200"),children:e.is_active?"Active":"Inactive"})})]},e.id))})]})}):(0,mi.jsxs)("div",{className:"text-center py-12",children:[(0,mi.jsx)("div",{className:"mx-auto h-12 w-12 text-gray-400 mb-4",children:"\ud83d\udc65"}),(0,mi.jsx)("h3",{className:"text-sm font-medium text-gray-300",children:i?"No users found":"No users"}),(0,mi.jsx)("p",{className:"mt-1 text-sm text-gray-400",children:i?"Try adjusting your search criteria.":"Get started by adding your first user account."}),!i&&(0,mi.jsx)("div",{className:"mt-6",children:(0,mi.jsxs)("button",{onClick:O,className:"misty-button misty-button-primary",children:[(0,mi.jsx)(Cl,{className:"h-5 w-5 mr-2"}),"Add User"]})})]}),("manager"===(null===e||void 0===e?void 0:e.role)||"admin"===(null===e||void 0===e?void 0:e.role))&&(0,mi.jsxs)("div",{className:"mt-12",children:[(0,mi.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("h2",{className:"text-2xl font-bold text-white mb-2",children:"Timesheet Approvals"}),(0,mi.jsx)("p",{className:"text-gray-400",children:"Review and approve submitted timesheets from team members"})]}),(0,mi.jsx)("button",{onClick:R,className:"misty-button misty-button-secondary",disabled:_,children:_?"Loading...":"Refresh"})]}),j.length>0?(0,mi.jsx)("div",{className:"misty-table",children:(0,mi.jsxs)("table",{className:"w-full",children:[(0,mi.jsx)("thead",{children:(0,mi.jsxs)("tr",{children:[(0,mi.jsx)("th",{className:"py-2 text-sm",children:"Employee"}),(0,mi.jsx)("th",{className:"py-2 text-sm",children:"Week Period"}),(0,mi.jsx)("th",{className:"py-2 text-sm",children:"Total Hours"}),(0,mi.jsx)("th",{className:"py-2 text-sm",children:"Overtime"}),(0,mi.jsx)("th",{className:"py-2 text-sm",children:"Submitted"}),(0,mi.jsx)("th",{className:"py-2 text-sm",children:"Actions"})]})}),(0,mi.jsx)("tbody",{children:j.map(e=>(0,mi.jsxs)("tr",{className:"border-b border-gray-700/50",children:[(0,mi.jsx)("td",{className:"text-sm py-2 px-3 font-medium",children:e.employee_name||"Unknown Employee"}),(0,mi.jsxs)("td",{className:"text-sm py-2 px-3",children:[e.week_starting," - ",e.week_ending]}),(0,mi.jsxs)("td",{className:"text-sm py-2 px-3",children:[e.total_regular_hours||0,"h"]}),(0,mi.jsxs)("td",{className:"text-sm py-2 px-3",children:[e.total_overtime_hours||0,"h"]}),(0,mi.jsx)("td",{className:"text-sm py-2 px-3",children:e.submitted_at?new Date(e.submitted_at).toLocaleDateString():"\u2014"}),(0,mi.jsx)("td",{className:"text-sm py-2 px-3",children:(0,mi.jsxs)("div",{className:"flex space-x-2",children:[(0,mi.jsx)("button",{onClick:()=>F(e.id,"approve"),className:"misty-button misty-button-primary text-xs",children:"Approve"}),(0,mi.jsx)("button",{onClick:()=>F(e.id,"reject"),className:"misty-button misty-button-danger text-xs",children:"Reject"})]})})]},e.id))})]})}):(0,mi.jsxs)("div",{className:"text-center py-12",children:[(0,mi.jsx)("div",{className:"mx-auto h-12 w-12 text-gray-400 mb-4",children:"\ud83d\udccb"}),(0,mi.jsx)("h3",{className:"text-sm font-medium text-gray-300",children:"No Pending Timesheets"}),(0,mi.jsx)("p",{className:"mt-1 text-sm text-gray-400",children:"All timesheets have been reviewed or no submissions are pending approval."})]})]}),o&&(0,mi.jsx)("div",{className:"modal-overlay",onClick:e=>e.target===e.currentTarget&&c(!1),children:(0,mi.jsx)("div",{className:"modal-content max-w-2xl max-h-[90vh] overflow-y-auto",children:(0,mi.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};return k.username.trim()||(e.username="Username is required"),k.email.trim()?/\S+@\S+\.\S+/.test(k.email)||(e.email="Email is not valid"):e.email="Email is required",d||k.password?k.password&&k.password.length<6&&(e.password="Password must be at least 6 characters"):e.password="Password is required for new users",k.full_name.trim()||(e.full_name="Full name is required"),P(e),0===Object.keys(e).length})())try{const e=m({},k);d&&!k.password&&delete e.password,d?(await Mr(d.id,e),Bt.success("User updated successfully")):(await Or(e),Bt.success("User created successfully")),c(!1),L()}catch(i){var t,a,s;if(console.error("Failed to save user:",i),422===(null===(t=i.response)||void 0===t?void 0:t.status)&&null!==(a=i.response)&&void 0!==a&&null!==(s=a.data)&&void 0!==s&&s.detail){const e=i.response.data.detail,t={};Array.isArray(e)?(e.forEach(e=>{if(e.loc&&e.loc.length>1){const a=e.loc[e.loc.length-1];t[a]=e.msg||"Invalid value"}}),P(t),Bt.error("Please fix the validation errors")):"string"===typeof e?Bt.error(e):Bt.error("Failed to save user")}else{var n,r;let e="Failed to save user";null!==(n=i.response)&&void 0!==n&&null!==(r=n.data)&&void 0!==r&&r.detail&&(Array.isArray(i.response.data.detail)?e=i.response.data.detail.map(e=>e.msg||e.message||"Validation error").join(", "):"string"===typeof i.response.data.detail&&(e=i.response.data.detail)),Bt.error(e)}}else Bt.error("Please fix the errors below")},className:"p-6",children:[(0,mi.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,mi.jsx)("h2",{className:"text-2xl font-bold text-white",children:d?"Edit User Account":"Create New User Account"}),(0,mi.jsx)("button",{type:"button",onClick:()=>c(!1),className:"text-gray-400 hover:text-white transition-colors",children:(0,mi.jsx)(nl,{className:"h-6 w-6"})})]}),(0,mi.jsxs)("div",{className:"mb-8",children:[(0,mi.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Basic Information"}),(0,mi.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Username *"}),(0,mi.jsx)("input",{type:"text",name:"username",value:k.username,onChange:I,className:"misty-input w-full ".concat(D.username?"border-red-500":""),placeholder:"Enter username",required:!0}),D.username&&(0,mi.jsx)("p",{className:"text-red-400 text-sm mt-1",children:String(D.username)})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Full Name *"}),(0,mi.jsx)("input",{type:"text",name:"full_name",value:k.full_name,onChange:I,className:"misty-input w-full ".concat(D.full_name?"border-red-500":""),placeholder:"Enter full name",required:!0}),D.full_name&&(0,mi.jsx)("p",{className:"text-red-400 text-sm mt-1",children:String(D.full_name)})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Email *"}),(0,mi.jsx)("input",{type:"email",name:"email",value:k.email,onChange:I,className:"misty-input w-full ".concat(D.email?"border-red-500":""),placeholder:"Enter email address",required:!0}),D.email&&(0,mi.jsx)("p",{className:"text-red-400 text-sm mt-1",children:String(D.email)})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Phone Number"}),(0,mi.jsx)("input",{type:"text",name:"phone",value:k.phone,onChange:I,className:"misty-input w-full",placeholder:"Enter phone number"})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Department"}),(0,mi.jsx)("input",{type:"text",name:"department",value:k.department,onChange:I,className:"misty-input w-full",placeholder:"Enter department"})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Employment Type"}),(0,mi.jsxs)("select",{name:"employment_type",value:k.employment_type,onChange:I,className:"misty-select w-full",children:[(0,mi.jsx)("option",{value:"full_time",children:"Full Time"}),(0,mi.jsx)("option",{value:"part_time",children:"Part Time"}),(0,mi.jsx)("option",{value:"casual",children:"Casual"})]})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsxs)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:["Password ",d?"":"*"]}),(0,mi.jsxs)("div",{className:"relative",children:[(0,mi.jsx)("input",{type:A?"text":"password",name:"password",value:k.password,onChange:I,className:"misty-input w-full pr-10 ".concat(D.password?"border-red-500":""),placeholder:d?"Leave blank to keep current password":"Enter password",required:!d}),(0,mi.jsx)("button",{type:"button",onClick:()=>T(!A),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white",children:A?(0,mi.jsx)(Hf,{className:"h-4 w-4"}):(0,mi.jsx)(bo,{className:"h-4 w-4"})})]}),D.password&&(0,mi.jsx)("p",{className:"text-red-400 text-sm mt-1",children:String(D.password)})]})]})]}),(0,mi.jsxs)("div",{className:"mb-8",children:[(0,mi.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Role & Permissions"}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"User Role *"}),(0,mi.jsx)("select",{name:"role",value:k.role,onChange:I,className:"misty-select w-full",required:!0,children:B.map(e=>(0,mi.jsx)("option",{value:e.value,children:e.label},e.value))}),k.role&&(0,mi.jsxs)("p",{className:"text-sm text-gray-400 mt-2",children:[(0,mi.jsxs)("strong",{children:[z(k.role).label,":"]})," ",z(k.role).description]})]})]}),(0,mi.jsxs)("div",{className:"flex justify-between pt-6 border-t border-gray-700",children:[(0,mi.jsx)("div",{children:d&&(0,mi.jsxs)("button",{type:"button",onClick:e=>{var t;e.preventDefault(),e.stopPropagation(),console.log("Delete button clicked, selectedUser:",d),t=d,console.log("Delete button clicked for user:",t),y(t),f(!0)},className:"misty-button misty-button-danger",children:[(0,mi.jsx)(Ol,{className:"h-4 w-4 mr-2"}),"Delete User"]})}),(0,mi.jsxs)("div",{className:"flex space-x-3",children:[(0,mi.jsx)("button",{type:"button",onClick:()=>c(!1),className:"misty-button misty-button-secondary",children:"Cancel"}),(0,mi.jsx)("button",{type:"submit",className:"misty-button misty-button-primary",children:d?"Update User":"Create User"})]})]})]})})}),p&&(0,mi.jsx)("div",{className:"modal-overlay",onClick:e=>e.target===e.currentTarget&&h(!1),children:(0,mi.jsx)("div",{className:"modal-content max-w-md",children:(0,mi.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),C.current_password&&C.new_password)if(C.new_password===C.confirm_password)if(C.new_password.length<6)Bt.error("New password must be at least 6 characters");else try{await qr({current_password:C.current_password,new_password:C.new_password}),Bt.success("Password changed successfully"),h(!1),E({current_password:"",new_password:"",confirm_password:""})}catch(t){console.error("Failed to change password:",t),Bt.error("Failed to change password")}else Bt.error("New passwords do not match");else Bt.error("Both current and new passwords are required")},className:"p-6",children:[(0,mi.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,mi.jsx)("h2",{className:"text-xl font-bold text-white",children:"Change Password"}),(0,mi.jsx)("button",{type:"button",onClick:()=>h(!1),className:"text-gray-400 hover:text-white transition-colors",children:(0,mi.jsx)(nl,{className:"h-6 w-6"})})]}),(0,mi.jsxs)("div",{className:"space-y-4",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Current Password *"}),(0,mi.jsx)("input",{type:"password",value:C.current_password,onChange:e=>E(m(m({},C),{},{current_password:e.target.value})),className:"misty-input w-full",required:!0})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"New Password *"}),(0,mi.jsx)("input",{type:"password",value:C.new_password,onChange:e=>E(m(m({},C),{},{new_password:e.target.value})),className:"misty-input w-full",minLength:"6",required:!0})]}),(0,mi.jsxs)("div",{children:[(0,mi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Confirm New Password *"}),(0,mi.jsx)("input",{type:"password",value:C.confirm_password,onChange:e=>E(m(m({},C),{},{confirm_password:e.target.value})),className:"misty-input w-full",required:!0})]})]}),(0,mi.jsxs)("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-700 mt-6",children:[(0,mi.jsx)("button",{type:"button",onClick:()=>h(!1),className:"misty-button misty-button-secondary",children:"Cancel"}),(0,mi.jsx)("button",{type:"submit",className:"misty-button misty-button-primary",children:"Change Password"})]})]})})}),x&&g&&(0,mi.jsx)("div",{className:"modal-overlay",onClick:e=>e.target===e.currentTarget&&M(),children:(0,mi.jsx)("div",{className:"modal-content max-w-md",children:(0,mi.jsxs)("div",{className:"p-6",children:[(0,mi.jsxs)("div",{className:"flex items-center mb-4",children:[(0,mi.jsx)("div",{className:"flex-shrink-0",children:(0,mi.jsx)(Ol,{className:"h-8 w-8 text-red-400"})}),(0,mi.jsxs)("div",{className:"ml-4",children:[(0,mi.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Delete User"}),(0,mi.jsx)("p",{className:"text-sm text-gray-400",children:"This action cannot be undone."})]})]}),(0,mi.jsxs)("div",{className:"mb-6",children:[(0,mi.jsxs)("p",{className:"text-gray-300",children:["Are you sure you wish to delete user ",(0,mi.jsxs)("span",{className:"font-semibold text-white",children:['"',g.username,'"']}),"?"]}),(0,mi.jsx)("p",{className:"text-sm text-gray-400 mt-2",children:"This will permanently remove the user account and all associated data."})]}),(0,mi.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,mi.jsx)("button",{type:"button",onClick:M,className:"misty-button misty-button-secondary",children:"No, Cancel"}),(0,mi.jsx)("button",{type:"button",onClick:async()=>{if(g)try{console.log("User confirmed deletion, calling API..."),await Ir(g.id),Bt.success("User deleted successfully"),c(!1),f(!1),y(null),L()}catch(e){console.error("Failed to delete user:",e),Bt.error("Failed to delete user")}},className:"misty-button misty-button-danger",children:"Yes, Delete User"})]})]})})})]})})},Vf=()=>{const[e,t]=(0,n.useState)("processing"),a=he();(0,n.useEffect)(()=>{s()},[a]);const s=async()=>{try{const e=new URLSearchParams(a.search),s=e.get("code"),n=e.get("state"),r=e.get("error");if(r)return t("error"),Bt.error("Xero authorization failed: ".concat(r)),void(window.opener&&(window.opener.postMessage({type:"xero-auth-error",error:r},"*"),setTimeout(()=>window.close(),3e3)));if(!s)return t("error"),Bt.error("No authorization code received from Xero"),void(window.opener&&(window.opener.postMessage({type:"xero-auth-error",error:"No code"},"*"),setTimeout(()=>window.close(),3e3)));if(window.opener)return window.opener.postMessage({type:"xero-auth-success",code:s,state:n},"*"),t("success"),void setTimeout(()=>{window.close()},1e3);await Lr({code:s,state:n});t("success"),Bt.success("Successfully connected to Xero!"),setTimeout(()=>{window.close()},2e3)}catch(e){console.error("Xero callback error:",e),t("error"),Bt.error("Failed to complete Xero connection"),window.opener&&window.opener.postMessage({type:"xero-auth-error",error:e.message},"*"),setTimeout(()=>window.close(),3e3)}};return(0,mi.jsx)("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center px-4",children:(0,mi.jsx)("div",{className:"max-w-md w-full text-center",children:(0,mi.jsxs)("div",{className:"bg-gray-800 rounded-lg p-8 border border-gray-700",children:["processing"===e&&(0,mi.jsxs)(mi.Fragment,{children:[(0,mi.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-yellow-400 mx-auto mb-4"}),(0,mi.jsx)("h2",{className:"text-xl font-bold text-white mb-2",children:"Connecting to Xero"}),(0,mi.jsx)("p",{className:"text-gray-400",children:"Please wait while we complete the connection..."})]}),"success"===e&&(0,mi.jsxs)(mi.Fragment,{children:[(0,mi.jsx)("div",{className:"h-12 w-12 bg-green-600 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,mi.jsx)("svg",{className:"h-6 w-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,mi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,mi.jsx)("h2",{className:"text-xl font-bold text-green-400 mb-2",children:"Connection Successful!"}),(0,mi.jsx)("p",{className:"text-gray-400",children:"Xero has been connected to your Misty account."}),(0,mi.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"This window will close automatically..."})]}),"error"===e&&(0,mi.jsxs)(mi.Fragment,{children:[(0,mi.jsx)("div",{className:"h-12 w-12 bg-red-600 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,mi.jsx)("svg",{className:"h-6 w-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,mi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),(0,mi.jsx)("h2",{className:"text-xl font-bold text-red-400 mb-2",children:"Connection Failed"}),(0,mi.jsx)("p",{className:"text-gray-400",children:"There was an error connecting to Xero."}),(0,mi.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"This window will close automatically..."})]})]})})})},$f=()=>{const{clientId:e}=ye(),[t,a]=(0,n.useState)(null),[s,r]=(0,n.useState)([]),[i,l]=(0,n.useState)([]),[o,c]=(0,n.useState)(!0),[d,u]=(0,n.useState)("jobs"),[m,p]=(0,n.useState)("all"),[h,x]=(0,n.useState)("all"),[f,g]=(0,n.useState)(!1),[y,b]=(0,n.useState)({jobId:null,stage:null,orderId:null});(0,n.useEffect)(()=>{e&&(v(),j(),w())},[e]);const v=async()=>{try{const t=await kn(e);a(t.data)}catch(t){console.error("Failed to load client data:",t),Bt.error("Failed to load client data")}},j=async()=>{try{c(!0);const t=await mr(e);r(t.data)}catch(t){console.error("Failed to load archived jobs:",t),r([{id:1,order_number:"ORD-2024-001",product_code:"PC-100-50",quantity:1e3,completed_date:"2024-01-15",total_production_time:240,status:"completed"},{id:2,order_number:"ORD-2024-005",product_code:"PC-120-75",quantity:500,completed_date:"2024-01-20",total_production_time:180,status:"completed"}])}finally{c(!1)}},w=async()=>{try{const t=await pr(e);l(t.data)}catch(t){console.error("Failed to load job cards:",t),l([{id:1,job_id:1,order_id:1,order_number:"ORD-2024-001",process_stage:"paper_slitting",generated_date:"2024-01-15T08:00:00Z",machine_used:"Slitter A1",operator:"John Smith",setup_time:45,run_time:120,total_time:165},{id:2,job_id:1,order_id:1,order_number:"ORD-2024-001",process_stage:"winding",generated_date:"2024-01-15T11:00:00Z",machine_used:"Winder X1",operator:"Jane Doe",setup_time:30,run_time:75,total_time:105}])}},_=()=>{let e=s;if("all"!==m){const t=new Date;let a;switch(m){case"week":a=new Date(t.getTime()-6048e5);break;case"month":a=new Date(t.getTime()-2592e6);break;case"quarter":a=new Date(t.getTime()-7776e6);break;default:a=new Date(0)}e=e.filter(e=>new Date(e.completed_date)>=a)}return e},N=()=>{let e=i;if("all"!==h&&(e=e.filter(e=>e.process_stage===h)),"all"!==m){const t=new Date;let a;switch(m){case"week":a=new Date(t.getTime()-6048e5);break;case"month":a=new Date(t.getTime()-2592e6);break;case"quarter":a=new Date(t.getTime()-7776e6);break;default:a=new Date(0)}e=e.filter(e=>new Date(e.generated_date)>=a)}return e};return o?(0,mi.jsx)(hl,{children:(0,mi.jsx)("div",{className:"p-8",children:(0,mi.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-yellow-400 mx-auto"})})}):(0,mi.jsxs)(hl,{children:[(0,mi.jsxs)("div",{className:"p-8",children:[(0,mi.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,mi.jsxs)("div",{className:"flex items-center",children:[(0,mi.jsx)("button",{onClick:()=>window.history.back(),className:"text-gray-400 hover:text-white mr-4 p-2",title:"Go back",children:(0,mi.jsx)(hx,{className:"h-5 w-5"})}),(0,mi.jsxs)("div",{children:[(0,mi.jsxs)("h1",{className:"text-3xl font-bold text-white mb-2",children:["Archived Jobs - ",null===t||void 0===t?void 0:t.company_name]}),(0,mi.jsx)("p",{className:"text-gray-400",children:"View completed jobs and historic production job cards"})]})]}),(0,mi.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,mi.jsx)("button",{onClick:()=>u("jobs"),className:"px-4 py-2 rounded-md transition-colors ".concat("jobs"===d?"bg-yellow-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"),children:"Archived Jobs"}),(0,mi.jsx)("button",{onClick:()=>u("job-cards"),className:"px-4 py-2 rounded-md transition-colors ".concat("job-cards"===d?"bg-yellow-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"),children:"Historic Job Cards"})]})]}),(0,mi.jsxs)("div",{className:"mb-6 flex items-center space-x-4",children:[(0,mi.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,mi.jsx)(so,{className:"h-5 w-5 text-gray-400"}),(0,mi.jsx)("span",{className:"text-sm text-gray-300",children:"Filters:"})]}),(0,mi.jsxs)("select",{value:m,onChange:e=>p(e.target.value),className:"misty-select",children:[(0,mi.jsx)("option",{value:"all",children:"All Time"}),(0,mi.jsx)("option",{value:"week",children:"Last Week"}),(0,mi.jsx)("option",{value:"month",children:"Last Month"}),(0,mi.jsx)("option",{value:"quarter",children:"Last Quarter"})]}),"job-cards"===d&&(0,mi.jsxs)("select",{value:h,onChange:e=>x(e.target.value),className:"misty-select",children:[(0,mi.jsx)("option",{value:"all",children:"All Processes"}),(0,mi.jsx)("option",{value:"paper_slitting",children:"Paper Slitting"}),(0,mi.jsx)("option",{value:"winding",children:"Core Winder"}),(0,mi.jsx)("option",{value:"finishing",children:"Cutting/Indexing"}),(0,mi.jsx)("option",{value:"delivery",children:"Packing/Delivery"})]})]}),"jobs"===d?(0,mi.jsx)("div",{className:"space-y-4",children:_().length>0?_().map(e=>{var t;return(0,mi.jsx)("div",{className:"misty-card p-6",children:(0,mi.jsxs)("div",{className:"flex items-center justify-between",children:[(0,mi.jsx)("div",{className:"flex-1",children:(0,mi.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("h3",{className:"text-lg font-semibold text-white",children:e.order_number}),(0,mi.jsxs)("p",{className:"text-sm text-gray-400",children:["Product: ",e.product_code]})]}),(0,mi.jsxs)("div",{className:"text-center",children:[(0,mi.jsx)("div",{className:"text-xl font-bold text-yellow-400",children:null===(t=e.quantity)||void 0===t?void 0:t.toLocaleString()}),(0,mi.jsx)("div",{className:"text-xs text-gray-400",children:"units"})]}),(0,mi.jsxs)("div",{className:"text-center",children:[(0,mi.jsxs)("div",{className:"text-lg font-medium text-white",children:[Math.round(e.total_production_time/60),"h ",e.total_production_time%60,"m"]}),(0,mi.jsx)("div",{className:"text-xs text-gray-400",children:"total time"})]}),(0,mi.jsxs)("div",{className:"text-center",children:[(0,mi.jsx)("div",{className:"text-sm font-medium text-white",children:new Date(e.completed_date).toLocaleDateString()}),(0,mi.jsx)("div",{className:"text-xs text-gray-400",children:"completed"})]})]})}),(0,mi.jsx)("div",{className:"flex items-center space-x-2",children:(0,mi.jsx)("span",{className:"px-3 py-1 bg-green-600 text-white text-xs rounded-full",children:e.status})})]})},e.id)}):(0,mi.jsxs)("div",{className:"text-center py-12",children:[(0,mi.jsx)(ki,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,mi.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-300",children:"No archived jobs found"}),(0,mi.jsx)("p",{className:"mt-1 text-sm text-gray-400",children:"Jobs will appear here once they are completed and archived."})]})}):(0,mi.jsx)("div",{className:"space-y-4",children:N().length>0?N().map(e=>{return(0,mi.jsx)("div",{className:"misty-card p-6",children:(0,mi.jsxs)("div",{className:"flex items-center justify-between",children:[(0,mi.jsx)("div",{className:"flex-1",children:(0,mi.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,mi.jsxs)("div",{children:[(0,mi.jsx)("h3",{className:"text-lg font-semibold text-white",children:e.order_number}),(0,mi.jsx)("p",{className:"text-sm text-gray-400",children:(t=e.process_stage,{paper_slitting:"Paper Slitting",winding:"Core Winder",finishing:"Cutting/Indexing",delivery:"Packing/Delivery"}[t]||t)})]}),(0,mi.jsxs)("div",{className:"text-center",children:[(0,mi.jsx)("div",{className:"text-lg font-medium text-white",children:e.machine_used}),(0,mi.jsx)("div",{className:"text-xs text-gray-400",children:"machine"})]}),(0,mi.jsxs)("div",{className:"text-center",children:[(0,mi.jsx)("div",{className:"text-lg font-medium text-white",children:e.operator}),(0,mi.jsx)("div",{className:"text-xs text-gray-400",children:"operator"})]}),(0,mi.jsxs)("div",{className:"text-center",children:[(0,mi.jsxs)("div",{className:"text-lg font-medium text-yellow-400",children:[Math.round(e.total_time/60),"h ",e.total_time%60,"m"]}),(0,mi.jsxs)("div",{className:"text-xs text-gray-400",children:["Setup: ",e.setup_time,"m | Run: ",e.run_time,"m"]})]}),(0,mi.jsxs)("div",{className:"text-center",children:[(0,mi.jsx)("div",{className:"text-sm font-medium text-white",children:new Date(e.generated_date).toLocaleDateString()}),(0,mi.jsx)("div",{className:"text-xs text-gray-400",children:new Date(e.generated_date).toLocaleTimeString()})]})]})}),(0,mi.jsx)("div",{className:"flex items-center space-x-2",children:(0,mi.jsx)("button",{onClick:()=>((e,t,a)=>{b({jobId:e,stage:t,orderId:a}),g(!0)})(e.job_id,e.process_stage,e.order_id),className:"text-gray-400 hover:text-purple-400 transition-colors p-2",title:"View Job Card",children:(0,mi.jsx)(bo,{className:"h-5 w-5"})})})]})},e.id);var t}):(0,mi.jsxs)("div",{className:"text-center py-12",children:[(0,mi.jsx)(ki,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,mi.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-300",children:"No job cards found"}),(0,mi.jsx)("p",{className:"mt-1 text-sm text-gray-400",children:"Historic job cards will appear here as jobs are processed."})]})})]}),f&&(0,mi.jsx)(ec,{jobId:y.jobId,stage:y.stage,orderId:y.orderId,onClose:()=>{g(!1),b({jobId:null,stage:null,orderId:null})}})]})};function Qf(){const[e,t]=(0,n.useState)(!1),[a,s]=(0,n.useState)(null),[r,i]=(0,n.useState)(!1),[l,o]=(0,n.useState)(!1);(0,n.useEffect)(()=>{const e=window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone||document.referrer.includes("android-app://");o(e);const a=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;i(a);const n=e=>{e.preventDefault(),s(e);const a=localStorage.getItem("pwa-prompt-dismissed");if(a){if((Date.now()-parseInt(a))/864e5<7)return}setTimeout(()=>t(!0),3e4)};if(window.addEventListener("beforeinstallprompt",n),a&&!e){localStorage.getItem("pwa-prompt-dismissed-ios")||setTimeout(()=>t(!0),3e4)}return()=>{window.removeEventListener("beforeinstallprompt",n)}},[]);const c=()=>{t(!1),r?localStorage.setItem("pwa-prompt-dismissed-ios",Date.now().toString()):localStorage.setItem("pwa-prompt-dismissed",Date.now().toString())};return l||!e?null:(0,mi.jsx)("div",{className:"fixed bottom-4 left-4 right-4 md:left-auto md:right-4 md:max-w-md z-50 animate-slide-up",children:(0,mi.jsxs)("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 rounded-lg shadow-2xl p-4 text-white",children:[(0,mi.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,mi.jsxs)("div",{className:"flex-1",children:[(0,mi.jsx)("h3",{className:"font-bold text-lg mb-1",children:"Install Misty Manufacturing"}),(0,mi.jsx)("p",{className:"text-sm text-blue-100",children:r?"Add to your home screen for quick access and offline use.":"Install this app on your device for a better experience!"})]}),(0,mi.jsx)("button",{onClick:c,className:"ml-2 p-1 hover:bg-white/10 rounded-full transition-colors",children:(0,mi.jsx)(nl,{className:"h-5 w-5"})})]}),r?(0,mi.jsxs)("div",{className:"mt-3 space-y-2 text-sm bg-white/10 rounded p-3",children:[(0,mi.jsx)("p",{className:"font-semibold",children:"Installation steps:"}),(0,mi.jsxs)("ol",{className:"list-decimal list-inside space-y-1 text-blue-50",children:[(0,mi.jsxs)("li",{children:["Tap the Share button ",(0,mi.jsx)("span",{className:"inline-block px-2 py-0.5 bg-white/20 rounded",children:"\u2386"})]}),(0,mi.jsx)("li",{children:'Scroll down and tap "Add to Home Screen"'}),(0,mi.jsx)("li",{children:'Tap "Add" in the top-right corner'})]})]}):(0,mi.jsxs)("div",{className:"mt-3 flex gap-2",children:[(0,mi.jsx)("button",{onClick:async()=>{if(a){a.prompt();const{outcome:e}=await a.userChoice;console.log("User response to install prompt: ".concat(e)),s(null)}t(!1)},className:"flex-1 bg-white text-blue-600 hover:bg-blue-50 font-semibold py-2 px-4 rounded-lg transition-colors",children:"Install App"}),(0,mi.jsx)("button",{onClick:c,className:"px-4 py-2 hover:bg-white/10 rounded-lg transition-colors",children:"Not now"})]})]})})}function Yf(){const{user:e,loading:t}=hi();return t?(0,mi.jsx)("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:(0,mi.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-yellow-400"})}):e?(0,mi.jsx)("div",{className:"min-h-screen bg-gray-900",children:(0,mi.jsxs)(Ie,{children:[(0,mi.jsx)(Oe,{path:"/",element:(0,mi.jsx)(Nl,{})}),(0,mi.jsx)(Oe,{path:"/clients",element:(0,mi.jsx)(xo,{})}),(0,mi.jsx)(Oe,{path:"/orders",element:(0,mi.jsx)(vo,{})}),(0,mi.jsx)(Oe,{path:"/production",element:(0,mi.jsx)(bx,{})}),(0,mi.jsx)(Oe,{path:"/invoicing",element:(0,mi.jsx)(If,{})}),(0,mi.jsx)(Oe,{path:"/reports",element:(0,mi.jsx)(Tx,{})}),(0,mi.jsx)(Oe,{path:"/products-materials",element:(0,mi.jsx)(Lx,{})}),(0,mi.jsx)(Oe,{path:"/suppliers",element:(0,mi.jsx)(Rx,{})}),(0,mi.jsx)(Oe,{path:"/product-specifications",element:(0,mi.jsx)(Ix,{})}),(0,mi.jsx)(Oe,{path:"/machinery-rates",element:(0,mi.jsx)(qx,{})}),(0,mi.jsx)(Oe,{path:"/calculators",element:(0,mi.jsx)(Yx,{})}),(0,mi.jsx)(Oe,{path:"/stocktake",element:(0,mi.jsx)(cf,{})}),(0,mi.jsx)(Oe,{path:"/label-designer",element:(0,mi.jsx)(pf,{})}),(0,mi.jsx)(Oe,{path:"/payroll",element:(0,mi.jsx)(Mf,{})}),(0,mi.jsx)(Oe,{path:"/staff-security",element:(0,mi.jsx)(Gf,{})}),(0,mi.jsx)(Oe,{path:"/clients/:clientId/archived-jobs",element:(0,mi.jsx)($f,{})}),(0,mi.jsx)(Oe,{path:"/xero/callback",element:(0,mi.jsx)(Vf,{})}),(0,mi.jsx)(Oe,{path:"/xero-oauth-callback",element:(0,mi.jsx)(Vf,{})}),(0,mi.jsx)(Oe,{path:"*",element:(0,mi.jsx)(Fe,{to:"/",replace:!0})})]})}):(0,mi.jsx)(fi,{})}const Jf=function(){return(0,mi.jsx)(gt,{children:(0,mi.jsx)(xi,{children:(0,mi.jsxs)("div",{className:"App",children:[(0,mi.jsx)(Yf,{}),(0,mi.jsx)(Qf,{}),(0,mi.jsx)(Qt,{position:"top-right",theme:"dark",visibleToasts:5,expand:!0,duration:1e4,toastOptions:{style:{background:"#1f2937",color:"#f9fafb",border:"1px solid #374151"}}})]})})})};r.createRoot(document.getElementById("root")).render((0,mi.jsx)(n.StrictMode,{children:(0,mi.jsx)(Jf,{})})),"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/service-worker.js").then(e=>{console.log("\u2705 Service Worker registered successfully:",e.scope),setInterval(()=>{e.update()},36e5),e.addEventListener("updatefound",()=>{const t=e.installing;t.addEventListener("statechange",()=>{"installed"===t.state&&navigator.serviceWorker.controller&&console.log("\ud83d\udd04 New version available! Please refresh.")})})}).catch(e=>{console.error("\u274c Service Worker registration failed:",e)})})})();
//# sourceMappingURL=main.4575b32a.js.map